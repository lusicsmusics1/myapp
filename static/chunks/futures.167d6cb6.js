(self.webpackChunktrade_next_ui=self.webpackChunktrade_next_ui||[]).push([[834],{B9al:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("xIFI"),l=r.n(a),s=r("jzeX"),u=r("qN/k"),c=r("I78S"),d=r("0pZZ"),p=r("ZkeQ"),f=r("V9Nt"),m=r("ZODY"),v=r("S2LQ"),g=r("PRLU"),y=r("JLYw"),x=l().createElement,h=new p.Z;function b(){var e,t=(0,f.N)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.futures.getApiKeys();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[]),r=t.value,n=void 0===r?{}:r,l=t.loading,p=(0,y.yk)().getI18n,b=(0,g.hd)(),P=(0,y.G3)(),k=null===n||void 0===n||null===(e=n.getApiKeys)||void 0===e?void 0:e[0],T=(0,a.useMemo)((function(){return v.EV[P?v.qX.DELIVERY:v.qX.FUTURES][b?"cn":"en"]}),[P,b]);return l?x(m.Z,{inner:!0,show:!0}):x(s.Z,{m:"auto",mt:15},x(u.Z,{mb:15},x(c.Z,{width:80,fontSize:"1",color:"#848e9c",mr:10},p("tradeHistory-APIKeyLabel",{defaultValue:"API key"})),x(c.Z,{fontSize:"1",color:"#fff"},(null===k||void 0===k?void 0:k.key)||"")),x(u.Z,{mb:15},x(c.Z,{fontSize:"1",width:80,color:"#848e9c",mr:10},p("tradeHistory-APISecretLabel",{defaultValue:"API Secret"})),x(c.Z,{fontSize:"1",color:"#fff"},(null===k||void 0===k?void 0:k.secretKey)||"")),x(u.Z,null,x(c.Z,{fontSize:"1",width:80,color:"#848e9c",mr:10},p("tradeHistory-APIDocsLabel",{defaultValue:"API Docs"})),x(c.Z,{fontSize:"1",color:"#fff"},x(d.Z,{variant:"outline",colorStyle:"third",sz:"s",onClick:function(){return window.location.href=T}},T))))}},Tkiu:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>F});var n=r("gLnL"),i=r("DtyY"),o=r("xIFI"),a=r.n(o),l=r("xDxD"),s=r("ZIGC"),u=r("SVjJ"),c=r("JLYw"),d=r("DC7k"),p=r("c83x"),f=r("Ng/A"),m=r("ASW3"),v=r("qN/k"),g=r("7r9v"),y=r("QLxY"),x=r("eoBf"),h=r("rVVi"),b=r("9PIT"),P=r("5+SQ"),k=r("iOSY"),T=r("iX0o"),Z=r("flUW");const S={Tabs:{tabsSx:{pl:"12px",maxWidth:"55%","& .active":{color:"#F0B90B !important",position:"relative",borderColor:"transparent !important","&::after":{background:"#F0B90B",content:"''",width:"16px",height:"2px",position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)"}}}},Dropdown:{body:{position:"absolute",top:"14px",right:"12px"},overlayBox:{maxHeight:"323px",boxShadow:"0px 0px 8px rgba(11, 14, 17, 0.15)",borderRadius:"2px",overflowX:"hidden",overflowY:"auto"},overlayItem:{minWidth:"80px",height:"32px",fontSize:"12px",lineHeight:"16px",alignItems:"center",textIndent:"8px",bg:"calculator.dialogBg",color:"calculator.dropBoxItemColor"}},symbol:{minWidth:"87px",height:"30px",bg:"calculator.dropBoxBg",borderRadius:"2px",fontSize:"13px",lineHeight:"17px",color:"calculator.dropBoxTitleColorMobile",textIndent:"8px",alignItems:"center"}};var C=a().createElement;function I(e){var t=e.title,r=e.active;return C(f.Z,{sx:{mr:"16px",padding:"20px 1px 14px",fontSize:"sm",color:"calculator.panelColor"},className:r?"active":""},t)}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.transformSymbolNameFn,r=e.onChangeSymbol,n=e.overlayItemStyle,a=void 0===n?{}:n,s=e.tabSx,u=void 0===s?{}:s,w=e.productMap,M=void 0===w?{}:w,A=(0,Z.Z)(),L=A.getI18n,O=(0,o.useState)(!1),E=O[0],F=O[1],R=(0,l.z4)(),V=(0,d.Z)(R,1),D=V[0],N=(0,p.useDispatch)(),B=(0,c.qO)(),_=B.bridge,z=(0,c.yk)(),H=z.getI18n,q=(0,l._n)();return(0,o.useEffect)((function(){_.setTitle(H("CalculatorMobile-Title",{defaultValue:"Calculator"}))}),[_,H]),(0,o.useEffect)((function(){N.bracket.getBrackets()}),[N.bracket]),(0,o.useEffect)((function(){q&&N.balance.getBalance()}),[q,N.balance]),C(f.Z,null,C(g.Z,{defaultActiveKey:"pnl",variant:"trade-next",tabDefaultNodeSx:(0,i.Z)({padding:"20px 1px 14px 1px",mr:"16px"},u),lazy:!0,tabsSx:S.Tabs.tabsSx},C(y.Z,{tab:function(e){return C(I,{title:L("PNL",{defaultValue:"PNL"}),active:e})},tabKey:"pnl"},C(h.Z,null)),C(y.Z,{tab:function(e){return C(I,{title:L("targetPrice",{defaultValue:"Target Price"}),active:e})},tabKey:"tp"},C(b.Z,null)),C(y.Z,{tab:function(e){return C(I,{title:L("liqPrice",{defaultValue:"Liquidation Price"}),active:e})},tabKey:"lp"},C(P.Z,null)),C(y.Z,{tab:function(e){return C(I,{title:L("maxOpen",{defaultValue:"Max Open"}),active:e})},tabKey:"maxOpen"},C(k.Z,null)),C(y.Z,{tab:function(e){return C(I,{title:L("openPrice",{defaultValue:"Open Price"}),active:e})},tabKey:"OpenPricePanel"},C(T.Z,null))),C(m.ZP,{onVisibleChange:function(e){return F(e)},sx:S.Dropdown.body,trigger:"click",enablePortal:!0,overlay:C(f.Z,{sx:S.Dropdown.overlayBox},Object.values(M).map((function(e){return C(v.Z,{key:e.symbol,onClick:function(){return r(e)},sx:(0,i.Z)((0,i.Z)({},S.Dropdown.overlayItem),a)},t(M[e.symbol]))})))},C(v.Z,{sx:S.symbol},t(M[D]),C(x.Z,{sx:{transform:E?"rotate(180deg)":null,transition:"transform 100ms"}}))))};const M=a().memo(w);var A=a().createElement,L={"min-width":"110px"},O={mr:"10px"},E=function(){var e=(0,l.iB)(),t=(0,c.G3)(),r=(0,c.nN)().genSymbolDisplay,a=(0,c.d0)(),d=(0,o.useMemo)((function(){return(t?Object.values(e).filter((function(e){return e.isDelivery})):Object.values(e).filter((function(e){return!e.isDelivery}))).filter(s.cZ).reduce((function(e,t){return(0,i.Z)((0,i.Z)({},e),(0,n.Z)({},t.symbol,t))}),{})}),[t,e]),p=(0,o.useCallback)((function(e){var t;return e&&(null===(t=r(e))||void 0===t?void 0:t.shortName)||""}),[r]),f=(0,o.useCallback)((function(r){var n=r.symbol,i=(0,c.Ze)(n,e,t),o=t?u.yX.delivery:u.yX.futures;a({stateSymbol:n,isDeliveryColumn:t,resPathList:[o,i,"calculator"]})}),[a,t,e]);return A(M,{productMap:d,transformSymbolNameFn:p,onChangeSymbol:f,overlayItemStyle:L,tabSx:O})};const F=a().memo(E)},Vid1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r("xIFI"),i=r("xDxD");const o={form:{container:{p:"16px 12px 16px 12px",flexDirection:"column",justifyContent:"unset",borderTop:"1px solid",borderColor:"calculator.containerBorderColor"},panel:{width:"100%",mr:0},tip:{pt:"15px"}},switch:{item:{bg:"calculator.resultBg",border:"none",color:"calculator.numberColor","&.active":{fontWeight:500,background:"linear-gradient(270deg, #FBDA3C 0%, #EFB80B 100%)",color:"#212833"}}},result:{container:{width:"100%",mt:"12px",bg:"calculator.resultBgMobile",py:"12px"},title:{fontWeight:"normal !important",mb:"12px"},label:{fontSize:"16px",color:"#848E9C"},value:{fontSize:"15px",color:"calculator.numberColor"},tooltipLabel:{fontSize:"16px",color:"#848E9C",borderBottom:"none !important"},description:{position:"relative",fontSize:"12px",color:"#848E9C",lineHeight:"18px",mt:10}},calculateBtn:{height:50,mt:18,fontWeight:"normal !important",background:"linear-gradient(90deg, #FBDA3C 0%, #EFB80B 100%)"},SymbolSelect:{overlayBoxSx:{width:"94vw"}},DropBpx:{sx:{bg:"calculator.dropBoxBg",borderColor:"calculator.dropBoxBg",fontWeight:"normal"}},custom:{TextField:{props:{color:"calculator.inputColor",fontSize:"15px !important",fontWeight:500,pb:"1px"},boxProps:{width:"100%",mt:12,height:44,borderColor:"calculator.inputBorderColorMobile"},prefix:{color:"#848E9C"},suffix:{color:"#848E9C",fontSize:"15px !important"}}}};function a(){var e=(0,i.Fs)().isMobile;return(0,n.useMemo)((function(){return e?o:void 0}),[e])}},id7u:(e,t,r)=>{"use strict";r.d(t,{Vp:()=>x,me:()=>P});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("Vns9"),l=r("Ng/A"),s=r("qN/k"),u=r("ASW3"),c=r("Vid1"),d=o().createElement;function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.activeKey,r=e.data,o=void 0===r?[]:r,p=e.onSelectChange,f=void 0===p?function(){}:p,m=e.sx,v=e.overlayBoxSx,g=e.itemSx,y=(0,c.Z)(),x=(0,i.useState)(!1),h=x[0],b=x[1],P=(0,i.useMemo)((function(){return d(l.Z,{sx:(0,n.Z)({width:"143px",maxHeight:"250px",bg:"calculator.dropBoxBg",borderRadius:"4px",overflow:"auto",mt:"2px",boxShadow:"0px 0px 8px rgba(11, 14, 17, 0.15)"},v)},o.map((function(e){var t=e.key,r=e.value,i=e.disabled,o=i?{}:{color:"t.yellow200",bg:"calculator.dropBoxActiveBg"};return d(s.Z,{justifyContent:"center",alignItems:"center",sx:(0,n.Z)({height:"35px",color:i?"#5E6673":"calculator.dropBoxItemColor",fontSize:"14px",cursor:i?"not-allowed":"pointer",bg:"calculator.dropBoxItemBg","&:hover":(0,n.Z)({},o)},g),key:t,onClick:function(){i||f(t)}},r)})))}),[o,g,f,v]),k=(0,i.useMemo)((function(){return(0,n.Z)((0,n.Z)({userSelect:"none",width:"100%",border:"1px solid",borderColor:"calculator.inputBorderColor",color:"calculator.dropBoxTitleColor",fontSize:"sm",fontWeight:500,mr:"xs",borderRadius:"2px",cursor:"pointer","&:last-of-type":{mr:0}},null===y||void 0===y?void 0:y.DropBpx.sx),m)}),[y,m]);return(0,i.useMemo)((function(){var e;return d(u.ZP,{trigger:"click",overlay:P,sx:k,enablePortal:!0,onVisibleChange:b},d(s.Z,{justifyContent:"center",alignItems:"center"},d(l.Z,null,null===(e=Object.values(o).find((function(e){return e.key===t})))||void 0===e?void 0:e.value),d(a.Z,{color:"#848E9C",sx:{transform:h?"rotate(180deg)":null,transition:"transform 100ms"}})))}),[t,o,k,P,h])}var f=r("xDxD"),m=r("JLYw"),v=r("cBAj"),g=r("o9cO"),y=o().createElement;function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sx,r=(0,i.useContext)(g._),o=r.marginType,a=void 0===o?v.Yl.CROSS:o,l=r.setMarginType,u=r.positionMode,c=void 0===u?v.Tw.ONEWAY:u,d=r.setPositionMode,x=(0,f.Fs)(),h=x.isMobile,b=(0,m.yk)(),P=b.getI18n;(0,i.useEffect)((function(){a===v.Yl.ISOLATED&&d(v.Tw.ONEWAY)}),[a,c,d]);var k=(0,i.useMemo)((function(){return[{key:v.Yl.CROSS,value:P("header-Cross",{defaultValue:"Cross"})},{key:v.Yl.ISOLATED,value:P("headerIsolated",{defaultValue:"Isolated"})}]}),[P]),T=(0,i.useMemo)((function(){return[{key:v.Tw.ONEWAY,value:P("OneWayPosition",{defaultValue:"One-way Mode"})},{key:v.Tw.HEDGE,value:P("TwoWayPosition",{defaultValue:"Hedge Mode"}),disabled:a===v.Yl.ISOLATED}]}),[P,a]),Z=(0,i.useMemo)((function(){return{width:h?"45.5vw":"143px"}}),[h]),S=(0,i.useMemo)((function(){return(0,n.Z)({mb:"ls"},t)}),[t]),C=(0,i.useCallback)((function(e){return l(e)}),[l]),I=(0,i.useCallback)((function(e){return d(e)}),[d]);return y(s.Z,{sx:S},y(p,{data:k,activeKey:a,onSelectChange:C,overlayBoxSx:Z}),y(p,{data:T,activeKey:c,onSelectChange:I,overlayBoxSx:Z}))}var h=r("UraT"),b=o().createElement;function P(){var e=(0,i.useContext)(g._),t=e.symbol,r=e.setSymbol,o=(0,f.iB)(),a=(0,c.Z)(),l=(0,m.G3)(),u=(0,m.yk)().getI18n,d=(0,i.useMemo)((function(){return Object.values(o).map((function(e){var t=e.symbol;return{key:t,value:l?(0,h.lE)(t,u):t}}))}),[u,l,o]);return b(s.Z,{sx:{mb:"ls"}},b(p,{data:d,activeKey:t,onSelectChange:function(e){return r(e)},overlayBoxSx:(0,n.Z)({width:"295px",maxHeight:"285px"},null===a||void 0===a?void 0:a.SymbolSelect.overlayBoxSx)}))}},o9cO:(e,t,r)=>{"use strict";r.d(t,{_:()=>i});var n=r("xIFI"),i=(0,n.createContext)({currentLeverageBracket:{}})},JzGG:(e,t,r)=>{"use strict";r.d(t,{XU:()=>y,p5:()=>B,Yb:()=>N,QY:()=>V,Gc:()=>f,zt:()=>A,u9:()=>S});var n=r("xIFI"),i=r.n(n),o=r("qN/k"),a=r("Ng/A"),l=r("xDxD"),s=r("5DDm"),u=r("Vid1"),c=r("o9cO"),d=r("cBAj"),p=i().createElement,f=function(){var e=(0,s.Z)().getI18n,t=(0,l.gm)(),r=(0,u.Z)(),i=(0,n.useContext)(c._),f=i.positionDirection,m=i.setPositionDirection,v=i.marginType,g=i.positionMode,y=(0,n.useCallback)((function(){return m(d.DD.LONG)}),[m]),x=(0,n.useCallback)((function(){return m(d.DD.SHORT)}),[m]);return(0,n.useMemo)((function(){return v===d.Yl.ISOLATED&&g===d.Tw.HEDGE?null:p(o.Z,{tx:"calculator.switch",variant:"container"},p(a.Z,{tx:"calculator.switch",variant:"item",sx:null===r||void 0===r?void 0:r.switch.item,className:"".concat(f===d.DD.LONG?"long":""," ").concat(t),onClick:y,"data-testid":"LongButton"},e("Long",{defaultValue:"Long"})),p(a.Z,{tx:"calculator.switch",variant:"item",sx:null===r||void 0===r?void 0:r.switch.item,onClick:x,className:"".concat(f===d.DD.SHORT?"short":""," ").concat(t),"data-testid":"ShortButton"},e("Short",{defaultValue:"Short"})))}),[t,e,v,r,y,x,f,g])},m=r("DtyY"),v=r("0pZZ"),g=i().createElement,y=function(e){var t=e.onClick,r=(0,n.useContext)(c._).isCalculateBtnValid,i=(0,s.Z)().getI18n,o=(0,u.Z)(),a=(0,n.useMemo)((function(){return{"&:disabled":{bg:"button.disabledColor",color:"button.disabledBg"}}}),[]);return(0,n.useMemo)((function(){return g(v.Z,Object.assign({variant:"default",width:1,sz:"l",disabled:!r,onClick:t,sx:a},(0,m.Z)({mt:4},null===o||void 0===o?void 0:o.calculateBtn),{"data-testid":"Calculate"}),i("Calculate",{defaultValue:"Calculate"}))}),[a,i,r,o,t])},x=r("I78S"),h=r("dYqW"),b=r("wHkB"),P=r("sXJV"),k=r("t26l"),T=r("JLYw"),Z=i().createElement,S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.results,r=e.sx,i=e.titleSx,o=e.itemSx,l=(0,s.Z)(),c=l.getI18n,d=(0,u.Z)();return(0,n.useMemo)((function(){return Z(a.Z,{tx:"calculator.result",variant:"container",sx:(0,m.Z)((0,m.Z)({},r),null===d||void 0===d?void 0:d.result.container)},Z(x.Z,{tx:"calculator.result",variant:"title",sx:(0,m.Z)((0,m.Z)({},i),null===d||void 0===d?void 0:d.result.title)},c("Result",{defaultValue:"Result"})),Z(a.Z,null,Z(C,{items:t,sx:o})))}),[c,o,d,t,r,i])};function C(e){var t=e.items,r=e.sx,a=(0,n.useState)(!1),l=a[0],s=a[1],c=(0,u.Z)(),d=(0,T.yk)().getI18n;return Z(i().Fragment,null,Z(h.Z,{tx:"calculator.dialog",variant:"container",visible:Boolean(l),onMaskClick:function(){return s(null)},sx:{borderRadius:"7px"}},Z(o.Z,{flexDirection:"column"},Z(x.Z,{sx:{px:"24px",py:"32px",fontSize:"14px",lineHeight:"22px",color:"calculator.numberColor",boxShadow:"0px 2px 8px rgba(11, 14, 17, 0.3)"}},l),Z(v.Z,{sx:{height:"54px",borderTop:"1px solid",borderColor:"calculator.resultBg",fontSize:"17px",color:"#F0B90B",fontWeight:"normal",bg:"calculator.dialogBg"},onClick:function(){return s(null)}},d("CalculatorMobile-PNLTooltipConfirm",{defaultValue:"Ok, got it"})))),t.map((function(e,t){var n,i,a,l,u=e.value,d=e.label,p=e.asset,f=e.description,m=e.labelTooltip,v=e.testId;return Z(o.Z,Object.assign({tx:"calculator.result",variant:"item",key:t},v?{"data-testid":v}:{},{sx:r}),!m&&Z(x.Z,{tx:"calculator.result",variant:"label",sx:null===c||void 0===c||null===(n=c.result)||void 0===n?void 0:n.label},d),!!m&&Z(k.Z,null,(function(e){var t;return e.isMobile?Z(o.Z,{tx:"calculator.result",variant:"tooltipLabel",alignItems:"center",sx:null===c||void 0===c||null===(t=c.result)||void 0===t?void 0:t.tooltipLabel,onClick:function(){return s(m)}},Z(x.Z,{mr:"8px"},d),Z(P.Z,{size:18})):Z(b.Z,{tip:m},Z(x.Z,{tx:"calculator.result",variant:"tooltipLabel"},d))})),(u||0===u)&&Z(x.Z,{tx:"calculator.result",variant:"label",sx:null===c||void 0===c||null===(i=c.result)||void 0===i?void 0:i.label},Z(x.Z,{tx:"calculator.result",variant:"value",as:"span",sx:null===c||void 0===c||null===(a=c.result)||void 0===a?void 0:a.value},u," "),p),f&&Z(x.Z,{tx:"calculator.result",variant:"description",sx:null===c||void 0===c||null===(l=c.result)||void 0===l?void 0:l.description},"* ",f))})))}var I=r("SVjJ"),w=i().createElement,M=I.Fy.leverageInfo.defaultVal,A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.children,r=(0,l.z4)()[0],i=(0,n.useState)(!1),o=i[0],a=i[1],s=(0,n.useState)(r),u=s[0],p=s[1],f=(0,n.useState)(d.DD.LONG),m=f[0],v=f[1],g=(0,n.useState)(d.Yl.CROSS),y=g[0],x=g[1],h=(0,n.useState)(d.Tw.ONEWAY),b=h[0],P=h[1],k=(0,n.useState)(!1),Z=k[0],S=k[1],C=(0,T.Gf)(),I=(0,T.ho)({symbol:u,brackets:C}),A=I.findLeverageByLevel,L=I.leverageData.maxVal,O=(0,n.useState)(Math.min(L,M)),E=O[0],F=O[1],R=A(E),V=o&&!Z;return(0,n.useEffect)((function(){p(r)}),[r]),(0,n.useEffect)((function(){F(Math.min(L,M))}),[L,F,u]),w(c._.Provider,{value:{symbol:u,setSymbol:p,leverage:E,setLeverage:F,isLeverageGreaterThan:Z,setIsLeverageGreaterThan:S,currentLeverageBracket:R||{},positionDirection:m,setPositionDirection:v,marginType:y,setMarginType:x,positionMode:b,setPositionMode:P,setIsFormValid:a,isCalculateBtnValid:V}},t)},L=r("F0vs"),O=r("elJk"),E=r("UraT");const F={"& .bn-slider-sclale":{mt:"14px",color:"#F0B90B",fontSize:"12px"},"& .bn-slider-stepper":{zIndex:9},"& .bn-slider-progress-stepper":{zIndex:9},"& .bn-slider-container":{mt:"25px"},"& .bn-slider-radio-tooltip":{width:"46px",height:"24px",fontSize:"16px",lineHeight:"19px",color:"#2B2F36",textAlign:"center",mt:"-29px",visibility:"visible",opacity:1,borderRadius:"3px",display:"block"},"& .bn-slider-radio-tooltip::before":{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid #F0B90B",content:"''",fontSize:"0px",position:"absolute",top:"23px",left:"18px"},"& .bn-slider-available-bar":{height:"2px",bg:"calculator.sliderBg"},"& .bn-slider-progress-bar":{height:"3px",transform:"translateY(-1px)"},"& .bn-slider-radio-button":{width:"14px",height:"14px",background:"#f0b90b",zIndex:10},"& .bn-slider-container:hover .bn-slider-radio-button":{boxShadow:"0 0 0 3px rgba(240, 185, 11, 0.15);"}};var R=i().createElement;function V(){var e,t=(0,n.useContext)(c._),r=t.leverage,p=t.setLeverage,f=t.currentLeverageBracket,m=t.isLeverageGreaterThan,v=t.symbol,g=(0,s.X)().leveragePositionUnitField,y=(0,l.Fs)().isMobile,h=(0,u.Z)(),b=(0,T.yk)().getI18n,P=(0,l.iB)(),k=(0,T.Gf)(),Z=(P[v]||d.oF)[g],S=f.bracketSeq,C=f.bracketNotionalCap,I=S===(null===k||void 0===k||null===(e=k[v])||void 0===e?void 0:e.length),w=(0,T.ho)({symbol:v,brackets:k}).leverageData,M=w.minVal,A=w.maxVal,V=(0,n.useMemo)((function(){return function(e,t){var r=[];if(t<10){r=[];for(var n=1;n<=t;n++)r.push(n)}else{r=[e];for(var i=1;i<=5;i++)r.push(Math.floor(i/5*t))}return r}(M,A)}),[A,M]),D=(0,n.useMemo)((function(){return{min:M,max:A}}),[A,M]),N=(0,n.useCallback)((function(e){return p(e)}),[p]),B=(0,n.useMemo)((function(){return F}),[]),_=(0,n.useMemo)((function(){return R(i().Fragment,null,!I&&R(a.Z,{tx:"calculator.form",variant:"tip",className:m?"active":""},b("AvailablePositionsTip",{defaultValue:"Max position at current leverage:"}),R(x.Z,{as:"span"},"\xa0",(0,E.kh)(C),"\xa0"),Z))}),[C,b,I,m,Z]),z=(0,n.useMemo)((function(){var e;return R(i().Fragment,null," ",!I&&R(o.Z,{tx:"calculator.form",variant:"tip",justifyContent:"space-between",sx:null===h||void 0===h||null===(e=h.form)||void 0===e?void 0:e.tip},R(a.Z,{sx:{fontSize:"12px",lineHeight:"16px"}},b("AvailablePositionsTip")),R(a.Z,null,R(x.Z,{as:"span",sx:{color:"calculator.numberColor",fontWeight:500}},"\xa0",(0,E.kh)(C),"\xa0"),R("span",null,Z))))}),[C,b,I,h,Z]);return y?R(a.Z,{mb:"8px"},R(L.Z,{progress:r,range:D,color:"smartSlider.progress",onChange:N,unit:"x",variant:"primary",steppers:V,showScales:!0,sx:B}),z):R(a.Z,{mb:3,pt:"15px"},R(O.Z,{progress:r,range:D,color:"smartSlider.progress",onChange:N,unit:"x",steppers:V,showScales:!0}),_)}var D=i().createElement,N=function(e){var t=e.children,r=e.sx,n=e.overrideSx,i=(0,u.Z)();return D(o.Z,{tx:"calculator.form",variant:"container",sx:(0,m.Z)((0,m.Z)((0,m.Z)({},r),null===i||void 0===i?void 0:i.form.container),n)},t)},B=function(e){var t=e.children,r=(0,u.Z)();return D(a.Z,{tx:"calculator.form",variant:"panel",sx:null===r||void 0===r?void 0:r.form.panel},t)}},aySL:(e,t,r)=>{"use strict";r.d(t,{yt:()=>m,Co:()=>v,me:()=>g.me});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("OKEt"),l=r("I78S"),s=r("qN/k"),u=r("Ng/A"),c=r("xDxD"),d=r("Vid1"),p=r("7qSS"),f=o().createElement;function m(e){var t=e.config,r=t.value,m=t.max,v=t.precision,g=t.onChange,y=t.placeholder,x=t.asset,h=t.errorText,b=void 0===h?"":h,P=t.negative,k=void 0!==P&&P,T=t.testId,Z=t.type,S=void 0===Z?"number":Z,C=t.assetLabel,I=void 0===C?null:C,w=t.onAssetLabelClick,M=t.boxProps,A=t.mobileBoxProps,L="rtl"===(0,c.gm)(),O=(0,c.Fs)().isMobile,E=(0,d.Z)(),F=null===E||void 0===E?void 0:E.custom.TextField,R=(0,i.useCallback)((function(){return w()}),[w]),V=(0,i.useCallback)((function(e){(k||+e>=0)&&+e<=+m&&g(e)}),[m,k,g]),D=(0,i.useCallback)((function(e){return(0,p._p)(e,{fn:V,filed:null,places:v,negative:k})}),[V,k,v]),N=(0,i.useCallback)((function(e){return(0,p.Y5)(e)}),[]),B=(0,i.useMemo)((function(){return y&&f(l.Z,{fontSize:14,sx:null===F||void 0===F?void 0:F.prefix},y)}),[F,y]),_=(0,i.useMemo)((function(){return x&&f(s.Z,{justifyContent:"center",alignItems:"center"},I&&f(u.Z,{sx:{fontSize:"12px",color:"t.yellow200",mr:"4px",cursor:"pointer",padding:"3px 4px",borderRadius:"4px","&:hover":{bg:"calculator.inputAssetLabelBg"}},onClick:R},I),f(l.Z,{fontSize:1,sx:null===F||void 0===F?void 0:F.suffix},x))}),[x,I,F,R]),z=(0,i.useMemo)((function(){return{sx:O?(0,n.Z)((0,n.Z)({},null===F||void 0===F?void 0:F.boxProps),A):(0,n.Z)({width:"100%",mt:2,borderColor:"calculator.inputBorderColor"},M)}}),[M,O,A,F]),H=(0,i.useMemo)((function(){return(0,n.Z)((0,n.Z)({style:L?{textAlign:"right"}:{}},null===F||void 0===F?void 0:F.props),T?{"data-test-id":T}:{})}),[L,F,T]);return(0,i.useMemo)((function(){return f(o().Fragment,null,f(a.Z,Object.assign({type:S,variant:"inline",value:r,onChange:D,onBlur:N,prefix:B,suffix:_,boxProps:z,placeholder:O?(0,p.uf)(0,v):null},H)),!!b&&f(u.Z,{sx:{fontSize:"12px",color:"t.sell"}},b))}),[b,z,B,H,_,O,N,D,v,S,r])}function v(e){var t=e.inputs,r=e.boxProps;return f(o().Fragment,null,t.map((function(e,t){return f(m,{key:t,config:e,boxProps:r})})))}var g=r("id7u")},cBAj:(e,t,r)=>{"use strict";r.d(t,{oF:()=>n,DD:()=>i,uf:()=>o,Yl:()=>a,Tw:()=>l,nU:()=>s});var n={baseAsset:"BTC",quoteAsset:"USDT",pricePrecision:2,quantityPrecision:2,tickSizePrecision:2},i={LONG:"LONG",SHORT:"SHORT"},o="-",a={ISOLATED:"ISOLATED",CROSS:"CROSS"},l={ONEWAY:"ONEWAY",HEDGE:"HEDGE"},s=1e10},"5DDm":(e,t,r)=>{"use strict";r.d(t,{X:()=>L,Z:()=>i.Z});var n={};r.r(n),r.d(n,{PNL:()=>v,PNLFormat:()=>I,ROE:()=>g,ROEFormat:()=>w,formPositionSize:()=>T,initialMargin:()=>m,initialMarginFormat:()=>C,isLiqPriceInValid:()=>Z,isLiqPriceInValidHEDGE:()=>S,liquidationPrice:()=>x,maxOpenCoin:()=>b,maxOpenQuantity:()=>h,openPriceCoin:()=>P,openPriceUSDT:()=>k,targetPrice:()=>y});var i=r("flUW"),o=r("DtyY"),a=r("xIFI"),l=r("U4Ym"),s=r("xDxD"),u=r("wiC8"),c=r("HI97"),d=r("UraT"),p=r("cBAj"),f=r("OyCR"),m=function(e){return e.entryPrice*e.quantity*(1/e.leverage)},v=function(e){var t=e.positionDirection,r=e.exitPrice,n=e.entryPrice,i=e.quantity;return(t===p.DD.LONG?r-n:n-r)*i},g=function(e){var t=e.PNL,r=e.entryPrice,n=e.quantity,i=e.leverage;return t/m({entryPrice:r,quantity:n,leverage:i})*100},y=function(e){var t=e.ROE,r=e.leverage,n=e.positionDirection,i=t/100/r;return e.entryPrice*(i=n===p.DD.LONG?i+1:1-i)},x=function(e){var t=e.brackets,r=e.positions,n=e.symbol,i=e.marginType,o=e.positionMode,a=e.walletBalance,l=e.longPosition,s=e.shortPosition,u=e.curPosition,c=(null===t||void 0===t?void 0:t[n])||[],d=0;if(i===p.Yl.CROSS){var m=r.filter((function(e){return!(null===e||void 0===e?void 0:e.isolated)})).filter((function(e){return(null===e||void 0===e?void 0:e.symbol)!==n}));d=(0,f.zW)(m,t)-(0,f.ot)(m)}return o===p.Tw.ONEWAY?(0,f.W8)(c,a,d,u):(0,f.wr)(c,a,d,l,s,u)},h=function(e){var t=e.walletBalance,r=e.leverage,n=e.entryPrice,i=e.bracketNotionalCap;return Math.floor(Math.min(t*r/n,i/n))},b=function(e){var t=e.walletBalance,r=e.leverage,n=e.bracketNotionalCap;return(0,u.GW)(Math.min(t*r,n))},P=function(e){var t=e.positions;return t.reduce((function(e,t){var r=t.entryPrice;return e+t.quantity*r}),0)/t.reduce((function(e,t){return e+t.quantity}),0)},k=function(e){var t=e.positions;return t.reduce((function(e,t){return e+t.quantity}),0)/t.reduce((function(e,t){var r=t.entryPrice;return e+t.quantity/r}),0)},T=function(e){return e.quantity*e.entryPrice},Z=function(e){var t=e.walletBalance,r=e.entryPrice,n=e.quantity,i=e.leverage;return t<Math.abs(r)*Math.abs(n)/i},S=function(e){var t=e.walletBalance,r=e.leverage,n=e.longPosition,i=e.shortPosition;return t<Math.abs(n.entryPrice)*Math.abs(n.quantity)/r+Math.abs(i.entryPrice)*Math.abs(i.quantity)/r},C=function(e){return(0,d.uf)(e)},I=function(e){return(0,d.uf)(e)},w=function(e){return(0,d.uf)(e)},M=r("JLYw"),A=r("4gr6");function L(){var e=(0,M.G3)(),t=(0,M.yk)().getI18n,r=(0,M.QV)(),i=(0,A.QV)(),d=((0,s.j2)()||p.oF).tickSize,f=(0,l.p)(d);return(0,a.useMemo)((function(){return e?function(e){var t=e.isCoinUnit,r=e.getFuturesI18n;return{helper:(0,o.Z)((0,o.Z)({},c),{},{openPrice:t?c.openPriceCoin:c.openPriceCont}),walletBalancePrecision:4,leveragePositionUnitField:"baseAsset",getUnitChangeQty:function(e){var r=e.quantity,n=e.entryPrice,i=e.contractVal;return t?Math.floor(r*n/i):r},getCoinUnitUnit:function(){return r("Cont",{defaultValue:"Cont"})},getQuantityUnit:function(e){var n=e.product;return t?n.baseAsset:r("Cont",{defaultValue:"Cont"})},getQuantityPrecision:function(e){var r=e.product;return t?r.equalQtyPrecision:r.quantityPrecision},getNotionalValue:function(e){var r=e.quantity,n=e.entryPrice,i=e.contractVal;return t?r:r*i/n}}}({getFuturesI18n:t,isCoinUnit:i.isCoinUnit}):function(e){var t=e.isCoinUnit,r=e.tickSizePrecision;return{helper:(0,o.Z)((0,o.Z)({},n),{},{openPrice:t?P:k}),walletBalancePrecision:2,leveragePositionUnitField:"quoteAsset",getUnitChangeQty:function(e){var n=e.quantity,i=e.entryPrice;return t?n:(0,u.mD)(n/i,r)},getCoinUnitUnit:function(e){return e.product.baseAsset},getQuantityUnit:function(e){var r=e.product;return t?r.baseAsset:r.marginAsset},getQuantityPrecision:function(e){var n=e.product;return t?n.quantityPrecision:r},getNotionalValue:function(e){var r=e.quantity,n=e.entryPrice;return t?r*n:r}}}({isCoinUnit:r.isCoinUnit,tickSizePrecision:f})}),[e,t,i.isCoinUnit,r.isCoinUnit,f])}},flUW:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r("xDxD"),i=function(e){return(0,n.ZK)("trd-calculator",e)}},"5+SQ":(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("c83x"),l=r("xDxD"),s=r("Xt0a"),u=r("JLYw"),c=r("wiC8"),d=r("7qSS"),p=r("flUW"),f=r("cBAj"),m=r("JzGG"),v=r("o9cO"),g=r("id7u"),y=r("gLnL"),x=r("DC7k"),h=r("qN/k"),b=r("Ng/A"),P=r("5DDm"),k=r("aySL"),T=o().createElement,Z=(0,i.forwardRef)((function(e,t){var r=(0,i.useContext)(v._),n=r.marginType,o=r.positionMode;return n===f.Yl.CROSS&&o===f.Tw.HEDGE?T(I,Object.assign({ref:t},e)):T(S,Object.assign({ref:t},e))})),S=(0,i.forwardRef)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.walletBalance,r=e.walletBalanceInput,n=arguments.length>1?arguments[1]:void 0,a=(0,i.useContext)(v._),s=a.symbol,u=a.setIsLeverageGreaterThan,c=a.currentLeverageBracket.bracketNotionalCap,d=a.isFormValid,p=a.setIsFormValid,m=(0,P.X)(),g=m.getQuantityPrecision,y=m.getQuantityUnit,x=m.getUnitChangeQty,h=m.getNotionalValue,b=(0,P.Z)(),Z=b.getI18n,S=(0,l.iB)(),C=S[s]||f.oF,I=C.quoteAsset,w=C.pricePrecision,M=C.contractVal,A=void 0===M?100:M,L=(0,i.useState)(""),O=L[0],E=L[1],F=(0,i.useState)(""),R=F[0],V=F[1],D=(0,i.useCallback)((function(e){var t=e.quantity;return x({quantity:t,entryPrice:O,contractVal:A})}),[A,O,x]);return(0,i.useImperativeHandle)(n,(function(){return{getFormData:function(){return{entryPrice:+O,quantity:D({quantity:R})}}}})),(0,i.useEffect)((function(){u(h({quantity:R,entryPrice:O,contractVal:A})>c)}),[c,A,O,h,R,u]),(0,i.useEffect)((function(){var e=!!(O&&t&&R);d!==e&&p(e)}),[O,t,R,p,d]),T(o().Fragment,null,T(k.Co,{inputs:[{value:O,max:f.nU,precision:w,onChange:E,placeholder:Z("entryPrice",{defaultValue:"Entry Price"}),asset:I},{value:R,max:f.nU,precision:g({product:C}),onChange:V,placeholder:Z("quantity",{defaultValue:"Quantity"}),asset:y({product:C})}]}),T(k.Co,{inputs:r}))})),C=function(e){var t=e.color,r=e.text;return T(h.Z,{alignItems:"center",sx:{fontSize:"14px",color:t,"&::before":{content:'""',display:"inline-block",width:"4px",height:"12px",mr:"8px",bg:t}}},r)},I=(0,i.forwardRef)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.walletBalance,r=e.walletBalanceInput,n=arguments.length>1?arguments[1]:void 0,a=(0,i.useContext)(v._),s=a.isFormValid,u=a.setIsFormValid,c=a.setIsLeverageGreaterThan,d=a.currentLeverageBracket.bracketNotionalCap,p=(0,P.X)(),m=p.getQuantityPrecision,g=p.getQuantityUnit,h=p.getUnitChangeQty,Z=p.getNotionalValue,S=(0,P.Z)(),I=S.getI18n,w=(0,l.z4)(),M=(0,x.Z)(w,1),A=M[0],L=(0,l.iB)(),O=L[A]||f.oF,E=O.quoteAsset,F=O.pricePrecision,R=O.contractVal,V=void 0===R?100:R,D=(0,i.useState)(""),N=D[0],B=D[1],_=(0,i.useState)(""),z=_[0],H=_[1],q=(0,i.useState)(""),Y=q[0],U=q[1],j=(0,i.useState)(""),W=j[0],K=j[1],J=(0,i.useCallback)((function(e){var t=e.quantity,r=e.entryPrice;return h({quantity:t,entryPrice:r,contractVal:V})}),[V,h]);return(0,i.useImperativeHandle)(n,(function(){return{getFormData:function(){var e;return e={},(0,y.Z)(e,f.DD.LONG,{entryPrice:N,quantity:J({quantity:Y,entryPrice:N,contractVal:V})}),(0,y.Z)(e,f.DD.SHORT,{entryPrice:z,quantity:J({quantity:W,entryPrice:z,contractVal:V})}),e}}})),(0,i.useEffect)((function(){var e=!!(N&&z&&Y&&W&&t);s!==e&&u(e)}),[t,u,N,z,Y,W,s]),(0,i.useEffect)((function(){c(Math.max(Z({quantity:Y,entryPrice:N,contractVal:V}),Z({quantity:W,entryPrice:z,contractVal:V}))>d)}),[d,V,Z,N,Y,c,z,W]),T(o().Fragment,null,T(b.Z,{sx:{mb:"24px"}},T(C,{color:"orderBook.bidColor",text:I("Long",{defaultValue:"Long"})}),T(k.Co,{inputs:[{value:N,max:f.nU,precision:F,onChange:B,placeholder:I("entryPrice",{defaultValue:"Entry Price"}),asset:E},{value:Y,max:f.nU,precision:m({product:O}),onChange:U,placeholder:I("quantity",{defaultValue:"Quantity"}),asset:g({product:O})}]})),T(b.Z,{sx:{mb:"24px"}},T(C,{color:"orderBook.askBarColor",text:I("Short",{defaultValue:"Short"})}),T(k.Co,{inputs:[{value:z,max:f.nU,precision:F,onChange:H,placeholder:I("entryPrice",{defaultValue:"Entry Price"}),asset:E},{value:W,max:f.nU,precision:m({product:O}),onChange:K,placeholder:I("quantity",{defaultValue:"Quantity"}),asset:g({product:O})}]})),T(k.Co,{inputs:r,boxProps:{mt:0}}))})),w=o().createElement,M=function(){var e,t,r,o,y=(0,i.useContext)(v._),x=y.symbol,h=y.marginType,b=y.positionMode,k=y.positionDirection,T=y.leverage,S=(0,P.X)(),C=S.helper,I=S.walletBalancePrecision,M=S.getUnitChangeQty,A=(0,p.Z)().getI18n,L=(0,l._n)(),O=(0,l.iB)(),E=O[x]||f.oF,F=(0,u.KQ)(),R=(0,a.useSelector)(s.makePositions)||{},V=(0,a.useSelector)(s.makeValidPositionArr),D=(0,u.Gf)()||{},N=(0,l.Fs)().isMobile,B=(0,u.yk)().getI18n,_=null===(e=(0,u.CE)()[x])||void 0===e?void 0:e.markPrice,z=b===f.Tw.ONEWAY,H=E.quoteAsset,q=E.marginAsset,Y=E.pricePrecision,U=E.contractVal,j=void 0===U?100:U,W=L?h===f.Yl.CROSS?null===F||void 0===F||null===(t=F[q])||void 0===t?void 0:t.crossWalletBalance:(null===(r=R[x])||void 0===r?void 0:r.isolatedWallet)||(null===F||void 0===F||null===(o=F[q])||void 0===o?void 0:o.crossWalletBalance):"",K=(0,i.useState)(0===Number(W)?"":(0,c.GW)(W,I)),J=K[0],G=K[1],Q=(0,i.useState)(f.uf),X=Q[0],$=Q[1],ee=(0,i.useState)(null),te=ee[0],re=ee[1],ne=((0,i.useCallback)((function(e){var t=e.quantity,r=e.entryPrice;return M({quantity:t,entryPrice:r,contractVal:j})}),[j,M]),(0,i.useCallback)((function(){$(f.uf),re(B("calculator-liqPriceIsVerifyTip",{defaultValue:"Insufficient wallet balance (initial margin) to open a position."}))}),[B])),ie=(0,i.useRef)(),oe=(0,i.useMemo)((function(){return[{value:X,label:A("liqPrice",{defaultValue:"Liquidation Price"}),asset:H,testId:"LiquidationPriceValue"},{description:A("liqPriceTip",{defaultValue:"Liquidation Price Tip"})}]}),[X,H,A]),ae=(0,i.useMemo)((function(){return z?{}:{mb:0}}),[z]),le=(0,i.useCallback)((function(){var e,t=ie.current.getFormData(),r=k===f.DD.LONG?1:-1,i={symbol:x,brackets:D,positions:V,productMap:O,walletBalance:J,marginType:h,positionMode:b};if(re(null),z){var o=t.entryPrice,a=t.quantity;e=C.liquidationPrice((0,n.Z)((0,n.Z)({},i),{},{curPosition:{entryPrice:o,positionSize:a*r,contractVal:j}})),C.isLiqPriceInValid({walletBalance:J,entryPrice:o,quantity:a,leverage:T,contractVal:j})?ne():$(e<0?f.uf:(0,d.uf)(e,Y))}else{var l=t[f.DD.LONG],s=l.entryPrice,u=l.quantity,c=t[f.DD.SHORT],p=c.entryPrice,m=c.quantity,v={entryPrice:s,positionSize:u,contractVal:j,markPrice:_},g={entryPrice:p,positionSize:m,contractVal:j,markPrice:_};e=C.liquidationPrice((0,n.Z)((0,n.Z)({},i),{},{curPosition:{markPrice:_},longPosition:v,shortPosition:g})),C.isLiqPriceInValidHEDGE({walletBalance:J,leverage:T,longPosition:(0,n.Z)({quantity:v.positionSize},v),shortPosition:(0,n.Z)({quantity:g.positionSize},g),contractVal:j})?ne():$(e<0?f.uf:(0,d.uf)(e,Y))}}),[D,j,C,z,T,h,_,k,b,Y,O,ne,x,V,J]);return(0,i.useEffect)((function(){G((0,c.GW)(W,I))}),[W,I,h]),w(m.Yb,null,w(m.p5,null,w(g.Vp,{sx:ae}),z&&w(m.Gc,null),w(m.QY,null),w(Z,{ref:ie,walletBalance:J,walletBalanceInput:[{value:J,max:f.nU,precision:I,onChange:G,placeholder:A("walletBalance",{defaultValue:"Wallet Balance"}),asset:q,testId:"WalletBalanceInput",errorText:te}]}),N&&w(m.u9,{results:oe}),w(m.XU,{onClick:le})),!N&&w(m.u9,{results:oe}))};function A(e){return w(m.zt,null,w(M,e))}},iOSY:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r("xIFI"),i=r.n(n),o=r("xDxD"),a=r("W+B2"),l=r("JzGG"),s=r("o9cO"),u=r("aySL"),c=r("5DDm"),d=r("JLYw"),p=r("cBAj"),f=r("wiC8"),m=r("7qSS"),v=i().createElement;function g(e){return v(l.zt,null,v(y,e))}function y(){var e,t,r,i=(0,n.useContext)(s._),g=i.symbol,y=i.setIsFormValid,x=i.currentLeverageBracket.bracketNotionalCap,h=i.leverage,b=(0,c.X)(),P=b.helper,k=b.walletBalancePrecision,T=b.getCoinUnitUnit,Z=(0,c.Z)().getI18n,S=(0,d.yk)().getI18n,C=(0,o.Fs)().isMobile,I=(0,o._n)(),w=(0,o.iB)()[g]||p.oF,M=w.quoteAsset,A=w.pricePrecision,L=w.marginAsset,O=(0,d.KQ)(),E=(null===(e=(0,a.Pj)().nextTickers)||void 0===e||null===(t=e.find((function(e){return e.symbol===g})))||void 0===t?void 0:t.lastPrice)||0,F=I?(0,f.GW)(null===O||void 0===O||null===(r=O[L])||void 0===r?void 0:r.crossWalletBalance,k):"",R=(0,n.useState)(""),V=R[0],D=R[1],N=(0,n.useState)(0===Number(F)?"":F),B=N[0],_=N[1],z=(0,n.useState)(p.uf),H=z[0],q=z[1],Y=(0,n.useState)(p.uf),U=Y[0],j=Y[1],W=(0,n.useMemo)((function(){return[{value:V,max:p.nU,precision:A,onChange:D,placeholder:Z("entryPrice",{defaultValue:"Entry Price"}),asset:M,assetLabel:S("lastPrice",{defaultValue:"Last Price"}),onAssetLabelClick:function(){var e;D((null===(e=+E)||void 0===e?void 0:e.toFixed(A))||0)}},{value:B,max:p.nU,precision:k,onChange:_,placeholder:Z("walletBalance",{defaultValue:"Wallet Balance"}),asset:L}]}),[V,S,Z,k,E,A,M,B,L]),K=(0,n.useMemo)((function(){return[{value:H,label:"".concat(Z("maxOpen",{defaultValue:"Max Open"})," (").concat(T({product:w}),")")},{value:U,label:"".concat(Z("maxOpen",{defaultValue:"Max Open"})," (").concat(L,")")},{description:Z("maxopentip",{defaultValue:"Max Open Tip"})}]}),[U,Z,T,w,H,L]),J=(0,n.useCallback)((function(){var e=P.maxOpenQuantity({walletBalance:B,leverage:h,entryPrice:V,contractVal:w.contractVal,bracketNotionalCap:x}),t=P.maxOpenCoin({walletBalance:B,leverage:h,bracketNotionalCap:x});j((0,m.qh)(t)?t:p.uf),q((0,m.qh)(e)?e:p.uf)}),[P,B,h,V,w.contractVal,x]);return(0,n.useEffect)((function(){y(!(!V||!B))}),[V,y,B]),(0,n.useEffect)((function(){q(p.uf),j(p.uf),D(""),_(F)}),[F,g]),v(l.Yb,null,v(l.p5,null,!C&&v(u.me,null),v(l.Gc,null),v(l.QY,null),v(u.Co,{inputs:W}),C&&v(l.u9,{results:K}),v(l.XU,{onClick:J})),!C&&v(l.u9,{results:K}))}},iX0o:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r("xIFI"),i=r.n(n),o=r("Ng/A"),a=r("qN/k"),l=r("xDxD"),s=r("JzGG"),u=r("o9cO"),c=r("aySL"),d=r("5DDm"),p=r("cBAj"),f=r("gLnL"),m=r("DtyY"),v=r("7I/4"),g=r("iVws"),y=i().createElement;function x(e){setTimeout((function(){return e&&e()}),0)}var h=function(){return{id:Date.now(),entryPrice:"",quantity:""}},b={height:"24px",borderRadius:"1px",width:"160px",mt:0,bg:"calculator.openPriceInputBg"},P={mt:0,"& input":{textAlign:"left !important",pl:"8px"}},k=(0,n.forwardRef)((function(e,t){var r=(0,n.useContext)(u._),s=r.symbol,k=r.isFormValid,T=r.setIsFormValid,Z=(0,d.X)(),S=Z.getQuantityPrecision,C=Z.getQuantityUnit,I=(0,d.Z)().getI18n,w=(0,l.iB)()[s]||p.oF,M=w.quoteAsset,A=w.pricePrecision,L=(0,l.Fs)().isMobile,O=(0,n.useState)({}),E=O[0],F=O[1],R=function(e){x((function(){delete E[e],F((0,m.Z)({},E))}))},V=(0,n.useCallback)((function(){x((function(){var e=h();E[e.id]=e,F((0,m.Z)({},E))}))}),[E]),D=(0,n.useCallback)((function(e,t,r){x((function(){E[e][t]=r,F((0,m.Z)({},E))}))}),[E]);return(0,n.useEffect)((function(){V()}),[]),(0,n.useEffect)((function(){var e=Object.values(E),t=!!e.length&&!e.some((function(e){var t=e.entryPrice,r=e.quantity;return!t||!r}));t!==k&&T(t)}),[k,E,T]),(0,n.useImperativeHandle)(t,(function(){return{getPositions:function(){return E},resetPositions:function(){var e=h();F((0,f.Z)({},e.id,e))}}})),y(i().Fragment,null,y(a.Z,{sx:{alignItems:"center",justifyContent:"space-between",fontSize:"12px",color:"t.grey300",mt:L?"24px":"40px",mb:"12px"}},!L&&y(o.Z,null,I("open",{defaultValue:"Open"})),y(a.Z,null,y(o.Z,{sx:{mr:L?"-16px":"42px",width:"180px"}},I("entryPrice",{defaultValue:"Entry Price"})," (",M,")"),y(o.Z,{sx:{width:"180px"}},I("quantity",{defaultValue:"Quantity"})," (",C({product:w}),")")),!L&&y(o.Z,null,I("action",{defaultValue:"Action"}))),Object.values(E).map((function(e,t){var r=e.id,n=e.entryPrice,i=e.quantity;return y(a.Z,{alignItems:"center",justifyContent:"space-between",key:r,sx:L?{mb:"12px"}:{borderBottom:"1px solid",borderColor:"t.grey700",height:"40px"}},!L&&y(o.Z,{fontSize:0,sx:{color:"t.grey300"}},t+1),y(a.Z,{justifyContent:"center",alignItems:"center"},y(c.yt,{config:{value:n,max:p.nU,precision:A,onChange:function(e){return D(r,"entryPrice",e)},asset:L?M:null,boxProps:(0,m.Z)({mr:"65px"},b),mobileBoxProps:P}}),L&&y(o.Z,{sx:{minWidth:"8px"}}),y(c.yt,{config:{value:i,max:p.nU,precision:S({product:w}),onChange:function(e){return D(r,"quantity",e)},asset:L?C({product:w}):null,boxProps:b,mobileBoxProps:P}})),L?y(v.Z,{color:"#848E9C",ml:3,onClick:function(){return R(r)}}):y(o.Z,{fontSize:0,sx:{color:"t.yellow200",cursor:"pointer"},onClick:function(){return R(r)}},I("delete",{defaultValue:"Delete"})))})),y(a.Z,{sx:(0,m.Z)({width:"150px",margin:"0 auto",mt:"17px",color:"t.yellow200",cursor:"pointer",alignItems:"center",justifyContent:"center",fontSize:"14px"},L&&{mb:"6px",ml:0,justifyContent:"left"}),onClick:V},y(g.Z,{size:14,color:"t.yellow200"})," \xa0",I("addPosition",{defaultValue:"Add Position"})))})),T=r("7qSS"),Z=i().createElement;function S(){var e=(0,n.useContext)(u._).symbol,t=(0,d.X)().helper,r=(0,l.Fs)().isMobile,i=(0,d.Z)().getI18n,o=(0,l.iB)()[e]||p.oF,a=o.quoteAsset,s=o.pricePrecision,c=(0,n.useState)(p.uf),f=c[0],m=c[1],v=(0,n.useRef)(),g=(0,n.useMemo)((function(){return[{value:f,label:"".concat(i("avgPrice",{defaultValue:"Avg Price"})," (").concat(a,")")}]}),[f,i,a]),y=(0,n.useCallback)((function(){var e=t.openPrice({positions:Object.values(v.current.getPositions()).map((function(e){return{entryPrice:+e.entryPrice,quantity:+e.quantity}}))});m((0,T.qh)(e)?e.toFixed(s):p.uf)}),[t,s]);return(0,n.useEffect)((function(){m(p.uf),v.current.resetPositions()}),[e]),Z(r?I:C,{results:g,positionsRef:v,onCalculator:y})}function C(e){var t=e.results,r=e.positionsRef,n=e.onCalculator;return Z(s.Yb,{sx:{flexDirection:"column"},overrideSx:{pt:0,pr:0}},Z(o.Z,{sx:{maxHeight:"324px",overflow:"auto"}},Z(o.Z,{sx:{pr:"32px"}},Z(a.Z,{sx:{pt:"24px"}},Z(s.p5,null,Z(c.me,null),Z(s.Gc,null)),Z(s.u9,{results:t,sx:{py:"12px"},titleSx:{mb:"8px"},itemSx:{mb:0}})),Z(k,{ref:r}))),Z(o.Z,{sx:{pr:"32px"}},Z(s.XU,{onClick:n})))}function I(e){var t=e.results,r=e.positionsRef,n=e.onCalculator;return Z(s.Yb,{sx:{flexDirection:"column"}},Z(a.Z,null,Z(s.p5,null,Z(s.Gc,null))),Z(k,{ref:r}),Z(s.u9,{results:t}),Z(s.XU,{onClick:n}))}function w(e){return Z(s.zt,null,Z(S,e))}},rVVi:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r("xIFI"),i=r.n(n),o=r("xDxD"),a=r("flUW"),l=r("cBAj"),s=r("JzGG"),u=r("o9cO"),c=r("aySL"),d=r("7qSS"),p=r("5DDm"),f=i().createElement,m=function(){var e=(0,n.useContext)(u._),t=e.symbol,r=e.setIsLeverageGreaterThan,i=e.currentLeverageBracket.bracketNotionalCap,m=e.setIsFormValid,v=e.positionDirection,g=e.leverage,y=(0,p.X)(),x=y.getUnitChangeQty,h=y.getQuantityPrecision,b=y.getQuantityUnit,P=y.getNotionalValue,k=y.helper,T=(0,o.iB)()[t]||l.oF,Z=T.quoteAsset,S=T.marginAsset,C=T.pricePrecision,I=T.contractVal,w=void 0===I?100:I,M=(0,a.Z)().getI18n,A=(0,o.Fs)().isMobile,L=(0,n.useState)(""),O=L[0],E=L[1],F=(0,n.useState)(""),R=F[0],V=F[1],D=(0,n.useState)(""),N=D[0],B=D[1],_=(0,n.useState)(l.uf),z=_[0],H=_[1],q=(0,n.useState)(l.uf),Y=q[0],U=q[1],j=(0,n.useState)(l.uf),W=j[0],K=j[1],J=(0,n.useCallback)((function(e){return x({quantity:e,entryPrice:O,contractVal:w})}),[x,O,w]),G=(0,n.useMemo)((function(){return[{value:O,max:l.nU,precision:C,onChange:E,placeholder:M("entryPrice",{defaultValue:"Entry Price"}),asset:Z,testId:"EntryPrice"},{value:R,max:l.nU,precision:C,onChange:V,placeholder:M("exitPrice",{defaultValue:"Exit Price"}),asset:Z,testId:"ExitPrice"},{value:N,max:l.nU,precision:h({product:T}),onChange:B,placeholder:M("quantity",{defaultValue:"Quantity"}),asset:b({product:T}),testId:"Quantity"}]}),[O,R,M,b,C,T,N,h,Z]),Q=(0,n.useMemo)((function(){return[{value:z,label:M("initialMargin",{defaultValue:"Initial Margin"}),labelTooltip:M("liqPriceTipText",{defaultValue:"Initial margin may not equal to actual margin required to place an order. Actual margin required = initial margin + open loss, where open loss reflects the additional cost due to the difference between order price and mark price."}),asset:S,testId:"InitialMaginValue"},{key:"PNL",value:Y,label:M("PNL",{defaultValue:"PNL"}),asset:S,testId:"PNLValue"},{value:W,label:M("ROE",{defaultValue:"ROE"}),asset:"%",testId:"ROEValue"}]}),[z,M,S,Y,W]),X=(0,n.useCallback)((function(){var e=J(N),t=k.initialMargin({entryPrice:O,quantity:e,leverage:g,contractVal:w}),r=k.PNL({positionDirection:v,quantity:e,entryPrice:O,exitPrice:R,contractVal:w}),n=k.ROE({PNL:r,quantity:e,leverage:g,entryPrice:O,contractVal:w});H(k.initialMarginFormat(t)),U((0,d.qh)(r)?k.PNLFormat(r):l.uf),K((0,d.qh)(n)?k.ROEFormat(n):l.uf)}),[J,N,k,O,g,w,v,R]);return(0,n.useEffect)((function(){m(!!(O&&R&&N))}),[O,R,N,m]),(0,n.useEffect)((function(){r(P({quantity:N,entryPrice:O,contractVal:w})>i)}),[i,w,O,P,N,r]),(0,n.useEffect)((function(){A&&(m(!1),E(""),V(""),B(""),H(l.uf),U(l.uf),K(l.uf))}),[A,m,t]),f(s.Yb,null,f(s.p5,null,f(s.Gc,null),f(s.QY,null),f(c.Co,{inputs:G}),A&&f(s.u9,{results:Q}),f(s.XU,{onClick:X})),!A&&f(s.u9,{results:Q}))};function v(e){return f(s.zt,null,f(m,e))}},"9PIT":(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r("xIFI"),i=r.n(n),o=r("xDxD"),a=r("JLYw"),l=r("flUW"),s=r("cBAj"),u=r("7qSS"),c=r("JzGG"),d=r("o9cO"),p=r("aySL"),f=r("5DDm"),m=i().createElement,v=function(){var e=(0,n.useContext)(d._),t=e.symbol,r=e.setIsFormValid,i=e.positionDirection,v=e.leverage,g=(0,f.X)().helper,y=(0,o.iB)()[t]||s.oF,x=y.quoteAsset,h=y.pricePrecision,b=(0,n.useState)(""),P=b[0],k=b[1],T=(0,n.useState)(""),Z=T[0],S=T[1],C=(0,n.useState)(s.uf),I=C[0],w=C[1],M=(0,l.Z)().getI18n,A=(0,o.Fs)().isMobile,L=(0,a.yk)().getI18n,O=(0,n.useMemo)((function(){return[{value:P,max:s.nU,precision:h,onChange:k,placeholder:M("entryPrice",{defaultValue:"Entry Price"}),asset:x,testId:"EntryPrice"},{value:Z,max:"1999",precision:2,onChange:S,placeholder:M("ROE",{defaultValue:"ROE"}),asset:"%",errorText:I<0&&L("calculator-reachROETip",{defaultValue:"can't reach the ROE"}),negative:!0,testId:"ROEInput"}]}),[P,h,M,x,Z,I,L]),E=(0,n.useMemo)((function(){return[{value:I<0?s.uf:I,label:M("targetPrice",{defaultValue:"Target Price"}),asset:x,testId:"TargetPriceValue"}]}),[I,x,M]),F=(0,n.useCallback)((function(){var e=g.targetPrice({ROE:Z,leverage:v,positionDirection:i,entryPrice:P});w((0,u.KO)(e)?(0,u.uf)(e,h):-1/0)}),[g,Z,v,i,P,h]);return(0,n.useEffect)((function(){r(!(!P||!Z))}),[P,Z,r]),(0,n.useEffect)((function(){A&&(r(!1),k(""),S(""),w(s.uf))}),[A,r,t]),m(c.Yb,null,m(c.p5,null,m(c.Gc,null),m(c.QY,null),m(p.Co,{inputs:O}),A&&m(c.u9,{results:E}),m(c.XU,{onClick:F})),!A&&m(c.u9,{results:E}))};function g(e){return m(c.zt,null,m(v,e))}},"7qSS":(e,t,r)=>{"use strict";function n(e){return!/\d*\.?\d+$/.test(e.target.value)&&(e.target.value="")}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;try{if("number"!==typeof e&&!e)return"-";var r=(e="number"===typeof e?e:+e).toFixed(Math.max(0,~~t)),n=-1!==r.indexOf(".")?/\d(?=(\d{3})+\.)/g:/\d(?=(\d{3})+$)/g;return r.replace(n,"$&,")}catch(i){return Sentry.captureException(i),"-"}}function o(e,t){var r,n=t.fn,i=t.filed,o=t.places,a=t.negative,l=void 0!==a&&a,s=e.target.value;return(l?(r=Number(s),/[^\-?\d|.|,|\u3002]/.test(r)):function(e){return/[^\d|.|,|\u3002]/.test(e)}(Number(s)))?"":(/\u3002|,/.test(s)&&(s=s.replace(/[\u3002|,]/g,".")),/^0\d/.test(s)?s="0":/^\./.test(s)?s=0+s.substring(0,o+1):Number(s)>=0&&-1!==s.indexOf(".")&&s.split(".")[1].length>=o&&(s=s.replace(new RegExp("^(\\d*\\.\\d{".concat(o,"})\\d*")),"$1")),Number.isNaN(Number(s))?"":void(i?n(i,s):n(s)))}function a(e){return e>0&&l(e)}function l(e){return!Number.isNaN(e)&&!isNaN(e)&&Math.abs(e)!==1/0}r.d(t,{Y5:()=>n,uf:()=>i,_p:()=>o,KO:()=>a,qh:()=>l})},"88R+":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Be});var n=r("DC7k"),i=r("xIFI"),o=r.n(i),a=r("qN/k"),l=r("Ng/A"),s=r("I78S"),u=r("c83x"),c=r("xDxD"),d=r("uzkB"),p=r("BdPR"),f=r("Lvkr"),m=r("wd/R"),v=r.n(m),g=r("uI99"),y=r("JLYw"),x=r("DtyY"),h=r("gLnL"),b=r("VwJU"),P=r.n(b),k=r("HSMY"),T=r("6ixl"),Z=r("0pZZ"),S=r("OKEt"),C=r("7SQh"),I=r("3TKe"),w=r("50bd"),M=r("ZODY"),A=r("z0TZ"),L=r("S2LQ"),O=r("TSYQ"),E=r.n(O),F=o().createElement;function R(e){var t=e.type,r=e.color;return"message"===t?F("svg",{width:"21",height:"21",viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F("path",{d:"M5.25684 9.55078V7.55078H7.25684V9.55078H5.25684ZM11.7568 9.55078V7.55078H9.75684V9.55078H11.7568ZM16.2568 9.55078V7.55078H14.2568V9.55078H16.2568Z",fill:"#F0B90B"}),F("path",{d:"M0.756836 0.0507812V17.0508H5.25684V20.0508H8.25684L11.2568 17.0508H20.7568V0.0507812H0.756836ZM18.7568 15.0508H10.4568L7.25684 18.2508V15.0508H2.75684V2.05078H18.7568V15.0508Z",fill:"#F0B90B"})):F("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{fill:r||"#212833"}},F("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 2V16.5842H19.8698V19.3377H17.1164L14.3629 16.5842H13.324V21.1729H9.39314L6.36434 23.9264H3.33554V21.1729H0V7.98535H5.64365V2H24ZM11.3048 19.3373V16.5842H5.64365V9.82099H2.0192V19.3373H5.35474V22.2743L8.58546 19.3373H11.3048ZM7.47929 14.7486V9.82099H7.47963V7.98535H7.47929V3.83563H7.47963V3.73535H15.74V3.83563H22.1644V14.7486H18.0342V17.6856L15.0977 14.7492H7.47963V14.7486H7.47929Z"}),F("path",{d:"M10.323 7.83423L11.4702 8.98145L10.323 10.1287L9.17578 8.98145L10.323 7.83423Z"}),F("path",{d:"M14.8794 7.83423L16.0266 8.98145L14.8794 10.1287L13.7322 8.98145L14.8794 7.83423Z"}),F("path",{d:"M19.4355 7.83423L20.5828 8.98145L19.4355 10.1287L18.2883 8.98145L19.4355 7.83423Z"}))}var V=function(){return F("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"1",y:"1",width:"8",height:"11"},F("path",{d:"M1 1.99805H8.5L6 6.49805L8.5 11.498H1V1.99805Z",fill:"currentColor"})),F("g",{mask:"url(#mask0)"},F("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.56692 1.99773L1 6.55991L5.56727 11.1304L6.87045 9.82864L4.51671 7.47738L6.70199 7.47738L6.70199 7.48488L6.84825 7.48509C8.78784 7.48784 10.6472 8.25875 12.0186 9.62876C13.39 10.9988 14.1617 12.8561 14.1644 14.7935L14.1644 16.998L16.0008 16.998L16.0008 14.7932C15.9994 12.3687 15.0347 10.044 13.3186 8.3297C11.637 6.6499 9.36883 5.69082 6.99495 5.65159L6.99495 5.64305L4.52341 5.63593L6.87082 3.291L5.56692 1.99773Z",fill:"currentColor"})),F("mask",{id:"mask1","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"6",y:"4",width:"10",height:"11"},F("rect",{x:"6",y:"4.99805",width:"10",height:"10",fill:"currentColor"})),F("g",{mask:"url(#mask1)"},F("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.56692 1.99773L1.24473e-07 6.55991L4.56727 11.1304L5.87045 9.82864L3.51671 7.47738L5.70199 7.47738L5.70199 7.48488L5.84825 7.48509C7.78784 7.48784 9.64716 8.25875 11.0186 9.62876C12.39 10.9988 13.1617 12.8561 13.1644 14.7935L13.1644 16.998L15.0008 16.998L15.0008 14.7932C14.9994 12.3687 14.0347 10.044 12.3186 8.3297C10.637 6.6499 8.36883 5.69082 5.99495 5.65159L5.99495 5.64305L3.52341 5.63593L5.87082 3.291L4.56692 1.99773Z",fill:"currentColor"})))},D=function(){return F("svg",{width:"15",height:"16",viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.7259 4.1704L14.9685 8.41304L10.7188 12.6628L9.51675 11.4607L11.7088 9.26865L2.13462 9.26865L2.13573 8.99957L2.13452 8.99957L2.13452 4.99957L4.13452 4.99957L4.13452 7.56305L11.7088 7.55745L9.52382 5.37249L10.7259 4.1704Z",fill:"#474D57"}))},N=o().createElement,B="\ud83d\ude00 \ud83d\ude01 \ud83d\ude02 \ud83e\udd23 \ud83d\ude03 \ud83d\ude04 \ud83d\ude05 \ud83d\ude06 \ud83d\ude09 \ud83d\ude0a \ud83d\ude0b \ud83d\ude0e \ud83d\ude0d \ud83d\ude18 \ud83e\udd70 \ud83d\ude17 \ud83d\ude19 \ud83d\ude1a \ud83d\ude42 \ud83e\udd17 \ud83e\udd29 \ud83e\udd14 \ud83e\udd28 \ud83d\ude10 \ud83d\ude11 \ud83d\ude36 \ud83d\ude44 \ud83d\ude0f \ud83d\ude23 \ud83d\ude25 \ud83d\ude2e \ud83e\udd10 \ud83d\ude2f \ud83d\ude2a \ud83d\ude2b \ud83d\ude34 \ud83d\ude0c \ud83d\ude1b \ud83d\ude1c \ud83d\ude1d \ud83e\udd24 \ud83d\ude12 \ud83d\ude13 \ud83d\ude14 \ud83d\ude15 \ud83d\ude43 \ud83e\udd11 \ud83d\ude32 \ud83d\ude41 \ud83d\ude16 \ud83d\ude1e \ud83d\ude1f \ud83d\ude24 \ud83d\ude22 \ud83d\ude2d \ud83d\ude26 \ud83d\ude27 \ud83d\ude28 \ud83d\ude29 \ud83e\udd2f \ud83d\ude2c \ud83d\ude30 \ud83d\ude31 \ud83e\udd75 \ud83e\udd76 \ud83d\ude33 \ud83e\udd2a \ud83d\ude35 \ud83d\ude21 \ud83d\ude20 \ud83e\udd2c \ud83d\ude37 \ud83e\udd12 \ud83e\udd15 \ud83e\udd22 \ud83e\udd2e \ud83e\udd27 \ud83d\ude07 \ud83e\udd20 \ud83e\udd21 \ud83e\udd73 \ud83e\udd74 \ud83e\udd7a \ud83e\udd25 \ud83e\udd2b \ud83e\udd2d \ud83e\uddd0 \ud83e\udd13 \ud83d\ude08 \ud83d\udc7f \ud83d\udc79 \ud83d\udc7a \ud83d\udc80 \ud83d\udc7b \ud83d\udc7d \ud83e\udd16 \ud83d\udca9 \ud83d\ude3a \ud83d\ude38 \ud83d\ude39 \ud83d\ude3b \ud83d\ude3c \ud83d\ude3d \ud83d\ude40 \ud83d\ude3f \ud83d\ude3e \ud83d\udc76 \ud83d\udc67 \ud83e\uddd2 \ud83d\udc66 \ud83d\udc69 \ud83e\uddd1 \ud83d\udc68 \ud83d\udc75 \ud83e\uddd3 \ud83d\udc74 \ud83d\udc72 \ud83d\udc73\u200d\u2640\ufe0f \ud83d\udc73\u200d\u2642\ufe0f \ud83e\uddd5 \ud83e\uddd4 \ud83d\udc71\u200d\u2642\ufe0f \ud83d\udc71\u200d\u2640\ufe0f \ud83d\udc68\u200d\ud83e\uddb0 \ud83d\udc69\u200d\ud83e\uddb0 \ud83d\udc68\u200d\ud83e\uddb1 \ud83d\udc69\u200d\ud83e\uddb1 \ud83d\udc68\u200d\ud83e\uddb2 \ud83d\udc69\u200d\ud83e\uddb2 \ud83d\udc68\u200d\ud83e\uddb3 \ud83d\udc69\u200d\ud83e\uddb3 \ud83e\uddb8\u200d\u2640\ufe0f \ud83e\uddb8\u200d\u2642\ufe0f \ud83e\uddb9\u200d\u2640\ufe0f \ud83e\uddb9\u200d\u2642\ufe0f \ud83d\udc6e\u200d\u2640\ufe0f \ud83d\udc6e\u200d\u2642\ufe0f \ud83d\udc77\u200d\u2640\ufe0f \ud83d\udc77\u200d\u2642\ufe0f \ud83d\udc82\u200d\u2640\ufe0f \ud83d\udc82\u200d\u2642\ufe0f \ud83d\udd75\ufe0f\u200d\u2640\ufe0f \ud83d\udd75\ufe0f\u200d\u2642\ufe0f \ud83d\udc69\u200d\u2695\ufe0f \ud83d\udc68\u200d\u2695\ufe0f \ud83d\udc69\u200d\ud83c\udf3e \ud83d\udc68\u200d\ud83c\udf3e \ud83d\udc69\u200d\ud83c\udf73 \ud83d\udc68\u200d\ud83c\udf73 \ud83d\udc69\u200d\ud83c\udf93 \ud83d\udc68\u200d\ud83c\udf93 \ud83d\udc69\u200d\ud83c\udfa4 \ud83d\udc68\u200d\ud83c\udfa4 \ud83d\udc69\u200d\ud83c\udfeb \ud83d\udc68\u200d\ud83c\udfeb \ud83d\udc69\u200d\ud83c\udfed \ud83d\udc68\u200d\ud83c\udfed \ud83d\udc69\u200d\ud83d\udcbb \ud83d\udc68\u200d\ud83d\udcbb \ud83d\udc69\u200d\ud83d\udcbc \ud83d\udc68\u200d\ud83d\udcbc \ud83d\udc69\u200d\ud83d\udd27 \ud83d\udc68\u200d\ud83d\udd27 \ud83d\udc69\u200d\ud83d\udd2c \ud83d\udc68\u200d\ud83d\udd2c \ud83d\udc69\u200d\ud83c\udfa8 \ud83d\udc68\u200d\ud83c\udfa8 \ud83d\udc69\u200d\ud83d\ude92 \ud83d\udc68\u200d\ud83d\ude92 \ud83d\udc69\u200d\u2708\ufe0f \ud83d\udc68\u200d\u2708\ufe0f \ud83d\udc69\u200d\ud83d\ude80 \ud83d\udc68\u200d\ud83d\ude80 \ud83d\udc69\u200d\u2696\ufe0f \ud83d\udc68\u200d\u2696\ufe0f \ud83d\udc70 \ud83e\udd35 \ud83d\udc78 \ud83e\udd34 \ud83e\udd36 \ud83c\udf85 \ud83e\uddd9\u200d\u2640\ufe0f \ud83e\uddd9\u200d\u2642\ufe0f \ud83e\udddd\u200d\u2640\ufe0f \ud83e\udddd\u200d\u2642\ufe0f \ud83e\udddb\u200d\u2640\ufe0f \ud83e\udddb\u200d\u2642\ufe0f \ud83e\udddf\u200d\u2640\ufe0f \ud83e\udddf\u200d\u2642\ufe0f \ud83e\uddde\u200d\u2640\ufe0f \ud83e\uddde\u200d\u2642\ufe0f \ud83e\udddc\u200d\u2640\ufe0f \ud83e\udddc\u200d\u2642\ufe0f \ud83e\uddda\u200d\u2640\ufe0f \ud83e\uddda\u200d\u2642\ufe0f \ud83d\udc7c \ud83e\udd30 \ud83e\udd31 \ud83d\ude47\u200d\u2640\ufe0f \ud83d\ude47\u200d\u2642\ufe0f \ud83d\udc81\u200d\u2640\ufe0f \ud83d\udc81\u200d\u2642\ufe0f \ud83d\ude45\u200d\u2640\ufe0f \ud83d\ude45\u200d\u2642\ufe0f \ud83d\ude46\u200d\u2640\ufe0f \ud83d\ude46\u200d\u2642\ufe0f \ud83d\ude4b\u200d\u2640\ufe0f \ud83d\ude4b\u200d\u2642\ufe0f \ud83e\udd26\u200d\u2640\ufe0f \ud83e\udd26\u200d\u2642\ufe0f \ud83e\udd37\u200d\u2640\ufe0f \ud83e\udd37\u200d\u2642\ufe0f \ud83d\ude4e\u200d\u2640\ufe0f \ud83d\ude4e\u200d\u2642\ufe0f \ud83d\ude4d\u200d\u2640\ufe0f \ud83d\ude4d\u200d\u2642\ufe0f \ud83d\udc87\u200d\u2640\ufe0f \ud83d\udc87\u200d\u2642\ufe0f \ud83d\udc86\u200d\u2640\ufe0f \ud83d\udc86\u200d\u2642\ufe0f \ud83e\uddd6\u200d\u2640\ufe0f \ud83e\uddd6\u200d\u2642\ufe0f \ud83d\udc85 \ud83e\udd33 \ud83d\udc83 \ud83d\udd7a \ud83d\udc6f\u200d\u2640\ufe0f \ud83d\udc6f\u200d\u2642\ufe0f \ud83d\udd74 \ud83d\udeb6\u200d\u2640\ufe0f \ud83d\udeb6\u200d\u2642\ufe0f \ud83c\udfc3\u200d\u2640\ufe0f \ud83c\udfc3\u200d\u2642\ufe0f \ud83d\udc6b \ud83d\udc6d \ud83d\udc6c \ud83d\udc91 \ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc69 \ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68 \ud83d\udc8f \ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69 \ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68 \ud83d\udc6a \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67 \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc67 \ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67 \ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc67 \ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67 \ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc67 \ud83d\udc69\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc67 \ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc67 \ud83d\udc68\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc67 \ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc67 \ud83e\udd32 \ud83d\udc50 \ud83d\ude4c \ud83d\udc4f \ud83e\udd1d \ud83d\udc4d \ud83d\udc4e \ud83d\udc4a \u270a \ud83e\udd1b \ud83e\udd1c \ud83e\udd1e \u270c\ufe0f \ud83e\udd1f \ud83e\udd18 \ud83d\udc4c \ud83d\udc48 \ud83d\udc49 \ud83d\udc46 \ud83d\udc47 \u261d\ufe0f \u270b \ud83e\udd1a \ud83d\udd90 \ud83d\udd96 \ud83d\udc4b \ud83e\udd19 \ud83d\udcaa \ud83e\uddb5 \ud83e\uddb6 \ud83d\udd95 \u270d\ufe0f \ud83d\ude4f \ud83d\udc8d \ud83d\udc84 \ud83d\udc8b \ud83d\udc44 \ud83d\udc45 \ud83d\udc42 \ud83d\udc43 \ud83d\udc63 \ud83d\udc41 \ud83d\udc40 \ud83e\udde0 \ud83e\uddb4 \ud83e\uddb7 \ud83d\udde3 \ud83d\udc64 \ud83d\udc65 \u231a\ufe0f \ud83d\udcf1 \ud83d\udcf2 \ud83d\udcbb \u2328\ufe0f \ud83d\udda5 \ud83d\udda8 \ud83d\uddb1 \ud83d\uddb2 \ud83d\udd79 \ud83d\udddc \ud83d\udcbd \ud83d\udcbe \ud83d\udcbf \ud83d\udcc0 \ud83d\udcfc \ud83d\udcf7 \ud83d\udcf8 \ud83d\udcf9 \ud83c\udfa5 \ud83d\udcfd \ud83c\udf9e \ud83d\udcde \u260e\ufe0f \ud83d\udcdf \ud83d\udce0 \ud83d\udcfa \ud83d\udcfb \ud83c\udf99 \ud83c\udf9a \ud83c\udf9b \u23f1 \u23f2 \u23f0 \ud83d\udd70 \u231b\ufe0f \u23f3 \ud83d\udce1 \ud83d\udd0b \ud83d\udd0c \ud83d\udca1 \ud83d\udd26 \ud83d\udd6f \ud83d\uddd1 \ud83d\udee2 \ud83d\udcb8 \ud83d\udcb5 \ud83d\udcb4 \ud83d\udcb6 \ud83d\udcb7 \ud83d\udcb0 \ud83d\udcb3 \ud83e\uddfe \ud83d\udc8e \u2696\ufe0f \ud83d\udd27 \ud83d\udd28 \u2692 \ud83d\udee0 \u26cf \ud83d\udd29 \u2699\ufe0f \u26d3 \ud83d\udd2b \ud83d\udca3 \ud83d\udd2a \ud83d\udde1 \u2694\ufe0f \ud83d\udee1 \ud83d\udeac \u26b0\ufe0f \u26b1\ufe0f \ud83c\udffa \ud83e\udded \ud83e\uddf1 \ud83d\udd2e \ud83e\uddff \ud83e\uddf8 \ud83d\udcff \ud83d\udc88 \u2697\ufe0f \ud83d\udd2d \ud83e\uddf0 \ud83e\uddf2 \ud83e\uddea \ud83e\uddeb \ud83e\uddec \ud83e\uddef \ud83d\udd2c \ud83d\udd73 \ud83d\udc8a \ud83d\udc89 \ud83c\udf21 \ud83d\udebd \ud83d\udeb0 \ud83d\udebf \ud83d\udec1 \ud83d\udec0 \ud83d\udec0\ud83c\udffb \ud83d\udec0\ud83c\udffc \ud83d\udec0\ud83c\udffd \ud83d\udec0\ud83c\udffe \ud83d\udec0\ud83c\udfff \ud83e\uddf4 \ud83e\uddf5 \ud83e\uddf6 \ud83e\uddf7 \ud83e\uddf9 \ud83e\uddfa \ud83e\uddfb \ud83e\uddfc \ud83e\uddfd \ud83d\udece \ud83d\udd11 \ud83d\udddd \ud83d\udeaa \ud83d\udecb \ud83d\udecf \ud83d\udecc \ud83d\uddbc \ud83d\udecd \ud83e\uddf3 \ud83d\uded2 \ud83c\udf81 \ud83c\udf88 \ud83c\udf8f \ud83c\udf80 \ud83c\udf8a \ud83c\udf89 \ud83e\udde8 \ud83c\udf8e \ud83c\udfee \ud83c\udf90 \ud83e\udde7 \u2709\ufe0f \ud83d\udce9 \ud83d\udce8 \ud83d\udce7 \ud83d\udc8c \ud83d\udce5 \ud83d\udce4 \ud83d\udce6 \ud83c\udff7 \ud83d\udcea \ud83d\udceb \ud83d\udcec \ud83d\udced \ud83d\udcee \ud83d\udcef \ud83d\udcdc \ud83d\udcc3 \ud83d\udcc4 \ud83d\udcd1 \ud83d\udcca \ud83d\udcc8 \ud83d\udcc9 \ud83d\uddd2 \ud83d\uddd3 \ud83d\udcc6 \ud83d\udcc5 \ud83d\udcc7 \ud83d\uddc3 \ud83d\uddf3 \ud83d\uddc4 \ud83d\udccb \ud83d\udcc1 \ud83d\udcc2 \ud83d\uddc2 \ud83d\uddde \ud83d\udcf0 \ud83d\udcd3 \ud83d\udcd4 \ud83d\udcd2 \ud83d\udcd5 \ud83d\udcd7 \ud83d\udcd8 \ud83d\udcd9 \ud83d\udcda \ud83d\udcd6 \ud83d\udd16 \ud83d\udd17 \ud83d\udcce \ud83d\udd87 \ud83d\udcd0 \ud83d\udccf \ud83d\udccc \ud83d\udccd \u2702\ufe0f \ud83d\udd8a \ud83d\udd8b \u2712\ufe0f \ud83d\udd8c \ud83d\udd8d \ud83d\udcdd \u270f\ufe0f \ud83d\udd0d \ud83d\udd0e \ud83d\udd0f \ud83d\udd10 \ud83d\udd12 \ud83d\udd13".split(" "),_=(0,i.memo)((function(e){var t=e.text,r=e.onClick,n=(0,i.useCallback)((function(e){e.stopPropagation(),r(t)}),[r,t]);return N("div",{className:"msg-emoji-item",onClick:n},t)})),z=function(e){var t=e.showEmoji,r=e.onClick,n=(0,i.useState)(!1),o=n[0],l=n[1];return(0,i.useEffect)((function(){o||l(t)}),[o,t]),o?N(a.Z,{tx:"chat.messageBox",variant:"emojiBox",display:t?"flex":"none"},B.map((function(e){return N(_,{key:e,text:e,onClick:r})}))):null};const H=(0,i.memo)(z);var q,Y=r("QsMz"),U=r("flUW"),j=Object.keys(y.$f.MessageChannels),W=(q={},(0,h.Z)(q,j[0],{maxLen:150,at:"@Admin ",title:"Trollbox (EN Channel)",option:"English",outMax:"Max input 150 characters",atTooMany:"Operation too frequent, please try again in $0s",typeTooMany:"Operation too frequent, please try again later"}),(0,h.Z)(q,j[1],{maxLen:68,at:"@\u7ba1\u7406\u5458 ",title:"\u804a\u5929\u5ba4\uff08\u4e2d\u6587\u9891\u9053\uff09",option:"\u4e2d\u6587\u9891\u9053",outMax:"\u6700\u591a\u8f93\u516568\u4e2a\u5b57\u7b26",atTooMany:"\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e$0s\u79d2\u518d\u8bd5",typeTooMany:"\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"}),q),K=function(){var e,t=(0,U.Z)().getI18n,r=(0,Y.Z)("trd-openOrder",e).getI18n,n=(0,y.yk)().getI18n;return[r("side",{defaultValue:"Side"}),n("LeverageLabel",{defaultValue:"Leverage"}),t("entryPrice",{defaultValue:"Entry Price"}),t("PNL",{defaultValue:"PNL"}),"".concat(t("ROE",{defaultValue:"ROE"}),"%")]},J=o().createElement,G=function(e){var t=e.chatCommandsDisplay,r=e.setCommand,n=e.channel,o=(0,i.useState)(!1),u=o[0],c=o[1],d=(0,y.yk)().getI18n;(0,i.useEffect)((function(){u||c(t)}),[u,t]);var p=function(e){var t=e.channel;return[{commandLabel:"shareUSDTPosition",commandText:"/uposition "},{commandLabel:"shareCOINPosition",commandText:"/cposition "},{commandLabel:"noticeChatRoomAdmin",commandText:W[t].at}]}({channel:n});return(0,i.useMemo)((function(){return u?J(a.Z,{tx:"chat.messageBox",variant:"emojiBox",display:t?"flex":"none"},J(a.Z,{className:"command-title"},J(s.Z,null,d("function",{defaultValue:"Function"})),J(s.Z,null,d("command",{defaultValue:"Command"}))),p.map((function(e,t){var n=e.commandText,i=e.commandLabel;return J(a.Z,{key:t,className:"command-item"},J(s.Z,null,d(i,{defaultValue:"Share USDT-\u24dc position"})),J(l.Z,{className:"command-button",onClick:function(e){e.stopPropagation(),r(n)}},n))}))):null}),[p,u,t,r,d])};const Q=(0,i.memo)(G);var X=r("lukr"),$=r("UoNj"),ee=r("0ATM"),te=o().createElement,re=function(e){var t=e.replyMessage,r=e.name,n=e.id,o=e.selfId,l=(0,y.yk)().getI18n,s=(0,i.useCallback)((function(e){e.stopPropagation(),t({name:r,id:n,selfId:o})}),[t,r,n,o]);return te(a.Z,{onClick:s,tx:"chat.messageBox",className:"reply-tool",alignItems:"center"},te(V,null)," ",l("reply","Reply"))},ne=function(e){var t=e.hiddenMsg,r=(0,y.yk)().getI18n;return te(a.Z,{tx:"chat.messageBox",className:"hidden-tool",alignItems:"center",onClick:function(){return t("HIDE_MSG")}},te($.Z,null)," ",r("HideMsg","Hide"))},ie=function(e){var t=e.unHiddenMsg,r=(0,y.yk)().getI18n;return te(a.Z,{tx:"chat.messageBox",className:"unhidden-tool"},te(a.Z,{className:"tip",alignItems:"center"},te($.Z,null)," ",r("HiddenViewTip","Hidden from the public view of this chat")),te(a.Z,{className:"tool",alignItems:"center",onClick:function(){return t("UN_HIDE_MSG")}},te(ee.Z,null)," ",r("UnHideMsg","Undo hidden")))};const oe=function(e){var t=e.isChannelMaster,r=e.channel,n=e.msgId,o=e.isHidden,a=e.replyMessage,s=e.fromName,c=e.parentId,d=(0,u.useDispatch)(),p=(0,i.useCallback)((function(e){d.chat.sendChatCommand({channel:r,command:e,params:n})}),[r,d.chat,n]);return te(l.Z,{tx:"chat.messageBox",className:"hide-box"},t?o?te(ie,{unHiddenMsg:p}):te(ne,{hiddenMsg:p}):null,o?null:te(re,{replyMessage:a,selfId:n,name:s,id:c||n}))};var ae=r("hWhz"),le=o().createElement,se=["side","leverage","entryPrice","upnl","roe"],ue=[36,55,72,57,69],ce=[31,50,65,51,62],de=function(e){var t=e.itemWidth,r=K();return(0,i.useMemo)((function(){return le(a.Z,{className:"share-list-title"},r.map((function(e,r){var n=t[r];return le(l.Z,{minWidth:n,key:e},e)})))}),[t,r])},pe=function(e){var t=e.shareList,r=e.itemWidth,n=(0,ae.Z)().getI18n;return(0,i.useMemo)((function(){return le(a.Z,{className:"share-list-row"},se.map((function(e,i){var o=r[i],a=t[e],s="";if("LONG"===a)a=n("psLong",{defaultValue:"Long"});else if("SHORT"===a)a=n("psShort",{defaultValue:"Short"});else if("upnl"===e||"roe"===e){var u="".concat(Number(a).toFixed(2),"%");a>0?(s="positive","roe"===e&&(a=u),a="+".concat(a)):a<0&&(s="negative","roe"===e&&(a=u))}return void 0===a&&(a="-"),le(l.Z,{className:"share-list-item ".concat(s),minWidth:o,key:e},a)})))}),[n,r,t])};const fe=function(e){var t=e.shareList,r=void 0===t?[]:t,n=e.sub,i=void 0!==n&&n?ce:ue;return le(l.Z,{className:"chat-share-list"},le(de,{itemWidth:i}),r.map((function(e,t){return le(pe,{itemWidth:i,key:t,shareList:e})})))};var me=o().createElement,ve=function(e){e=e||"";for(var t=0,r=0;r<e.length;r++)t+=e.charCodeAt(r)>127||94===e.charCodeAt(r)?2:1;return t},ge=(0,i.memo)((function(){return me("div",{className:"msg-item-logo"},me("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},me("path",{d:"M4.51672 10L2.25756 12.2581L0 10L2.25756 7.74191L4.51672 10ZM9.9988 4.51378L13.8698 8.38433L16.1282 6.12624L12.2572 2.25569L9.9988 0L7.74044 2.25809L3.86862 6.12864L6.12698 8.38674L9.9988 4.51378ZM17.7416 7.73951L15.4833 9.9976L17.7416 12.2557L20 9.9976L17.7416 7.73951ZM9.9988 15.4878L6.12938 11.6133L3.87102 13.8714L7.74284 17.7419L9.9988 20L12.2572 17.7419L16.1282 13.8714L13.8698 11.6133L9.9988 15.4878ZM9.9988 12.2621L12.2572 10.004L9.9988 7.74191L7.74044 10L9.9988 12.2621Z",fill:"#F0B90B"})))})),ye=(0,i.memo)((function(e){var t,r=e.toMaster,n=e.channel,i=e.payload;if(e.ext){var o=i.split(" ");t='<span class="share-item">'.concat(o[0],'<span class="symbol"> ').concat(o[1]," ").concat(o[2]," </span>").concat(o[3]||"","</span>")}else t=r?i.replace(new RegExp("(".concat(W[n].at.trim(),")")),'<span class="admin">$1</span>'):i;return me("div",{className:"msg-item-payload",dangerouslySetInnerHTML:{__html:t}})})),xe=(0,i.memo)((function(e){var t=e.isChannelMaster,r=e.nickname,n=e.id,i=e.fromName,a=e.payload,l=e.toMaster,s=e.channel,u=e.isHidden,c=e.isMaster,d=e.time,p=e.replyMessage,f=e.replyMessages,m=void 0===f?[]:f,v=e.isReplyMessage,g=void 0!==v&&v,y=e.parentId,x=void 0===y?"":y,h=e.cancelHighLight,b=void 0!==h&&h,P=e.ext,k=void 0===P?"":P,T=e.selectedReplyId,Z=void 0===T?"":T,S=ve(i)+16+ve(a),C=c||S>=50,I=i===r,w=me(ye,{ext:k,toMaster:l,channel:s,payload:a}),M=E()("msg-item-container",t&&u?"msg-hidden":"msg-show",g?"reply-message":"",t&&l&&!b?"to-master":"",Z===n?"selected-reply-message":""),A=E()(g?"reply-item":"");return me(o().Fragment,null,me("div",{className:M},me("div",{className:A},g?me("div",{className:"svg-container"},me(D,null)):null,me("div",{className:"msg-item"},c&&me(ge,null),me("div",{className:E()("msg-item-name",{self:I})},i),me("div",{className:"msg-item-time"},(0,X.v)(new Date(d),"hh:mm")),!C&&w),C&&w,k?me(fe,{sub:g,shareList:JSON.parse(k)}):null),me(oe,{replyMessage:p,fromName:i,isChannelMaster:t,isHidden:u,msgId:n,parentId:x,channel:s})),m&&m.length?me(he,{messages:m,isChannelMaster:t,nickname:r,replyMessage:p,parentId:n,isReplyMessage:!0,selectedReplyId:Z}):null)})),he=function(e){var t=e.messages,r=void 0===t?[]:t,n=e.isChannelMaster,o=e.nickname,a=e.replyMessage,s=e.replyMessages,u=void 0===s?[]:s,c=e.isReplyMessage,d=void 0!==c&&c,p=e.parentId,f=void 0===p?"":p,m=e.selectedReplyId,v=void 0===m?"":m;return(0,i.useMemo)((function(){return me(l.Z,{variant:"chat.chatList"},r.map((function(e){var t=u.filter((function(t){return t.replyMsgId===e.id}));return me(xe,Object.assign({selectedReplyId:v,key:e.id},e,{nickname:o,isChannelMaster:n,replyMessage:a,replyMessages:t,isReplyMessage:d,parentId:f}))})))}),[v,f,d,n,r,o,a,u])},be=function(e){var t=e.messages,r=void 0===t?[]:t,n=e.isChannelMaster,i=e.nickname,o=e.replyMessage,a=e.toMasterCount,l=e.selectedReplyId,s=[],u=[];return r.forEach((function(e){var t=!!n||!e.isHidden;if(e.replyMsgId&&t)u.push(e);else if(t){var r=e.replyMsg;Array.isArray(r)&&r.forEach((function(e){!e.replyMsgId||!n&&e.isHidden||u.push(e)})),s.push(e)}})),me(he,{selectedReplyId:l,messages:s,isChannelMaster:n,nickname:i,replyMessage:o,replyMessages:u,toMasterCount:a})};const Pe=(0,i.memo)(be);var ke=o().createElement,Te=function(e){var t=e.positionList,r=void 0===t?[]:t,n=e.select,o=void 0===n?function(){}:n;return(0,i.useMemo)((function(){return r.map((function(e,t){var r=e.symbol.split("_").join(" ");return ke(l.Z,{onClick:function(e){e.stopPropagation(),o(r)},className:"list-li",key:t,as:"li"},r)}))}),[o,r])},Ze=function(e){var t=e.shareList,r=void 0===t?[]:t,n=e.select,o=void 0===n?function(){}:n;return(0,i.useMemo)((function(){return r.map((function(e,t){var r=E()("list-li",0===t?"share-title":"");return ke(l.Z,{onClick:function(e){e.stopPropagation(),1===t?o("PNL"):2===t&&o("")},className:r,key:t,as:"li"},e)}))}),[r,o])};const Se=function(e){var t=e.children,r=e.sx,n=void 0===r?{}:r;return(0,i.useMemo)((function(){return ke(l.Z,{className:"list-ul",__css:(0,x.Z)({},n),as:"ul"},t)}),[t,n])};var Ce=o().createElement,Ie={cursor:"pointer"},we={height:"20px",paddingTop:"4px",textAlign:"center"},Me=Object.keys(y.$f.MessageChannels),Ae={ban:"BAN_PERSON",foul:"FOUL_WORD",entrance:"SWITCH_VIEW",cposition:"SHARE_COIN_POSITION",uposition:"SHARE_U_POSITION"},Le=function(e){var t=e.trim().split(/\s+/),r=t[0];if("/ban"===r||"/foul"===r||"/entrance"===r||"/cposition"===r||"/uposition"===r)for(var n=(0,T.Z)(t),i=n[0],o=n.slice(1),a=0,l=Object.keys(Ae);a<l.length;a++){var s=l[a];if(new RegExp("\\/".concat(s)).test(i))return{command:Ae[s],params:o.join(" ")}}return{command:"",params:""}},Oe=function(e){return new Date(e.format(A.WP)).getTime()},Ee=function(e,t){var r=e?v().utc(e):v()(),n=v()(),i=Oe(r)-Oe(n);if(i<=0)return"-";var o=v().duration(i),a=function(e){return"0".concat(e).slice(-2)};return"".concat(o.asDays()>=1?"".concat(Math.floor(o.asDays())," ").concat(t," "):"").concat(a(o.hours()),":").concat(a(o.minutes()),":").concat(a(o.seconds()))},Fe=function(e){return"0:0:0"===e||e.includes("-")};const Re=function(e){var t=e.userInfo,r=e.messages,n=void 0===r?[]:r,d=e.sendMessage,p=e.isWsOpen,f=e.showDialog,m=e.isChannelMaster,v=e.dragHeaderProps,b=(0,u.useDispatch)(),T=(0,y.G3)(),A=(0,i.useRef)(null),O=(0,i.useRef)(null),F=(0,c.YT)().setMessageInfo,V=(0,y.yk)().getI18n,D=(0,c.Fs)(),N=D.isMobile,B=D.isIPad,_=t.isFirst,z=t.enableDate,q=t.liftBanTime,Y=t.nickname,j=t.banReason,K=(0,c.hd)(),J=(0,i.useState)(Me[K?1:0]),G=J[0],X=J[1],$=(0,i.useState)(""),ee=$[0],te=$[1],re=(0,i.useState)(!1),ne=re[0],ie=re[1],oe=(0,i.useState)(!1),ae=oe[0],le=oe[1],se=(0,i.useState)(t.isEnable),ue=se[0],ce=se[1],de=(0,i.useState)(),pe=de[0],fe=de[1],me=(0,i.useState)(),ve=me[0],ge=me[1],ye=(0,i.useState)(!1),xe=ye[0],he=ye[1],be=(0,i.useState)(!1),ke=be[0],Ae=be[1],Oe=(0,i.useState)(!1),Re=Oe[0],Ve=Oe[1],De=(0,i.useState)(177),Ne=De[0],Be=De[1],_e=(0,i.useState)(!0),ze=_e[0],He=_e[1],qe=(0,i.useState)(null),Ye=qe[0],Ue=qe[1],je=(0,i.useState)(""),We=je[0],Ke=je[1],Je=(0,i.useState)(""),Ge=Je[0],Qe=Je[1],Xe=(0,i.useState)(""),$e=Xe[0],et=Xe[1],tt=(0,i.useState)(!1),rt=tt[0],nt=tt[1],it=(0,i.useState)(!1),ot=it[0],at=it[1],lt=(0,i.useState)(!0),st=lt[0],ut=lt[1],ct=(0,i.useState)(0),dt=ct[0],pt=ct[1],ft=(0,i.useState)(0),mt=ft[0],vt=ft[1],gt=(0,i.useState)(0),yt=gt[0],xt=gt[1],ht=(0,i.useState)(!1),bt=ht[0],Pt=ht[1],kt=(0,i.useState)(!1),Tt=kt[0],Zt=kt[1],St=(0,i.useState)(!1),Ct=St[0],It=St[1],wt=(0,y.F$)(),Mt=(0,i.useRef)(),At=(0,i.useRef)(),Lt="rtl"===(0,c.gm)(),Ot=E()(ot?"high-light-border":""),Et=function(){var e=(0,U.Z)().getI18n,t=(0,y.yk)().getI18n;return["".concat(t("sharePNL","Share PNL"),"?"),e("YES",{defaultValue:"YES"}),e("NO",{defaultValue:"NO"})]}(),Ft=V("days","days"),Rt=(0,i.useState)(_?Ee(z,Ft):""),Vt=Rt[0],Dt=Rt[1],Nt=(0,i.useState)(q?Ee(q,Ft):""),Bt=Nt[0],_t=Nt[1],zt=(0,i.useState)(),Ht=zt[0],qt=zt[1],Yt=(0,i.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;setTimeout((function(){var e=O.current;if(e){var t=e.scrollHeight;e.scrollTop=t}}),e)}),[]),Ut=(0,i.useCallback)((function(e){e.stopPropagation(),he((function(e){return!e})),Ae(!1),xe||Yt()}),[Yt,xe]),jt=(0,i.useCallback)((function(e){e.stopPropagation(),Ae((function(e){return!e})),he(!1),ke||Yt()}),[Yt,ke]);(0,i.useEffect)((function(){var e=[],t=wt.filter((function(t){if(Math.abs(t.positionSize)>0){var r=e.includes(t.symbol);return e.push(t.symbol),!r}return!1}));T?Mt.current=t:(t.forEach((function(e){var t=e.symbol;e.symbol=t.includes("_")?t:"".concat(t," PERP")})),At.current=t)}),[wt,T]),(0,i.useEffect)((function(){T?b.chat.queryPerpetualOwnPositionSymbols().then((function(e){At.current=e})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})):b.chat.queryDeliveryOwnPositionSymbols().then((function(e){Mt.current=e})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[T,b.chat]),(0,i.useEffect)((function(){var e="webkitLineBreak"in document.documentElement.style;He(!e||"plaintext-only")}),[]),(0,i.useEffect)((function(){j&&qt(j)}),[j]),(0,i.useEffect)((function(){if(n.length>0){var e=O.current,t=e.scrollHeight;e.scrollTop+e.clientHeight+90>t&&(e.scrollTop=t)}}),[n]),(0,i.useEffect)((function(){if(p){var e={type:y.$f.MessageTypes.BATCH_HISTORY,channel:G,payload:"get"};d(e),Yt(500),ut(!0),pt(0),vt(0),xt(0)}}),[p,G,d,Yt]),(0,i.useEffect)((function(){if(_){var e=setInterval((function(){var t=Ee(z,Ft);Fe(t)?(ce(!0),Dt(),clearInterval(e)):Dt(t)}),1e3);return function(){clearInterval(e)}}}),[_,Ft,z]),(0,i.useEffect)((function(){if(q){var e=setInterval((function(){var t=Ee(q,Ft);Fe(t)?(_t(),clearInterval(e)):_t(t)}),1e3);return function(){clearInterval(e)}}}),[q,Ft]),(0,i.useEffect)((function(){if(n.length){var e=0;n.forEach((function(t){e+=t.toMaster?1:0,Array.isArray(t.replyMsg)&&(e+=t.replyMsg.filter((function(e){return e.toMaster})).length||0)})),e!==dt&&xt(e-mt),pt(e),st&&(ut(!1),m&&at(!!e))}}),[m,dt,mt,st,n]);var Wt=(0,i.useCallback)((function(e){var t=e.currentTarget.textContent;le(t.length>W[G].maxLen)}),[G]),Kt=(0,i.useCallback)((function(){ie(!0);var e=A.current;e.focus();var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var r=window.getSelection();r.removeAllRanges(),r.addRange(t),r.collapseToEnd()}),[]),Jt=(0,i.useCallback)((function(){Zt(!1),Pt(!1),It(!1)}),[]),Gt=(0,i.useCallback)((function(e){te((function(t){return"".concat(t||"").concat(e," ")})),Jt(),setTimeout((function(){It(!0)})),Kt()}),[Jt,Kt]),Qt=(0,i.useCallback)((function(e){te((function(t){return"".concat(t||"").concat(e)})),It(!1),Kt()}),[Kt]),Xt=(0,i.useCallback)((function(e){"/uposition "===e?Pt(!0):"/cposition "===e&&Zt(!0)}),[]),$t=(0,i.useCallback)((function(e){Jt();var t=e.currentTarget.textContent;Xt(t),Wt(e)}),[Xt,Jt,Wt]),er=(0,i.useCallback)((function(e,t){Jt(),te((function(r){return t?"".concat(e):"".concat(r||"").concat(e)})),Kt()}),[Jt,Kt]),tr=function(){var e=(0,k.Z)(P().mark((function e(){var t,r,n;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^[A-Za-z\u4e00-\u9fa5]{3,16}$/.test(ve)){e.next=2;break}return e.abrupt("return",fe("ban"));case 2:return e.next=4,b.chat.setChatNickName(ve);case 4:t=e.sent,r=t.success,n=t.code,r?(F({message:V("SetChatNickNameSuccess"),variant:"success"}),setTimeout((function(){return window.location.reload()}),3e3)):"100001003"===n?fe("used"):F({message:V("SetChatNickNameFailure")});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rr=(0,i.useCallback)((function(){Ke(""),Qe(""),nt(!1),et("")}),[]),nr=(0,i.useCallback)((function(e,t){e.stopPropagation(),rr(),X(t),Ve(!Re),b.chat.checkIsChannelMaster(t)}),[rr,b.chat,Re]),ir=(0,i.useCallback)((function(e){var t=e.name,r=e.id,n=e.selfId;Ke(t),Qe(r),nt(!0),Kt(),et(n)}),[Kt]),or=(0,i.useCallback)((function(){at(!1),vt(dt),xt(0),n.forEach((function(e){e.cancelHighLight=!0}))}),[n,dt]),ar=(0,i.useCallback)((function(e){he(!1),Ae(!1),Yt()}),[Yt]),lr=(0,i.useCallback)((function(e){Jt(),setTimeout((function(){er(e,!0),Xt(e)}))}),[Jt,Xt,er]),sr=(0,i.useCallback)(function(){var e=(0,k.Z)(P().mark((function e(t){var r,n,i,o,a,l,s,u,c,f;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Wt(t),r=t.currentTarget.textContent,n="ENGLISH"===G&&/[\u4e00-\u9fa5]/.test(r),i=m&&/(?:\/ban )|(?:\/foul )|(?:\/entrance )/.test(r)||/(?:\/cposition )|(?:\/uposition )/.test(r),27===t.keyCode&&Jt(),13!==t.keyCode){e.next=29;break}if(t.preventDefault(),!ae&&r.trim()&&!n&&p){e.next=9;break}return e.abrupt("return");case 9:if(Jt(),t.currentTarget.textContent="",te(""),rr(),o=Le(r),a=o.command,l=o.params,!/(?:\/cposition )|(?:\/uposition )/.test(r)||l){e.next=17;break}return F({message:V("sendMessageParamsError"),variant:"error"}),e.abrupt("return");case 17:if(!i||!a){e.next=26;break}return e.next=20,b.chat.sendChatCommand({channel:G,command:a,params:l,replyMsgId:Ge});case 20:return s=e.sent,u=s.success,c=s.message,Yt(350),F({message:u?V("setChatCmdSuccess"):c,variant:u?"success":"error"}),e.abrupt("return");case 26:f={type:y.$f.MessageTypes.TEXT,channel:G,time:Date.now(),payload:(v=r,0===v.length?"":v.replace(/</g,"&lt;").replace(/>/g,"&gt;")),toMaster:r.includes(W[G].at),replyMsgId:Ge},d(f),Yt(350);case 29:case"end":return e.stop()}var v}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,Ge,G,ae,p]),ur=(0,i.useCallback)((function(e){if(Ye){var t=.8*Math.max(document.documentElement.clientHeight,window.innerHeight||0)-69;if(B){var r=(Ye.startY-e.changedTouches[0].clientY)*(N?1:-1),n=Ye.height-r;Be(Math.max(Math.min(t,n),79))}else{var i=e.movementY;Be((function(e){var r=e-i;return Math.max(Math.min(t,r),79)}))}}}),[Ye,Be,N,B]),cr=(0,i.useCallback)((function(e){e.stopPropagation()}),[]);(0,i.useEffect)((function(){return g.Z.on("cancelReplyMessage",(function(){rr(),Jt()}))})),(0,i.useEffect)((function(){return g.Z.on("cancelHighLight",(function(){or(),Jt()}))}));var dr=(0,i.useMemo)((function(){var e=E()(ot?"high-light":"");return Ce(a.Z,Object.assign({className:e,tx:"chat.dialog",variant:"headerBox"},v),Ce(a.Z,{alignItems:"center"},Ce(R,{color:"#F0B90B"}),Ce(s.Z,{ml:"8px",variant:"label4",color:"primary"},W[G].title),m&&yt>0?Ce(l.Z,{sx:{backgroundColor:"#D9304E",borderRadius:"100px",color:"#FFFFFF",width:yt>9?"24px":"16px",height:"16px",marginLeft:"6px",textAlign:"center",lineHeight:"16px",fontSize:"12px"}},yt):null),Ce(l.Z,null,Ce("span",{style:{position:"relative"},onClick:function(e){e.stopPropagation(),Ve(!Re)}},Ce("svg",{width:"23",height:"22",viewBox:"0 0 23 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ce("path",{d:"M11.9004 15C11.1093 15 10.3359 14.7654 9.67811 14.3259C9.02032 13.8864 8.50762 13.2616 8.20487 12.5307C7.90212 11.7998 7.82291 10.9956 7.97725 10.2196C8.13159 9.44372 8.51256 8.73098 9.07197 8.17157C9.63138 7.61216 10.3441 7.2312 11.12 7.07686C11.896 6.92252 12.7002 7.00173 13.4311 7.30448C14.162 7.60723 14.7867 8.11993 15.2263 8.77772C15.6658 9.43552 15.9004 10.2089 15.9004 11C15.8993 12.0605 15.4775 13.0773 14.7276 13.8272C13.9777 14.5771 12.9609 14.9989 11.9004 15ZM11.9004 9C11.5048 9 11.1182 9.1173 10.7893 9.33706C10.4604 9.55683 10.204 9.86918 10.0526 10.2346C9.90126 10.6001 9.86165 11.0022 9.93882 11.3902C10.016 11.7781 10.2065 12.1345 10.4862 12.4142C10.7659 12.6939 11.1223 12.8844 11.5102 12.9616C11.8982 13.0387 12.3003 12.9991 12.6658 12.8478C13.0312 12.6964 13.3436 12.44 13.5633 12.1111C13.7831 11.7822 13.9004 11.3956 13.9004 11C13.8998 10.4698 13.6889 9.9614 13.3139 9.58646C12.939 9.21152 12.4306 9.00061 11.9004 9Z",fill:"#848E9C"}),Ce("path",{d:"M14.8431 22H8.96315L7.89315 18.791C7.64315 18.6621 7.39945 18.5205 7.16265 18.3682L3.84625 19.0459L0.90625 13.9541L3.14625 11.4287C3.13895 11.2871 3.13555 11.1436 3.13555 11C3.13555 10.8564 3.13895 10.7129 3.14625 10.5713L0.90625 8.0459L3.84625 2.9541L7.16265 3.6318C7.39945 3.4795 7.64365 3.3379 7.89315 3.209L8.96315 0H14.8432L15.9132 3.209C16.1632 3.3379 16.4067 3.4795 16.6437 3.6318L19.9601 2.9541L22.9002 8.0459L20.6602 10.5713C20.6674 10.7129 20.6709 10.8564 20.6709 11C20.6709 11.1436 20.6674 11.2871 20.6602 11.4287L22.9002 13.9541L19.9601 19.0459L16.6438 18.3682C16.4069 18.5205 16.1628 18.6621 15.9132 18.791L14.8431 22ZM10.4046 20H13.4017L14.2868 17.3447L14.6844 17.1641C15.0932 16.9788 15.4827 16.7534 15.847 16.4912L16.2024 16.2363L18.948 16.7979L20.4466 14.2021L18.5935 12.1121L18.6364 11.6775C18.6584 11.4539 18.6707 11.2283 18.6707 10.9998C18.6707 10.7713 18.6584 10.5457 18.6364 10.3221L18.5935 9.8875L20.4466 7.7975L18.948 5.2021L16.2024 5.7637L15.847 5.5088C15.4827 5.24656 15.0932 5.02115 14.6844 4.8359L14.2868 4.6553L13.4017 2H10.4046L9.51925 4.6553L9.12185 4.8359C8.71297 5.02111 8.32352 5.24652 7.95925 5.5088L7.60375 5.7637L4.85815 5.2021L3.36015 7.7979L5.21315 9.8879L5.17015 10.3225C5.14825 10.5461 5.13605 10.7717 5.13605 11.0002C5.13605 11.2287 5.14825 11.4543 5.17015 11.6779L5.21315 12.1125L3.36015 14.2025L4.85815 16.7979L7.60375 16.2363L7.95925 16.4912C8.32352 16.7535 8.71297 16.9789 9.12185 17.1641L9.51925 17.3447L10.4046 20Z",fill:"#848E9C"})),Ce(l.Z,{tx:"chat.selectBox",variant:"container",sx:{display:Re?"":"none"}},Me.map((function(e){var t,r;return Ce("span",{key:e,style:(t={display:"inline-block",width:"115px",height:"38px",lineHeight:"38px"},(0,h.Z)(t,Lt?"marginRight":"marginLeft","".concat(e===Me[1]?15:14,"px")),(0,h.Z)(t,"position","relative"),(0,h.Z)(t,"color","".concat(e===G?"#F0B90B":"")),t),onClick:function(t){return nr(t,e)}},W[e].option,e===G&&Ce("svg",{width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:(r={position:"absolute"},(0,h.Z)(r,Lt?"left":"right","16px"),(0,h.Z)(r,"top","14px"),r)},Ce("path",{d:"M16 1.3632L5.86057 12L4.57143 10.6464L0 5.8464L1.28914 4.4832L5.86057 9.2832L14.7017 0L16 1.3632Z",fill:"#F0B90B"})))})))),Ce(C.Z,{ml:14,color:"#848E9C",sx:{transform:"rotate(90deg)",verticalAlign:"top"}})))}),[m,yt,ot,G,nr,Lt,v,Re]);return Ce(l.Z,{tx:"chat.dialog",variant:"contentBox",onMouseMove:ur,onTouchMove:ur,onMouseUp:function(){return Ue(null)},onTouchEnd:function(){return Ue(null)},className:Ot},Ye&&Ce("div",{style:{position:"fixed",top:"0px",left:"0px",height:"100vh",width:"100vw"}}),Ce(l.Z,{tx:"chat.dialog",variant:"headerLine"}),dr,!_&&!N&&Ce("div",{style:(0,x.Z)((0,x.Z)({},we),Ie),onMouseDown:function(e){return Ue({height:Ne,startY:e.clientY})},onTouchStart:function(e){return Ue({height:Ne,startY:e.touches[0].clientY})}},Ce("img",{draggable:"false",src:"".concat(L.Xs,"/static/images/chat/box-adjustable.png"),alt:""})),_?Ce(l.Z,null,Ce(a.Z,{p:"16px 14px 13px"},Ce(s.Z,{variant:"label4"},V(ue?"PleaseEnterYourName":"EnableChatTip"))),Ce(a.Z,{px:"12px",height:ue?67:55},Ce(S.Z,{variant:"outline",value:ve,maxLength:16,onChange:function(e){var t=e.currentTarget.value.trim();fe(),ge(t)},placeholder:V("InputPublicName"),labelFixed:!0,boxProps:{sx:{mt:0,width:"100%",height:"38px"}},error:!!pe,errorText:V("used"===pe?"NameUsed":"FollowTheRule"),disabled:!ue})),Ce(a.Z,{p:"5px 12px 15px",__css:{"> button:disabled":{opacity:"0.4",background:"linear-gradient(180deg, #F8D12F 0%, #F0B90B 99.77%)"}}},Ce(Z.Z,{variant:"default",sz:"l",width:"100%",onClick:function(){return tr()},disabled:!ue},ue?V("EnterChatRoom"):"".concat(Vt," ").concat(V("WaitForChating"))))):Ce(o().Fragment,null,Ce(l.Z,{ref:O,tx:"chat.messageBox",variant:"container",sx:{height:"".concat(Ne-(xe?158:0),"px")},onClick:ar},Ce(M.Z,{inner:!0,show:!p}),f&&Ce(Pe,{selectedReplyId:$e,messages:n,isChannelMaster:m,nickname:Y,replyMessage:ir,toMasterCount:yt})),N&&Ce("div",{style:(0,x.Z)((0,x.Z)({},we),Ie),onTouchStart:function(e){return Ue({height:Ne,startY:e.touches[0].clientY})}},Ce("img",{draggable:"false",src:"".concat(L.Xs,"/static/images/chat/box-adjustable.png"),alt:""})),Ce(H,{onClick:er,showEmoji:xe}),Ce(Q,{channel:G,setCommand:lr,chatCommandsDisplay:ke}),Ce(a.Z,{sx:{padding:"10px",flexDirection:"column"}},Ce(a.Z,{sx:{justifyContent:"space-between"}},Ce(a.Z,{tx:"chat.messageBox",variant:"inputContainer",flexDirection:"column",onClick:cr,sx:{width:"".concat(Bt?100:N?91:80,"%")}},Ce(l.Z,{sx:{color:"chat.replyName",display:rt?"block":"none",marginBottom:"4px",fontSize:"12px",fontWeight:400}},V("replyMessage","Reply to")," ",Ce("span",{style:{fontWeight:500,fontStyle:"italic"}},We),":"),Ce(l.Z,{ref:A,tx:"chat.messageBox",variant:"inputBox",sx:{overFlow:N?"hidden":"",whiteSpace:N?"nowrap":"",color:ne?"":"#848E9C"},contentEditable:Bt?"false":ze,suppressContentEditableWarning:!0,onInput:$t,onBlur:function(e){te(e.currentTarget.textContent)},onFocus:function(){ie(!0)},onKeyDown:function(e){sr(e)}},Bt?Ce(a.Z,null,Ce(l.Z,{flex:1},Ht||V("BanReason")),Ce(l.Z,{color:"#656e78"},Bt)):ne?ee:V("TypeSomething","Type something... (Enter to submit)")),Tt&&Ce(Se,null,Ce(Te,{select:Gt,positionList:Mt.current})),bt&&Ce(Se,null,Ce(Te,{select:Gt,positionList:At.current})),Ct&&Ce(Se,{sx:{left:"179px!important",width:"95px"}},Ce(Ze,{select:Qt,shareList:Et}))),!Bt&&Ce(l.Z,{p:"6px 0 0",__css:{".command-info":{color:ke?"#F0B90B":"#929AA5"},".emoji-info":{color:xe?"#F0B90B":"#929AA5"},svg:(0,x.Z)((0,x.Z)({},Ie),{},{color:"#929AA5",":hover":{color:"#F0B90B"}})}},Ce(I.Z,{style:{marginLeft:N?"10px":0},className:"command-info",onClick:jt}),!N&&Ce(w.Z,{className:"emoji-info",sx:{marginLeft:"8px"},onClick:Ut}))),ae&&Ce(a.Z,null,Ce(s.Z,{variant:"errorHelperText",m:"3px 0 -8px"},W[G].outMax)),!1,!1)))};var Ve=o().createElement,De={left:window.innerWidth-110,right:15},Ne=function(){var e=(0,u.useDispatch)(),t=(0,c._n)(),r=(0,c.Pc)(),d=(0,y.ob)(),m=(0,c.Fg)().isLight?"light":"dark",x=(0,c.Fs)(),h=x.isIPad,b=x.isMobile,P=(0,i.useState)(!1),k=P[0],T=P[1],Z=(0,p.Z)("chat-pos-x",De.right),S=(0,n.Z)(Z,2),C=S[0],I=S[1],w=(0,i.useRef)(null),M=(0,i.useCallback)((function(){e.chat.switchDialog()}),[e.chat]),A=(0,i.useCallback)((function(e){if(e.preventDefault(),k){if(h){var t=window.innerWidth-e.changedTouches[0].clientX;return I(Math.min(De.left,Math.max(t,De.right)))}var r=e.movementX;I((function(e){var t=e-r;return Math.min(De.left,Math.max(t,De.right))}))}}),[k,I,h]),L=(0,i.useCallback)((function(){w.current=v()(),T(!0)}),[T,w]),O=(0,i.useCallback)((function(e){e.stopPropagation(),g.Z.emit("cancelHighLight"),g.Z.emit("cancelReplyMessage")}),[]),E=(0,i.useMemo)((function(){return{onMouseDown:L,onTouchStart:L,onClick:function(){v()().diff(w.current)<150&&M()}}}),[L,M,w]);(0,i.useEffect)((function(){k&&(window.addEventListener(h?"touchmove":"mousemove",A),window.addEventListener(h?"touchend":"mouseup",(function(){window.removeEventListener(h?"touchmove":"mousemove",A),T(!1)}),{once:!0}))}),[k,A,M,h]);var F=(0,c.hd)();return t&&d.enableChat&&r.isExistFutureAccount?Ve(o().Fragment,null,!d.showDialog&&Ve(a.Z,Object.assign({tx:"chat.iconBox",variant:"container",sx:{right:"".concat(C,"px !important")},className:m},E),d.hasUnread&&Ve(l.Z,{tx:"chat.iconBox",variant:"point"}),Ve(l.Z,{className:m,tx:"chat.iconBox",variant:"text"},Ve(s.Z,{variant:"label4",lineHeight:"24px",padding:"0 3px"},F?"\u804a\u5929\u5ba4":"Trollbox"),Ve(f.Z,null))),Ve(l.Z,{tx:"chat.dialog",variant:"container",sx:{right:b?void 0:"".concat(Math.min(C,window.innerWidth-326),"px !important")},display:d.showDialog?"unset":"none",onClick:O},Ve(Re,Object.assign({},d,{dragHeaderProps:E})))):null};const Be=function(){return Ve(d.Z,{name:"chat"},Ve(Ne,null))}},PrbQ:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var n=r("DtyY"),i=r("XP5A"),o=r("xDxD"),a=r("BbQq"),l=r("53NN"),s=r("HFO+"),u=r("ZIGC"),c=r("Ng/A"),d=r("qN/k"),p=r("xIFI"),f=r.n(p),m=r("IFcF"),v=r("W+B2"),g=r("JLYw");function y(e,t,r,n){var i=e/n-1;return Math.round(r*(Math.pow(i,3)+1)+t)}var x=[];function h(e,t,r,n,i){var o=x.filter((function(t){return t.el===e}))[0];if(o||(o={el:e,done:!0},x.push(o)),o.t=1,o.d=Math.ceil(n/1e3*60),o.originX=e===window?window.scrollX:e.scrollLeft,o.offsetX=t,o.originY=e===window?window.scrollY:e.scrollTop,o.offsetY=r,o.done){o.done=!1,function e(){var t=o,r=t.t,n=t.d,a=t.originX,l=t.originY,s=t.offsetX,u=t.offsetY,c=t.el;if(r<n){var d=y(r,a,s,n),p=y(r,l,u,n);o.t+=1,c===window?window.scrollTo(d,p):(c.scrollLeft=d,c.scrollTop=p),window&&window.requestAnimationFrame(e)}else o.done=!0,c===window?window.scrollTo(a+s,l+u):(c.scrollLeft=a+s,c.scrollTop=l+u),i&&window&&window.requestAnimationFrame(i)}()}}var b=f().createElement,P=function(e){var t=e.height,r=e.width,n=e.children;return b(c.Z,{__css:{position:"relative",height:"".concat(t,"px"),width:r?"".concat(r,"px"):"100%","> div::-webkit-scrollbar":{width:"0",height:"0"}}},n)},k=(0,p.memo)((function(e){var t=e.symbol,r=e.change,n=e.delivery,i=void 0!==n&&n,a=e.symbolText,l=(0,o.Fg)().isLight,u=(0,g.G3)(),f=(0,g.d0)(),m=(0,p.useCallback)((function(){f({isBlank:u!==i,stateSymbol:t,isDeliveryColumn:i})}),[f,i,u,t]);return(0,p.useMemo)((function(){return b(d.Z,{onClick:m,flexShrink:0,justifyContent:"space-around",alignItems:"center",sx:{bg:"".concat(l?"#fff":"#191B20")},__css:{cursor:"pointer",position:"relative",minWidth:"unset",padding:"8px",height:"".concat(32,"px"),whiteSpace:"nowrap","&:hover":{bg:"favouriteItem.bg"}}},b(c.Z,{fontSize:14,lineHeight:"16px",color:"".concat(l?"t.grey400":"t.grey300"),sx:{"&:hover":{color:"t.primary"}}},a),b(s.EE,{ml:1,fontSize:12,lineHeight:"14px",color:Number(r>0)?"buy":"sell"},"".concat(r,"%")))}),[r,l,a])})),T=(0,p.memo)((function(){return b(d.Z,{alignItems:"center",justifyContent:"flex-end",width:40,sx:{pr:"9px",color:"primary"}},b(a.Z,{size:14}))}));const Z=function(e){var t,r,a,s,c=e.onRemove,f=(0,p.useRef)(),y=(0,o.Fg)().isLight,x=(0,v.Pj)().nextTickers,Z=(0,u.FB)(x,"symbol"),S=(0,g.lZ)(),C=(0,g.yk)().getI18n,I=S.map((function(e){var t=e.symbol,r=Z[t]||{},o=(0,n.Z)((0,n.Z)({},e),r),a=o.quoteAsset,l=o.baseAsset,s=o.difference,u=void 0===s?0:s,c=(0,i.Z)(o,["quoteAsset","baseAsset","difference"]);return(0,n.Z)({id:t,symbol:t,_symbol:"".concat(l,"_").concat(a),change:u},c)})),w=null===(t=f.current)||void 0===t?void 0:t.scrollLeft,M=(null===(r=f.current)||void 0===r?void 0:r.scrollWidth)>(null===(a=f.current)||void 0===a?void 0:a.clientWidth)+(null===(s=f.current)||void 0===s?void 0:s.scrollLeft),A="rtl"===(0,o.gm)(),L=(0,p.useCallback)((function(){return h(f.current,-300,0,300)}),[]),O=(0,p.useCallback)((function(){return h(f.current,300,0,300)}),[]);return b(d.Z,{sx:{alignItems:"center",justifyContent:"center",mb:"4px"}},b(T,null),b(P,null,!A&&w?b(d.Z,{sx:{position:"absolute",cursor:"pointer",width:"32px",height:"32px",background:"linear-gradient(to right, ".concat(y?"#E6E8A":"#12161C",",  rgba(11, 14, 17, 0) 100%)"),zIndex:"999","&::after":{content:"''",position:"absolute",top:"20px",left:"3px",width:"2px",height:"2px",border:" solid #929AA5",borderWidth:" 0 1px 1px 0",padding:"2px",transform:"rotate(135deg) scale(1.2)"},"&:hover":{"&::after":{content:"''",position:"absolute",top:"20px",left:"3px",width:"2px",height:"2px",border:" solid #D0980B",borderWidth:" 0 1px 1px 0",padding:"2px",transform:"rotate(135deg) scale(1.2)"}}},onClick:L}):null,b(d.Z,{ref:f,__css:{overflowX:"auto"}},I.map((function(e){var t=e.id,r=e.symbol,n=e._symbol,i=e.change,o=e.symbolDisplay,a=e.isDelivery,l=(0,m.H)(e,C).fullName;return b(k,{key:t,symbol:r,_symbol:n,change:i,delivery:a,symbolDisplay:o,symbolText:l})}))),!A&&M?b(d.Z,{sx:{position:"absolute",top:"-8px",right:"0px",cursor:"pointer",width:"32px",height:"32px",background:"linear-gradient(to left, ".concat(y?"#fff":"#12161C",",  rgba(11, 14, 17, 0) 100%)"),"&::after":{content:"''",position:"absolute",top:"20px",right:"7px",width:"2px",height:"2px",border:" solid #929AA5",borderWidth:" 0 1px 1px 0",padding:"2px",transform:"rotate(-45deg) scale(1.2)"},"&:hover":{"&::after":{content:"''",position:"absolute",top:"20px",right:"7px",width:"2px",height:"2px",border:" solid #D0980B",borderWidth:" 0 1px 1px 0",padding:"2px",transform:"rotate(-45deg) scale(1.2)"}}},onClick:O}):null),c&&b("div",{style:{display:"inline-block",backgroundColor:"".concat(y?"#fff":"#191B20"),cursor:"pointer",width:"50px",textAlign:"center",height:"32px",lineHeight:"32px"}},b(l.Z,{size:16,onClick:function(){return c()},sx:{cursor:"pointer",flexShrink:0,alignItem:"flex-end",color:"t.grey500",zIndex:1,"&:hover":{color:"closeHoverBg"}}})))}},juB9:(e,t,r)=>{"use strict";r.d(t,{z:()=>n,w:()=>i});var n="PLACE_ORDER_TYPE",i="futures-flash-order-visible"},bdJC:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var n=r("DtyY"),i=r("DC7k"),o=r("xIFI"),a=r.n(o),l=r("qN/k"),s=r("xDxD"),u=r("0axZ"),c=r("tmgI"),d=r("BblE"),p=r("JLYw"),f=r("juB9"),m=a().createElement;const v=function(e){var t,r,n,i,a=e.positionDirection,s=e.type,u=void 0===s?"bid":s,d=e.setConfirmTitle,v=void 0===d?function(){}:d,g=e.handleClick,y=void 0===g?function(){}:g,x=e.dispatch,h=void 0===x?function(){}:x,b=(0,p.x_)(a),P=b.BuyText,k=b.SellText,T=c.PR.BOTH,Z=(0,p.he)(),S=Z.bidPrice,C=Z.askPrice,I=(0,p.F7)().positionMode;"bid"===u?(r=P,n=S,t="buy-button",i=1,I&&(a===c.RS.OPEN?T=c.PR.LONG:a===c.RS.CLOSE&&(T=c.PR.SHORT))):(r=k,n=C,t="sell-button",i=-1,I&&(a===c.RS.OPEN?T=c.PR.SHORT:a===c.RS.CLOSE&&(T=c.PR.LONG)));var w=(0,o.useCallback)((function(e){e.preventDefault(),v(r),h({type:f.z,payload:{side:i,positionSide:T}}),y(!0)}),[T,h,i,r,y,v]);return(0,o.useMemo)((function(){return m(l.Z,{onClick:w,className:t,tx:"flashOrder",variant:"tradeButton"},m("div",null,r),m("div",null,n))}),[w,t,r,n])};var g=r("L4Ep"),y=r("gQYy"),x=r("NDPa"),h=a().createElement;const b=function(e){var t=e.quantity,r=void 0===t?"":t,n=e.setQuantity,i=e.dispatch,a=(0,p.yk)().getI18n,s=(0,x.X)(),u=(0,p.ql)({quantity:r,orderFormProps:s}),d=u.cUnit,m=u.precision,v=u.helperText,b=u.ticker,P=u.minContQty,k=u.tradeCont,T=u.placeholder,Z=b.minQty,S="".concat(a("quantity")," (").concat(d,")");(0,o.useEffect)((function(){i({type:f.z,payload:{minContQty:P,tradeCont:k,buyQty:r,sellQty:r,buyCont:k,sellCont:k}})}),[k,r,i,P]);var C=(0,o.useCallback)((function(e){return n(e),e}),[n]);return(0,o.useMemo)((function(){return h(l.Z,{tx:"flashOrder",variant:"inputContainer"},h("div",null,S),h("div",{className:"amount"},h(y.Z,{id:"flashOrderQuantity",min:Z,step:Z,precision:m,before:"",type:c.xy.FUTURES,after:"",value:r,placeholder:T,maxLength:g.ze,helperText:v,autoZero:!0,futuresHandleChange:C,sx:{"&::placeholder":{fontSize:"12px"}}})))}),[S,Z,m,r,T,v,C])};var P=r("bD8W"),k=r("8qum"),T=r("J14u"),Z=r("BdPR"),S=r("MP7m"),C=a().createElement,I={l:15,t:15,b:window.innerHeight-55,r:window.innerWidth-340},w={l:15,t:250},M=function(e){var t=e.children,r=e.visible,n=(0,s.Fs)().isIPad,a=(0,Z.Z)("flash-order-position",w),u=(0,i.Z)(a,2),c=u[0],d=u[1],p=(0,o.useRef)(!0),f=(0,o.useRef)(!1),m=(0,S.xG)((function(e){return e.setDisableMouse})),v=(0,o.useCallback)((function(){f.current=!0,m(!0)}),[m]),g=(0,o.useMemo)((function(){return{onMouseDown:v,onTouchStart:v}}),[v]),y=(0,o.useCallback)((function(e){e.preventDefault(),f.current=!1,m(!1)}),[m]),x=(0,o.useCallback)((function(e){setTimeout((function(){if(e.preventDefault(),f.current){if(n){var t=window.innerWidth-e.changedTouches[0].clientX;return d(Math.min(I.left,Math.max(t,I.right)))}var r=e.movementX,i=e.movementY;d((function(e){var t=e.l,n=e.t,o=t+r,a=n+i;return{l:Math.min(I.r,Math.max(o,I.l)),t:Math.min(I.b,Math.max(a,I.t))}}))}}),15)}),[d,n]);return(0,o.useEffect)((function(){if(p.current)return window.addEventListener(n?"touchmove":"mousemove",x),window.addEventListener(n?"touchend":"mouseup",y),p.current=!1,function(){window.removeEventListener(n?"touchmove":"mousemove",x),window.removeEventListener(n?"touchend":"mouseup",y)}}),[y,x,n]),C(l.Z,{tx:"flashOrder",variant:"container",className:"".concat(r?"":"drag-hide"),sx:{transform:"translate(".concat(c?Math.max(c.l,I.l):w.l,"px, ").concat(c?Math.max(c.t,I.t):w.t,"px)")}},C(l.Z,Object.assign({},g,{tx:"flashOrder",variant:"drag"}),C("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C("rect",{width:"2",height:"2",fill:"currentColor"}),C("rect",{y:"5",width:"2",height:"2",fill:"currentColor"}),C("rect",{y:"10",width:"2",height:"2",fill:"currentColor"}),C("rect",{x:"4",width:"2",height:"2",fill:"currentColor"}),C("rect",{x:"4",y:"5",width:"2",height:"2",fill:"currentColor"}),C("rect",{x:"4",y:"10",width:"2",height:"2",fill:"currentColor"}))),t)};const A=a().memo(M);var L=r("53NN"),O=a().createElement;const E=function(e){var t=e.onRemove;return O(l.Z,{tx:"flashOrder.close",variant:"container"},O(L.Z,{tx:"flashOrder.close",variant:"icon",size:8,onClick:t}))};var F=a().createElement,R=function(){var e=(0,s.f0)().isLoggedIn,t=(0,o.useState)(""),r=t[0],a=t[1],f=(0,p.F7)(),m=f.orderConfirmation,g=f.positionMode,y=(0,o.useState)(),h=y[0],Z=y[1],S=(0,o.useState)(!1),C=S[0],I=S[1],w=(0,o.useRef)(),M=(0,p._k)(),L=M.useMarketFormSubmit,O=M.placeOrderReducer,R=M.placeMarketOrder,V=(0,x.X)(),D=V.base,N=V.quote,B=V.ticker,_=V.marginAsset,z=(0,p.yk)().getI18n,H=(0,o.useReducer)(O,{isFetching:!1}),q=H[0],Y=H[1],U=(0,s.z4)(),j=(0,i.Z)(U,1)[0],W=(0,x.X)(),K=(0,p.ql)({quantity:r,orderFormProps:W}).minContQty,J=(0,p.IP)({dispatch:Y,placeOrder:R,getFutI18n:z}),G=q.isFetching,Q=q.side,X=q.tradeCont,$=g?c.RS.OPEN:c.RS.BOTH,ee=(0,p.u$)().showDialog,te=(0,d.P)().showBattleDialog,re=(0,s.Pc)().isExistFutureAccount,ne=(0,T.M)().inBattle,ie=L({placeOrder:J,isFetching:G,orderConfirmation:m,quantity:r,positionDirection:$,confirmTitle:h,minContQty:K,side:Q},w),oe=1===Q?c.g.BUY:c.g.SELL,ae=(0,k.Z)(j,N,c.Jm.MARKET,"",(0,n.Z)((0,n.Z)({stopPrice:null,quantity:X,symbol:j},q),{},{side:oe})),le=(0,o.useCallback)((function(e){e.preventDefault()}),[]),se=(0,p.e5)(),ue=(0,i.Z)(se,2),ce=ue[0],de=ue[1],pe=(0,o.useCallback)((function(){de(!1)}),[de]),fe=(0,o.useCallback)((function(){ee()&&(ne?te():ie(ae))}),[ae,ie,ee,ne,te]);return(0,o.useEffect)((function(){C&&(fe(),I(!1))}),[fe,C]),F(A,{visible:re&&e&&ce},F(u.Z,{onSubmit:le,trim:!0,noValidate:!0,autoComplete:"off"},F(l.Z,{height:"40px",justifyContent:"stretch"},F(v,{positionDirection:$,handleClick:I,setConfirmTitle:Z,type:"bid",dispatch:Y}),F(b,{quantity:r,setQuantity:a,dispatch:Y}),F(v,{positionDirection:$,handleClick:I,setConfirmTitle:Z,type:"ask",dispatch:Y}))),F(E,{onRemove:pe}),F(P.Z,{symbol:j,base:D,quote:N,ticker:B,ref:w,side:c.g.BUY,marginAsset:_}))};const V=a().memo(R)},oYez:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var n=r("xIFI"),i=r.n(n),o=r("c83x"),a=r("s/Ur"),l=r("qN/k"),s=r("xyHM"),u=r("BfLF"),c=r("ZIGC"),d=r("xDxD"),p=r("S2LQ"),f=r("mAm5"),m=r("mnJM"),v=r("JLYw"),g=i().createElement,y=(0,c._x)((function(){return Promise.resolve().then(r.bind(r,"Gpv1"))}),"ssr");function x(e){var t=e.children,r=e.isFullScreen,n=void 0!==r&&r,i=(0,d.tZ)(),c=(0,d.Fg)().isLight,x=(0,a.useMediaQuery)({query:f.is}),h=(0,m.G)(),b=(0,o.useSelector)((function(e){return e.pageStore.headerConfigs})),P=(0,v.r8)().preferencePanelRef;return g(l.Z,{sx:{width:"100%"}},g(s.Z,{needSeo:!1,origin:b.origin,locale:i,staticUrl:p.Xs,i18n:b.lang,beta:p.jX,isWrapProvider:!1,isLight:c,isFullScreen:n,isDelivery:h,sx:{".header_logo":{},".header_user_info":{},"> a:first-of-type":{order:-2,mr:"-4px",ml:"-16px"},"> a:nth-of-type(3)":n?{paddingRight:"0"}:{paddingRight:"16px"}}},!x&&g(l.Z,{sx:{alignItems:"center",justifyContent:"space-between",order:-1}},t)),g(u.Z,{ref:P}),!x&&g(y,null))}},eyGt:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var n=r("DC7k"),i=r("xIFI"),o=r.n(i),a=r("xDxD"),l=r("WmaC"),s=r("Uu9W"),u=r("qN/k"),c=r("bCmj"),d=r("JLYw"),p=r("lukr"),f=r("S2LQ"),m=r("rDOG"),v=r("SVjJ"),g=o().createElement;const y=function(e){var t=e.isPro,r=void 0===t||t,o=(0,a.Fs)().isMobile,y=(0,a.z4)(),x=(0,n.Z)(y,1)[0],h=(0,a.j2)()||{},b=function(e,t,r){return{root:{color:e?"themeConfig.grey800":"themeConfig.grey50",backgroundColor:e?"#FEF6D8":"t.yellow700",border:"1px solid ".concat(e?"t.yellow100":"#665A28"),boxSizing:"border-box",borderRadius:"4px",position:"relative",px:r?"16px":"12px",marginTop:t?"10px":"0px","& .warning":{marginRight:r?"5px":"10px",color:"t.yellow200",flex:"none",height:"48px"},"& .hint-content":{flex:"auto",mx:"12px","& .hint-item":{lineHeight:"28px",py:"10px",borderBottom:"1px solid #fff",borderBottomColor:"rgba(255, 255, 255, 0.05)","&:last-child":{borderBottom:"none"},"& .description":{marginRight:"8px",wordBreak:"break-word",fontSize:r?"16px":"14px"}}},"& .close":{width:"24px",height:"48px",flex:"none"}},link:{color:e?"t.yellow300":"t.yellow200",fontSize:r?"16px":"14px",whiteSpace:r?"normal":"nowrap"}}}((0,a.Fg)().isLight,o,r),P=(0,i.useState)(null),k=P[0],T=P[1],Z=(0,d.yk)().getI18n,S=(0,a.tZ)(),C=(0,m.useCurrentRoute)().search,I=(0,d.gN)(),w=I.eventType,M=I.contractStatus,A=I.symbol,L=(0,f.b$)(S),O=(0,v.CN)(v.x.GRID_LEARN_URL,{locale:S,symbol:x,activeTab:"workingGrid"});(0,i.useEffect)((function(){"contractInfo"!==w||A!==h.symbol||"CLOSE"!==M?(null===h||void 0===h?void 0:h.settlePlan)>0?T(new Date(h.settlePlan)):T(null):window.location.href="".concat(f.$g,"/").concat(S,"/futures/BTC_USDT").concat(C)}),[h,A,M,w,S,C]);var E=(0,i.useState)(!1),F=E[0],R=E[1],V=(0,d._Y)().data;return(0,i.useEffect)((function(){var e=Array.isArray(V)&&V.some((function(e){return e.symbol===x}));R(e)}),[x,V]),(k||F)&&g(u.Z,{sx:b.root,justifyContent:"space-between",alignItems:"start"},g(l.Z,{className:"warning"}),g("div",{className:"hint-content"},k&&g("div",{className:"hint-item"},g("span",{className:"description"},Z("settle-warning",{symbol:x,date:"".concat((0,p.v)(k,"yyyy-MM-dd hh:mm"))})),g(c.Z,{sx:b.link,href:L},Z("ordertab-link"))),F&&g("div",{className:"hint-item"},g("span",{className:"description"},Z("grid-warning",{defaultValue:"{{symbol}} is in Grid Trading. Manual trading, canceling orders or closing positions, of the symbol terminates Grid Strategy.",symbol:x})),g(c.Z,{sx:b.link,href:O,target:"_blank"},Z("grid-link",{defaultValue:"Learn More"})))),g(s.Z,{className:"close",onClick:function(){T(null),R(!1)}}))}},WpYY:(e,t,r)=>{"use strict";r.d(t,{mA:()=>c,JO:()=>d,ZP:()=>p});var n=r("xIFI"),i=r.n(n),o=r("Ng/A"),a=r("ENiD"),l=r("xDxD"),s=r("S2LQ"),u=i().createElement,c="INDEX_SYMBOL",d=function(e){var t=e.isChina,r=e.cnDoc,n=e.enDoc,i=t?"".concat(s.$g).concat(r):"".concat(s.$g).concat(n);window.location.href=i};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.config,r=void 0===t?{}:t,i=e.sx,s=void 0===i?{}:i,p=(0,l.hd)();return(0,n.useMemo)((function(){var e=r.underlyingType,t=r.cnDoc,n=r.enDoc;return"INDEX"===e?u(o.Z,{className:c,sx:s,onClick:function(e){e.preventDefault(),d({isChina:p,cnDoc:t,enDoc:n})}},u(a.Z,{color:"t.yellow200",size:15,sx:{cursor:"pointer"}})):null}),[r,p,s])}},vQaB:(e,t,r)=>{"use strict";r.r(t),r.d(t,{KLine:()=>w,default:()=>M});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("oAJy"),l=r.n(a),s=r("s+8p"),u=r("ZIGC"),c=r("uzkB"),d=r("e0YP"),p=r("X7tR"),f=r("R9tJ"),m=r("O96I"),v=r("BFBk"),g=r("S2LQ"),y=r("A/Jf"),x=r("MP7m"),h=r("T/zw"),b=r("nXUx"),P=r("JLYw"),k=r("VwJU"),T=r.n(k),Z=r("DC7k"),S=r("HSMY"),C=function(){var e=0;return function(t){var r,i=t.pair,o=t.contractType,a=t.symbol,l=t.interval,s=(0,g.BN)(),u=s.getStreamTradeSnap(a),c=(r=e+=1,function(){return r===e}),d=[];return(0,b.ml)({interval:l,baseUrl:"/fapi/v1/continuousKlines",klineSocket:s.getContinuousKlineStream(i,o,l),tradeSocket:u,bizDataReducers:d,checkIfInSync:c,getDataFn:function(e){var t=e.interval,r=e.pair,i=e.contractType,o=e.bizDataReducers;return function(e,a){var l=!1;function s(e){return u.apply(this,arguments)}function u(){return(u=(0,S.Z)(T().mark((function s(u){var c,d,p,f,m,v,g,y,x,h,b,P,k,S,C=arguments;return T().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c=u.startTime,d=void 0===c?0:c,p=u.endTime,f=void 0===p?0:p,m=C.length>1&&void 0!==C[1]?C[1]:function(){return!1},v=C.length>2&&void 0!==C[2]?C[2]:function(){return!1},g=1e3,y=-1,x=!1,h=d,b=[];case 8:if(-1!==y&&y!==g){s.next=31;break}return s.prev=9,P=-1===y?h:Number(h)+1,k=(0,n.Z)({pair:r,interval:t,contractType:i},0!==f&&{startTime:P,endTime:f,limit:g||1e3}),s.next=15,e(k);case 15:if((S=s.sent)&&0!==S.length){s.next=18;break}return s.abrupt("break",31);case 18:y=S.length,S.forEach((function(e){var t=e.map(Number),r=(0,Z.Z)(t,8),n=r[0],i=r[1],a=r[2],l=r[3],s=r[4],u=r[5],c=r[7];b.push(o.reduce((function(e,t){return t(e)}),{time:n,open:i,high:a,low:l,close:s,volume:u,quantity:c}))})),h=b[b.length-1].time,s.next=29;break;case 23:return s.prev=23,s.t0=s.catch(9),Sentry.captureException(s.t0),x=!0,v(s.t0),s.abrupt("break",31);case 29:s.next=8;break;case 31:x||l||(a(b),m(b));case 32:case"end":return s.stop()}}),s,null,[[9,23]])})))).apply(this,arguments)}return s.abort=function(){l=!0},s}}({interval:l,pair:i,contractType:o,bizDataReducers:d})})}},I=o().createElement;function w(e){var t=e.showTradingView,r=e.namespace,a=e.symbol,v=e.currentProduct,k=(0,i.useMemo)((function(){return l().createInstance({name:r})}),[r]),T=(0,i.useState)(1),Z=T[0],S=T[1],w=(0,i.useState)(1),M=w[0],A=w[1],L=(0,i.useState)(!1),O=L[0],E=L[1],F=(0,i.useState)(!1),R=F[0],V=F[1],D=(0,i.useRef)(!0),N=(0,i.useRef)(null),B=(0,x.sn)(r)(h.Ix),_=(0,x.H9)(r)(h.Hs),z=(0,x.Qy)(r)(h.VW),H=v.pair,q=v.contractType,Y=v.tickSize,U=v.baseAsset,j=v.quoteAsset,W=(0,y.ZK)().getI18n,K=(0,P.db)({symbol:a,tickSize:Y}),J=(0,P.H3)({symbol:a,tickSize:Y}),G=(0,u.Yj)(),Q=G.ask,X=G.grant;(0,i.useEffect)((function(){return _===y.vm.tradingView&&D.current&&(D.current=!1),_===y.vm.tradingView?(V(!1),clearTimeout(N.current),N.current=setTimeout(E,6e5,!0)):_===y.vm.basic?(E(!1),clearTimeout(N.current),N.current=setTimeout(V,6e5,!0)):_===y.vm.depth&&(clearTimeout(N.current),N.current=setTimeout((function(){E(!0),V(!0)}),6e5)),function(){clearTimeout(N.current)}}),[_]);var $=(0,i.useMemo)(C,[]),ee=(0,i.useMemo)(C,[]),te=(0,i.useMemo)((function(){var e=$({pair:H,contractType:q,symbol:a,interval:z});return e.setDisconnectCallback((function(){return S((function(e){return-1*e}))})),e}),[H,q,a,z,$]),re=(0,i.useMemo)((function(){var e=ee({pair:H,contractType:q,symbol:a,interval:z});return e.setDisconnectCallback((function(){return A((function(e){return-1*e}))})),e}),[H,q,a,z,ee]),ne=(0,i.useMemo)((function(){return(0,b.WW)(re,g.sh,!0)}),[]);return(0,i.useEffect)((function(){ne.setDataProvider(re),X()}),[re]),(0,i.useEffect)((function(){ne.setTickSize(Y)}),[Y,ne]),a&&z&&q&&H?I(o().Fragment,null,O?null:I(c.Z,{name:"origin_kline",FallbackComponent:function(e){return(0,d.Z)((0,n.Z)({mainText:W("trd-chart-crash-info",{defaultValue:"Something is wrong with the chart."}),btnText:W("trd-chart-crash-refresh",{defaultValue:"Refresh"})},e))},onError:function(e,t){s.Z.log(JSON.stringify({type:"origin_kline",error:e,componentStack:t}),"custom"),B()}},I(f.Z,{key:Z,symbol:a,interval:z,storage:k,namespace:r,dataProvider:te,quoteAsset:j,baseAsset:U})),D.current&&_!==y.vm.tradingView||!t||R?I(m._,null):I(c.Z,{name:"trading_view",FallbackComponent:function(e){return(0,d.Z)((0,n.Z)({mainText:W("trd-chart-crash-info",{defaultValue:"Something is wrong with the chart."}),btnText:W("trd-chart-crash-refresh",{defaultValue:"Refresh"})},e))},onReset:function(){return k.removeItem("myTradingView")},onError:function(e,t){s.Z.log(JSON.stringify({type:"trading_view",error:e,componentStack:t}),"custom")}},I(p.Z,{key:"".concat(M),symbol:a,interval:z,storage:k,namespace:r,dataFeed:ne,ask:Q,limitOrders:J,positionOrders:K}))):null}const M=(0,v.o)(w)},eLzB:(e,t,r)=>{"use strict";r.d(t,{NP:()=>o,mK:()=>a,gn:()=>l,xM:()=>s,PH:()=>u,oH:()=>c,fb:()=>d,SJ:()=>p,t7:()=>f,dt:()=>m});var n=r("DtyY"),i=r("VOnH"),o={display:"grid",overflowY:"hidden",overflowX:"hidden",width:"100%",height:"100%",gridArea:"content",gridGap:"4px",gridTemplateColumns:"1fr 288px",gridTemplateRows:"1fr 183px 375px",gridTemplateAreas:'\n    "chart orderbook"\n    "chart trades"\n    "userinfo userinfo"'},a=(0,n.Z)((0,n.Z)({},i.O),{},{overflow:"hidden",display:"grid",width:"100vw",minHeight:"100vh",gridGap:"4px",gridTemplateColumns:"minmax(0px, auto) 1fr 280px 288px",gridTemplateRows:"64px 1.1fr auto 289px",gridTemplateAreas:'"header header header header"\n    "chart chart orderbook trades"\n    "chart chart orderform orderform"\n    "assets userinfo orderform orderform"'}),l=function(e){return(0,n.Z)((0,n.Z)({},i.O),{},{gridGap:"4px",gridTemplateColumns:"1fr 1fr 1fr",gridTemplateRows:"64px ".concat("".concat(e?50:0,"px")," minmax(48px, auto) 1.35fr 1.15fr 1fr"),gridTemplateAreas:'"header header header"\n            "notice notice notice"\n            "switch switch switch"\n            "chart chart orderform"\n            "trades orderbook orderform"\n            "userinfo userinfo orderform"',minHeight:1088})},s={width:"100%",height:"100%",bg:"board",gridArea:"switch",alignItems:"center"},u=function(e){return(0,n.Z)((0,n.Z)({},i.O),{},{gridGap:"4px",gridTemplateColumns:"100vw",gridTemplateRows:"64px ".concat("".concat(e?90:0,"px")," auto 405px 1fr 72px"),gridTemplateAreas:'"header"\n            "notice"\n            "switch"\n            "charts"\n            "userinfo"\n            "orderform"',minHeight:930,height:"auto"})},c=(0,n.Z)((0,n.Z)({},i.O),{},{gridTemplateColumns:"100%",gridTemplateRows:"100%",gridTemplateAreas:'"chart"',overflow:"hidden"}),d=(0,n.Z)((0,n.Z)({},i.O),{},{gridTemplateColumns:"100vw",gridTemplateRows:"100vh",gridTemplateAreas:'"content"',overflow:"hidden"}),p={bg:"board",display:"grid",width:"100vw",minHeight:"100vh",height:"100%",gridGap:"4px",gridTemplateColumns:"1fr 288px",gridTemplateRows:"64px minmax(48px, auto) minmax(1041px, 1fr)",gridTemplateAreas:'\n    "header header"\n    "subheader orderform"\n    "content orderform"\n  '},f=function(e){var t=" ".concat(e?50:0,"px");return{bg:"board",display:"grid",width:"100vw",minHeight:"100vh",height:"100%",gridGap:"4px",gridTemplateColumns:"1fr 288px",gridTemplateRows:"64px ".concat(t," auto minmax(993px, 1fr)"),gridTemplateAreas:'\n      "header header"\n      "notice notice"\n      "subheader orderform"\n      "content orderform"\n    '}},m={desktop:"Desktop",tablet:"Tablet",mobile:"Mobile"}},"+cZN":(e,t,r)=>{"use strict";r.d(t,{Hi:()=>U,mf:()=>Y,ij:()=>W,YD:()=>j});var n=r("DC7k"),i=r("DtyY"),o=r("xIFI"),a=r.n(o),l=r("c83x"),s=r("BdPR"),u=r("Ng/A"),c=r("kqcs"),d=r("d9qJ"),p=r("NXRQ"),f=r("9MYF"),m=r("mAm5"),v=r("xDxD"),g=r("qhxP"),y=r("qN/k"),x=r("GSrR"),h=a().createElement;function b(){var e=(0,v.Fg)().isLight,t=(0,o.useState)(!1),r=t[0],n=t[1];return h(y.Z,{sx:{width:"fit-content",minHeight:"40px",position:"fixed",bottom:"140px",right:"24px",zIndex:9999}},h(u.Z,{sx:{display:"grid",placeItems:"center",width:"40px",height:"40px",borderRadius:"50%",color:"primary",backgroundColor:"button.downloadBg",cursor:"pointer",overflow:"hidden",boxShadow:e?"0px 0px 3px rgba(0, 0, 0, 0.05), 0px 1px 10px rgba(0, 0, 0, 0.08)":"0px 0px 1px rgba(20, 21, 26, 0.1), 0px 3px 6px rgba(71, 77, 87, 0.04), 0px 1px 2px rgba(20, 21, 26, 0.04)"},onClick:function(){return n((function(e){return!e}))}},h(x.Z,{sx:{width:"100%",height:"100%"}})),r&&h(u.Z,{sx:{position:"absolute",right:"24px",bottom:"-120px"}},h(g.Z,null)))}var P=r("S2LQ"),k=r("0+oZ"),T=r("eLzB"),Z=r("ChGz"),S=r.n(Z),C=r("cTq7"),I=r("ZODY"),w=r("MQ6g"),M=r("7h1d"),A=r("XvO0"),L=r("MP7m"),O=r("w4z0"),E=(r("/Uiy"),a().createElement),F=function(){var e=(0,v.pq)(),t=e.scale,r=e.setScale;return E(y.Z,{flexBasis:61,flexShrink:0,alignItems:"center",color:"t.grey400",className:"draggableCancel"},E(C.Z,{variant:"slider.slider",min:"0",max:"1000",value:t,ml:"xs",flex:1,onChange:function(e){r(e.target.value)}}))},R=(0,Z.WidthProvider)(S()),V=function(e,t){var r=t.getI18n,n=t.layout,i=t.setLayout,o=t.isMarketChange,a=t.tickSize,l=(t.direction,!(arguments.length>2&&void 0!==arguments[2])||arguments[2]);switch(e.i){case"chart":return E(w.hM,{area:"chart"},E(k.P_,{onRemove:l?function(){return i(n.filter((function(e){return"chart"!==e.i})))}:null,isPro:!0}));case"verticalDepth":return E(w.hM,{area:"depth",title:E(A.Z,null,r("trd-chart-Depth")),titleShrink:1,renderExtra:function(){return E(F,null)},onRemove:l?function(){return i(n.filter((function(e){return"verticalDepth"!==e.i})))}:null},E(M.i,{isDelivery:!1,tickSize:a}));case"orderbook":return E(w.hM,{area:"orderbook",title:r("trd-layout-orderBookTle",{defaultValue:"Order Book"}),onRemove:l?function(){return i(n.filter((function(e){return"orderbook"!==e.i})))}:null},E(k.kc,{hasSize:!0}));case"trades":return E(w.hM,{area:"trades",title:r("trd-layout-tradesTle",{defaultValue:"Trades"}),onRemove:l?function(){return i(n.filter((function(e){return"trades"!==e.i})))}:null},E(k.Eu,null));case"userinfo":return E(k.k3,{area:"userinfo",onRemove:l?function(){return i(n.filter((function(e){return"userinfo"!==e.i})))}:null});case"market":return l?E(w.hM,{title:r("trd-layout-MarketTle",{defaultValue:"Market"}),area:"market",onRemove:function(){return i(n.filter((function(e){return"market"!==e.i})))}},E(k.sN,{isMarketChange:o})):null;default:return null}},D=a().memo((function(e){var t=e.gridProps,r=(0,v.ZK)().getI18n,i=(0,o.useState)(3),l=i[0],s=i[1],c=(0,o.useState)(!1),d=c[0],p=c[1],f=(0,o.useContext)(O.VY),m=f.layout,g=f.setLayout,y=(0,L.xG)((function(e){return[e.disableMouse,e.setDisableMouse]})),x=(0,n.Z)(y,2),h=x[0],b=x[1],P=(0,v.j2)().tickSize,k=(0,v.gm)(),T=function(e,t){return e&&"chart"===t?"disable-mouse":""};return E(a().Fragment,null,m?"rtl"!==k?E(R,{className:"layout",layout:m,cols:16,rowHeight:16,margin:[4,4],autoSize:!0,draggableCancel:".draggableCancel",draggableHandle:".draggableHandle",containerPadding:[0,0],onLayoutChange:function(e){e.forEach((function(e){"market"===e.i&&p(4!==e.w)})),g(e)},onStart:function(){return s((function(e){return e+1}))},onEnd:function(){return s((function(e){return e-1}))},onResizeStart:function(){b(!0)},onResizeStop:function(){b(!1)}},m.map((function(e){return E("div",{className:T(h,e.i),key:e.i,style:{zIndex:"market"===e.i?10:l}},V(e,{getI18n:r,layout:m,setLayout:g,isMarketChange:d,tickSize:P},!0))}))):E(u.Z,{sx:t},m.map((function(e){return V(e,{getI18n:r,layout:m,setLayout:g,isMarketChange:d,tickSize:P,direction:k},!1)}))):null)})),N=function(e){var t=e.gridProps;return P.sk?E(u.Z,{width:"100%",height:"100%",sx:{bg:"board"}},E(I.Z,null)):E(D,{gridProps:t})},B=function(){return E(N,{gridProps:T.NP})},_=function(e){var t=e.isLeastWebSize,r=(0,l.useSelector)(d.makeFullscreen),i=(0,s.Z)("showFavouriteBar",!0),c=(0,n.Z)(i,2),p=c[0],f=c[1],m=(0,s.Z)(P.et,O.di),v=(0,n.Z)(m,2),g=v[0],y=v[1],x=(0,s.Z)(P.VM,O.t3),h=(0,n.Z)(x,2),b=h[0],Z=h[1];return(0,o.useEffect)((function(){b!==O.t3&&(Z(O.t3),y(O.di))}),[b]),r?E(u.Z,{sx:T.oH},E(k.P_,null)):E(O.VY.Provider,{value:{layout:g,setLayout:y,showFavourite:p,setFavourite:f}},E(a().Fragment,null,E(k.e2,null),E(k.SJ,{isLeastWebSize:t,onRemove:function(){f(!1)},showFavourite:p}),E(B,null),E(k.cE,null),E(k.sb,null),E(k.AH,{type:T.dt.desktop})))},z=a().createElement,H=function(){return z(a().Fragment,null,z(k.dh,null),z(k.kc,null),z(k.P_,null),z(k.Eu,{isFullScreen:!0}),z(k.cE,{type:"fullScreen"}),z(k.wK,null),z(k.k3,null))},q=a().createElement,Y=function(e){var t=e.gridProps,r=e.type,n=e.children,o=(0,l.useSelector)(d.makeFullscreen),a=T.fb;r===T.dt.tablet&&(a=T.oH);var s=o?(0,i.Z)((0,i.Z)({},t),a):t;return q(u.Z,{sx:s},n)},U=function(e){var t=e.pageLayout,r=(0,v._n)(),i=(0,v.Pc)(),a=(0,l.useSelector)(d.makeFullscreen),f=(0,v.Fs)().isLeastWebSize,g=(0,v.lr)().radar,y=function(e){var t=e.isChartView,r=e.layout;return t?T.oH:r===P.UW?T.mK:r===P.$f?T.SJ:T.fb}({isChartView:a,layout:t}),x=i.isExistFutureAccount,h=(0,p.KO)().showCoachMark,k=(0,s.Z)("futuresAlreadyView"),Z=(0,n.Z)(k,2),S=Z[0],C=Z[1];return(0,o.useEffect)((function(){S||setTimeout((function(){r&&x&&h("futuresGuide",0),C(!0)}),4e3)}),[r,S,h]),q(c.Z,{mediaQuery:m.c9},q(u.Z,{sx:y},t===P.$f&&q(_,{isLeastWebSize:f}),t===P.UW&&q(H,null),void 0!==g&&q(b,null)))},j=function(){return q(c.Z,{mediaQuery:m.g8},q(Y,{gridProps:(0,T.gn)(),type:T.dt.tablet},q(k.e2,null),q(k.P_,null),q(k.cE,null),q(k.k3,null),q(k.Eu,null),q(f.Z,{sx:T.xM},q(k.RV,null)),q(k.kc,null)),q(k.AH,null))},W=function(){return q(c.Z,{mediaQuery:m.is},q(u.Z,{sx:(0,T.PH)()},q(k.e2,null),q(k.GP,null),q(k.k3,null),q(k.mr,null),q(k.cE,null)),q(k.AH,null))}},"0sxq":(e,t,r)=>{"use strict";r.d(t,{L:()=>c,D:()=>p});var n=r("xIFI"),i=r.n(n),o=r("c83x"),a=r("8/hz"),l=r("Xt0a"),s=i().createElement,u=i().memo((function(e){var t=e.active,r=e.i18nKey,n=void 0===r?"trd-layout-tabPositions":r,i=(0,o.useSelector)(l.makePositionsLength);return s(a.KP,{i18nKey:n,defaultValue:"Positions",active:t,testId:"Positions",suffix:"(".concat(i,")")})})),c=function(e){return s(u,{active:e})},d=i().memo((function(e){var t=e.active,r=e.i18nKey,n=void 0===r?"trd-layout-tabTransactionHistory":r;return s(a.KP,{i18nKey:n,defaultValue:"Transaction History",active:t,testId:"transactionHistory"})})),p=function(e){return s(d,{active:e})}},S72Q:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var n=r("xIFI"),i=r.n(n),o=r("CczZ"),a=r("JLYw"),l=r("IFcF"),s=r("lukr"),u=r("U9Tm"),c=r("IZMz"),d=r("BSl2"),p=function(e){var t=e.symbol,r=e.time,n=e.side,i=e.positionSide,o=void 0===i?"BOTH":i,p=e.price,f=e.qty,m=e.totalQuota,v=e.fee,g=e.feeAsset,y=e.commissionAsset,x=e.realizedProfit,h=(0,u.Vh)()[t],b=h.baseAsset,P=h.marginAsset,k=(0,d.Z)().getI18n,T=(0,a.yk)().getI18n,Z=(0,a.QV)().isCoinUnit,S=(0,l.H)(h,T).shortName;return{nextDate:(0,s.v)(new Date(r),"yyyy-MM-dd hh:mm:ss"),nextPair:S,nextSide:"BUY"===n?{color:"buy",children:k("sideBuy".concat(o),{defaultValue:"Buy"})}:{color:"sell",children:k("sideSell".concat(o),{defaultValue:"Sell"})},nextPrice:(0,c.R)("price",p,h),nextQty:Z?"".concat((0,c.R)("filled",f,h)," ").concat(b):"".concat((0,c.R)("totalQuota",m,h)," ").concat(P),nextFee:"".concat((0,c.R)("fee",v,h),"\n              ").concat(g||y||P),nextProfit:"".concat((0,c.R)("fee",x,h),"\n                ").concat(P)}},f=i().createElement,m=function(){var e="hideOtherSymbol",t=(0,(0,a.yk)().getI18n)(e,{defaultValue:"Hide Other Symbol"});return f(o.Z,{useColumn:p,hideName:e,hideText:t,mHeaderText:t})};const v=i().memo(m)},"0+oZ":(e,t,r)=>{"use strict";r.d(t,{wK:()=>le,P_:()=>ie,mr:()=>me,AH:()=>ve,dh:()=>re,sb:()=>ge,e2:()=>ee,k3:()=>ae,sN:()=>ne,GP:()=>ce,kc:()=>ue,cE:()=>oe,SJ:()=>K,RV:()=>de,Eu:()=>se});var n=r("DtyY"),i=r("yCSn"),o=r("DC7k"),a=r("xIFI"),l=r.n(a),s=r("c83x"),u=r("Ng/A"),c=r("UIN9"),d=r("umcE"),p=r("9MYF"),f=r("MQ6g"),m=r("mAm5"),v=r("xDxD"),g=r("qoOy"),y=r("S2LQ"),x=r("A/Jf"),h=r("jw37"),b=r("SVjJ"),P=r("JLYw"),k=r("YHHJ"),T=r("8/hz"),Z=r("0sxq"),S=l().createElement,C=function(e){var t=e.sx,r=void 0===t?{}:t,i=e.testId,o=e.children;return S(u.Z,{"data-testid":i,sx:(0,n.Z)({width:"100%",height:"100%"},r)},o)},I=(0,h.ck)("afterLogin",(function(){return Promise.all([r.e(834),r.e(639),r.e(215)]).then(r.bind(r,"Ynki"))})),w=(0,h.ck)("afterLogin",(function(){return Promise.all([r.e(834),r.e(639),r.e(215)]).then(r.bind(r,"MJ8i"))})),M=(0,h.ck)("afterLogin",(function(){return Promise.all([r.e(834),r.e(639),r.e(215)]).then(r.bind(r,"4rE+"))})),A=(0,h.ck)("afterLogin",(function(){return Promise.all([r.e(834),r.e(639),r.e(215)]).then(r.bind(r,"S72Q"))})),L=(0,h.ck)("afterLogin",(function(){return Promise.all([r.e(834),r.e(639),r.e(215)]).then(r.bind(r,"cc1t"))})),O=[[Z.L,S(C,{testId:"positionTableInfo",key:"futuresPosition"},S(k.u,null,S(I,null)))],[T.rr,S(C,{testId:"openOrdersTableInfo",key:"futuresOpenOrder"},S(k.u,null,S(w,null)))],[T.S9,S(C,{testId:"orderHistoryTableInfo",key:"futuresOrderHistory"},S(k.u,null,S(M,null)))],[T.Tc,S(C,{testId:"tradeHistoryTableInfo",key:"futuresTradeHistory"},S(k.u,null,S(A,null)))],[Z.D,S(C,{testId:"transactionHistoryTableInfo",key:"futuresTransactionHistory"},S(k.u,null,S(L,null)))]],E=r("TYUO"),F=r("F16+"),R=r("zeYv"),V=r("YtaA"),D=l().createElement,N=(0,h._x)((function(){return Promise.all([r.e(834),r.e(639),r.e(666)]).then(r.bind(r,"R2BT"))}),"ssr"),B=(0,h._x)((function(){return Promise.all([r.e(834),r.e(639),r.e(666)]).then(r.bind(r,"7q4T"))}),"ssr"),_=(0,h._x)((function(){return Promise.all([r.e(834),r.e(639),r.e(666)]).then(r.bind(r,"0mzz"))}),"ssr"),z=(0,h._x)((function(){return Promise.all([r.e(834),r.e(639),r.e(666)]).then(r.bind(r,"JHPq"))}),"ssr"),H=(0,h.SA)((function(){return Promise.all([r.e(834),r.e(567),r.e(639)]).then(r.bind(r,"vQaB"))}),"chart"),q=(0,h._x)((function(){return Promise.all([r.e(834),r.e(639),r.e(666)]).then(r.bind(r,"oYez"))}),"ssr"),Y=(0,h.SA)((function(){return Promise.all([r.e(834),r.e(567),r.e(639),r.e(898),r.e(789)]).then(r.bind(r,"Wl2L"))}),"csr"),U=(0,h.SA)((function(){return Promise.all([r.e(834),r.e(567),r.e(639),r.e(898),r.e(789)]).then(r.bind(r,"P4AV"))}),"csr"),j=(0,h.SA)((function(){return Promise.all([r.e(834),r.e(567),r.e(639),r.e(898),r.e(789)]).then(r.bind(r,"PrbQ"))}),"csr"),W=(0,h.ck)("afterLogin",(function(){return Promise.all([r.e(834),r.e(639),r.e(215)]).then(r.bind(r,"eyGt"))})),K=function(e){var t=e.isLeastWebSize,r=e.onRemove,n=e.showFavourite;return D(t?pe:fe,{onRemove:r,showFavourite:n})},J=(0,h._x)((function(){return Promise.all([r.e(834),r.e(639),r.e(666)]).then(r.bind(r,"oYez"))}),"ssr"),G=(0,h.SA)((function(){return Promise.all([r.e(834),r.e(567),r.e(639),r.e(898),r.e(789)]).then(r.bind(r,"bdJC"))}),"csr"),Q=(0,h.ck)("afterLogin",(function(){return Promise.all([r.e(834),r.e(639),r.e(215)]).then(r.bind(r,"88R+"))})),X=(0,h.ck)("afterLogin",(function(){return Promise.all([r.e(834),r.e(639),r.e(215)]).then(r.bind(r,"B9al"))})),$=(0,h.SA)((function(){return Promise.all([r.e(834),r.e(567),r.e(639),r.e(898),r.e(789)]).then(r.bind(r,"4UzO"))}),"csr"),ee=function(){return D(c.Z,{theme:(0,v.Fg)().isLight?g.Wb:g.$_},D(p.Z,{sx:{width:"100%",height:"100%",bg:"background",gridArea:"header",zIndex:10}},D(J,null)))},te=(0,h.ck)("afterLogin",(function(){return Promise.all([r.e(834),r.e(639),r.e(215)]).then(r.bind(r,"TYUO"))})),re=function(){var e=(0,s.useSelector)((function(e){return e.setting.color}))===y.Pe?g.$_:g.JR;return D(c.Z,{theme:e},D(p.Z,{sx:{width:"100%",height:"100%",bg:"headerBg",gridArea:"header",zIndex:10},name:"header"},D(q,{isFullScreen:!0},D(z,{type:"futures"},D(N,null),D(V.Z,{sx:{mr:"16px"}})))))},ne=function(e){var t=e.isMarketChange;return D(p.Z,{sx:{width:"100%",height:"100%",bg:"componentBg",gridArea:"market"},name:"market"},D($,{isGridWidget:!0,isMarketChange:t}))},ie=function(e){var t=e.onRemove,r=e.isElectronPro,n=void 0!==r&&r,i=e.isPro,a=(0,v.j2)(),l=(0,v.z4)(),s=(0,o.Z)(l,1)[0];return D(p.Z,{sx:{width:"100%",height:"100%",bg:"componentBg",gridArea:"chart"},name:"chart"},D(H,{onRemove:t,isElectronPro:n,isPro:i,namespace:x.sy,isDelivery:!1,currentProduct:a,symbol:s}))},oe=function(e){return"fullScreen"===e.type?D(p.Z,{sx:{width:"100%",position:"relative",zIndex:1,height:"100%",bg:"orderformBg",gridArea:"orderform"}},D(W,{isPro:!1}),D(te,{horizontal:!0})):D(p.Z,{sx:{width:"100%",overflowY:["initial","auto"],overflowX:["visible","hidden"],position:["fixed","relative"],zIndex:1,bottom:["0"],height:["72px","100%"],bg:"orderformBg",gridArea:"orderform"}},D(te,null))},ae=function(e){var t=e.onRemove,r=(0,P.yk)().getI18n,n=(0,v._n)(),o=(0,a.useMemo)((function(){return n&&b.Jg?[].concat((0,i.Z)(O),[[r("tradeHistory-APIKeyLabel",{defaultValue:"API Key"}),D(X,{key:"APIKeyPanel"})]]):O}),[r,n]);return D(f.oZ,{area:"userinfo",onRemove:t,panes:o})},le=function(){var e=(0,E.useOrderFormProps)(),t=(0,v._n)(),r=(0,a.useState)(!1),i=r[0],o=r[1],l=(0,m.ZK)(),s=l.getI18n,u=l.i18n.language,c=(0,P.yk)().getI18n,f=(0,a.useMemo)((function(){return(0,n.Z)((0,n.Z)({futUrlConfig:{}},e),{},{getI18n:s,getFutI18n:c,locale:u})}),[u,e,s,c]);return t?D(p.Z,{sx:{width:i?"260px":"24px",position:"relative",zIndex:1,height:"100%",bg:"componentBg",gridArea:"assets"}},i?D(F.UE.Provider,{value:f},D("div",{style:{padding:"12px 16px"}},D(R.Z,{handleShowAssets:function(){return o(!1)}}))):D("div",{style:{height:"100%",width:"24px",paddingTop:"16px",paddingLeft:"2px"}},D(d.Z,{color:"t.grey500",size:20,onClick:function(){return o(!0)},sx:{cursor:"pointer"}}))):null},se=function(e){var t=e.withMb,r=(0,s.useDispatch)(),n=(0,a.useCallback)((function(e){var t=e.side,n=void 0===t?"":t,i=e.price;r.orderForm.updateState({priceQty:{side:n.toUpperCase(),price:i}})}),[r.orderForm]);return D(p.Z,{sx:{width:"100%",height:"100%",pb:t?16:0,bg:"componentBg",gridArea:"trades"}},D(U,{onColumnClick:n}))},ue=function(){return D(p.Z,{sx:{width:"100%",height:"100%",bg:"componentBg",gridArea:"orderbook",position:"relative"},py:"xs",contentSxProps:{zIndex:1},name:"orderbook"},D(Y,null))},ce=function(){return D(p.Z,{sx:{width:"100%",height:"100%",bg:"componentBg",gridArea:"switch",py:"8px"},name:"switch"},D(B,{type:"futures"},D(N,null)),D(W,null))},de=function(){return D(p.Z,{sx:{width:"100%",height:"100%",gridArea:"subheader",bg:"componentBg",pt:"12px",pb:"12px"},name:"subheader"},D(u.Z,null,D(_,{type:"futures"},D(N,null),D(V.Z,{sx:{mr:"16px"}}))),D(W,null))},pe=function(e){var t=e.showFavourite,r=e.onRemove;return D(p.Z,{sx:{width:"100%",height:"100%",gridArea:"subheader"},name:"subheader"},D(u.Z,null,t&&D(j,{onRemove:r}),D(_,{type:"futures",sx:{bg:"componentBg",pt:"12px",pb:"12px"}},D(N,null),D(V.Z,{sx:{mr:"16px"}}))),D(W,null))},fe=function(e){var t=e.showFavourite,r=e.onRemove;return D(p.Z,{sx:{width:"100%",height:"100%",gridArea:"subheader"},name:"subheader"},D(u.Z,null,t&&D(j,{onRemove:r}),D(z,{type:"futures",sx:{bg:"componentBg",py:"5px"}},D(N,null),D(V.Z,{sx:{mr:"16px"}}))),D(W,null))},me=function(){var e=(0,m.ZK)().getI18n,t=(0,v.j2)(),r=(0,v.z4)(),n=(0,o.Z)(r,1)[0];return D(f.oZ,{area:"charts",panes:[[e("chartTle",{defaultValue:"Chart"}),D(H,{key:"chart",currentProduct:t,symbol:n,namespace:x.sy,isDelivery:!1})],[e("orderBookTle",{defaultValue:"Order Book"}),D(u.Z,{py:"xs",width:"100%",height:"100%",key:"orderbook"},D(Y,{key:"orderBook"}))],[e("tradesTle",{defaultValue:"Trades"}),D(U,{key:"trades"})]]})},ve=function(e){var t=e.type;return D(Q,{type:t})},ge=function(){return D(G,null)}},w4z0:(e,t,r)=>{"use strict";r.d(t,{t3:()=>d,di:()=>p,mZ:()=>f,VY:()=>m,tv:()=>v,y3:()=>g,ys:()=>y,HC:()=>x});var n=r("yCSn"),i=r("xIFI"),o={i:"market",x:0,y:0,w:4,h:27,minW:4,minH:6,getTitle:function(e){return e("trd-layout-MarketTle")},setting:!1},a={i:"chart",x:0,y:0,w:12,h:27,minW:6,minH:6,getTitle:function(e){return e("trd-layout-chartTle")}},l={i:"verticalDepth",x:11,y:27,w:16,h:9,minW:2,minH:2,getTitle:function(e){return e("trd-chart-Depth")}},s={i:"orderbook",x:13,y:0,w:4,h:18,minW:3,minH:7,getTitle:function(e){return e("trd-layout-orderBookTle")}},u={i:"trades",x:13,y:6,w:4,h:9,minW:3,minH:3,getTitle:function(e){return e("trd-layout-tradesTle")}},c={i:"userinfo",x:0,y:27,w:16,h:25,minW:6,minH:7,getTitle:function(e){return"".concat(e("trd-layout-tabPosition")," & ").concat(e("trd-layout-tabOpenOrder")," ")}},d=2,p=[a,s,u,c],f=[o,a,l,s,u,c],m=(0,i.createContext)({layout:f,setLayout:function(){},showFavourite:!0,setFavourite:function(){}}),v=function(e){var t=e.find((function(e){return"chart"===e.i}));return t&&4===t.x&&0===t.y&&8===t.w&&(t.x=0,t.w=12),e.filter((function(e){return"market"!==e.i}))},g=function(e){var t=e.find((function(e){return"chart"===e.i})),r=e.find((function(e){return"chart"!==e.i&&0===e.y}));return t&&t.x===a.x&&t.y===a.y&&(t.x=4,t.w===a.w&&r&&(t.w=8)),[].concat((0,n.Z)(e),[o])},y=function(e){var t=e.find((function(e){return"userinfo"===e.i}));return t&&t.y===c.y&&(t.y=28),e.filter((function(e){return"verticalDepth"!==e.i}))},x=function(e){var t=e.find((function(e){return"userinfo"===e.i}));return t&&t.y===c.y&&(t.y=38),[].concat((0,n.Z)(e),[l])}},NuDr:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r("xIFI"),i=r.n(n),o=r("c83x"),a=r("uI99"),l=r("MNY0"),s=r("S2LQ"),u=i().createElement;const c=function(){var e=(0,s.BN)();return u(l.Z,{prefix:"Binance Futures",stream:e})};var d=r("+cZN"),p=i().createElement,f=i().memo((function(){var e=(0,o.useSelector)((function(e){return e.layout.pageLayout})),t=(0,n.useCallback)((function(){a.Z.emit("cancelReplyMessage")}),[]);return p("div",{onClick:t},p(d.ij,null),p(d.YD,null),p(d.Hi,{pageLayout:e}),p(c,null))}))},p0Rn:(e,t,r)=>{"use strict";r.d(t,{O$:()=>n,QN:()=>i,I_:()=>o,_C:()=>a,Z4:()=>l,ng:()=>s,$3:()=>u,Jw:()=>c,X3:()=>d});var n=40,i="all",o="FAVORITES",a="DELIVERY",l="PERPETUAL",s="ZONES",u=[o,l,a,s],c=function(){return!0},d={first:{flex:"100 10 0",justifyContent:"flex-start",minWidth:"100px"},second:{flex:"60 6 0",minWidth:"63px",justifyContent:"flex-start"},secondHeader:{flex:"63 6 0",minWidth:"63px",justifyContent:"flex-start"},third:{flex:"60 7 0",minWidth:"63px",justifyContent:"flex-end"}}},"W+B2":(e,t,r)=>{"use strict";r.d(t,{Pj:()=>y,Ow:()=>x,e:()=>b});var n=r("yCSn"),i=r("DtyY"),o=r("xIFI"),a=r("c83x"),l=r("XL6Z"),s=(r("9ijX"),r("byRa")),u=r("xDxD"),c=r("S2LQ"),d=r("ZIGC"),p=r("mEsB"),f=r("C50S"),m=r("JLYw"),v=r("p0Rn"),g=[0,Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],y=function(){var e=(0,u.AM)(),t=(0,u.j2)(),r=(0,u.vK)(),n=(0,u.hP)(),o=(0,p.r)(e),a=o.baseTicker,d=o.marketTabs,m=function(){var e=(0,l.s)((0,c.BN)()),t=e.update,r=e.tickers,n=(0,l.s)((0,c.RU)()).tickers;return{update:t,tickers:(0,i.Z)((0,i.Z)({},r),n)}}(),v=m.update,g=m.tickers,y=(0,p.A)(a,g),x=(0,s.sf)();return{loading:r,update:[n,v],marketTabs:d,nextTickers:Object.keys(y).reduce((function(e,t){var r=y[t];if(!(null===r||void 0===r?void 0:r.isDelivery)){var n=(0,f.$)(x,r);r.usdVolume=n}return e.push(r),e}),[]),activeSymbol:t}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.Z4,t=(0,m.ux)(),r=t.favorites,n=(0,o.useState)(e),i=n[0],a=n[1],l=(0,o.useState)(""),s=l[0],u=l[1],c=(0,o.useMemo)((function(){return(0,d.JA)(i,v.I_)?function(e){var t=e.isDelivery?r.indexOf("".concat(e.pair,"-").concat(e.contractType)):r.indexOf(e.symbol);return t>-1&&(e.favoritesIndex=r.length-t),~t}:v.Jw}),[i,r]),p=(0,o.useCallback)((function(e){var t=e||{},r=t.isDelivery,n=t.symbol,o=t.tags,a=void 0===o?[]:o,l=new RegExp((0,d.hr)(s),"i").test(n);if(s)return l;switch(i){case v.QN:return l;case v.Z4:return!r;case v._C:return r;case v.I_:return c(e);default:return Array.isArray(a)&&a.includes(i)}}),[c,i,s]);return{tabState:{activeTab:i,switchTab:a},searchState:{keyword:s,search:u},filterFunc:p}},h=[],b=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,s=(0,a.useSelector)((function(e){return e.futureMarket.sortInfo})),u=(0,m.yk)(),c=u.getI18n,d=(0,o.useMemo)((function(){var o=l===v.Z4;return[(0,i.Z)({text:c("Contract",{defaultValue:"Contracts"}),key:"symbol"},v.X3.first)].concat((0,n.Z)(t?r?[(0,i.Z)({text:c("lastPrice",{defaultValue:"Last Price"}),key:"lastPrice"},v.X3.secondHeader)]:[]:[(0,i.Z)({text:c("lastPrice",{defaultValue:"Last Price"}),key:"lastPrice"},v.X3.secondHeader)]),[e?(0,i.Z)({text:c("24h"),key:"difference"},v.X3.third):(0,i.Z)({text:c("vol"),key:o?"usdVolume":"quoteVolume"},v.X3.third)])}),[l,c,e,t,r]),p=(0,o.useMemo)((function(){var e=s.index,t=s.desc;if(!t||!d[e])switch(l){case v.I_:return function(e,t){return Number(t.favoritesIndex||0)-Number(e.favoritesIndex||0)};case v._C:return function(e,t){if(h.includes(t.baseAsset)||h.push(t.baseAsset),h.includes(e.baseAsset)||h.push(e.baseAsset),e.isDelivery^t.isDelivery)return l===v._C?-1:1;var r=h.indexOf(e.baseAsset)-h.indexOf(t.baseAsset);return 0===r&&(r=e.symbol.localeCompare(t.symbol)),r};default:return function(e,t){}}var r=d[e].key,n=g[t];return function(e,i){var o=n,a=n;return 1===t&&(o=e[r],a=i[r]),2===t&&(o=i[r],a=e[r]),e.isDelivery^i.isDelivery?l===v._C?-1:1:"symbol"===r&&0!==t?o.localeCompare(a):+o-+a}}),[s]);return{sortHeaders:d,sortFunc:p}}},"4UzO":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var n=r("DC7k"),i=r("xIFI"),o=r.n(i),a=r("c83x"),l=r("qN/k"),s=r("Ng/A"),u=r("xDxD"),c=r("qM4g"),d=r("s5XO"),p=r("nOFq"),f=r("Xe5/"),m=r("BdPR"),v=r("xmLA"),g=r("mnJM"),y=r("W+B2");const x=(0,i.createContext)({activeTab:"",keyword:"",favorite:{values:[],setValues:function(){return!1}}});var h=r("MXyZ"),b=r("v424"),P=r("ZIGC"),k=r("yCSn"),T=r("I78S"),Z=r("ASW3"),S=r("bCmj"),C=r("NEkv"),I=r("BbQq"),w=r("rDOG"),M=r("S2LQ"),A=r("IFcF"),L=r("HFO+"),O=r("JLYw"),E=r("WpYY"),F=r("p0Rn"),R=o().createElement,V={fontSize:0,color:"t.grey600",fontWeight:"normal"},D=function(e){return R(T.Z,Object.assign({__css:V},e))},N=function(e){var t=e.symbol,r=e.symbolDisplay,n=e.lastPrice,s=e.difference,c=void 0===s?"--":s,d=e.quoteVolume,p=e.bigThan,f=e.tickSize,m=void 0===f?1e-7:f,v=e.pair,g=e.contractType,y=e.noFavorite,h=e.noFiat,b=e.changeSymbol,T=e.lastFlag,N=e.isGridWidget,B=e.isDefaultChange,_=e.needBreakline,z=e.active,H=e.openShotCut,q=e.usdVolume,Y=(0,u.Kn)()[t]||{},U=p?"buy":"sell",j=(0,u.U1)(m),W=(0,u.tZ)()||"en",K=(0,u.ve)(j).format,J=(0,u.ve)(0).format,G=(0,O.ux)(),Q=G.favorites,X=G.setFavorite,$=(0,w.useCurrentRoute)().pathname.split("/").slice(0,-1),ee=(0,i.useContext)(x).activeTab,te=(0,a.useSelector)((function(e){return e.futureMarket.radioWord})),re=!!e.isDelivery,ne="change"===te,ie=(0,O.yk)().getI18n,oe=(0,i.useMemo)((function(){return T>0?"buy":T<0?"sell":"t.grey600"}),[T]),ae=re?Q.indexOf("".concat(v,"-").concat(g)):Q.indexOf(t),le=(0,i.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),X(re?"".concat(v,"-").concat(g):t,ae,Q)}),[X,re,v,g,t,ae,Q]),se=(0,i.useMemo)((function(){var e,t="";re?($[2]="delivery",t=[].concat((0,k.Z)($),[(0,P.eB)({pair:v,contractType:g})]).join("/")):($[2]="futures",t=g!==M.Yp.PERPETUAL?[].concat((0,k.Z)($),[(0,P.eB)({pair:v,contractType:g})]).join("/"):[].concat((0,k.Z)($),[null===r||void 0===r||null===(e=r.split("/"))||void 0===e?void 0:e.join("_")]).join("/"));return t}),[re,$,v,g,r]),ue=ee===F.I_,ce=(0,i.useCallback)((function(e){var r,n;if(null===(r=(n=e.target).closest)||void 0===r?void 0:r.call(n,".".concat(E.mA))){var i=Y.cnDoc,o=Y.enDoc;(0,E.JO)({lng:W,cnDoc:i,enDoc:o})}else e.metaKey||e.ctrlKey||(e.preventDefault(),b&&b(t,re,g))}),[Y,W,b,t,re,g]),de=(0,i.useMemo)((function(){var t=(0,A.H)(e,ie),r=t.symbol,n=t.contractTypeI18n,i=t.deliveryDateFormat;return R(o().Fragment,null,"".concat(r),"\xa0",R("div",{style:{width:_?"100%":"auto"}},n," ",i))}),[ie,e,_]),pe=(0,i.useMemo)((function(){return H&&z}),[z,H]);return R(Z.ZP,{enablePortal:!0,trigger:"hover",className:"futuresMarketColumnWrap",placement:"right",sx:pe?{bg:"marketColumn.hover"}:{},overlay:h?null:R(l.Z,{variant:"layouts.toolTipsright",sx:{alignItems:"center"}},R(S.Z,{href:se,target:"_blank",sx:{color:"background",ml:"2px"}},R(C.Z,{size:10,sx:{transform:"scale(1.6)"}})))},R("a",{href:se,className:"content",onClick:ce},R("div",{className:"item",style:F.X3.first},y?null:R("div",{className:"favorite ".concat(ae>-1?"primary":""),onClick:le},R(I.Z,{size:12})),R(D,{sx:{flex:1,color:"t.third",display:"flex",lineHeight:1,flexWrap:"wrap",alignItems:"center"}},de,R(E.ZP,{config:Y}))),!N||B?R("div",{className:"item",style:F.X3.second},R(D,{sx:{color:oe}},(re&&ue?"$":"")+K(n))):null,R("div",{className:"item",style:F.X3.third},R(L.XI,{sx:{color:ne?U:"t.grey600"},__css:V},ne?"".concat(c,"%"):"".concat(J(ee===F.Z4?q:d))))))};const B=o().memo(N);var _=o().createElement;const z=(0,i.memo)((function(e){var t=e.name;return _(l.Z,{variant:"columns.space",sx:{px:"sm",height:F.O$,"&::after":{content:'""',position:"absolute",width:"2px",background:"#F0B90B",borderRadius:"2px",height:"7px",left:"11px",top:"calc(50% - 3px)"}}},_(T.Z,{__css:{fontSize:0,color:"t.grey600",fontWeight:"normal"},sx:{color:"#CACED3"}},t.toUpperCase()))}));var H=o().createElement,q=function(e,t){var r=t[e];return"string"===typeof r?r:"".concat(r.symbolDisplay,"-").concat(r.symbol)};const Y=(0,i.memo)((function(e){var t=e.filterFunc,r=e.sortFunc,n=e.noFavorite,l=e.noFiat,s=e.changeSymbol,c=e.isGridWidget,d=e.isDefaultChange,p=e.needBreakline,f=e.openShotCut,m=e.onKeyDownCallback,v=(0,y.Pj)(),g=v.nextTickers,k=v.loading,T=(0,i.useContext)(x),Z=T.activeTab,S=T.keyword,C=(0,u.iB)(),I=(0,i.useMemo)((function(){var e=[];return g.forEach((function(t){var r=t.contractVal,n=t.volume,i=t.symbol,o=t.isDelivery;if((0,P.cZ)(t)){var a;if(o)t.quoteVolume=Number(r)*Number(n||(null===(a=C[i])||void 0===a?void 0:a.volume)||0);e.push(t)}})),e}),[C,g]),w=function(e){var t=e.data,r=e.activeTab,n=e.keyword,o=(0,a.useSelector)((function(e){return e.futureMarket.sortInfo})),l=o.index,s=o.desc,u=!n&&r===F._C&&(null===l||0===l);return(0,i.useMemo)((function(){if(u){var e={},r=[];return t.forEach((function(t){e[t.baseAsset]||(e[t.baseAsset]=!0,r.push({baseAsset:t.baseAsset,isDelivery:t.isDelivery,symbol:2===s?"".concat(t.baseAsset,"zzz"):t.baseAsset,isPushItem:!0}))})),t.concat(r)}return t}),[u,t,s])}({data:(0,i.useMemo)((function(){return I.filter(t)}),[I,t]),activeTab:Z,keyword:S}),M=(0,i.useMemo)((function(){return w.sort(r)}),[w,r]),A=(0,h.D)((function(e){return(null===e||void 0===e?void 0:e.isPushItem)?H(z,{name:null===e||void 0===e?void 0:e.baseAsset}):H(o().Fragment,null,H(B,Object.assign({},e,{noFavorite:n,noFiat:l,changeSymbol:s,isGridWidget:c,isDefaultChange:d,needBreakline:p,openShotCut:f})))}));return H(b.Z,{variant:"market",dataSource:M,loading:k,itemElement:A,itemKey:q,itemHeight:F.O$,openShotCut:f,onKeyDownCallback:m})}));var U=r("gLnL"),j=r("QZto"),W=r("Qo4k"),K=o().createElement,J=function(e){var t=e.activeTab,r=e.switchTabWithReset,n=(0,O.yk)().getI18n,o=(0,u.ZK)("","futures-ui").getI18n,a=(0,u.FV)(),s=(0,i.useMemo)((function(){return[F.ng].concat((0,k.Z)(a))}),[a]),c=(0,i.useMemo)((function(){var e;return e={},(0,U.Z)(e,F._C,n("inverseFutures-13",{defaultValue:"Inverse"})),(0,U.Z)(e,F.Z4,n("usdtFutures-13",{defaultValue:"USDT"})),e}),[n]);return K(l.Z,{sx:{flexWrap:"wrap"}},F.$3.map((function(e){if(e===F.I_)return K(j.Z,{key:e,onClick:function(){return r(e)},active:e===t},K(I.Z,{size:14}));if(e===F.ng){var n=s.indexOf(t)>-1;return K(W.o,{key:e,type:e,active:n,activeTab:t,values:s,switchTab:r,getI18n:o,toolTipPrefix:"futures-trade-market-tooltip-",contentPrefix:"futures-trade-market-text-",sx:{ml:"8px"}})}return K(j.Z,{key:e,active:e===t,onClick:function(){r(e)},sx:{alignSelf:"center",minWidth:"auto",bg:e===t?"dropdown.bg3":"transparent",marginLeft:"2px",padding:"4px"}},c[e])})))};const G=(0,i.memo)(J);var Q=o().createElement,X=function(e){var t=e.name,r=e.noFavorite,o=e.noFiat,h=e.isGridWidget,b=void 0!==h&&h,P=e.isMarketChange,k=void 0!==P&&P,T=e.electronUpdateTabs,Z=e.openShotCut,S=e.selectedCallback,C=e.changeSymbolCb,I=void 0===C?null:C,w=(0,a.useDispatch)(),M=(0,u.Pv)(),A=(0,g.G)(),L=(0,a.useSelector)((function(e){return e.futureMarket.sortInfo})),O=(0,a.useSelector)((function(e){return e.futureMarket.radioWord})),E=(0,i.useRef)(),R=(0,i.useState)(!1),V=R[0],D=R[1],N=(0,i.useState)(!0),B=N[0],_=N[1],z=(0,u.dc)(),H=(0,v.d0)();H=I||H;var q=(0,m.Z)("futuresSort"),U=(0,n.Z)(q,2),j=U[0],W=U[1];(0,i.useEffect)((function(){D(E.current.offsetWidth>256),_(E.current.offsetWidth<400)}),[k]);var K=(0,i.useCallback)((function(e,r){H({isBlank:A!==r,stateSymbol:e,isDeliveryColumn:r,electronUpdateTabs:T,name:t}),S&&S()}),[H,t,A,S,T]),J=(0,y.Ow)(z),X=J.tabState,$=X.activeTab,ee=X.switchTab,te=J.searchState,re=te.keyword,ne=te.search,ie=J.favoritesState,oe=J.filterFunc,ae=(0,y.e)("change"===O,b,V,$),le=ae.sortFunc,se=ae.sortHeaders,ue=(0,i.useCallback)((function(e){return w.futureMarket.updateState({sortInfo:e})}),[w.futureMarket]),ce=(0,i.useCallback)((function(e){w.userProfile.save({key:"futuresMarket",value:e}),ee(e)}),[w.userProfile,ee]),de=(0,i.useCallback)((function(e){return w.futureMarket.updateState({radioWord:e})}),[w.futureMarket]);(0,i.useEffect)((function(){j?ue(j):$===F.I_?ue({index:null,desc:0}):ue({index:2,desc:2})}),[$,j,ue]);return Q(l.Z,{__css:{flexDirection:"column",height:"100%"},ref:E},Q(x.Provider,{value:{favorite:ie,activeTab:$,keyword:re}},Q(s.Z,{onClick:function(e){return e.stopPropagation()}},Q(l.Z,{sx:{justifyContent:"space-between",pt:"8px",pb:"4px",px:["5px","5px","sm"],flexWrap:"wrap"}},Q(G,{switchTabWithReset:ce,activeTab:$,isGridWidget:b})),Q(l.Z,{sx:{pb:"4px",px:["5px","5px","sm"],flexWrap:"wrap"}},Q(d.Z,{value:re,search:ne,openShotCut:Z,sx:{flex:1,minWidth:"80px",mb:"4px",mt:"4px"}}),Q(c.Z,{sx:{pb:"4px",pt:"4px",ml:0},value:O,change:de})),Q(p.Z,{headers:se,sortInfo:L,switchSort:re?void 0:ue,setSort:W,sx:{px:"sm"}})),Q(Y,{filterFunc:oe,sortFunc:le,noFavorite:r,noFiat:o,changeSymbol:K,isGridWidget:b,isDefaultChange:V,needBreakline:B,openShotCut:Z,onKeyDownCallback:function(e){var t=e.data,r=e.metaKey,n=e.ctrlKey,i=(0,v.co)(t.symbol,M,t.isDelivery);(0,f._)({data:t,path:i,metaKey:r,ctrlKey:n,deliveryPath:A}),setTimeout((function(){S&&S()}),100)}})))};const $=o().memo(X)},B1kl:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r("XP5A"),i=r("xIFI"),o=r.n(i),a=r("sCfP"),l=r("vQaB"),s=r("BFBk"),u=o().createElement;const c=(0,s.o)((function(e){var t=e.isDelivery,r=(0,n.Z)(e,["isDelivery"]);return u(t?a.KLine:l.KLine,r)}))},ImOM:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r("xIFI");const i=(0,n.createContext)({symbol:"",changeSymbol:function(e){console.info(e)},getFormatSize:function(){return{ts:2,mi:2}},actionCancel:function(){return!1},actionStrategyModal:function(){return!1},checked:!0,handleHideOtherPairs:function(){return!0},emptyText:"You have no open orders."})},"8orI":(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r("xIFI"),i=r.n(n),o=r("jzeX"),a=r("qN/k"),l=r("ImOM"),s=r("oFLp"),u=i().createElement,c=function(){var e=(0,s.ZK)().getI18n,t=(0,n.useContext)(l.Z).actionCancel;return u(o.Z,{sx:{bg:"background",p:0}},[{text:e("actionAll",{defaultValue:"All"}),message:e("actionAllMsg",{defaultValue:"Are you sure you want to cancel all?"})},{text:e("actionLimit",{defaultValue:"Limit"}),message:e("actionLimitMsg",{defaultValue:"Are you sure to cancel all Limit orders?"})},{text:e("actionStopLimit",{defaultValue:"Stop-Limit"}),message:e("actionStopLimitMsg",{defaultValue:"Are you sure to cancel all Stop-Limit orders?"})}].map((function(e,r){return u(a.Z,{key:r,variant:"filters.button",sx:{whiteSpace:"nowrap"},onClick:function(){t(r,e.message)}},e.text)})))};const d=i().memo(c)},NVTT:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var n=r("Ng/A"),i=r("xIFI"),o=r.n(i),a=r("GaKI"),l=r("ZODY"),s=r("8+a1"),u=r("t67M"),c=r("S2LQ"),d=r("JLYw"),p=r("ImOM"),f=r("qN/k"),m=r("ASW3"),v=r("I78S"),g=r("xRl8"),y=r("oFLp"),x=o().createElement,h=function(e){var t=e.hasData,r=e.headers,o=void 0===r?[]:r,a=(0,i.useContext)(p.Z),l=a.actionCancel,s=a.getColumnStyle,u=(0,y.ZK)().getI18n,c=function(){l(0,u("actionAllMsg",{defaultValue:"Are you sure you want to cancel all?"}))};return x(f.Z,{variant:"girdList.columnBox",sx:{py:"xs",pt:1}},o.map((function(e,r){var i=e.text,o=e.overlay;return x(f.Z,{sx:{alignItems:"center"},"data-area":"left",style:s(r),key:r},o?x(m.ZP,{key:r,trigger:"hover",placement:"bottom-end",enablePortal:!0,overlay:t?o:null,sx:{userSelect:"none",display:"flex"}},x(n.Z,{sx:{display:"flex",height:"24px",pl:2,bg:"t.grey700",alignItems:"center",justifyContent:"center",borderRadius:"2px"}},x(v.Z,{title:i,variant:"layouts.ellipsis",sx:{fontSize:0,color:"t.primary",display:8===r?"inline":"inline-flex",alignItems:"center",justifyContent:"flex-start",cursor:"pointer"},onClick:t?c:void 0},i),x(g.Z,{size:20,sx:{color:"t.primary",cursor:"pointer",display:"inline-block"}}))):x(v.Z,{title:i,variant:"layouts.ellipsis",sx:{fontSize:0,color:"t.secondary",display:8===r?"inline":"inline-flex",alignItems:"center",justifyContent:"flex-start",":hover":{color:"t.third"}},onClick:o&&t?c:void 0},i))})))};const b=o().memo(h);var P=r("DtyY"),k=r("XP5A"),T=o().createElement,Z=function(e){return T(v.Z,e)},S=function(e){var t=e.strategyId,r=e.strategyType,n=e.actionStrategyModal,i=e.style,o=e.getI18n,a=e.order;return("OTOCO"===r||"OTO"===r)&&t?T(v.Z,{sx:{color:"t.yellow200",cursor:"pointer",":hover":{color:"t.yellow300"}},style:i,"data-area":"left",onClick:function(){return n(a)}},o("strategyView",{defaultValue:"View"})):T(v.Z,{style:i,"data-area":"left"},"--")},C=function(e){var t=e.symbol,r=e.orderId,n=e.side,o=e.reduceOnly,a=e.positionSide,l=void 0===a?"BOTH":a,s=e.closePosition,u=e.strategyId,c=e.strategyType,d=(0,y.ZK)().getI18n,m=(0,i.useContext)(p.Z),g=m.actionCancel,x=m.changeSymbol,h=m.actionStrategyModal,b=m.getFormatSize,k=m.useColumn,C=m.getColumnStyle,I="BUY"===n?{color:"buy",children:d("sideBuy".concat(l),{defaultValue:"Buy"})}:{color:"sell",children:d("sideSell".concat(l),{defaultValue:"Sell"})},w=k((0,P.Z)((0,P.Z)({},e),{},{getFormatSize:b})),M=function(){return o?d("YES",{defaultValue:"YES"}):d("NO",{defaultValue:"NO"})},A=d("closePosition",{defaultValue:"Close Positioin"}),L=w.nextDate,O=w.nextPair,E=void 0===O?"":O,F=w.nextPrice,R=w.nextAmount,V=w.nextType,D=w.nextFilled,N=w.nextTriggerConditions,B=0;return T(f.Z,{variant:"columns.space",sx:{color:"table.color",fontSize:[0],"> div":{fontWeight:"normal"}}},T(v.Z,{"data-area":"left",style:C(B++),title:L,variant:"layouts.ellipsis",sx:{color:"table.timeColor"}},L),T(v.Z,{"data-area":"left",style:C(B++),title:E,variant:"layouts.ellipsis",sx:{cursor:"pointer"},onClick:function(){x({stateSymbol:t})}},E),T(v.Z,{"data-area":"left",style:C(B++),title:V,variant:"layouts.ellipsis"},V),T(v.Z,Object.assign({"data-area":"left"},I,{style:C(B++),title:I.children,variant:"layouts.ellipsis"})),T(Z,{"data-area":"left",style:C(B++),title:F,variant:"layouts.ellipsis"},F),T(Z,{"data-area":"left",style:C(B++),title:R,variant:"layouts.ellipsis"},s?A:R),T(Z,{"data-area":"left",style:C(B++),title:D,variant:"layouts.ellipsis"},D),T(Z,{"data-area":"left",style:C(B++),title:M(),variant:"layouts.ellipsis"},M()),T(Z,{"data-area":"left",style:C(B++),title:N,variant:"layouts.ellipsis"},N),T(S,{strategyId:u,strategyType:c,actionStrategyModal:h,style:C(B++),getI18n:d,order:e}),T(v.Z,{sx:{color:"t.yellow200",cursor:"pointer",":hover":{color:"t.yellow300"}},style:C(B++),"data-area":"left",onClick:function(){g((function(e){var t=e.orderId;return r===t}))}},d("cancel",{defaultValue:"Cancel"})),T(v.Z,{style:C(B++)}))};const I=o().memo(C);var w=o().createElement,M=[{title:"",dataIndex:"",hideTitle:!0,render:function(e,t){return w(I,t)}}],A=function(e){var t=e.loading,r=e.actionLoading,n=e.data,i=void 0===n?[]:n,o=e.updateTime,a=(0,k.Z)(e,["loading","actionLoading","data","updateTime"]);return w(u.Z,Object.assign({},a,{variant:"girdList.wrapperBase",loading:t,actionLoading:r,resetDeps:[o],listGridProps:{data:i,columns:M},getListGridConfig:function(e){var t=e.width,r=(0,k.Z)(e,["width"]);return(0,P.Z)((0,P.Z)({},r),{},{collapseHeight:32,width:Math.max(t,y.ih)})}}))};const L=o().memo(A);var O=r("wVdo"),E=r("xDxD"),F=r("FXY6"),R=o().createElement;const V=function(){var e=(0,E.ke)(),t=(0,O.C)()===c.UW,r=(0,d.yk)().getI18n,n=(0,d.yk)().getI18n,o=(0,i.useContext)(p.Z),a=o.handleHideOtherPairs,l=o.checked,s=e?"hideOtherSymbol":"hidePairs",u=e?n(s,{defaultValue:"Hide Other Symbol"}):r(s,{defaultValue:"Hide Other Pairs"});return R(f.Z,{sx:{alignItems:"center",justifyContent:"flex-end",position:"absolute",top:"-36px",right:t?"5px":"28px",zIndex:"999",height:"40px"}},t?R(m.ZP,{trigger:"click",placement:"bottom-end",enablePortal:!0,overlay:R(f.Z,{sx:{bg:"t.grey700",py:"4px",px:"8px",alignItems:"center",fontSize:[1,0],color:"t.thead",cursor:["auto","pointer"],lineHeight:["30px","24px"]},onClick:function(){return a(!l)}},R(F.ZP,{name:s,size:[18,16],checked:l,onChange:function(){return!1}}),R(v.Z,{sx:{lineHeight:1}},u))},R(g.Z,{size:20,sx:{color:"t.primary",cursor:"pointer",display:"inline-block"}})):R(f.Z,{sx:{alignItems:"center",fontSize:[1,0],color:"t.thead",cursor:["auto","pointer"],lineHeight:["30px","24px"]},onClick:function(){return a(!l)}},R(F.ZP,{name:s,size:[18,16],checked:l,onChange:function(){return!1}}),R(v.Z,{sx:{userSelect:"none"}},u)))};var D=o().createElement;const N=function(e){var t=e.items,r=e.headers,f=void 0===r?[]:r,m=e.girdLoading,v=e.outLoading,g=e.updateTime,y=o().useContext(p.Z).emptyText,x=(0,d.C3)(),h=document.getElementById("futuresOrder");return(0,i.useEffect)((function(){h&&x===c.UW&&(h.scrollLeft=300)}),[x,h]),D(s.Z,{sx:{position:"relative",px:0,pt:"xs"}},D(l.Z,{inner:!0,fullScreen:!0,show:v}),D(V,null),D(a.Z,null,(function(e){var r=e.width,i=e.height;return D(n.Z,{variant:"layouts.scrollX",id:"futuresOrder",sx:{height:i,width:r,pl:"xs"}},D(b,{hasData:(null===t||void 0===t?void 0:t.length)>0,headers:f}),D(L,{sx:{position:"relative"},data:t,loading:m,updateTime:g,autoSizerProps:{width:Math.max(r-8,0),height:Math.max(i-32,0),extend:!0},emptyNode:D(u.p,null,y)}))})))}},igM5:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>L});var n=r("xIFI"),i=r.n(n),o=r("ZODY"),a=r("8+a1"),l=r("t67M"),s=r("ImOM"),u=r("qN/k"),c=r("FXY6"),d=r("I78S"),p=r("Ng/A"),f=r("oFLp"),m=r("JLYw"),v=i().createElement,g=function(e){var t=e.hasData,r=(0,f.ZK)().getI18n,i=(0,m.yk)().getI18n,o=(0,n.useContext)(s.Z),a=o.handleHideOtherPairs,l=o.checked,g=o.actionCancel;return v(u.Z,{variant:"girdList.columnBox",sx:{py:"xs",pr:0}},v(u.Z,{sx:{alignItems:"center",fontSize:[1,0],color:"t.thead",cursor:["auto","pointer"],lineHeight:["30px","24px"]},onClick:function(){return a(!l)}},v(c.ZP,{name:"hideOtherSymbol",size:[18,16],checked:l,onChange:function(){return!1}}),v(d.Z,{sx:{userSelect:"none"}},i("hideOtherSymbol"))),v(p.Z,{sx:{alignItems:"center",fontSize:1}},v(p.Z,{variant:"buttons.control",sx:{color:t?"t.yellow200":"t.third",py:2,borderRadius:"2px",bg:"t.grey700",cursor:t?"pointer":"auto"},onClick:t?function(){g(0,r("actionAllMsg",{defaultValue:"Are you sure you want to cancel all?"}))}:void 0},r("action",{defaultValue:"Cancel All"}))))};const y=i().memo(g);var x=r("DtyY"),h=r("Vns9"),b=i().createElement,P=function(e){return b(d.Z,Object.assign({__css:{color:"t.third"}},e))},k=function(e){return b(d.Z,Object.assign({__css:{fontSize:"14px"}},e))},T=function(e){return b(u.Z,Object.assign({variant:"columns.spaceLine",__css:{fontSize:1}},e))},Z=function(e){var t=e.strategyId,r=e.strategyType,n=e.actionStrategyModal,i=e.getI18n,o=e.order,a=e.expand,l=("OTOCO"===r||"OTO"===r)&&t;return b(T,{sx:{display:a?"flex":"none"}},b(P,null,i("strategy",{defaultValue:"Strategy"})),l?b(p.Z,{sx:{color:"t.yellow200",borderBottom:"solid 1px",borderColor:"t.yellow200"},onClick:function(){return n(o)}},i("strategyView",{defaultValue:"View"})):b(d.Z,null,"--"))};const S=function(e){var t=(0,n.useRef)(null),r=e.orderId,i=e.side,o=e.closePosition,a=e.strategyId,l=e.strategyType,c=(0,f.ZK)().getI18n,m=(0,n.useContext)(s.Z),v=m.actionCancel,g=m.actionStrategyModal,y=m.getFormatSize,S=m.useColumn,C=(0,n.useState)(!1),I=C[0],w=C[1];t.current!==r&&(t.current&&w(!1),t.current=r);var M=S((0,x.Z)((0,x.Z)({},e),{},{getFormatSize:y})),A=M.nextDate,L=M.nextPair,O=M.nextPrice,E=M.nextAmount,F=M.nextType,R=M.nextFilled,V=M.nextTriggerConditions,D=c("closePosition",{defaultValue:"Close Positioin"});return b(p.Z,{sx:{color:"t.primary",py:"xs"}},b(T,null,b(u.Z,{sx:{alignItems:"center"}},b(d.Z,{sx:{fontWeight:"500",fontSize:"14px"}},L),b(d.Z,{sx:{color:"BUY"===i?"buy":"sell",mx:"xs"}},"BUY"===i?"".concat(c("sideBuy",{defaultValue:"Buy"})," ").concat(F):"".concat(c("sideSell",{defaultValue:"Sell"})," ").concat(F)),b(k,{sx:{fontSize:1}},R)),b(p.Z,{sx:{color:"t.yellow200",borderBottom:"solid 1px",borderColor:"t.yellow200"},onClick:function(){v((function(e){var t=e.orderId;return r===t}))}},c("cancelOrder",{defaultValue:"Cancel"}))),[{label:c("amount",{defaultValue:"Amount"}),value:o?D:E},{label:c("price",{defaultValue:"Price"}),value:O},{label:c("triggerConditions",{defaultValue:"Trigger Conditions"}),value:V},{label:c("date",{defaultValue:"Date"}),value:A}].slice(0,I?10:3).map((function(e){var t=e.label,r=e.value;return b(T,{key:t},b(P,null,t),b(k,null,r))})),b(Z,{strategyId:a,strategyType:l,actionStrategyModal:g,getI18n:c,order:e,expand:I}),b(p.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",mt:1,mb:2},onClick:function(){return w(!I)}},b(d.Z,{sx:{fontSize:1,color:"t.secondary"}},I?c("less",{defaultValue:"Less"}):c("more",{defaultValue:"More"})),b(h.Z,{size:18,color:"icon",sx:{transform:I?"rotate(180deg)":null,transition:"transform 100ms"}})))};var C=i().createElement,I=function(e){var t=e.data,r=void 0===t?[]:t,n=e.loading,o=e.emptyNode,a=void 0===o?C(l.p,null):o;return n||r&&r.length?C(i().Fragment,null,r.map((function(e,t){return C(S,Object.assign({key:t},e))}))):C(i().Fragment,null,a)};const w=i().memo(I);var M=i().createElement,A=function(e){var t=e.outLoading,r=e.items,n=e.girdLoading,u=i().useContext(s.Z).emptyText;return M(a.Z,{sx:{px:0}},M(o.Z,{fullScreen:!0,show:t}),M(y,{hasData:(null===r||void 0===r?void 0:r.length)>0}),M(w,{data:r,loading:n,emptyNode:M(l.p,null,u)}))};const L=i().memo(A)},fUx1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>q});var n=r("DtyY"),i=r("VwJU"),o=r.n(i),a=r("HSMY"),l=r("Ng/A"),s=r("qN/k"),u=r("I78S"),c=r("0pZZ"),d=r("YKSe"),p=r("J6Qs"),f=r("U4qo"),m=r("3TKe"),v=r("ZODY"),g=r("U4Ym"),y=r("E+oP"),x=r.n(y),h=r("xDxD"),b=r("xIFI"),P=r.n(b),k=r("oFLp"),T=r("t26l"),Z=P().createElement,S=function(e){var t=e.mainOrder,r=e.subOrders,n=void 0===r?[]:r,i=(0,h.Fg)().isLight,o=2===(null===n||void 0===n?void 0:n.length);return Z(P().Fragment,null,t,Z("svg",{width:"100%",height:"100%",viewBox:"0 0 504 54",fill:"none",style:{margin:"0 auto -5px"},xmlns:"http://www.w3.org/2000/svg"},o?Z(P().Fragment,null,Z("path",{d:"M252 0 L252 27 L122 27 L122 54",style:{stroke:i?"#F5F5F5":"#474D57",strokeWidth:"3px"}}),Z("path",{d:"M252 27 L382 27 L382 54",style:{stroke:i?"#F5F5F5":"#474D57",strokeWidth:"3px"}})):Z("path",{d:"M252 0 L252 54",style:{stroke:i?"#F5F5F5":"#474D57",strokeWidth:"3px"}})),Z(s.Z,{justifyContent:o?"space-between":"center"},n))},C=function(e){var t=e.mainOrder,r=e.subOrders,n=30,i=2===r.length?380:190,o=(0,h.Fg)().isLight;return Z(P().Fragment,null,t,Z(s.Z,{justifyContent:"start"},Z("svg",{width:"30",height:"100%",fill:"none",viewBox:"0 0 ".concat(n," ").concat(i),xmlns:"http://www.w3.org/2000/svg"},2===(null===r||void 0===r?void 0:r.length)?Z(P().Fragment,null,Z("path",{d:"M".concat(15," 0 L").concat(15," ").concat(i/4," L").concat(n," ").concat(i/4),style:{stroke:o?"#F5F5F5":"#474D57",strokeWidth:"4px"}}),Z("path",{d:"M".concat(15," ").concat(i/4," L").concat(15," ").concat(3*i/4," L").concat(n," ").concat(3*i/4),style:{stroke:o?"#F5F5F5":"#474D57",strokeWidth:"4px"}})):Z("path",{d:"M".concat(15," 0 L").concat(15," ").concat(i/2," L").concat(n," ").concat(i/2),style:{stroke:o?"#F5F5F5":"#474D57",strokeWidth:"4px"}})),Z(l.Z,{sx:{width:"calc(100% - 30px)"}},r)))};const I=function(e){return Z(T.Z,null,(function(t){var r=t.isMobile;return Z(r?C:S,e)}))};var w=r("gLnL"),M=r("OKEt"),A=r("LVI2"),L=r("BP6G"),O=r("SVjJ"),E=r("ImOM"),F=P().createElement,R=O.gu.LAST_PRICE,V=O.gu.MARK_PRICE,D=O.PH.MARKET_TYPE,N=function(e){var t;return null===e||void 0===e||null===(t=e.toLowerCase())||void 0===t?void 0:t.replace(/_/g,"-")},B=function(e){var t=e.order,r=void 0===t?{}:t,n=(0,k.ZK)().getI18n,i=n("Market-Price",{defaultValue:"Market Price"}),o=r.type,a=r.status,c=r.price,d=(0,(0,b.useContext)(E.Z).useStrategyOrder)(r),p=d.amount,f=d.sideProps;return F(l.Z,{sx:{mx:"auto",p:"sm",width:["100%","240px"],borderRadius:"2px",fontSize:"14px",lineHeight:"16px",bg:"dialog.panelBg"}},F(s.Z,{justifyContent:"space-between",mb:"sm",lineHeight:"19px"},F(u.Z,{fontSize:2,color:"t.primary"},n("type-".concat(o),{defaultValue:o})),F(u.Z,{fontSize:0,color:"t.third"},n("status-".concat(N(a)),{defaultValue:a}))),F(s.Z,{mt:"xs"},F(u.Z,{width:"50%",color:"t.third",fontSize:1},n("side",{defaultValue:"Side"})),F(u.Z,Object.assign({width:"50%",fontSize:1},f))),F(s.Z,{mt:"xs"},F(u.Z,{width:"50%",color:"t.third",fontSize:1},n("amount",{defaultValue:"Amount"})),F(u.Z,{width:"50%",fontSize:1,color:"t.primary"},p)),F(s.Z,{mt:"xs"},F(u.Z,{width:"50%",color:"t.third",fontSize:1},n("price",{defaultValue:"Price"})),F(u.Z,{width:"50%",fontSize:1,color:"t.primary"},o===D?i:c)))},_=function(e){var t,r=e.step,i=e.tickSizePrecision,o=e.order,a=void 0===o?{}:o,c=e.changeOrder,d=e.index,p=(0,k.ZK)().getI18n,f=a.type,m=a.status,v=a.stopPrice,g=a.workingType,y=(0,(0,b.useContext)(E.Z).useStrategyOrder)(a),x=y.amount,h=y.sideProps,P=p("Last-Price",{defaultValue:"Last Price"}),T=p("Mark-Price",{defaultValue:"Mark Price"}),Z="PENDING"===m,S=(t={},(0,w.Z)(t,R,P),(0,w.Z)(t,V,T),t),C=(0,b.useCallback)((function(e){(0,A._p)(e,(function(e){return c((0,n.Z)((0,n.Z)({},a),{},{stopPrice:e}),d)}),"",i)}),[c,a,i,d]),I=(0,b.useCallback)((function(e){return c((0,n.Z)((0,n.Z)({},a),{},{workingType:e}),d)}),[c,a,d]);return F(l.Z,{sx:{p:"sm",width:["100%","240px"],borderRadius:"2px",fontSize:"14px",lineHeight:"16px",mt:["sm",0],bg:"dialog.panelBg"}},F(s.Z,{justifyContent:"space-between",mb:"sm",lineHeight:"19px"},F(u.Z,{fontSize:2,color:"t.primary"},p("type-".concat(f),{defaultValue:f})),F(u.Z,{fontSize:0,color:"t.third"},p("status-".concat(N(m)),{defaultValue:m}))),F(s.Z,{mt:"xs"},F(u.Z,{width:"50%",color:"t.third",fontSize:1},p("side",{defaultValue:"Side"})),F(u.Z,Object.assign({width:"50%",fontSize:1},h))),F(s.Z,{mt:"xs"},F(u.Z,{width:"50%",color:"t.third",fontSize:1},p("amount",{defaultValue:"Amount"})),F(u.Z,{width:"50%",fontSize:1,color:"t.primary"},x)),F(s.Z,{mt:"xs",alignItems:"center"},F(u.Z,{width:"50%",color:"t.third",fontSize:1},p("triggerPrice",{defaultValue:"Trigger Price"})),Z?F(M.Z,{type:"number",variant:"outline",step:r,value:v,onChange:C,boxProps:{sx:{width:"50%",height:"24px",mt:0,pl:[0,"minor"],fontSize:"12px",borderColor:"dialog.panelInputBorder"}}}):F(u.Z,{width:"50%",fontSize:1,color:"t.primary"},v)),F(s.Z,{mt:"xs",alignItems:"center"},F(u.Z,{width:"50%",color:"t.third",fontSize:1},p("trigger",{defaultValue:"Trigger"})),Z?F(L.Z,{sx:{minWidth:"50%",height:"24px",minHeight:"24px",py:"3px",borderColor:"dialog.panelInputBorder"},workingType:g,changeWorkingType:I}):F(u.Z,{width:"50%",fontSize:1,color:"t.primary"},S[g])))},z=P().createElement;var H=function(e){var t=(0,k.ZK)(),r=t.getI18n,i=t.i18n.language,y=e.isMobile,P=e.visible,T=e.order,Z=void 0===T?{}:T,S=e.onClose,C=(0,h.iB)()[Z.symbol]||{},w=(0,g.p)(C.tickSize),M=C.tickSize,A=!x()(Z)&&P,L=(0,b.useState)(!1),O=L[0],E=L[1],F=(0,b.useState)({}),R=F[0],V=F[1],D=(0,b.useState)({}),N=D[0],H=D[1],q=(0,b.useState)([]),Y=q[0],U=q[1],j=(0,b.useCallback)((function(e,t){var r=Y.map((function(r,n){return n===t?e:r}));U(r)}),[Y]),W=(0,b.useCallback)((0,a.Z)(o().mark((function e(){var t,r,n,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Z.strategyId,r=Z.strategyType,E(!0),e.next=4,(0,f.Su)({strategyId:t,strategyType:r});case 4:n=e.sent,E(!1),i=n.success,a=n.data,i&&a&&(V(a),H(a.subOrders[0]),"OTOCO"===a.strategyType?U(a.subOrders.slice(1,3)):U(a.subOrders.slice(1,2)));case 8:case"end":return e.stop()}}),e)}))),[Z]);(0,b.useEffect)((function(){A?W():(V({}),H({}),U([]))}),[W,A]);var K=(0,h.YT)().setMessageInfo,J=(0,b.useCallback)(function(){var e=(0,a.Z)(o().mark((function e(t){var n,a,l,s,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete t.price,delete t.status,e.next=4,(0,f.ZX)(t,{language:i});case 4:n=e.sent,a=n.success,l=n.message,u=(s=!a)?"error":"success",(c=s?l||"failed":r("update-strategy-suc"))&&K({message:c,variant:u});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,i,K]),G=(0,b.useCallback)((function(){var e=R.strategyType,t=[];Y.forEach((function(r,i){(function(e,t){return Number(t.stopPrice)!==Number(e.stopPrice)||t.workingType!==e.workingType})(r,R.subOrders[i+1])&&t.push(J((0,n.Z)((0,n.Z)({},r),{},{strategyType:e})))})),Promise.all(t).finally(S)}),[S,R,Y,J]);return z(d.Z,{open:A,onCloseIconClick:S,sx:{width:["100%","552px"],height:["100%","auto"]},contentSx:{height:["100%","auto"],p:0}},z(l.Z,{as:"h3",__css:{borderBottom:["none","2px solid"],borderBottomColor:["transparent","primary"],px:"md",pt:["50px","sm"],pb:["6px","sm"],textAlign:["unset","center"],fontSize:["xp","md"],lineHeight:"20px",fontWeight:"medium"}},r("strategyOrder",{defaultValue:"Strategy Order"})),z(l.Z,{sx:{height:"calc(100% - 76px)",overflowY:"auto",p:"md"}},z(l.Z,{sx:{minHeight:"400px"}},z(v.Z,{inner:!0,show:O}),z(I,{mainOrder:z(B,{order:N}),subOrders:Y.map((function(e,t){return z(_,{key:e.strategySubId,index:t,tickSizePrecision:w,step:M,order:e,changeOrder:j})}))}),z(s.Z,{alignItems:"start",mt:"md",color:"t.third"},z(m.Z,{size:32,mr:"xs",height:"0.5em"}),z(u.Z,{fontSize:"14px",lineHeight:"16px"},"OTOCO"===R.strategyType?r("strategyOrderTip"):r("strategyOrderTip2")))),y&&z(l.Z,{sx:{width:"100%",height:"64px"}}),z(p.y,{sx:{bg:"popupBg"}},z(s.Z,null,z(c.Z,{flex:"auto",variant:"outline",sx:{boxShadow:"outlineBtnShadow",color:"t.primary",mr:"md",height:"40px"},onClick:S},r("cancel",{defaultValue:"Cancel"})),z(c.Z,{flex:"auto",onClick:G,height:"40px"},r("confirm",{defaultValue:"Confirm"}))))))};const q=P().memo(H)},oFLp:(e,t,r)=>{"use strict";r.d(t,{ZK:()=>i,VE:()=>a,ih:()=>l});var n=r("QsMz"),i=function(e){return(0,n.Z)("trd-openOrder",e)},o=[90,170,70,65,80,100,100,120,120,40,90,1],a=function(e){var t=o[e]||0;return{width:"".concat(t,"px"),minWidth:"".concat(t,"px"),flexGrow:1}},l=o.reduce((function(e,t){return e+t}),0)},OuKK:(e,t,r)=>{"use strict";r.d(t,{$H:()=>k,WM:()=>O,OR:()=>S,aM:()=>p,n$:()=>E});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("c83x"),l=r("KMN6"),s=r("6GdN"),u=r("xDxD"),c=r("ZIGC"),d=r("S2LQ"),p=function(e){var t=(0,a.useDispatch)(),r=(0,u.E)(),o=(0,c.lx)(e),p=e===d.xy.FUTURES?(0,l.r)():(0,s.y)(o),f=p.openOrders,m=p.onRefresh,v=p.loading,g=p.updateTime;return(0,i.useEffect)((function(){if(f){var e={loading:v,updateTime:g,orders:f};t.orders.mergeState({type:"openOrder.init",payload:e})}else t.orders.mergeState({type:"openOrder.merge",payload:{loading:v}})}),[g,v,f,t.orders]),(0,n.Z)((0,n.Z)({},r),{},{onRefresh:m})},f=r("XL6Z"),m=r("wwGh"),v=r("wz6d"),g=r("IFcF"),y=r("lukr"),x=r("SVjJ"),h=r("jSf8"),b=r("87Ep"),P=r("oFLp"),k=(r("JLYw"),function(e){var t,r,n=e.symbol,i=e.insertTime,o=e.side,a=e.origType,l=e.type,s=e.price,c=e.origQty,p=e.executedQty,k=e.stopPrice,T=e.workingType,Z=e.activatePrice,S=e.priceRate,C=e.getFormatSize,I=(0,P.ZK)().getI18n,w=(0,b.yk)().getI18n,M=(0,h.s7)(n).getFormatedQuantity,A=(0,u.iB)()[n]||{},L=A.pricePrecision,O=A.quantityPrecision,E=((0,f.s)((0,d.l6)(!0))||{}).tickers,F=((void 0===E?{}:E)[n]||{}).lastPrice,R=C(n).ts,V=(0,m.i)({side:o,type:a}),D=Number(k)||Number(s),N=(0,v.uf)(D,R),B=V&&D&&N?"".concat(I(null===(t=x.HZ[T])||void 0===t?void 0:t.replace(/\s/g,"-"),{defaultValue:x.HZ[T]}),"  ").concat([V,N].join(" ")):d.GR;Number(Z)&&(B="".concat(w("activationPrice",{defaultValue:"Activation Price"})," ").concat(["BUY"===o?"<=":">=",+Z].join(" "))),r=parseFloat(s)?(0,v.uf)(s,L):d.GR,Number(S)&&(r="".concat(w("callbackRate",{defaultValue:"Callback Rate"})," = ").concat(S,"%"));var _=x.cQ.includes(a)?k:l===x.PH.TRAILING_STOP_MARKET?Z||F:s,z=(0,g.H)(A,w).shortName;return{nextDate:(0,y.v)(new Date(i),"yyyy-MM-dd hh:mm:ss"),nextPair:z,nextType:I("type-".concat(l),{defaultValue:l}),nextPrice:r,nextAmount:M({quantity:c,price:_,qtyPrecision:O}),nextFilled:M({quantity:p,price:_,qtyPrecision:O}),nextTriggerConditions:B}}),T=r("8orI"),Z=o().createElement,S=function(){var e=(0,P.ZK)().getI18n;return(0,i.useMemo)((function(){return[{text:e("time",{defaultValue:"Time"})},{text:e("symbol",{defaultValue:"Symbol"})},{text:e("type",{defaultValue:"Type"})},{text:e("side",{defaultValue:"Side"})},{text:e("price",{defaultValue:"Price"})},{text:e("amount",{defaultValue:"Amount"})},{text:e("filled",{defaultValue:"Filled"})},{text:e("reduceOnly",{defaultValue:"Reduce Only"})},{text:e("triggerConditions",{defaultValue:"Trigger"})},{text:e("strategy",{defaultValue:"Strategy"})},{text:e("action",{defaultValue:"Cancel All"}),overlay:Z(T.Z,null)},{text:""}]}),[e])},C=r("VwJU"),I=r.n(C),w=r("HSMY"),M=r("DC7k"),A=r("s7cC"),L=r("IFtV"),O=function(){var e=function(e){return e.batch?(0,L.O9)({type:e.type,symbol:e.symbol}):(0,L.Ce)((0,n.Z)({},e))},t=(0,A.Z)((0,w.Z)(I().mark((function t(){var r,n=arguments;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},t.abrupt("return",e(r));case 2:case"end":return t.stop()}}),t)}))),[]),r=(0,M.Z)(t,2);return{loading:r[0].loading,delOpenOrders:r[1]}};function E(e){var t=e.symbol,r=e.side,n=e.quantity,i=e.type,o=e.price,a=e.stopPrice,l=e.avgPrice,s=e.closePosition,c=(0,P.ZK)().getI18n,d=(0,h.s7)(t).getFormatedQuantity,p=(0,u.iB)()[t]||{},f=p.quantityPrecision,m=p.close,v=c("closePosition",{defaultValue:"Close Positioin"}),g=d({quantity:n,price:x.cQ.includes(i)?a:i===x.PH.MARKET_TYPE?l||m:o,qtyPrecision:f});return{amount:s?v:g,sideProps:"BUY"===r?{color:"buy",children:c("sideBuy",{defaultValue:"Buy"})}:{color:"sell",children:c("sideSell",{defaultValue:"Sell"})}}}},MJ8i:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("DC7k"),l=r("xIFI"),s=r.n(l),u=r("c83x"),c=r("hS9T"),d=r("E+oP"),p=r.n(d),f=r("t26l"),m=r("jvPh"),v=r("xDxD"),g=r("IpTK"),y=r("jw37"),x=r("JLYw"),h=r("oFLp"),b=r("ImOM"),P=r("OuKK"),k=r("fUx1"),T=s().createElement,Z=(0,y.ck)("mobile",(function(){return Promise.all([r.e(834),r.e(639),r.e(40)]).then(r.bind(r,"igM5"))})),S=(0,y.ck)("pc",(function(){return Promise.all([r.e(834),r.e(639),r.e(18)]).then(r.bind(r,"NVTT"))})),C=[null,"LIMIT","STOP"],I=function(){var e=(0,P.OR)(),t=(0,v.z4)(),r=(0,a.Z)(t,1)[0],n=(0,u.useDispatch)(),d=(0,h.ZK)().getI18n,y=(0,l.useState)(""),I=y[0],w=y[1],M=(0,l.useState)({}),A=M[0],L=M[1],O=(0,v.uT)(),E=(0,a.Z)(O,1)[0],F=(0,v.dd)().getFormatSize,R=(0,P.aM)(E),V=R.preOrders,D=R.loading,N=R.updateTime,B=(0,P.WM)(),_=B.loading,z=B.delOpenOrders,H=(0,v.VX)().isOrderHideOtherPairs,q=(0,l.useState)(H),Y=q[0],U=q[1],j=(0,l.useCallback)((function(e){U(e),n.userProfile.save({key:"isOrderHideOtherPairs",value:e})}),[n.userProfile]),W=(0,g.Nm)(V,Y,r,!0),K=(0,v.YT)().setMessageInfo,J=(0,x.d0)(),G=(0,l.useCallback)(function(){var e=(0,o.Z)(i().mark((function e(t){var n,o,a,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="number"===typeof t?{batch:!0,type:C[t],symbol:Y?r:null}:W.filter((function(e){return t(e)}))[0],p()(n)){e.next=8;break}return e.next=4,z(n);case 4:o=e.sent,a=o.success,l=o.message,a||K(new Error(l));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Y,r,W,z,K]),Q=function(e){var t=e.message,r=e.onOk,n=e.okText,i=e.cancelText,o=(0,c.u_)({content:T(m.Z,{message:t,onOk:function(){r(),o()},onCancel:function(){return o()},okText:n,cancelText:i}),sx:{bg:"commonDialog.bg",color:"t.primary"}}).close},X=(0,l.useCallback)(function(){var e=(0,o.Z)(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r?Q({message:r,onOk:function(){return G(t)},cancelText:d("dialog-cancel",{defaultValue:"Cancel"}),okText:d("dialog-confirm",{defaultValue:"Confirm"})}):G(t);case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[G,d]),$=!W.length&&D,ee=!$&&(D||_),te=(0,l.useCallback)((function(){w(""),L({})}),[w,L]),re=(0,l.useCallback)((function(e){w("STRATEGY_ORDER"),L(e)}),[w,L]),ne=d("nodata",{defaultValue:"You have no open orders."}),ie=(0,l.useMemo)((function(){return{symbol:r,emptyText:ne,actionCancel:X,actionStrategyModal:re,getFormatSize:F,changeSymbol:J,handleHideOtherPairs:j,checked:Y,useColumn:P.$H,useStrategyOrder:P.n$,getColumnStyle:h.VE}}),[X,re,J,Y,ne,F,j,r]);return T(b.Z.Provider,{value:ie},c.Sq,T(f.Z,null,(function(t){var r=t.isMobile;return T(s().Fragment,null,r?T(Z,{items:W,girdLoading:$,outLoading:D||_}):T(S,{items:W,headers:e,girdLoading:$,outLoading:ee,updateTime:N}),T(k.Z,{isMobile:r,visible:"STRATEGY_ORDER"===I,order:A,onClose:te}))})))};const w=s().memo(I)},edhh:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n=r("xIFI"),i=r.n(n),o=r("MEJg"),a=r("S2LQ"),l=r("XCrG"),s=r("Z4JP"),u=r("yVMw"),c=r("xDxD"),d=r("DC7k"),p=r("JLYw"),f=i().createElement,m=i().memo((function(e){var t=e.markPrice,r=(0,c.mC)().formatTk;return f(i().Fragment,null,r(t))}));const v=function(){var e,t=(0,c.z4)(),r=(0,d.Z)(t,1)[0],n=null===(e=(0,p.CE)()[r])||void 0===e?void 0:e.markPrice;return n?f(m,{markPrice:n}):null};var g=function(e){return e.reduce((function(e,t){return t.sum=e+Number((null===t||void 0===t?void 0:t.amount)||0),t.sum}),0)},y=i().createElement;const x=function(e){var t=e.getHeaderConfig,r=e.getRenderRowConfig,i=(0,n.useContext)(s.Z),d=i.qty,f=i.asks,m=i.bids,x=i.symbol,h=i.baseAsset,b=i.quoteAsset,P=(0,c.ke)(),k=(0,c.j2)(),T=(0,p.yk)().getI18n,Z=(0,l.k)((0,a.l6)(P)).tickProps,S=(0,o.y)({symbol:x,stream:(0,a.l6)(!0),limit:2}).trades,C=(null===Z||void 0===Z?void 0:Z.tk)||2,I=-Math.log10(d),w=(0,n.useMemo)((function(){return t({getI18n:T,quoteAsset:b,baseAsset:h,marginAsset:k.marginAsset})}),[t,T,b,h,k]),M=(0,n.useState)("all"),A=M[0],L=M[1],O=function(e,t,r){var i=(0,n.useRef)(0),o="bid"!==e?g(t):0,a="ask"!==e?g(r):0,l=(0,n.useCallback)((function(n){var a=0,l=0;if("ask"!==e){var s,u=Math.min(n,r.length);a=(null===(s=r[u-1])||void 0===s?void 0:s.sum)||0}if("bid"!==e){var c,d=Math.min(n,t.length);l=o-((null===(c=t[t.length-d-1])||void 0===c?void 0:c.sum)||0)}i.current=Math.max(a,l)}),[e,r,t,o]);return{amountAskSum:o,amountBidSum:a,maxSumRef:i,setMaxSumRef:l}}(A,f,m),E=O.amountAskSum,F=O.maxSumRef,R=O.setMaxSumRef,V=(0,n.useMemo)((function(){return r({maxSumRef:F,amountAskSum:E,quantityPrecision:I,product:k})}),[r,F,E,I,k]);return y(u.Z,{markPrice:y(v,null),decimalPlace:C,quantityPrecision:I,isMore:!1,tableHeaderConfig:w,renderRow:V,type:A,changeType:L,renderAutoSizer:R,trades:S,stream:(0,a.l6)(P)})}},"0/U0":(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r("xIFI"),i=r.n(n),o=r("xDxD"),a=r("Z4JP"),l=r("WbBH"),s=r("kYrR"),u=i().createElement,c=function(e){var t=e.getRenderRowConfig,r=(0,n.useContext)(a.Z),i=r.level,c=r.qty,d=r.asks,p=r.bids,f=(0,o.j2)(),m=(0,n.useMemo)((function(){if(d&&p){var e,t=d.concat(p).sort((function(e,t){return e.amount-t.amount}));return null===(e=t[Math.floor(.95*t.length)])||void 0===e?void 0:e.amount}return 0}),[d,p]),v=(0,o.KL)().getI18n,g=(0,n.useMemo)((function(){return(0,s.M)(["price","amount","total"],v)}),[v]),y=(0,n.useMemo)((function(){return(0,s.M)(["amount","price"],v)}),[v]),x=(0,n.useMemo)((function(){return(0,s.M)(["price","amount"],v)}),[v]),h=i,b=-Math.log10(c),P=(0,n.useMemo)((function(){return t({median:m,quantityPrecision:b,decimalPlace:h,product:f})}),[m,h,b,t,f]);return u(l.Z,{decimalPlace:h,quantityPrecision:b,headerConfigAll:g,headerConfigBid:y,headerConfigAsk:x,renderRow:P})};const d=i().memo(c)},Cijq:(e,t,r)=>{"use strict";r.d(t,{xG:()=>l,NU:()=>s,mU:()=>u});var n=r("wz6d"),i=r("xDxD"),o=r("U4Ym"),a=r("JLYw"),l=function(e){return{price:"".concat(e("orderBook-price",{defaultValue:"Price"})),size:"".concat(e("orderBook-Size",{defaultValue:"Size"})),sum:"".concat(e("orderBook-Sum",{defaultValue:"Sum"}))}},s=function(e){var t=e.maxSumRef,r=e.amountAskSum,l=e.quantityPrecision,s=e.isCoinUnit;return function(e,u,c,d){var p,f=(0,i.gm)(),m=(0,i.j2)().tickSize,v=(0,o.p)(m),g=u[c],y=g.amount,x=g.sum,h=g.price,b=d?r-((null===(p=u[c-1])||void 0===p?void 0:p.sum)||0):x||0,P={size:s?(0,n.uf)(y,l):(0,a.WA)({quantity:y,price:h,precision:v}),sum:s?(0,n.uf)(Number(b),l):(0,a.WA)({quantity:Number(b),price:h,precision:v})};return{progress:Number(b)/Number(t.current),datas:e.map((function(e,t){var r=e.type;return{type:r,value:P[r]||null,style:{textAlign:{ltr:0===t?"left":"right",rtl:0===t?"right":"left"}[f],direction:f}}}))}}},u=function(e){var t=e.getI18n,r=e.quoteAsset,n=e.baseAsset,i=e.marginAsset,o=e.isCoinUnit;return[{type:"price",title:"".concat(l(t).price,"(").concat(r,")"),direction:"l",style:{flex:1,justifyContent:"flex-start"}},{type:"size",title:"".concat(l(t).size,"(").concat(o?n:i,")"),direction:"r",style:{flex:1,justifyContent:"flex-end"}},{type:"sum",title:"".concat(l(t).sum,"(").concat(o?n:i,")"),direction:"r",style:{flex:1,justifyContent:"flex-end"}}]}},kYrR:(e,t,r)=>{"use strict";r.d(t,{M:()=>s,N:()=>u});var n=r("wz6d"),i=r("xDxD"),o=r("U4Ym"),a=r("JLYw"),l=function(e){return{price:"".concat(e("orderBook-Price",{defaultValue:"Price"})),amount:"".concat(e("orderBook-Amount",{defaultValue:"Amount"})),total:"".concat(e("orderBook-Total",{defaultValue:"Total"}))}},s=function(e,t){return e.map((function(e,r){return{type:e,title:l(t)[e],style:{flex:1,justifyContent:0===r?"flex-start":"flex-end"}}}))},u=function(e){var t=e.median,r=e.quantityPrecision,l=e.decimalPlace,s=e.isCoinUnit;return function(e,u,c){var d=(0,i.gm)(),p=(0,i.j2)().tickSize,f=(0,o.p)(p),m=u[c],v=m.amount,g=m.total,y=m.price,x={amount:s?(0,n.uf)(v,r):(0,a.WA)({quantity:v,price:y,precision:f}),total:s?(0,n.uf)(Number(g),l):(0,a.WA)({quantity:v,price:y,precision:f})};return{progress:Number(v)/Number(t),datas:e.map((function(e,t){var r=e.type;return{type:r,value:x[r]||null,style:{textAlign:{ltr:0===t?"left":"right",rtl:0===t?"right":"left"}[d],direction:d}}}))}}}},Wl2L:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("t26l"),l=r("XsYC"),s=r("S2LQ"),u=r("edhh"),c=r("0/U0"),d=r("Cijq"),p=r("kYrR"),f=r("JLYw"),m=o().createElement,v=o().memo((function(e){var t=(0,f.QV)().isCoinUnit;return m(a.Z,null,(function(r){return r.isMobile?m(c.Z,Object.assign({},e,{getRenderRowConfig:function(e){return(0,p.N)((0,n.Z)((0,n.Z)({},e),{},{isCoinUnit:t}))}})):m(u.Z,Object.assign({},e,{stream:(0,s.BN)(),getHeaderConfig:function(e){return(0,d.mU)((0,n.Z)((0,n.Z)({},e),{},{isCoinUnit:t}))},getRenderRowConfig:function(e){return(0,d.NU)((0,n.Z)((0,n.Z)({},e),{},{isCoinUnit:t}))}}))}))}));const g=function(){return m(l.Z,{sdk:(0,s.BN)()},m(v,null))}},nosI:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r("xIFI");const i=(0,n.createContext)({symbol:"",status:"All",getFormatSize:function(){return{ts:8,mi:8}},handleStatusFilter:function(){},emptyText:"You have no order history."})},QxF6:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r("xIFI"),i=r.n(n),o=r("jzeX"),a=r("qN/k"),l=r("xDxD"),s=r("nosI"),u=i().createElement,c=function(){var e=(0,l.KL)().getI18n,t=(0,n.useContext)(s.Z),r=t.handleStatusFilter,i=t.status;return u(o.Z,{sx:{bg:"filterDropdown.bg",p:0,mt:"8px"}},[{text:e("openOrder-actionAll",{defaultValue:"All"}),key:"All"},{text:e("orderHistory-status-Filled",{defaultValue:"Filled"}),key:"Filled"},{text:e("orderHistory-status-Partial-Fill",{defaultValue:"Partially Filled"}),key:"Partial-Fill"},{text:e("orderHistory-status-Canceled",{defaultValue:"Canceled"}),key:"Canceled"},{text:e("orderHistory-status-Expired",{defaultValue:"Expired"}),key:"Expired"}].map((function(e){return u(a.Z,{key:e.key,variant:"filters.button",sx:{whiteSpace:"nowrap",height:"24px",minWidth:"96px",color:i===e.key?"t.yellow300":"filterDropdown.color",":hover":{bg:"filterDropdown.listHoverBg",fontWeight:"500"}},onClick:function(){return r(e.key)}},e.text)})))};const d=i().memo(c)},BAKC:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r("xIFI"),i=r.n(n),o=r("qN/k"),a=r("I78S"),l=r("DNXk"),s=r("xRl8"),u=r("JHX0"),c=i().createElement,d=function(e){var t=e.headers,r=void 0===t?[]:t,i=(0,n.useState)("down"),d=i[0],p=i[1],f=function(e){p(e?"up":"down")};return c(o.Z,{variant:"girdList.columnBox",sx:{py:"xs"}},r.map((function(e,t){var r=e.text,n=e.overlay;return n?c(l.Z,{trigger:"click",overlay:n,sx:{userSelect:"none",display:"flex"},enablePortal:!0,onVisibleChange:f},c(o.Z,{key:t,"data-area":"left",style:(0,u.VE)(t),sx:{alignItems:"center",cursor:"pointer",borderRadius:"2px",height:"24px",pl:2,bg:"t.grey700"}},c(a.Z,{title:r,variant:"layouts.ellipsis",sx:{fontSize:0,color:"up"===d?"t.yellow300":"t.primary"}},r),c(s.Z,{sx:{transform:"up"===d?"rotate(180deg)":"rotate(0deg)",color:"up"===d?"t.yellow300":"#fff",ml:"4px"},size:20}))):c(o.Z,{key:t,"data-area":"left",style:(0,u.VE)(t),sx:{alignItems:"center",cursor:n?"pointer":"auto"}},c(a.Z,{title:r,variant:"layouts.ellipsis",sx:{fontSize:0,color:"t.secondary"}},r))})))};const p=i().memo(d)},"8gD4":(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r("xIFI"),i=r.n(n),o=r("ZODY"),a=r("8+a1"),l=r("t67M"),s=r("nosI"),u=r("qN/k"),c=r("FXY6"),d=r("I78S"),p=r("MKSq"),f=i().createElement,m=function(){var e=(0,p.f)().getI18n,t=(0,n.useContext)(s.Z),r=t.handleHideOtherPairs,i=t.checked;return f(u.Z,{variant:"girdList.columnBox",sx:{py:"xs",pr:0}},f(u.Z,{sx:{alignItems:"center",fontSize:[1,0],color:"t.thead",cursor:["auto","pointer"],lineHeight:["30px","24px"]},onClick:function(){return r(!i)}},f(c.ZP,{name:"hidePairs",size:[18,16],checked:i,onChange:function(){return!1}}),f(d.Z,{sx:{userSelect:"none"}},e("hidePairs",{defaultValue:"Hide Other Pairs"}))))};const v=i().memo(m);var g=r("qbs8"),y=r("Ng/A"),x=r("iCwz"),h=r("Vns9"),b=r("IpTK"),P=r("JHX0"),k=i().createElement,T=function(e){return k(d.Z,Object.assign({__css:{color:"t.third"}},e))},Z=function(e){return k(d.Z,Object.assign({__css:{fontSize:"14px",fontWeight:400}},e))},S=function(e){return k(u.Z,Object.assign({variant:"columns.spaceLine",__css:{fontSize:1}},e))},C=" / ";const I=function(e){var t=(0,n.useRef)(null),r=e.orderId,i=e.side,o=e.status,a=(0,P.ZK)().getI18n,l=(0,n.useContext)(s.Z).useColumn,c=(0,n.useState)(!1),p=c[0],f=c[1];t.current!==r&&(t.current&&f(!1),t.current=r);var m={canceled:"gray",filled:"green","partial fill":"default"}[(o||"").toLowerCase()]||"default",v=l(e),g=v.nextDate,I=v.nextPair,w=v.nextAvgPrice,M=v.nextPrice,A=v.nextType,L=v.nextAmount,O=v.nextFilled,E=v.nextTriggerConditions;return k(y.Z,{sx:{py:"xs",color:"t.primary",borderBottom:"1px solid",borderBottomColor:"lines.light"}},k(S,{onClick:function(){return f(!p)}},k(u.Z,{sx:{alignItems:"center"}},k(d.Z,{sx:{fontWeight:"500",fontSize:2}},I),k(d.Z,{sx:{color:"BUY"===i?"buy":"sell",mx:"xs"}},"BUY"===i?"".concat(a("sideBuy",{defaultValue:"Buy"})," ").concat(A):"".concat(a("sideSell",{defaultValue:"Sell"})," ").concat(A)),k(x.Z,{variant:m,sx:{py:"2px"}},a("status-".concat((0,b.No)(o)),{defaultValue:o}))),k(h.Z,{size:18,color:"icon",sx:{transform:p?"rotate(180deg)":null,transition:"transform 100ms"}})),[{label:[a("filled",{defaultValue:"Filled"}),a("amount",{defaultValue:"Amount"})].join(C),value:[O,L].join(C)},{label:[a("average",{defaultValue:"Average"}),a("price",{defaultValue:"Price"})].join(C),value:[w,M].join(C)},{label:a("triggerConditions",{defaultValue:"Trigger Conditions"}),value:E},{label:a("date",{defaultValue:"Date"}),value:g}].slice(0,p?10:3).map((function(e){var t=e.label,r=e.value;return k(S,{key:t},k(T,null,t),k(Z,null,r))})))};var w=i().createElement,M=function(e){var t=e.data,r=void 0===t?[]:t,n=e.loading,o=e.hasMore,a=e.loadMore,s=e.emptyNode,u=void 0===s?w(l.p,null):s;return n||r&&r.length?w(i().Fragment,null,r.map((function(e,t){return w(I,Object.assign({key:t},e))})),o?w(g.Z,{showMore:a,check:{offset:200},loading:n}):null):w(i().Fragment,null,u)};const A=i().memo(M);var L=i().createElement;const O=function(e){var t=e.items,r=e.loading,n=e.hasMore,u=e.loadMore,c=i().useContext(s.Z).emptyText;return L(a.Z,{sx:{position:"relative",px:0}},L(o.Z,{fullScreen:!0,show:r}),L(v,null),L(A,{data:t,loading:r,hasMore:n,loadMore:u,emptyNode:L(l.p,null,c)}))}},MaS9:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r("DtyY"),i=r("XP5A"),o=r("xIFI"),a=r.n(o),l=r("t67M"),s=r("S2LQ"),u=r("I78S"),c=r("qN/k"),d=r("Ng/A"),p=r("DNXk"),f=r("3TKe"),m=r("IpTK"),v=r("JHX0"),g=r("nosI"),y=a().createElement,x=function(e){return y(u.Z,Object.assign({__css:{fontWeight:400}},e))},h=function(e){var t=(0,v.ZK)().getI18n,r=(0,o.useContext)(g.Z).useColumn,n=e.side,i=e.status,a=e.reduceOnly,l=e.positionSide,h=void 0===l?"BOTH":l,b="BUY"===n?{color:"buy",children:t("sideBuy".concat(h),{defaultValue:"Buy"})}:{color:"sell",children:t("sideSell".concat(h),{defaultValue:"Sell"})},P=r(e),k="canceled"===(null===i||void 0===i?void 0:i.toLowerCase())?"0.5":"1",T=function(){return a?t("YES",{defaultValue:"YES"}):t("NO",{defaultValue:"NO"})},Z=P.nextDate,S=P.nextPair,C=P.nextAvgPrice,I=P.nextPrice,w=P.nextType,M=P.nextAmount,A=P.nextFilled,L=P.nextTriggerConditions,O=P.orderType,E=P.formatedMarkPrice,F=0;return y(c.Z,{variant:"columns.space",sx:{color:"table.color",fontSize:[0],"> *":{fontWeight:"normal"},opacity:k}},y(u.Z,{"data-area":"left",style:(0,v.VE)(F++),title:Z,variant:"layouts.ellipsis",sx:{color:"table.timeColor"}},Z),y(u.Z,{"data-area":"left",style:(0,v.VE)(F++),title:S,variant:"layouts.ellipsis"},S),y(u.Z,{"data-area":"left",style:(0,v.VE)(F++),title:w,variant:"layouts.ellipsis"},w),y(u.Z,Object.assign({},b,{"data-area":"left",style:(0,v.VE)(F++),title:b.children,variant:"layouts.ellipsis"})),y(x,{"data-area":"left",style:(0,v.VE)(F++),title:C,variant:"layouts.ellipsis"},C),y(x,{"data-area":"left",style:(0,v.VE)(F++),title:I,variant:"layouts.ellipsis"},y(c.Z,{alignItems:"center",justifyContent:"center"},I,"LIQUIDATION"===O&&y(p.Z,{trigger:"hover",arrow:!0,placement:"right",overlay:y(d.Z,{sx:{bg:"filterDropdown.bg",p:"xs",maxWidth:"250px",whiteSpace:"initial",textAlign:"left",borderRadius:"4px"}},t("Bankruptcy-Price",{markPrice:E,defaultValue:"The price is the bankruptcy price at which margin loss reaches zero. The liquidation order will be replaced with the bankruptcy price. The liquidation price (the mark price when liquidated) is {{markPrice}}."}))},y(f.Z,{size:16,ml:"2px",mt:"2px"})))),y(x,{"data-area":"left",style:(0,v.VE)(F++),title:A,variant:"layouts.ellipsis"},A),y(x,{"data-area":"left",style:(0,v.VE)(F++),title:M,variant:"layouts.ellipsis"},M),y(x,{"data-area":"left",style:(0,v.VE)(F++),title:T(),variant:"layouts.ellipsis"},T()),y(x,{"data-area":"left",style:(0,v.VE)(F++),title:L,variant:"layouts.ellipsis"},L),y(u.Z,{"data-area":"left",sx:s.Pd,style:(0,v.VE)(F++)},t("status-".concat((0,m.No)(i)),{defaultValue:i||""})),y(u.Z,{style:(0,v.VE)(F++)}))};const b=a().memo(h);var P=a().createElement,k=[{title:"",dataIndex:"",hideTitle:!0,render:function(e,t){return P(b,t)}}],T=function(e){var t=e.loading,r=e.data,o=void 0===r?[]:r,a=e.updateTime,s=e.hasMore,u=e.loadMore,c=(0,i.Z)(e,["loading","data","updateTime","hasMore","loadMore"]);return P(l.Z,Object.assign({},c,{variant:"girdList.wrapperBase",loading:t,resetDeps:[a],listGridProps:{data:o,columns:k,hasMore:s,loadMore:u},getListGridConfig:function(e){var t=e.width,r=(0,i.Z)(e,["width"]);return(0,n.Z)((0,n.Z)({},r),{},{collapseHeight:32,width:Math.max(t,v.ih)})}}))};const Z=a().memo(T)},dipp:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r("xIFI"),i=r.n(n),o=r("c83x"),a=r("S2LQ"),l=r("xRl8"),s=r("qN/k"),u=r("ASW3"),c=r("FXY6"),d=r("I78S"),p=r("MKSq"),f=r("JLYw"),m=r("nosI"),v=i().createElement;const g=function(e){var t=e.type,r=e.onSearch,i=(0,o.useSelector)((function(e){return e.pageStore.page})),g=(0,f.C3)()===a.UW&&"futures"===i,y=(0,f.yk)().getI18n,x=(0,n.useContext)(m.Z),h=x.handleHideOtherPairs,b=x.checked,P="hideOtherSymbol",k=y(P,{defaultValue:"Hide Other Symbol"});return v(s.Z,{sx:{mb:1,flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"}},v(p.Z,{type:t,onSearch:r}),g?v(s.Z,{sx:{alignItems:"center",fontSize:[1,0],color:"t.thead",cursor:["auto","pointer"],lineHeight:["30px","24px"],position:"absolute",top:"-36px",right:"5px",zIndex:"999",height:"40px"}},v(u.ZP,{trigger:"click",placement:"bottom-end",enablePortal:!0,overlay:v(s.Z,{sx:{bg:"t.grey700",py:"4px",px:"8px",alignItems:"center",fontSize:[1,0],color:"t.thead",cursor:["auto","pointer"],lineHeight:["30px","24px"]},onClick:function(){return h(!b)}},v(c.ZP,{name:P,size:[18,16],checked:b,onChange:function(){return!1}}),v(d.Z,{sx:{userSelect:"none"}},k))},v(l.Z,{size:20,sx:{color:"t.primary",cursor:"pointer",display:"inline-block"}}))):v(s.Z,{sx:{alignItems:"center",fontSize:[1,0],color:"t.thead",cursor:["auto","pointer"],lineHeight:["30px","24px"],position:"absolute",top:"-36px",right:"28px",zIndex:"999",height:"40px"},onClick:function(){return h(!b)}},v(c.ZP,{name:P,size:[18,16],checked:b,onChange:function(){return!1}}),v(d.Z,{sx:{userSelect:"none"}},k)))}},JHX0:(e,t,r)=>{"use strict";r.d(t,{ZK:()=>i,VE:()=>a,ih:()=>l});var n=r("xDxD"),i=function(e){return(0,n.ZK)("trd-orderHistory",e)},o=[110,170,70,45,70,90,100,90,100,110,65,1],a=function(e){var t=o[e];return{whiteSpace:"nowrap",minWidth:"".concat(t,"px"),width:"".concat(t,"px")}},l=o.reduce((function(e,t){return e+t}),0)},tQ2x:(e,t,r)=>{"use strict";r.d(t,{$H:()=>T,GE:()=>I,aM:()=>c});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("c83x"),l=r("nXUx"),s=r("xDxD"),u=r("ZIGC"),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,d=(0,i.useRef)(null),p=(0,a.useDispatch)(),f=(0,s.oZ)(),m=(0,s.BR)(e),v=m.pagination,g=m.loadMore,y=m.refresh,x=v.limit,h=v.offset,b=f.total,P=f.preHistory,k=f.loading,T=P||[],Z=T.length,S={startTime:t,endTime:r},C={accountType:(0,u.lx)(o)},I=(0,i.useCallback)((function(e,t){p.orders.mergeState({type:"orderHistory.merge",payload:{loading:!0}}),(0,l.jL)(e).then((function(e){var r=e.data,n=e.total;p.orders.mergeState({type:0===t?"orderHistory.init":"orderHistory.concat",payload:{orders:r,total:n,loading:!1}})})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[p.orders]);(0,i.useEffect)((function(){I((0,n.Z)((0,n.Z)((0,n.Z)({},S),C),{},{page:h+1,rows:x}),h)}),[h,x]);var w=c?[]:[t,r];return(0,i.useEffect)((function(){if(d.current){var e=d.current,i=e.startTime,o=e.endTime;i===t&&o===r||(h>0?y():I((0,n.Z)((0,n.Z)((0,n.Z)({},S),C),{},{page:h+1,rows:x}),0))}d.current={startTime:t,endTime:r}}),w),(0,n.Z)((0,n.Z)({},f),{},{onRefresh:function(){return y()},hasMore:!k&&Z<b,loadMore:g})},d=r("S2LQ"),p=r("QsMz"),f=r("U4Ym"),m=r("wwGh"),v=r("wz6d"),g=r("IFcF"),y=r("lukr"),x=r("XCrG"),h=r("SVjJ"),b=r("jSf8"),P=r("87Ep"),k=r("nosI"),T=function(e){var t,r,n=e.insertTime,o=e.side,a=e.price,l=e.origQty,u=e.avgPrice,c=e.executedQty,T=e.symbol,Z=void 0===T?"":T,S=e.stopPrice,C=e.workingType,I=e.type,w=e.origType,M=e.activatePrice,A=e.markPrice,L=w||I,O=(0,p.Z)("trd-openOrder",r).getI18n,E=(0,P.yk)().getI18n,F=(0,b.s7)(Z).getFormatedQuantity,R=(0,s.Vh)()[Z],V=(0,x.k)((0,d.BN)()).tickProps.lastPrice,D=R.quantityPrecision,N=void 0===D?(0,f.M)(l):D,B=R.pricePrecision,_=void 0===B?(0,f.M)(u):B,z=(0,(0,i.useContext)(k.Z).getFormatSize)(Z).ts,H=(0,m.i)({side:o,type:L}),q=Number(S)||Number(a),Y=(0,v.uf)(q,z),U=parseFloat(u),j=U&&(0,v.uf)(0,_)!==(0,v.uf)(U,_),W=H&&q&&Y?"".concat(O(null===(t=h.HZ[C])||void 0===t?void 0:t.replace(/\s/g,"-"),{defaultValue:h.HZ[C]}),"  ").concat([H,Y].join(" ")):d.GR;Number(M)&&(W="".concat(E("activationPrice",{defaultValue:"Activation Price"})," ").concat(["BUY"===o?"<=":">=",+M].join(" ")));var K=a;h.cQ.includes(L)?K=S:L===h.PH.TRAILING_STOP_MARKET?K=M:L===h.PH.MARKET_TYPE&&(K=j?u:V);var J=(0,g.H)(R,E).shortName;return{nextDate:(0,y.v)(new Date(n),"yyyy-MM-dd hh:mm:ss"),nextPair:J,nextType:O("type-".concat(L),{defaultValue:L}),nextAvgPrice:j?(0,v.uf)(U,_):d.GR,nextPrice:"market"===(null===L||void 0===L?void 0:L.toLowerCase())?d.GR:(0,v.uf)(a,_),nextAmount:F({quantity:l,price:K,qtyPrecision:N}),nextFilled:F({quantity:parseFloat(c)?c:0,price:K,qtyPrecision:N}),nextTriggerConditions:W,orderType:L,formatedMarkPrice:"LIQUIDATION"===L?(0,v.uf)(A,_):d.GR}},Z=r("JHX0"),S=r("QxF6"),C=o().createElement,I=function(){var e=(0,Z.ZK)().getI18n;return(0,i.useMemo)((function(){return[{text:e("time",{defaultValue:"Time"})},{text:e("symbol",{defaultValue:"Symbol"})},{text:e("type",{defaultValue:"Type"})},{text:e("side",{defaultValue:"Side"})},{text:e("average",{defaultValue:"Average"})},{text:e("price",{defaultValue:"Price"})},{text:e("filled",{defaultValue:"Executed"})},{text:e("amount",{defaultValue:"Amount"})},{text:e("reduceOnly",{defaultValue:"Reduce Only"})},{text:e("triggerConditions",{defaultValue:"Trigger"}),area:"left"},{text:e("status",{defaultValue:"Status"}),overlay:C(S.Z,null)},{text:""}]}),[e])}},"4rE+":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var n=r("DC7k"),i=r("xIFI"),o=r.n(i),a=r("c83x"),l=r("Ng/A"),s=r("xDxD"),u=r("8+a1"),c=r("ZODY"),d=r("GaKI"),p=r("t67M"),f=r("A8g+"),m=r("IpTK"),v=r("nosI"),g=r("tQ2x"),y=r("JHX0"),x=r("BAKC"),h=r("dipp"),b=r("MaS9"),P=r("8gD4"),k=o().createElement,T=function(){var e=(0,g.GE)(),t=(0,s.z4)(),r=(0,n.Z)(t,1)[0],o=(0,y.ZK)().getI18n,T=(0,a.useDispatch)(),Z=(0,s.uT)(),S=(0,n.Z)(Z,1)[0],C=(0,s.dd)().getFormatSize,I=(0,s.Fs)().isMobile,w=(0,i.useState)((0,f.OQ)(I?"1w":"1d")),M=w[0],A=w[1],L=(0,g.aM)(100,M.startTime,M.endTime,S),O=L.preHistory,E=L.loading,F=L.updateTime,R=L.hasMore,V=L.loadMore,D=(0,s.VX)().isOrderHistoryHideOtherPairs,N=(0,i.useState)(D),B=N[0],_=N[1],z=(0,i.useState)("All"),H=z[0],q=z[1],Y=(0,i.useCallback)((function(e){_(e),T.userProfile.save({key:"isOrderHistoryHideOtherPairs",value:e})}),[T.userProfile]),U=(0,i.useCallback)((function(e){q(e)}),[]),j=(0,m.Nm)(O,B,r,!0),W=(0,m.vL)(j,H),K=(0,s.j)(".list-grid",[M]).boxRef,J=!W.length&&E,G=!J&&E,Q=o("nodata",{defaultValue:"You have no order history."}),X=(0,i.useMemo)((function(){return{symbol:r,emptyText:Q,getFormatSize:C,checked:B,status:H,handleHideOtherPairs:Y,handleStatusFilter:U,useColumn:g.$H}}),[B,Q,C,Y,U,H,r]);return k(v.Z.Provider,{value:X},I?k(P.Z,{items:W,loading:E,hasMore:R,loadMore:V}):k(u.Z,{sx:{position:"relative",px:0,pt:"xs"},"data-testid":"DataTable"},k(c.Z,{inner:!0,fullScreen:!0,show:G}),k(h.Z,Object.assign({},M,{onSearch:A})),k(d.Z,null,(function(t){var r=t.width,n=t.height;return k(l.Z,{ref:K,variant:"layouts.scrollX",sx:{height:n-38,width:r,pl:"xs"}},k(x.Z,{headers:e}),k(b.Z,{data:W,"data-testid":"tradeInfoTable",loading:J,updateTime:F,hasMore:R,loadMore:V,autoSizerProps:{width:Math.max(r-8,0),height:Math.max(n-38-40,0),extend:!0},emptyNode:k(p.p,null,Q)}))}))))};const Z=o().memo(T)},DBF4:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r("XP5A"),i=r("xIFI"),o=r.n(i),a=r("Ng/A"),l=r("h/10"),s=o().createElement,u=l.BA[400],c=function(e){var t=e.filled?u:"transparent";return s(a.Z,{__css:{display:"inline-block",width:"4px",height:"14px",mx:"1px",border:"1px solid ".concat(u),bg:t}})};const d=function(e){var t=e.adl,r=void 0===t?0:t,i=e.dashed,o=void 0!==i&&i,l=(0,n.Z)(e,["adl","dashed"]);return s(a.Z,Object.assign({},l,{sx:{borderBottom:o?"1px dashed ".concat(u):"none"}}),Array(r).fill().map((function(e,t){return s(c,{key:t,filled:!0})})),Array(4-r).fill().map((function(e,t){return s(c,{key:t,filled:!1})})))}},"0sn7":(e,t,r)=>{"use strict";r.d(t,{Z:()=>z});var n=r("DtyY"),i=r("Ng/A"),o=r("YKSe"),a=r("7r9v"),l=r("QLxY"),s=r("E+oP"),u=r.n(s),c=r("xIFI"),d=r.n(c),p=r("JLYw"),f=r("hWhz"),m=r("VwJU"),v=r.n(m),g=r("HSMY"),y=r("c0H5"),x=r("jnXF"),h=r("0pZZ"),b=r("wHkB"),P=r("J6Qs"),k=r("W0IN"),T=r("UraT"),Z=r("wiC8"),S=r("qN/k"),C=r("OKEt"),I=r("TG9/"),w=d().createElement;const M=function(e){var t=(0,f.Z)().getI18n,r=e.max,n=e.amount,o=e.onChange,a=e.onConfirm,l=e.marginAsset,s=(0,k.c)(),u=(0,Z.nH)(s),c="".concat(t("amount",{defaultValue:"Amount"}),"(").concat(l,")"),d="".concat(t("typeTheAmount",{defaultValue:"Type The Amount"})),p=(0,Z.GW)(r,s,!1),m=Number(n)>Number(p),v=w(S.Z,{sx:{cursor:"pointer"},onClick:function(){return o(p)}},w(i.Z,null,t("Max",{defaultValue:"Max"}),":\xa0"),w(i.Z,null,(0,Z.GW)(r,s,!0)),w(i.Z,null,"\xa0",l));return w(i.Z,null,w(C.Z,{labelFixed:!0,type:"number",step:u,value:n,error:m,onChange:function(e){return(0,I._p)(e,o,"",s)},onKeyDown:function(e){return(0,I.f5)(e,a)},onBlur:function(e){return(0,I.Y5)(e)},placeholder:d,label:c,suffix:v,sx:{width:"100%"},boxProps:{width:"100%"}}))};var A=d().createElement,L={add:1,remove:2},O=function(e){var t=(0,f.Z)().getI18n,r=(0,p.yk)().getI18n,n=e.amount,o=e.data,a=void 0===o?{}:o,l=e.panelType,s=e.onChange,u=e.onClose,c=(0,y.Y)().setMessageInfo,d=a.symbol,m=a.isolatedWallet,S=a.maxAppend,C=a.maxRemovable,I=a.liquidationPrice,w=a.quoteAsset,O=a.marginAsset,F=void 0===O?"USDT":O,R=a.pricePrecision,V=a.positionSide,D=(0,k.c)(),N=function(){var e=(0,g.Z)(v().mark((function e(){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:r={type:L[l],symbol:d,amount:n,positionSide:V},(0,x.c)(r).then((function(e){var r=e.success,n=e.message,i="error";if(r)i="success",c({message:t("changeMarginSuccess",{defaultValue:"Position margin adjustment failed"}),variant:i});else{var o=n||t("changeMarginFail",{defaultValue:"Position margin adjustment succeeded"});c({message:o,variant:i})}})).catch((function(){})).finally((function(){return u()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B="add"===l?S:C;return A(i.Z,{mt:"md"},A(M,{max:B,amount:n,onChange:function(e){var t="object"!==typeof e?e:e.target.value;s(t)},onConfirm:N,marginAsset:F}),"add"===l?A(i.Z,{sx:{mt:"sm",mb:"md",lineHeight:"34px"}},A(i.Z,null,A(i.Z,{color:"t.third",as:"span"},"".concat(t("currentlyMarginFor",{defaultValue:"Currently Margin for"})," "),(0,T.lE)(d,r),":"),A(i.Z,{sx:{float:"right"}},(0,Z.GW)(m,D,!0),"\xa0",F)),A(i.Z,null,A(i.Z,{color:"t.third",as:"span"},t("maxAppend",{defaultValue:"Available Balance"}),":"),A(i.Z,{sx:{float:"right"}},(0,Z.GW)(S,D,!0),"\xa0",F)),A(i.Z,null,A(i.Z,{color:"t.third",as:"span"},t("liqPriceAfterAdujst",{defaultValue:"Liq. Price after Adjusting"}),":"),A(i.Z,{sx:{float:"right"}},I?(0,Z.GW)(I,R,!0):"-","\xa0",w))):A(i.Z,{sx:{mt:"plus",mb:"42px",lineHeight:"34px"}},A(i.Z,null,A(i.Z,{color:"t.third",as:"span"},t("assignedMargin",{defaultValue:"Currently Assigned Margin"}),":"),A(i.Z,{sx:{float:"right"}},(0,Z.GW)(m,D,!0),"\xa0",F)),A(i.Z,null,A(b.Z,{tip:A(E,null,t("maxRemovableTip",{defaultValue:"Max Removable is the maximum margin that can be removed from the position."})),delay:1e3,placement:"top",arrow:!0},A(i.Z,{sx:{textDecoration:"underline dotted",color:"t.third",":hover":{color:"primary"}},as:"span"},t("maxRemovable",{defaultValue:"Max removable"}),":")),A(i.Z,{sx:{float:"right"}},(0,Z.GW)(C,D,!0),"\xa0",F)),A(i.Z,null,A(i.Z,{color:"t.third",as:"span"},t("liqPriceAfterReduction",{defaultValue:"Liquidation Price after reduction"}),":"),A(i.Z,{sx:{float:"right"}},I?(0,Z.GW)(I,R,!0):"-","\xa0",w))),A(P.y,null,A(h.Z,{disabled:!1,sz:"l",width:1,onClick:N},t("confirm",{defaultValue:"Confirm"}))))},E=function(e){var t=e.children;return A(i.Z,{maxWidth:"300px",lineHeight:"16px"},t)};const F=d().memo(O);var R=d().createElement,V=function(e){var t=e.active,r=e.title,n=R(i.Z,{sx:{width:"100%",height:"2px",bg:"primary",position:"absolute",bottom:"-1px"}});return R(i.Z,{sx:{position:"relative",mr:"plus",px:"0px",pt:"xs",pb:"md",fontSize:"18px",fontWeight:"medium"},color:t?"t.primary":"t.placeholder"},r," ",t?n:null)},D={width:["100%","464px"]},N={},B=function(e){return e?(0,n.Z)((0,n.Z)({},D),N):(0,n.Z)((0,n.Z)({},D),{},{minHeight:"465px"})},_=function(e){var t=(0,f.Z)().getI18n,r=e.isMobile,i=e.visible,s=e.position,d=void 0===s?{}:s,m=e.onClose,v=(0,c.useState)("add"),g=v[0],y=v[1],x=(0,c.useState)(""),h=x[0],b=x[1],P="add"===g?Number(h):-Number(h),k=(0,p.Qd)((0,n.Z)((0,n.Z)({},d),{},{delta:P})),T=function(e){return b(e)};return(0,c.useEffect)((function(){u()(d)&&b("")}),[d]),R(o.Z,{open:!u()(d)&&i,onCloseIconClick:function(){return m()},sx:(0,n.Z)({},B(r))},R(a.Z,{lazy:!0,defaultActiveKey:g,onChange:function(e){y(e)},tabsSx:{borderBottom:"1px solid",borderBottomColor:"lines.primary",overflow:"visible"}},R(l.Z,{tab:function(e){return R(V,{active:e,title:t("addMargin",{defaultValue:"Add Margin"})})},tabKey:"add"},R(F,{panelType:"add",amount:h,data:k,onChange:T,onClose:m})),R(l.Z,{tab:function(e){return R(V,{active:e,title:t("removeMargin",{defaultValue:"Remove Margin"})})},tabKey:"remove"},R(F,{panelType:"remove",amount:h,data:k,onChange:T,onClose:m}))))};const z=d().memo(_)},dwMH:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r("xIFI");const i=(0,n.createContext)({isFullScreen:!1,actionAdjustMargin:function(){return!1},actionAdjustMarginModal:function(){},actionPlaceOrder:function(){},actionCancelOrder:function(){},emptyText:"You have no open position.",RowStyle:{},gridMinWidth:function(){},getColumnStyle:function(){},usePositionColumn:function(){},changeSymbol:function(){},handleHideOtherSymbol:function(){},hideOtherSymbol:!1,isDelivery:!1})},ufcj:(e,t,r)=>{"use strict";r.d(t,{Z:()=>H});var n=r("VwJU"),i=r.n(n),o=r("gLnL"),a=r("HSMY"),l=r("DtyY"),s=r("XP5A"),u=r("qN/k"),c=r("I78S"),d=r("Ng/A"),p=r("kaBW"),f=r("FXY6"),m=r("0pZZ"),v=r("YKSe"),g=r("E+oP"),y=r.n(g),x=r("xIFI"),h=r.n(x),b=r("c83x"),P=r("h/10"),k=r("wz6d"),T=r("HnIJ"),Z=r("wd/R"),S=r.n(Z),C=r("xDxD"),I=r("U4Ym"),w=r("L4Ep"),M=r("SVjJ"),A=r("ViBG"),L=r("dwMH"),O=r("hWhz"),E=r("JLYw"),F=r("4gr6"),R=r("jSf8"),V=r("wiC8"),D=h().createElement,N=function(e){var t=e.before,r=e.after,n=e.text,i=e.slot,o=void 0===i?"":i,a=(0,s.Z)(e,["before","after","text","slot"]);return D(u.Z,Object.assign({sx:{justifyContent:"space-between",alignItems:"center"}},a),D(c.Z,{display:"flex"},t),null!==n&&D(c.Z,{display:"flex"},n,D("i",{style:{width:"6px"}}),r),o)},B=function(e){var t=e.left,r=void 0===t?"":t,n=e.content,i=void 0===n?"":n,o=e.pureContent,a=void 0===o?"":o,l=e.right,s=void 0===l?"":l,u=e.size,d=void 0===u?18:u,p=e.places,f=e.mt;return D(N,{mt:void 0===f?"12px":f,height:"16px",tx:"orderForm.confirmPanel",variant:"content",before:D(c.Z,{width:130,tx:"orderForm.confirmPanel",variant:"label",style:{fontSize:"".concat(d,"px")}},r),text:D("span",{style:{fontSize:"".concat(d,"px")}},a||(0,k.uf)(i,p)),after:D(c.Z,{style:{fontSize:"14px",alignSelf:"center"}},s)})},_=function(e){var t=e.children,r=(0,s.Z)(e,["children"]);return D(d.Z,Object.assign({__css:{ml:0,mr:5,height:38,width:"100%",borderRadius:"4px",color:P.BA[0],border:"1px solid",borderColor:P.BA[600],"&:hover:not(:disabled):not(:active)":{bg:P.er[700],borderColor:P.er[600]},appearance:"none",userSelect:"none",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",fontSize:"inherit",fontFamily:"inherit",textAlign:"center",textDecoration:"none",outline:"none"}},r),t)},z=function(e){var t,r,n=(0,O.Z)().getI18n,s=(0,E.yk)().getI18n,g=(0,x.useState)("YYYY-MM-DD HH:mm:ss"),h=g[0],P=g[1],k=(0,E.F7)(),Z=k.orderConfirmation,N=k.unit,z=N===w.SW.coin,H=N===w.AO.usdt,q=(0,b.useDispatch)(),Y=e.visible,U=e.position,j=void 0===U?{}:U,W=e.onClose,K=j.symbol,J=j.positionSize,G=j.positionSide,Q=j.entryPrice,X=j.closeParams,$=void 0===X?{}:X,ee=$.orderType,te=$.limitPrice,re=$.qty,ne=(0,C.iB)()[K]||{},ie=(0,x.useContext)(L.Z),oe=ie.actionPlaceOrder,ae=ie.isDelivery,le=J>0?"SELL":"BUY",se="BUY"===le?"buy":"sell",ue="BUY"===le?"button.buyHover":"button.sellHover",ce=s(J>0?"CloseLong":"CloseShort"),de=(0,x.useState)(!1),pe=de[0],fe=de[1],me=ee===M.PH.MARKET_TYPE,ve=ne.baseAsset,ge=ne.quoteAsset,ye=ne.marginAsset,xe=ne.quantityPrecision,he=ne.pricePrecision,be=ne.equalQtyPrecision,Pe=void 0===be?2:be,ke=ne.tickSize,Te=ne.contractVal,Ze=ne.contractType,Se=(0,I.p)(ke),Ce=xe,Ie=K.split("_"),we="".concat(null===Ie||void 0===Ie?void 0:Ie[0]," ").concat("PERPETUAL"===Ze?s("inversePerpetual",{defaultValue:"Perpetual"}):(null===Ie||void 0===Ie||null===(t=Ie[1])||void 0===t?void 0:t.substr(2))||"");ae?z?(r=ve,Ce=Pe):r=s("Cont"):H?(r=ye,Ce=Se):r=ve,(0,x.useEffect)((function(){P(S()().format("YYYY-MM-DD HH:mm:ss")),setInterval((function(){P(S()().format("YYYY-MM-DD HH:mm:ss"))}),1e3)}),[]);var Me=re;if(z){Me=(0,F.q8)({quantity:re,price:Q,contractVal:Te});var Ae=Math.abs(J);Me=Me>Ae?Ae:Me}else if(H){Me=+(0,V.GW)((0,R.Ch)({quantity:re,price:Q}),xe);var Le=Math.abs(J);Me=Me>Le?Le:Me}var Oe={symbol:K,side:le,quantity:Me,price:te,type:ee,positionSide:G},Ee=(0,x.useState)(0),Fe=Ee[0],Re=Ee[1];(0,x.useEffect)((function(){Y&&(ae?T.u:T.x)(K).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,A.k)((0,l.Z)((0,l.Z)({},e),{},{quantity:Me,isBuy:J>0,entryPrice:Q,closedPrice:te,contractVal:Te,isDelivery:ae})),r=t.marketPNL,n=t.limitPNL,i=me?r:n;Re(i)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[Te,Q,ae,me,te,J,Me,K,Y]);var Ve=(0,x.useCallback)((0,a.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pe&&(t=(0,l.Z)((0,l.Z)({},Z),{},(0,o.Z)({},ee.toUpperCase(),!1)),q.preference.changeOrderConfirmation(t)),oe(Oe),W();case 3:case"end":return e.stop()}}),e)}))),[oe,q.preference,pe,W,Z,Oe,ee]);return D(v.Z,{open:!y()(j)&&Y,onCloseIconClick:function(){return W()},sx:{width:["100%","464px"]}},D(d.Z,{sx:{textAlign:"center",position:"relative"},tx:"orderForm.confirmPanel",variant:"content"},D(c.Z,{mt:"24px",fontSize:22,fontWeight:500},D("span",{style:{color:se}},ce)," ",we),D(c.Z,{mt:"6px",fontSize:14},D("span",{style:{marginRight:"8px"}},n(me?"market":"limit")),h)),D(d.Z,{mt:"31px"},D(B,me?{left:s("priceTitle",{defaultValue:"Price"}),pureContent:s("market",{defaultValue:"Market"}),right:""}:{left:s("priceTitle",{defaultValue:"Price"}),content:te,places:Se,right:ge}),D(B,{left:s("orderQtyTitle",{defaultValue:"Order Qty"}),content:re,places:Ce,right:r})),D(d.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line",__css:{borderTop:"1px solid #2B2F36",paddingTop:"16px"}},D(B,{size:"14",left:s("estimatedPNL",{defaultValue:"Estimated PNL"}),content:Fe,places:he,right:ye})),D(u.Z,{mt:"30px",tx:"orderForm.confirmPanel",variant:"label"},D(p.Z,{style:{cursor:"pointer",fontSize:"14px"}},D(f.ZP,{defaultChecked:pe,onChange:function(){fe(!pe)}}),s("dontAskAgain",{defaultValue:"Don\u2019t ask me again"}))),D(u.Z,{mt:"19px",width:"100%"},D(_,{tx:"orderForm.confirmPanel",variant:"cancelBtn",onClick:function(){return W()}},s("cancelBtnText",{defaultValue:"Cancel"})),D(m.Z,{colorStyle:se,onClick:Ve,sx:{color:"#FFFFFF",height:40,width:"100%","&:hover:not(:disabled):not(:active)":{background:ue}}},ce)))};const H=h().memo(z)},"0YQC":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Oe});var n=r("v424"),i=r("qN/k"),o=r("xIFI"),a=r.n(o),l=r("dwMH"),s=r("VwJU"),u=r.n(s),c=r("HSMY"),d=r("DC7k"),p=r("NXRQ"),f=r("FU4r"),m=r("xDxD"),v=r("U4qo"),g=r("Ng/A"),y=r("0pZZ"),x=r("I78S"),h=r("J6Qs"),b=r("wHkB"),P=r("guhI"),k=r("hWhz"),T=r("wMg5"),Z=r("EibB"),S=r("c83x"),C=r("Ev73"),I=a().createElement;function w(e){var t=e.tipText,r=(0,S.useDispatch)(),n=(0,k.Z)().getI18n,o=(0,C.F)().useLastPrice,l=function(e){(0,T.y)({pnlPriceBasis:e}),r.preference.updateState({useLastPrice:"lastPrice"===e})};return I(i.Z,{padding:"4px",flexDirection:"column"},I(x.Z,{fontSize:"14px",pb:"16px"},t),I(i.Z,{flexDirection:"column"},I(x.Z,{pb:"8px",color:"t.grey400"},n("selectPriceBasis",{defaultValue:"Select Price Basis"})),I(i.Z,{alignItems:"center"},I(a().Fragment,null,["markPrice","lastPrice"].map((function(e){var t=o?"lastPrice"===e:"markPrice"===e;return I(Z.ZP,{key:e,value:e,checked:t,onChange:l,sx:{"&>label":{cursor:"pointer"},width:"50%"}},I(x.Z,{fontSize:1,color:t?"t.yellow200":"t.grey300"},n(e)))}))))))}var M=a().createElement,A=0,L=a().forwardRef((function(e,t){var r=e.children,n=(0,m.Fg)().isLight,s=(0,k.Z)().getI18n,p=(0,m.ZK)("trd-openOrder").getI18n,b=(0,m.z4)(),T=(0,d.Z)(b,1)[0],Z=(0,m.YT)().setMessageInfo,S=(0,o.useContext)(l.Z).hideOtherSymbol,C=S?{symbolList:[T]}:{},I=(0,o.useCallback)((function(){try{(0,v.ec)(C).then((function(e){var t=e||{},r=t.success,n=t.message;r||Z(new Error(n)),f.ZP.close()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}catch(e){Sentry.captureException(e),f.ZP.close()}}),[C,Z]),w=function(){f.ZP.close()},L=(0,o.useCallback)((function(e){e&&e.stopPropagation(),f.ZP.show({isLight:n,sx:{minWidth:"368px"},children:M(a().Fragment,null,M(g.Z,{sx:{mt:"xs",textAlign:"center"}},M(g.Z,{p:1,width:320},S?s("closePositionTextPartial",{symbol:T,defaultValue:"Are you sure you want to close all positions of {{symbol}} at market price?"}):s("closePositionText",{defaultValue:"Are you sure you want to close all your positions at market price?"}))),M(h.y,null,M(i.Z,null,M(y.Z,{flexGrow:1,variant:"outline",onClick:w,sz:"l",sx:{boxShadow:"none",border:"1px solid",borderColor:"dropdown.hoverBg",color:"t.primary",mr:3,width:.5,"&:hover":{borderColor:"t.yellow300",color:"t.yellow300",bg:"transparent !important"}}},p("dialog-cancel",{defaultValue:"Cancel"})),M(y.Z,{sx:{width:.5},sz:"l",flexGrow:1,onClick:I},p("dialog-confirm",{defaultValue:"Confirm"})))))})}),[p,s,I,S,n,T]);return(0,o.useEffect)((function(){return(0,P.GY)(function(){var e=(0,c.Z)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.name,e.t0=r,e.next=e.t0===P.IS?4:7;break;case 4:return L(),A++,e.abrupt("break",8);case 7:return e.abrupt("break",8);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[L,I,A]),M(x.Z,{ref:t,onClick:L,sx:{color:"position.closePositionColor",cursor:"pointer",width:"120px","&:hover":{color:"position.closePositionActiveColor"}}},r)})),O=function(e){var t=e.headers,r=void 0===t?[]:t,n=e.positionLength,a=(0,k.Z)().getI18n,s=(0,o.useContext)(l.Z),u=s.RowStyle,c=s.getColumnStyle,d=(0,p.KO)(),f=d.putCoachMarkStep,m=d.closeCoachMark,v=(0,o.useState)(!1),y=v[0],h=v[1],P=(0,o.useRef)(null),T=(0,o.useRef)(null),Z=(0,o.useRef)(null),S=(0,o.useCallback)((function(){m("refPnl"),h(!1)}),[m]);(0,o.useEffect)((function(){f("futuresGuide",3,{title:a("positionTitle"),target:Z,content:a("positionContent"),position:"top"}),f("futuresGuide",4,{target:T,title:a("pnl-guide-title"),content:a("pnl-guide-content"),position:"top",onClose:function(){return h(!1)}})}),[a]);var C=(0,o.useCallback)((function(e,t,r,i){var o={fontSize:0,color:"t.secondary",borderBottom:"1px dotted #848E9C",whiteSpace:"normal",cursor:"pointer","&:hover":{color:"t.yellow300",borderBottomColor:"t.yellow300"}};switch(e){case"pnl":return M(b.Z,{container:function(){return null},onClick:function(){return S()},trigger:y?"click":"hover",tip:M(w,{tipText:t}),placement:"top",delay:1e3,__css:{whiteSpace:"initial !important"}},M(x.Z,{ref:T,sx:o},r));case"closePosition":return M(b.Z,{container:function(){return null},delay:1e3,arrow:!0,tip:t,placement:i,__css:{whiteSpace:"initial !important"}},n?M(L,{ref:Z},r):M(x.Z,{ref:Z,sx:o},r));default:return t?M(b.Z,{container:function(){return null},delay:1e3,arrow:!0,tip:t,placement:i,__css:{whiteSpace:"initial !important"}},M(x.Z,{sx:o},r)):M(x.Z,{sx:{fontSize:0,color:"t.secondary"}},r)}}),[y,S,n]);return M(g.Z,{ref:P,sx:{position:"relative"}},M(i.Z,{sx:u},r.map((function(e){var t=e.key,r=e.title,n=e.tip;return M(g.Z,{key:t,sx:c(t)},C(t,n,r,"top"))}))))};const E=a().memo(O);var F=r("FXY6"),R=r("1Yqh"),V=r("JLYw"),D=a().createElement,N={alignItems:"center"},B={alignItems:"center",justifyContent:"flex-end",position:"absolute",top:"4px",right:"42px",zIndex:"999",height:"40px"},_=function(){var e=(0,V.yk)().getI18n,t=(0,o.useContext)(l.Z),r=t.handleHideOtherSymbol,n=t.hideOtherSymbol,a=(0,R.F)().isIPad;return D(i.Z,{sx:a?N:B},D(i.Z,{sx:{alignItems:"center",fontSize:[1,0],color:"t.thead",cursor:["auto","pointer"],lineHeight:["30px","24px"]},onClick:function(){return r(!n)}},D(F.ZP,{name:"hideOtherSymbol",size:[18,16],checked:n,onChange:function(){return!1}}),D(x.Z,{sx:{userSelect:"none"}},e("hideOtherSymbol",{defaultValue:"Hide Other Symbol"}))))};const z=a().memo(_);var H=r("DtyY"),q=r("wR27"),Y=r("DBF4"),U=r("XP5A"),j=r("ASW3"),W=r("e0c5"),K=r("OKEt"),J=r("LVI2"),G=r("U4Ym"),Q=r("TG9/"),X=r("SVjJ"),$=r("LIeN"),ee=r("QsMz"),te=r("wz6d"),re=r("4gr6"),ne=r("HI97"),ie=r("jSf8"),oe=a().createElement;function ae(e){var t,r=e.orders,n=void 0===r?[]:r,a=e.symbol,s=e.handleCancel,u=(0,m.iB)(),c=(0,o.useContext)(l.Z).isDelivery,d=u[a]||{},p=d.marginAsset,f=d.pricePrecision,v=d.quantityPrecision,y=d.equalQtyPrecision,h=d.contractVal,b=(0,V.yk)().getI18n,P=(0,ee.Z)("trd-openOrder",t).getI18n,k=(0,re.QV)().isCoinUnit,T=(0,ie.s7)(a).getFormatedQuantity;return n.length?oe(g.Z,{tx:"position.limitOrders",variant:"container"},n.map((function(e){return oe(i.Z,{key:e.id,tx:"position.limitOrders",variant:"order"},oe(x.Z,{sx:{mr:"43px",color:"position.limitOrdersColor"}},c?k?(0,ne.unitChangeCoinQty)({quantity:e.origQty,contractVal:h,price:e.price,precision:y}):(0,te.uf)(e.origQty,v):T({quantity:e.origQty,price:e.price,qtyPrecision:v}),"\xa0",c?k?p:b("Cont",{defaultValue:"Cont"}):"","\xa0",b("toBeClosedAt",{defaultValue:"to be closed at"}),"\xa0",(0,te.uf)(e.price,f)),oe(x.Z,{tx:"position.limitOrders",variant:"cancel","data-area":"left",onClick:function(){s(e.orderId)}},P("cancel",{defaultValue:"Cancel"})))}))):null}var le=r("O+dC"),se=r("wiC8"),ue=a().createElement,ce=function(e){var t=e.text,r=(0,U.Z)(e,["text"]);return ue(y.Z,Object.assign({variant:"outline",colorStyle:"third",height:24,mr:1,flexShrink:0,flexBasis:48,sx:{borderRadius:"2px",minWidth:"60px",minHeight:"24px",fontSize:"12px",borderColor:"t.yellow200","&:hover:not(:disabled):not(:active)":{bg:"position.buttonActiveBg",borderColor:"position.buttonActiveBorderColor"}}},r),t)},de=(0,o.forwardRef)((function(e,t){var r=e.value,n=e.defaultValue,i=e.step,o=e.onChange;return ue(K.Z,{ref:t,type:"number",step:i,sx:{minWidth:"55px",bg:"line",height:"24px",border:"0.5px solid ",borderColor:"line",borderRadius:"2px",padding:"4px",fontSize:"12px !important",mt:"-4px",mr:"4px",ml:"4px","&:focus":{borderColor:"t.yellow200"}},value:r,onChange:o,defaultValue:n,boxProps:{sx:{border:"none"}}})})),pe=function(e){var t=e.symbol,r=e.initialMarkPrice,n=e.selectPrice,a=e.quantityAmount,s=e.id,u=e.positionSize,c=e.positionSide,d=e.entryPrice,p=(0,k.Z)().getI18n,f=(0,o.useState)(r),v=f[0],g=f[1],y=(0,o.useContext)(l.Z),x=y.actionPlaceOrder,h=y.actionCancelOrder,b=y.actionOrderConfirmModal,P=y.isDelivery,T=(0,m.iB)()[t]||{},Z=T.tickSize,S=void 0===Z?.01:Z,C=T.limitStepSize,I=void 0===C?.001:C,w=T.quantityPrecision,M=T.equalQtyPrecision,A=T.contractVal,L=(0,G.p)(S),O=(0,G.p)(I),E=Math.abs(a),F=(0,o.useState)(E),R=F[0],D=F[1],N=(0,V.F7)().orderConfirmation,B=(0,re.QV)().isCoinUnit,_=(0,le.Q)(),z=(_.isCoinUnit,_.isUSDTUnit),H=P?B?M:0:z?L:O,q=(0,se.nH)(H),Y=(0,m.E)().preOrders.filter((function(e){return e.reduceOnly&&e.type===X.PH.LIMIT_TYPE&&e.symbol===t&&e.positionSide===c&&e.side===(u>0?"SELL":"BUY")})),U=Y.length;(0,o.useEffect)((function(){n&&g(n)}),[n]),(0,o.useEffect)((function(){D(E)}),[E,a]);var K=(0,o.useCallback)((function(e){var r=e.orderType,n={orderType:r,limitPrice:v,qty:R};if(!(0,J.tq)()&&N[r])b(s,n);else{var i=R;if(P&&B){i=(0,re.q8)({quantity:R,price:d,contractVal:A});var o=Math.abs(u);i=i>o?o:i}else if(!P&&z){i=+(0,se.GW)((0,ie.Ch)({quantity:R,price:d}),w);var a=Math.abs(u);i=i>a?a:i}x({symbol:t,type:r,side:u>0?"SELL":"BUY",quantity:i,price:v,positionSide:c})}}),[b,x,A,d,s,B,P,z,N,c,u,v,R,w,t]);return ue(i.Z,{alignItems:"center",width:"100%",sx:{flexGrow:2}},ue(ce,{text:p("market",{defaultValue:"Market"}),onClick:function(){return K({orderType:X.PH.MARKET_TYPE})}}),ue(j.ZP,{trigger:"hover",enablePortal:!0,placement:"top",sx:{minWidth:"auto"},overlay:ue(ae,{orders:Y,symbol:t,handleCancel:function(e){return function(e){e&&h(e)}(e)}})},ue(ce,{text:"".concat(p("limit",{defaultValue:"Limit"})).concat(U>0?"(".concat(U,")"):""),onClick:function(){return K({orderType:X.PH.LIMIT_TYPE})}})),ue(j.ZP,{trigger:"click",enablePortal:!0,placement:"top",sx:{marginRight:"15px"},overlay:ue(i.Z,{alignItems:"center",justifyContent:"center",tx:"position.priceToolTip",variant:"container"},p("price",{defaultValue:"Price"}),ue(W.Z,{tx:"position.priceToolTip",variant:"arrow"}))},ue(de,{value:v,step:S,onChange:function(e){return(0,Q._p)(e,(function(e){return g(e)}),null,L)},defaultValue:r})),ue(j.ZP,{trigger:"click",enablePortal:!0,placement:"bottom-end",overlay:ue($.Z,{sx:{width:"230px"},onChange:function(e){var t=(0,se.GW)(e*E,H);D(t>E?E:t)}})},ue(de,{value:R,onChange:function(e){return(0,Q._p)(e,(function(e){return D(e>E?E:e)}),null,H)},defaultValue:E,step:q})))};const fe=a().memo(pe);var me=a().createElement,ve=function(e){var t=e.color,r=void 0===t?"#76808F":t;return me("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},me("rect",{x:"0.25",y:"0.25",width:"15.5",height:"15.5",rx:"1.75",stroke:r,strokeWidth:"0.5"}),me("path",{d:"M4 7.5H12V8.5H4V7.5Z",fill:r}),me("path",{d:"M8.5 4V12H7.5V4H8.5Z",fill:r}),me("path",{d:"M4 7.5H12V8.5H4V7.5Z",stroke:r,strokeWidth:"0.4"}),me("path",{d:"M8.5 4V12H7.5V4H8.5Z",stroke:r,strokeWidth:"0.4"}))};const ge=function(e){var t=(0,o.useContext)(l.Z),r=t.actionAdjustMarginModal,n=t.actionTpslModal,i=t.getColumnStyle,a=t.usePositionColumn,s=t.changeSymbol,u=a(e),c=u.adl,d=u.symbol,p=u.symbolText,f=u.color,m=u.leverage,v=u.riskRatio,g=u.isolated,y=u.ROEVal,x=u.formatedEntryPrice,h=u.quantityAmount,b=u.formatedQuantityAmount,P=u.formatedLiqPrice,T=u.fixedMarkPrice,Z=u.formatedMargin,S=u.formatedMarkPrice,C=u.formatedPnl,I=u.pnlColor,w=u.positionSide,M=u.positionSize,A=u.liquidationPrice,L=u.formatedTPPrice,O=u.formatedSLPrice,E=u.selectPrice,F=u.id,R=u.entryPrice,V=u.pushTime,D=(0,k.Z)().getI18n,N=g?D("Isolated",{defaultValue:"Isolated"}):D("Cross",{defaultValue:"Cross"}),B=(0,o.useState)(T)[0];return me("div",{key:"".concat(F,"_").concat(V),className:"positionRow"},me(ye,{color:f,getColumnStyle:i,symbolText:p,leverage:m,symbol:d,changeSymbol:s}),me(xe,{color:f,getColumnStyle:i,formatedQuantityAmount:b}),me(he,{getColumnStyle:i,formatedEntryPrice:x}),me(be,{getColumnStyle:i,formatedMarkPrice:S}),me(Pe,{getColumnStyle:i,liquidationPrice:A,formatedLiqPrice:P}),me(ke,{getColumnStyle:i,riskRatio:v}),me(Te,{getColumnStyle:i,actionAdjustMarginModal:r,isolated:g,formatedMargin:Z,marginTypeText:N,id:F}),me(Ze,{getColumnStyle:i,pnlColor:I,formatedPnl:C,ROEVal:y}),me(Se,{getColumnStyle:i,adl:c}),me(Ce,{getColumnStyle:i,symbol:d,id:F,initialMarkPrice:B,selectPrice:E,quantityAmount:h,positionSize:M,positionSide:w,entryPrice:R}),me(Ie,{getColumnStyle:i,formatedTPPrice:L,formatedSLPrice:O,actionTpslModal:n,id:F}))};var ye=(0,o.memo)((function(e){var t=e.getColumnStyle,r=e.color,n=e.symbol,i=e.symbolText,o=e.leverage,a=e.changeSymbol;return me("div",{className:"symbol",style:t("symbol"),onClick:function(){return a({stateSymbol:n})}},me("div",{className:"bar bar-".concat(r)}),me("div",{className:"symbolText"},i,me("div",{className:"leverage"},"".concat(o,"x"))))})),xe=(0,o.memo)((function(e){var t=e.getColumnStyle,r=e.color,n=e.formatedQuantityAmount;return me("div",{className:"size size-".concat(r),style:t("size")},n)})),he=(0,o.memo)((function(e){var t=e.getColumnStyle,r=e.formatedEntryPrice;return me("div",{className:"entryPrice",style:t("entryPrice")},r)})),be=(0,o.memo)((function(e){var t=e.getColumnStyle,r=e.formatedMarkPrice;return me("div",{className:"markPrice",style:(0,H.Z)({},t("markPrice"))},r)})),Pe=(0,o.memo)((function(e){var t=e.getColumnStyle,r=e.liquidationPrice,n=e.formatedLiqPrice,i=Number(r)>0?"primary":"";return me("div",{className:"liq liq-".concat(i),style:t("liquidationPrice")},Number(r)>0?n:"-")})),ke=(0,o.memo)((function(e){var t=e.getColumnStyle,r=e.riskRatio,n=Number(r)>80?"negative":"";return me("div",{className:"marginRatio marginRatio-".concat(n),style:t("marginRatio")},r,"%")})),Te=(0,o.memo)((function(e){var t=e.getColumnStyle,r=e.actionAdjustMarginModal,n=e.isolated,i=e.formatedMargin,l=e.marginTypeText,s=e.id,u=(0,o.useState)(!1),c=u[0],d=u[1];return me(a().Fragment,null,n?me("div",{className:"margin",style:(0,H.Z)((0,H.Z)({},t("margin")),{},{minWidth:"auto",cursor:"pointer"}),onClick:function(){return r(s)},onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)}},"".concat(i," (").concat(l,")"),"\xa0",me(ve,{color:c?"#D0980B":"#F0B90B"})):me("div",{className:"margin",style:(0,H.Z)((0,H.Z)({},t("margin")),{},{minWidth:"auto"})},"".concat(i," (").concat(l,")")))})),Ze=(0,o.memo)((function(e){var t=e.getColumnStyle,r=e.pnlColor,n=e.formatedPnl,i=e.ROEVal;return me("div",{className:"pnl pnl-".concat(r),style:(0,H.Z)((0,H.Z)({},t("pnl")),{},{minWidth:"auto"})},n,"(".concat(i,")"))})),Se=(0,o.memo)((function(e){var t=e.getColumnStyle,r=e.adl;return me("div",{className:"adl",style:t("adl")},me(Y.Z,{adl:r}))})),Ce=a().memo((function(e){var t=e.getColumnStyle,r=e.positionSize,n=e.symbol,i=e.id,o=e.initialMarkPrice,l=e.selectPrice,s=e.quantityAmount,u=e.positionSide,c=e.entryPrice;return me("div",{className:"closePosition",style:(0,H.Z)((0,H.Z)({},t("closePosition")),{},{display:"flex"})},r?me(fe,{symbol:n,id:i,initialMarkPrice:o,selectPrice:l,quantityAmount:s,positionSize:r,positionSide:u,entryPrice:c}):me(a().Fragment,null))})),Ie=(0,o.memo)((function(e){var t=e.getColumnStyle,r=e.formatedTPPrice,n=e.formatedSLPrice,i=e.actionTpslModal,o=e.id;return me("div",{className:"tpSl",style:(0,H.Z)({},t("tpSl"))},me("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},me("div",null,r," / ",n),me(q.Z,{size:16,color:"t.third",ml:"xs",cursor:"pointer",onClick:function(){return i(o)}})))})),we=a().createElement,Me=function(e){return we(ge,e)},Ae=function(e,t){var r=t[e]||{},n=r.symbol,i=r.positionSide;return"".concat(n,"_").concat(i)},Le=function(e,t){var r=e.loading,a=e.headers,s=e.data,u=void 0===s?[]:s,c=(0,o.useContext)(l.Z),d=c.gridMinWidth,p=c.isFullScreen,f=(null===u||void 0===u?void 0:u.length)||0,m=(0,o.useMemo)((function(){return{flexDirection:"column",flex:"1 0",pt:"xs",overflowX:"auto",overflowY:"hidden"}}),[]);return we(i.Z,{ref:t,sx:m},we(z,null),we(E,{headers:a,positionLength:f}),we(n.Z,{tx:"position.position",variant:"container",dataSource:u,loading:r,loadWithContent:!0,rowHeight:40,data:u,listSx:{minWidth:d(p)},itemElement:Me,itemKey:Ae,itemHeight:40}))};const Oe=a().forwardRef(Le)},"TrT/":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ie});var n=r("ZODY"),i=r("qbs8"),o=r("Ng/A"),a=r("qN/k"),l=r("xIFI"),s=r.n(l),u=r("hWhz"),c=r("FXY6"),d=r("I78S"),p=r("JLYw"),f=r("dwMH"),m=s().createElement,v=function(){var e=(0,p.yk)().getI18n,t=(0,l.useContext)(f.Z),r=t.handleHideOtherSymbol,n=t.hideOtherSymbol;return m(a.Z,{variant:"girdList.columnBox",sx:{py:"xs",pr:0}},m(a.Z,{sx:{alignItems:"center",fontSize:[1,0],color:"t.thead",cursor:["auto","pointer"],lineHeight:["30px","24px"]},onClick:function(){return r(!n)}},m(c.ZP,{name:"hideOtherSymbol",size:[18,16],checked:n,onChange:function(){return!1}}),m(d.Z,{sx:{userSelect:"none"}},e("hideOtherSymbol"))))};const g=s().memo(v);var y=r("YKSe"),x=r("7r9v"),h=r("QLxY"),b=r("SVjJ"),P=r("VwJU"),k=r.n(P),T=r("HSMY"),Z=r("xDxD"),S=r("qJlb"),C=r("0pZZ"),I=r("OKEt"),w=r("TG9/"),M=s().createElement;const A=function(e){var t=(0,u.Z)().getI18n,r=e.amount,n=e.onChange,i=e.onConfirm,l=e.baseAsset,s=void 0===l?"BTC":l,c=e.positionSize,d=e.precision,p=Math.abs(c),f="number"!==typeof Number(r)||r>p,m=M(a.Z,{sx:{mr:"6px",color:"t.yellow200"}},M(o.Z,null,s));return M(o.Z,null,M(I.Z,{variant:"outline",type:"number",defaultValue:"",value:r,error:f,onChange:function(e){return(0,w._p)(e,n,"",d)},onKeyDown:function(e){return(0,w.f5)(e,i)},onBlur:function(e){return(0,w.Y5)(e)},placeholder:p,prefix:M(o.Z,{sx:{ml:2,color:"t.grey300"}},t("Amount",{defaultValue:"Amount"})),suffix:m,sx:{textAlign:"right"},boxProps:{width:"100%",mt:"8px",borderRadius:"2px"}}))};var L=s().createElement;const O=function(e){var t=(0,u.Z)().getI18n,r=e.isMarket,n=e.price,i=e.onChange,l=e.formattedMarkPrice,s=e.quoteAsset,c=void 0===s?"USDT":s,d=e.precision,p=r?"":l,f="number"!==typeof Number(n),m=t("price",{defaultValue:"Price"}),v=L(a.Z,{sx:{mr:1,width:r?"95px":"auto"}},r&&L(a.Z,{flex:1},t("Market",{defaultValue:"Market"})),L(o.Z,null,c));return L(o.Z,null,L(I.Z,{variant:"outline",labelFixed:!0,disabled:r,error:f,value:n,onChange:function(e){return(0,w._p)(e,i,"",d)},placeholder:p,prefix:L(o.Z,{sx:{ml:2,color:"t.grey300"}},m),suffix:v,sx:{textAlign:"right"},boxProps:{width:"100%",mt:"8px",borderRadius:"2px"}}))};var E=r("t+KN"),F=r("LIeN"),R=r("qKfz"),V=s().createElement,D=function(e){var t=(0,u.Z)().getI18n,r=(0,p.yk)().getI18n,n=(0,l.useContext)(f.Z),i=n.actionPlaceOrder,a=n.isDelivery,s=e.symbol,c=e.positionSide,d=e.panelType,m=e.onClose,v=(0,Z.iB)(),g=(null===v||void 0===v?void 0:v[s])||{},y=g.baseAsset,x=g.quoteAsset,h=g.contractVal,P=g.quantityPrecision,I=void 0===P?1:P,w=g.pricePrecision,M=(0,p.$J)()[(0,E._g)(s,c)]||{},L=M.markPrice,D=void 0===L?0:L,N=M.positionSize,B=void 0===N?0:N,_=M.positionSide,z=M.entryPrice,H=(0,l.useState)(D.toFixed(w)),q=H[0],Y=H[1],U=(0,S.uf)(D,w),j=d===b.PH.MARKET_TYPE,W=(0,l.useState)(Math.abs(B)),K=W[0],J=W[1],G=Math.abs(B),Q=K||G,X=q||D,$=M.positionSize>0,ee=(0,R.F)({symbol:s,quantity:Q,isBuy:$,entryPrice:z,closedPrice:X,contractVal:h,isDelivery:a}),te=ee.marketPNL,re=ee.limitPNL,ne=j?te:re,ie=function(){var e=(0,T.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(),i({symbol:s,side:B>0?"SELL":"BUY",quantity:Q,type:d,price:X,positionSide:_});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return V(o.Z,{mt:"md"},V(O,{isMarket:j,price:q,markPrice:D,formattedMarkPrice:U,positionSize:B,quoteAsset:x,error:!1,onChange:function(e){var t="object"===typeof e?e.target.value:e;Y(t)},precision:w}),V(A,{amount:K,markPrice:D,positionSize:B,baseAsset:a?r("Cont",{defaultValue:"Cont"}):y,error:!1,onChange:function(e){var t="object"===typeof e?e.target.value:e;J(t>G?G:t)},onConfirm:ie,precision:I}),V(F.Z,{sx:{bg:"transparent",px:0},percentSx:{height:"32px",mr:"8px"},onChange:function(e){return J((e*Math.abs(B)).toFixed(I))}}),V(o.Z,{sx:{mt:"plus",mb:"24px",lineHeight:"34px"}},V(o.Z,{color:"t.third",as:"span"},t("estimatedPNL",{defaultValue:"Estimated PNL"}),":"),V(o.Z,{sx:{float:"right"}},isNaN(ne)?"-":(0,S.uf)(ne,a?4:2),"\xa0",x)),V(C.Z,{disabled:!1,sz:"l",width:1,onClick:ie},t("confirm",{defaultValue:"Confirm"})))};const N=s().memo(D);var B=s().createElement,_=b.PH.LIMIT_TYPE,z=b.PH.MARKET_TYPE,H=function(e){var t=e.active,r=e.title,n=B(o.Z,{sx:{width:"100%",height:"2px",bg:"primary",position:"absolute",bottom:"-1px"}});return B(o.Z,{sx:{position:"relative",mr:"16px",pt:"2px",pb:"14px",fontSize:"16px",fontWeight:"medium"},color:t?"t.primary":"t.grey300"},r," ",t?n:null)},q=function(e){var t=e.open,r=e.symbol,n=e.positionSide,i=e.onClose,o=(0,l.useState)(z),a=o[0],s=o[1],c=(0,u.Z)().getI18n;return B(y.Z,{open:t,onCloseIconClick:function(){return i(!1)},sx:{width:["100%","464px"],left:"0%",transform:"none",top:"45%"}},B(x.Z,{lazy:!0,defaultActiveKey:a,onChange:function(e){s(e)},tabsSx:{borderBottom:"1px solid",borderBottomColor:"lines.primary",overflow:"visible"}},B(h.Z,{tab:function(e){return B(H,{active:e,title:c("MarketClose",{defaultValue:"Market Close"})})},tabKey:z},B(N,{panelType:z,symbol:r,positionSide:n,onClose:i})),B(h.Z,{tab:function(e){return B(H,{active:e,title:c("LimitClose",{defaultValue:"Limit Close"})})},tabKey:_},B(N,{panelType:_,symbol:r,positionSide:n,onClose:i}))))};const Y=s().memo(q);var U=r("XP5A"),j=r("wR27"),W=r("DBF4"),K=s().createElement,J=function(e){return K(d.Z,Object.assign({__css:{color:"#848E9C"}},e))},G=function(e){return K(d.Z,Object.assign({__css:{fontSize:2}},e))},Q=function(e){return K(a.Z,Object.assign({variant:"columns.spaceLine",__css:{fontSize:1}},e))},X=function(e){var t=e.text,r=(0,U.Z)(e,["text"]);return K(C.Z,Object.assign({width:1,variant:"outline",color:"t.primary",sx:{border:"1px solid",borderColor:"themeConfig.grey600",boxSizing:"border-box",boxShadow:"none"}},r),t)},$=function(e){var t=(0,l.useState)(!1),r=t[0],n=t[1],i=(0,l.useContext)(f.Z),c=i.actionAdjustMarginModal,p=i.usePositionColumn,m=i.actionTpslModal,v=i.isDelivery,g=p(e),y=g.adl,x=(g.baseAsset,g.color),h=g.symbolText,b=g.leverage,P=g.ROEVal,k=g.formatedEntryPrice,T=g.formatedQuantityAmount,Z=g.formatedMarkPrice,S=g.formatedPnl,C=g.pnlColor,I=g.isolated,w=g.positionSize,M=g.liquidationPrice,A=g.formatedLiqPrice,L=g.riskRatio,O=g.formatedMargin,E=g.formatedTPPrice,F=g.formatedSLPrice,R=g.id,V=0===w,D=T>0?"L":"S",N=e.actionPlaceOrderModal,B=(0,u.Z)().getI18n,_=I?B("Isolated",{defaultValue:"Isolated"}):B("Cross",{defaultValue:"Cross"});return K(o.Z,{sx:{color:"t.primary",py:"xs"}},K(Q,{onClick:function(){return n(!r)}},K(a.Z,{sx:{alignItems:"center"}},K(d.Z,{px:1,bg:x,sx:{fontSize:"11px",lineHeight:"13px",borderRadius:"1px"}},D),K(d.Z,{sx:{mx:"xs"}},h),K(d.Z,{mx:1,px:"6px",py:1,sx:{fontSize:0,border:"1px solid #848E9C",borderRadius:"2px"}},"".concat(b,"x")),K(W.Z,{adl:y,mx:2,dashed:!0}))),[{label:"".concat(B("size",{defaultValue:"Size"})),value:T},{label:B("m-unrealizedPnl",{defaultValue:"Unrealized PNL(ROE %)"}),value:"".concat(S,"(").concat(P,")"),color:C},{label:B("entryPrice",{defaultValue:"Entry Price"}),value:k},{label:B("markPrice",{defaultValue:"Mark Price"}),value:Z},{label:B("m-liquidationPrice",{defaultValue:"Liquidation Price"}),value:Number(M)>0?A:"-",color:"t.yellow200"},{label:B("marginRatio",{defaultValue:"Margin Ratio"}),value:"".concat(L,"%")},{label:B("margin",{defaultValue:"Margin"}),value:"".concat(O," (").concat(_,")")}].map((function(e){var t=e.label,r=e.value,n=e.color;return K(Q,{key:t},K(J,null,t),K(G,{color:n},r))})),v||K(Q,{key:"tpSl"},K(J,null,B("tpSl",{defaultValue:"TP/SL"})),K(a.Z,{alignItems:"center",onClick:function(){return m(R)}},K(d.Z,null,E," / ",F),K(j.Z,{size:16}))),V?K(s().Fragment,null):K(s().Fragment,null,I?K(Q,{width:1,key:"button"},K(o.Z,{width:.5,px:2},K(X,{text:B("adjust-margin",{defaultValue:"Adjust Margin"}),onClick:function(){return c(R)}})),K(o.Z,{width:.5,px:2},K(X,{text:B("closePositionSingle",{defaultValue:"Close Position"}),onClick:function(){return N(e)}}))):K(Q,{width:1,key:"button"},K(o.Z,{width:1,px:2},K(X,{text:B("closePositionSingle",{defaultValue:"Close Position"}),onClick:function(){return N(e)}})))))};const ee=s().memo($);var te=s().createElement,re=function(){var e=(0,u.Z)().getI18n;return te(o.Z,{sx:{color:"t.secondary",textAlign:"center",fontSize:[0],marginTop:"xs"}},e("nodata",{defaultValue:"You have no position."}))},ne=function(e){var t=e.isEmpty,r=e.hasMore,o=e.loadMore,s=e.loading,u=e.data,c=void 0===u?[]:u,d=e.symbol,p=(0,l.useState)(!1),f=p[0],m=p[1],v=(0,l.useState)(d),y=v[0],x=v[1],h=(0,l.useState)(d),b=h[0],P=h[1];(0,l.useEffect)((function(){r&&o()}),[r,o]);var k=function(e){var t=e||{},r=t.symbol,n=t.positionSide;m(!0),x(r),P(n)};return te(a.Z,{sx:{position:"relative",flexDirection:"column",flex:"1 0"}},te(n.Z,{fullScreen:!0,show:s}),te(g,null),t?te(re,null):c.map((function(e){return te(ee,Object.assign({key:e.tradeId||e.id},e,{actionPlaceOrderModal:k}))})),r&&te(i.Z,{showMore:o,check:{offset:200},loading:s}),te(Y,{open:f,symbol:y,positionSide:b,onClose:function(){m(!1)}}))};const ie=s().memo(ne)},hZO4:(e,t,r)=>{"use strict";r.d(t,{Z:()=>H});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("Ng/A"),l=r("I78S"),s=r("qN/k"),u=r("0pZZ"),c=r("YKSe"),d=r("J6Qs"),p=r("xDxD"),f=r("E+oP"),m=r.n(f),v=r("xIFI"),g=r.n(v),y=r("Jx1D"),x=r("kelb"),h=r("ZIGC"),b=r("SVjJ"),P=r("UraT"),k=r("hWhz"),T=r("OKEt"),Z=r("3k8n"),S=r("wz6d"),C=r("LVI2"),I=r("U4Ym"),w=r("BP6G"),M=r("dwMH"),A=g().createElement,L=b.gu.LAST_PRICE,O=b.PH.TAKE_PROFIT_MARKET,E=b.PH.STOP_MARKET,F=function(e){var t=e.label,r=e.content;return A(s.Z,{sx:{justifyContent:"space-between",fontSize:"14px",lineHeight:"16px",height:"24px",alignItems:"center"}},A(l.Z,{color:"t.third"},t),r)};const R=function(e){var t=e.position,r=e.order,n=e.cancelOrder,i=e.type,o=e.quoteAsset,u=e.marginAsset,c=e.tickSize,d=e.pricePrecision,p=e.marginPrecision,f=e.price,g=e.changePrice,y=e.workingType,x=e.changeWorkingType,h=e.i18ns,b=t.entryPrice,P=t.positionSize,R=t.contractVal,V=m()(r)?y:r.workingType,D=m()(r)?f:r.stopPrice,N=(0,v.useContext)(M.Z).isDelivery,B=(0,I.p)(c),_=c,z=(0,S.uf)(D,d),H=V===L?h.lastPrice:h.markPrice;h.takeProfitTip=A(Z.c,{i18nKey:(0,k.G)("takeProfitNodeTip"),defaults:"When <text>{{workingType}}</text> reaches <text>{{stopPrice}}</text>, it will trigger Take Profit Market order to close this position. Estimated profit will be",values:{workingType:H,stopPrice:z},components:{text:A(l.Z,{as:"span",color:"t.primary"})}}),h.stopLossTip=A(Z.c,{i18nKey:(0,k.G)("stopLossNodeTip"),defaults:"When <text>{{workingType}}</text> reaches <text>{{stopPrice}}</text>, it will trigger Stop Market order to close this position. Estimated loss will be",values:{workingType:H,stopPrice:z},components:{text:A(l.Z,{as:"span",color:"t.primary"})}});var q="takeProfit"===i?h.takeProfit:h.stopLoss,Y="takeProfit"===i?h.takeProfitTip:h.stopLossTip,U=P>0&&r.type===O||P<0&&r.type===E?">=":"<=",j="\u2014\u2014",W="takeProfit"===i?"buy":"sell";if(""!==D){var K=function(e){var t=e.stopPrice,r=e.entryPrice,n=e.positionSize,i=e.contractVal;return e.isDelivery?n*i*(1/r-1/t):n*(t-r)}({stopPrice:D,entryPrice:b,positionSize:P,contractVal:R,isDelivery:N});Number.isFinite(K)&&(j=(0,S.uf)(K,p)),W=K>0?"buy":"sell"}var J=(0,v.useCallback)((function(e){return(0,C._p)(e,g,"",B)}),[g,B]),G=(0,v.useCallback)((function(){return n(r,i)}),[n,r,i]);return A(a.Z,{py:"12px"},m()(r)?A(s.Z,{justifyContent:"end"},A(T.Z,{type:"number",step:_,variant:"inline",prefix:q,placeholder:Number(0)&&Number(0).toFixed(d),suffix:o,value:f,onChange:J,boxProps:{sx:{flex:"auto",mt:0,pl:[0,"xs"],fontSize:"12px"}}}),A(w.Z,{workingType:y,changeWorkingType:x})):A(F,{label:q,content:A(s.Z,{justifyContent:"end"},A(l.Z,null,"".concat(H," ").concat(U," ").concat(z," ").concat(o)),A(l.Z,{sx:{ml:"sm",cursor:"pointer",color:"t.yellow200","&:hover":{color:"t.yellow300"}},onClick:G},h.cancel))}),A(a.Z,{sx:{mt:"xs",p:"sm",width:"100%",borderRadius:"2px",fontSize:"14px",lineHeight:"20px",color:"t.third",bg:"dialog.panelBg"}},Y,A(l.Z,{as:"span",color:W}," ",j," ",u)))};var V=r("JLYw"),D=g().createElement,N=b.gu.MARK_PRICE,B=b.PH.TAKE_PROFIT_MARKET,_=b.PH.STOP_MARKET,z=function(e){var t=e.visible,r=e.position,n=void 0===r?{}:r,f=e.onClose,g=(0,V.kP)().showKycDialog,b=(0,v.useContext)(M.Z).usePositionColumn,T=(0,V.yk)().getI18n,Z=n.symbol,S=n.positionSize,C=n.positionSide,I=n.leverage,w=n.strategyOrders,A=void 0===w?{}:w,L=b(n),O=L.quoteAsset,E=L.marginAsset,z=L.tickSize,H=L.pricePrecision,q=L.marginPrecision,Y=L.formatedEntryPrice,U=L.formatedMarkPrice,j=(0,P.lE)(Z,T),W=(0,v.useState)(A.tp),K=W[0],J=W[1],G=(0,v.useState)(A.sl),Q=G[0],X=G[1],$=(0,v.useState)(""),ee=$[0],te=$[1],re=(0,v.useState)(N),ne=re[0],ie=re[1],oe=(0,v.useState)(""),ae=oe[0],le=oe[1],se=(0,v.useState)(N),ue=se[0],ce=se[1];(0,v.useEffect)((function(){t&&(J(A.tp),X(A.sl),te(""),ie(N),le(""),ce(N))}),[A.sl,A.tp,t]);var de=(0,k.Z)(),pe=de.getI18n,fe=de.i18n.language,me=(0,p.YT)().setMessageInfo,ve=(0,y.W)().delOpenOrders,ge=(0,v.useCallback)(function(){var e=(0,o.Z)(i().mark((function e(t,r){var n,o,a,l,s,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t);case 2:n=e.sent,o=n.success,a=n.data,l=n.message,o&&(null===a||void 0===a?void 0:a.orderId)&&("takeProfit"===r&&J({}),"stopLoss"===r&&X({})),u=(s=!o)?"error":"success",(c=l||(s?"failed":"success"))&&me({message:c,variant:u});case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[ve,me]),ye=(0,v.useCallback)(function(){var e=(0,o.Z)(i().mark((function e(t,r){var n,o,a,l,s,u,c,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={symbol:Z,side:S>0?"SELL":"BUY",positionSide:C,type:r,timeInForce:"GTE_GTC",quantity:0,stopPrice:t.stopPrice,workingType:t.workingType,closePosition:!0,placeType:"position"},e.next=3,(0,x.c)(n,{language:fe});case 3:if(o=e.sent,a=o.success,l=o.message,s=o.code,c=(u=!a)?"error":"success",d=l||(u?"failed":"success"),!(0,h.tw)(s)){e.next=13;break}return g(l),e.abrupt("return");case 13:d&&me({message:d,variant:c});case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[Z,fe,S,C,me,g]),xe=(0,v.useCallback)((function(){var e=m()(K)&&ee&&ne,t=m()(Q)&&ae&&ue,r=[];e&&r.push(ye({stopPrice:ee,workingType:ne},B)),t&&r.push(ye({stopPrice:ae,workingType:ue},_)),Promise.all(r).finally(f)}),[f,ye,Q,ae,ue,K,ee,ne]),he={tpSlTitle:pe("tpSl",{defaultValue:"TP/SL for entire position"}),symbol:pe("symbol",{defaultValue:"Symbol"}),entryPrice:pe("entryPrice",{defaultValue:"Entry Price"}),markPrice:pe("markPrice",{defaultValue:"Mark Price"}),lastPrice:pe("lastPrice",{defaultValue:"Last Price"}),takeProfit:pe("takeProfit",{defaultValue:"Take Profit"}),stopLoss:pe("stopLoss",{defaultValue:"Stop Loss"}),cancel:pe("cancel",{defaultValue:"Cancel"}),confirm:pe("confirm",{defaultValue:"Confirm"}),LONG:pe("psLong",{defaultValue:"Long"}),SHORT:pe("psShort",{defaultValue:"Short"}),tpSlTip:pe("tpSlTip")};return D(c.Z,{open:!m()(n)&&t,onCloseIconClick:f,sx:{width:["100%","464px"]},title:he.tpSlTitle},D(a.Z,{sx:{mt:"-6px",mb:"xs",pb:"18px",borderBottom:"1px solid #2B2F36",borderBottomColor:"control"}},D(F,{label:he.symbol,content:D(l.Z,{color:S>0?"buy":"sell"},j," ",["LONG","SHORT"].includes(C)?he[C]:""," ",I,"x")}),D(F,{label:he.entryPrice,content:D(s.Z,null,D(l.Z,null,Y),D(l.Z,{sx:{ml:"xs",color:"t.third"}},O))}),D(F,{label:he.markPrice,content:D(s.Z,null,D(l.Z,null,U),D(l.Z,{sx:{ml:"xs",color:"t.third"}},O))})),D(a.Z,{sx:{minHeight:"272px"}},D(R,{position:n,order:K,cancelOrder:ge,type:"takeProfit",quoteAsset:O,marginAsset:E,tickSize:z,pricePrecision:H,marginPrecision:q,price:ee,changePrice:te,workingType:ne,changeWorkingType:ie,i18ns:he,getI18n:pe}),D(R,{position:n,order:Q,cancelOrder:ge,type:"stopLoss",quoteAsset:O,marginAsset:E,tickSize:z,pricePrecision:H,marginPrecision:q,price:ae,changePrice:le,workingType:ue,changeWorkingType:ce,i18ns:he,getI18n:pe})),D(a.Z,{color:"t.third",mt:"xs"},"* ",he.tpSlTip),D(d.y,null,D(s.Z,null,D(u.Z,{flex:"auto",variant:"outline",sx:{boxShadow:"outlineBtnShadow",color:"t.primary",mr:"md",height:"40px"},onClick:f},he.cancel),D(u.Z,{flex:"auto",onClick:xe,height:"40px"},he.confirm))))};const H=g().memo(z)},LIeN:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("qN/k"),l=o().createElement,s=function(e){var t=e.onClick,r=e.sx,i=e.children;return l(a.Z,{justifyContent:"center",alignItems:"center",sx:(0,n.Z)({display:"flex",flex:"1",minWidth:"40px",height:"24px",border:"1px solid",borderColor:"position.percentInputBorderColor",borderRadius:"2px",cursor:"pointer",mr:"4px",color:"position.percentInputColor",textAlign:"center",":hover":{color:"primary",borderColor:"currentColor"},":last-of-type":{mr:0}},r),onClick:t},i)};const u=function(e){var t=e.percents,r=void 0===t?[.1,.25,.5,.75,1]:t,i=e.onChange,o=void 0===i?function(e){}:i,u=e.sx,c=void 0===u?{}:u,d=e.percentSx,p=void 0===d?{}:d;return l(a.Z,{variant:"dropdown",justifyContent:"space-between",sx:(0,n.Z)({width:"100%",bg:"position.limitOrdersBg",borderRadius:"4px",p:"8px"},c)},r.map((function(e){return l(s,{key:e,sx:p,onClick:function(){return o(e)}},100*e,"%")})))}},hWhz:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o,G:()=>a});var n=r("xDxD"),i="trd-Position",o=function(e){return(0,n.ZK)(i,e)},a=function(e){return"".concat(i,"-").concat(e)}},qKfz:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});var n=r("xIFI"),i=r("JLYw"),o=r("ViBG");function a(e){var t=e.symbol,r=e.quantity,a=e.isBuy,l=e.entryPrice,s=void 0===l?0:l,u=e.closedPrice,c=void 0===u?0:u,d=e.contractVal,p=void 0===d?100:d,f=e.isDelivery,m=(0,i.Wr)({symbol:t,isDelivery:f}),v=m.askPrice,g=void 0===v?0:v,y=m.bidPrice,x=void 0===y?0:y;return(0,n.useMemo)((function(){return(0,o.k)({quantity:r,isBuy:a,entryPrice:s,closedPrice:c,contractVal:p,isDelivery:f,askPrice:g,bidPrice:x})}),[g,x,c,p,s,a,f,r])}},Ynki:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>K});var n,i=r("DtyY"),o=r("DC7k"),a=r("xIFI"),l=r.n(a),s=r("c83x"),u=r("Puqe"),c=r.n(u),d=r("kelb"),p=r("Jx1D"),f=r("qN/k"),m=r("t26l"),v=r("xDxD"),g=r("jw37"),y=r("qJlb"),x=r("7k23"),h=r("S2LQ"),b=r("SVjJ"),P=r("JLYw"),k=r("ufcj"),T=r("0sn7"),Z=r("hZO4"),S=r("hWhz"),C=r("dwMH"),I=(r("qKfz"),r("XP5A")),w=r("IFcF"),M=r("wz6d"),A=r("O+dC"),L=r("jSf8"),O=r("W0IN"),E={long:"buy",short:"sell"},F=function(e){var t,r,n=e.symbol,o=e.adl,a=e.positionSize,l=e.entryPrice,s=e.markPrice,u=e.liquidationPrice,c=e.margin,d=e.unrealizedPnl,p=e.strategyOrders,f=(0,I.Z)(e,["symbol","adl","positionSize","entryPrice","markPrice","liquidationPrice","margin","unrealizedPnl","strategyOrders"]),m=(0,A.Q)().isCoinUnit,g=Number(a)>0?"long":"short",y=Number(a)>0?"":"-",x=E[g],h=(0,v.iB)(),b=(0,P.yk)().getI18n,k=h[n]||{},T=k.baseAsset,Z=k.quoteAsset,S=k.tickSize,C=k.pricePrecision,F=k.quantityPrecision,R=k.marginAsset,V=(0,w.H)(k,b).fullName,D=(0,O.c)(),N=(0,M.uf)(l,C),B=m?a.toFixed(F):(0,L.WA)({quantity:Math.abs(a),price:l,precision:C}),_="".concat(m?"".concat((0,M.uf)(a,F)," ").concat(T):"".concat(y).concat(B," ").concat(R)),z=(0,M.uf)(u,C),H=(0,M.uf)(c,D),q=(0,M.uf)(s,C),Y=Number(s).toFixed(C),U=(0,M.uf)(d,D),j=(null===p||void 0===p||null===(t=p.tp)||void 0===t?void 0:t.stopPrice)?(0,M.uf)(p.tp.stopPrice,C):"--",W=(null===p||void 0===p||null===(r=p.sl)||void 0===r?void 0:r.stopPrice)?(0,M.uf)(p.sl.stopPrice,C):"--",K=0===Number(d)?"":Number(d)>0?"buy":"sell";return(0,i.Z)({baseAsset:T,quoteAsset:Z,marginAsset:R,marginPrecision:D,pricePrecision:C,tickSize:S,symbol:n,symbolText:V,adl:o,positionSize:a,entryPrice:l,markPrice:s,liquidationPrice:u,margin:c,unrealizedPnl:d,color:x,formatedEntryPrice:N,quantityAmount:B,formatedQuantityAmount:_,formatedLiqPrice:z,formatedMargin:H,fixedMarkPrice:Y,formatedMarkPrice:q,formatedPnl:U,formatedTPPrice:j,formatedSLPrice:W,pnlColor:K},f)},R=r("Ev73"),V=(n="px",function(e){return"".concat(e).concat(n)}),D={my:0,py:"xs",display:"flex",alignItems:"center",flexGrow:0,flexShrink:0,color:"t.primary",fontSize:[0],cursor:"auto"},N={userSelect:"none",flexGrow:1,fontWeight:"normal",whiteSpace:"nowrap"},B={symbol:{minWidth:V(170)},size:{minWidth:V(75)},entryPrice:{minWidth:V(50)},markPrice:{minWidth:V(50)},liquidationPrice:{minWidth:V(70)},marginRatio:{minWidth:V(70)},margin:{minWidth:V(120)},pnl:{minWidth:V(85)},adl:{minWidth:V(20)},closePosition:{minWidth:V(180),flexGrow:3},tpSl:{minWidth:V(120),textAlign:"right"}},_={symbol:{minWidth:V(170)},size:{minWidth:V(100)},entryPrice:{minWidth:V(65)},markPrice:{minWidth:V(65)},liquidationPrice:{minWidth:V(70)},marginRatio:{minWidth:V(70)},margin:{minWidth:V(120)},pnl:{minWidth:V(125)},adl:{minWidth:V(60)},closePosition:{minWidth:V(250),flexGrow:3},tpSl:{minWidth:V(120),textAlign:"right"}},z=function(e){var t=e?_:B;return Object.keys(t).reduce((function(e,r){return e+parseInt(t[r].minWidth,10)}),0)},H=function(e){var t=B[e]||{};return(0,i.Z)((0,i.Z)((0,i.Z)({},N),t),{},{flexBasis:t.minWidth})},q=function(e){var t=_[e]||{};return(0,i.Z)((0,i.Z)((0,i.Z)({},N),t),{},{flexBasis:t.minWidth})},Y=l().createElement,U=(0,g.ck)("mobile",(function(){return Promise.all([r.e(834),r.e(639),r.e(40)]).then(r.bind(r,"TrT/"))})),j=(0,g.ck)("pc",(function(){return Promise.all([r.e(834),r.e(639),r.e(18)]).then(r.bind(r,"0YQC"))})),W=function(){var e=(0,s.useSelector)((function(e){return e.loading.effects.position.queryPosition})),t=(0,S.Z)(),r=t.getI18n,n=t.i18n,u=(0,P.C3)()===h.UW,g=(0,P.yk)().getI18n,I=function(e){var t=e.getI18n,r=(0,R.F)().useLastPrice?"lastPrice":"markPrice";return(0,a.useMemo)((function(){return[{key:"symbol",title:t("symbol",{defaultValue:"Symbol"})},{key:"size",title:t("size",{defaultValue:"Size"})},{key:"entryPrice",title:t("entryPrice",{defaultValue:"Entry Price"}),tip:t("entryPriceTip",{defaultValue:"Average executed buy/sell price for your current long/short position."})},{key:"markPrice",title:t("markPrice",{defaultValue:"Mark Price"}),tip:t("markPriceTip",{defaultValue:"The latest mark price for this contract. This is the price used for PNL and margin calculations, and may differ from the last price for the purposes of avoiding price manipulation."})},{key:"liquidationPrice",title:t("liquidationPrice",{defaultValue:"Liq.Price"}),tip:t("liquidationPriceTip",{defaultValue:"If the mark price of the contract reaches below this price (when long) or above this price(when short), your position will be liquidated."})},{key:"marginRatio",title:t("marginRatio",{defaultValue:"Margin Ratio"}),tip:t("marginRatioTip",{defaultValue:"The lower the Margin Ratio, the lower your liquidation level will be relative to your position size. Your positions will be liquidated once Margin Ratio reaches 100%."})},{key:"margin",title:t("margin",{defaultValue:"Margin"}),tip:t("marginTip",{defaultValue:"The margin allocated to the current position."})},{key:"pnl",title:t("unrealizedPnl",{defaultValue:"PNL(ROE %)"}),tip:t("unrealizedPnlTip-".concat(r))},{key:"adl",title:t("adl",{defaultValue:"ADL"}),tip:t("adlTip",{defaultValue:"This indicator shows your position in the auto-deleverage queue. If all lights are lit, in the event of a liquidation, your position may be reduced."})},{key:"closePosition",title:t("closePosition",{defaultValue:"Close Position"}),tip:t("closePositionTip",{defaultValue:"You can close your entire position here, which will enter an order with the opposite size at market price or limit price defined by you."})},{key:"tpSl",title:t("tpSl",{defaultValue:"TP/SL for entire position"}),tip:t("tpSlTip")}]}),[t,r])}({getI18n:r}),w=(0,P.kP)().showKycDialog,M=(0,v.E)().preOrders,A=void 0===M?[]:M,L=(0,p.W)().delOpenOrders,O=(0,P.F$)(),E=(0,v.YT)().setMessageInfo,V=(0,v.z4)(),N=(0,o.Z)(V,1)[0],B=(0,a.useState)(""),_=B[0],W=B[1],K=(0,a.useState)({}),J=K[0],G=K[1],Q=(0,P.rf)().curLeverage,X=n.language,$=void 0===X?"en":X,ee=(0,v.j2)(),te=ee.tickSize,re=void 0===te?.01:te,ne=ee.minQty,ie=void 0===ne?.001:ne,oe=(0,P.d0)(),ae=(0,a.useState)(!1),le=ae[0],se=ae[1],ue=le?O.filter((function(e){return(null===e||void 0===e?void 0:e.symbol)===N})):O,ce=(0,y.N3)(re),de=(0,y.N3)(ie),pe=!e&&0===ue.length,fe=r("nodata",{defaultValue:"You have no open position."}),me=(0,a.useCallback)((function(){W(""),G({})}),[W,G]),ve=(0,a.useRef)([]);ve.current=ue;var ge=(0,a.useCallback)((function(e){W("ADJUST_MARGIN");var t=ve.current.find((function(t){return t.id===e}))||{};G(t)}),[W,G]),ye=(0,a.useCallback)((function(e){W("TP_SL");var t=ve.current.find((function(t){return t.id===e}))||{};G(t)}),[W,G]),xe=(0,a.useCallback)((function(e,t){W("ORDER_CONFIRM");var r=ve.current.find((function(t){return t.id===e}))||{};G((0,i.Z)((0,i.Z)({},r),{},{closeParams:t}))}),[W,G]),he=(0,a.useCallback)((function(e){var t=e.price,r=e.positionSide,n=e.type===b.PH.MARKET_TYPE;if(!n&&!t)return Promise.resolve();var o={leverage:Q,timeInForce:b.rb.TIF.GTC,reduceOnly:!0},a=(0,i.Z)((0,i.Z)({},e),o);return c()(a,"buyQty","sellQty"),n&&(a=c()(a,"price","timeInForce")),"LONG"!==r&&"SHORT"!==r||(a=c()(a,"reduceOnly")),(0,d.c)((0,i.Z)((0,i.Z)({},a),{},{placeType:"position"}),{language:$}).then((function(e){var t=e||{},r=t.success,n=t.message,i=t.data,o=t.code,a=r&&!n;return(0,x.t)(o)?w(n):E({message:a?g("order-submitted",{defaultValue:""}):n||g("order-rejected",{defaultValue:""}),variant:a?"success":"error"}),Promise.resolve(i)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[Q,$,E,g,w]),be=(0,a.useCallback)((function(e){var t=A.filter((function(t){return(null===t||void 0===t?void 0:t.orderId)===e}));return 1===t.length?L(t[0]):Promise.resolve()}),[L,A]),Pe=(0,a.useMemo)((function(){return{isFullScreen:u,symbol:N,emptyText:fe,pricePrecision:ce,quantityPrecision:de,actionAdjustMarginModal:ge,actionTpslModal:ye,actionPlaceOrder:he,actionOrderConfirmModal:xe,actionCancelOrder:be,RowStyle:D,gridMinWidth:z,getColumnStyle:u?q:H,usePositionColumn:F,changeSymbol:oe,hideOtherSymbol:le,handleHideOtherSymbol:se,isDelivery:!1}}),[ge,be,he,xe,ye,fe,ce,de,N,oe,u,le,se]);return Y(C.Z.Provider,{value:Pe},Y(f.Z,{sx:{flexDirection:"column",height:"100%",pb:"xs"}},Y(m.Z,null,(function(t){var r=t.isMobile;return Y(l().Fragment,null,r?Y(U,{isEmpty:pe,loading:e,data:ue,symbol:N}):Y(j,{isEmpty:pe,headers:I,data:ue,loading:e,symbol:N}),"ADJUST_MARGIN"===_&&Y(T.Z,{isMobile:r,visible:!0,position:J,onClose:me}),"ORDER_CONFIRM"===_&&Y(k.Z,{visible:!0,position:J,onClose:me}),"TP_SL"===_&&Y(Z.Z,{visible:!0,position:J,onClose:me}))}))))};const K=l().memo(W)},Gpv1:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var n=r("DC7k"),i=r("yCSn"),o=r("xIFI"),a=r.n(o),l=r("c83x"),s=r("s/Ur"),u=r("xDxD"),c=r("NXRQ"),d=r("BdPR"),p=r("hcLW"),f=r("qN/k"),m=r("Ng/A"),v=r("kz/E"),g=r("I78S"),y=r("bCmj"),x=r("EibB"),h=r("ASW3"),b=r("3TKe"),P=r("wpK3"),k=r("wHkB"),T=r("S2LQ"),Z=r("rZ+f"),S=r("ohVe"),C=r("Vu9W"),I=r("70Ll"),w=r("w4z0"),M=r("SVjJ"),A=r("JLYw"),L=a().createElement,O=[{type:"two",src:"".concat(T.Xs,"/static/images/trade-next-ui/chart_two.png"),mr:"24px"},{type:"three",src:"".concat(T.Xs,"/static/images/trade-next-ui/chart_three.png"),mr:"24px"},{type:"four",src:"".concat(T.Xs,"/static/images/trade-next-ui/chart_four.png"),mr:"0"},{type:"six",src:"".concat(T.Xs,"/static/images/trade-next-ui/chart_six.png"),mr:"24px"}],E=function(e){var t=e.widget,r=e.onChange,n=(0,o.useContext)(w.VY),i=n.layout,a=n.showFavourite,l="favourite"===t?a:!!i.find((function(e){return e.i===t})),s=(0,o.useCallback)((function(e){return r(e,t)}),[r,t]);return(0,o.useMemo)((function(){return L(p.Z,{size:16,checked:l,onChange:s,name:t})}),[l,s,t])},F=function(){var e=(0,u.ZK)().getI18n,t=(0,o.useContext)(w.VY),r=t.layout,l=t.setLayout,s=t.setFavourite,c=(0,o.useRef)(r),d="rtl"===(0,u.gm)(),f=(0,o.useMemo)((function(){return d?w.di:w.mZ}),[d]),m=(0,o.useCallback)((function(e,t){var n=e.target.checked;if("market"===t){var o=n?(0,w.y3)(r):(0,w.tv)(r);return c.current=o,l(o)}if("verticalDepth"===t){var a=n?(0,w.HC)(r):(0,w.ys)(r);return c.current=a,l(a)}if("favourite"===t)return s(n);var u=n?[].concat((0,i.Z)(c.current),[w.mZ.find((function(e){return e.i===t}))]):c.current.filter((function(e){return e.i!==t}));c.current=u,l(u)}),[r]),v=(0,A.e5)(),g=(0,n.Z)(v,2),y=g[0],x=g[1],h=(0,o.useCallback)((function(){return x(!y)}),[y,x]);return(0,o.useMemo)((function(){return L(a().Fragment,null,L("div",{key:"flashOrder",className:"component",onClick:function(e){return e.stopPropagation()}},L("div",null,e("trd-layout-quickTrading"),L(k.Z,{ml:"5px",arrow:!0,tip:e("trd-layout-quickTradingInfo",{defaultValue:"Quick Trading will send market order and could be filled immediately. "})},L(b.Z,{className:"info",color:"t.third",height:"14px",size:14}))),L(p.Z,{size:16,checked:y,onChange:h,name:"flashOrder"})),L("div",{className:"component",onClick:function(e){return e.stopPropagation()}},L("div",null,e("trd-layout-favouriteTle")),L(E,{widget:"favourite",onChange:m})),f.map((function(t,r){return L("div",{key:"".concat(r+2),className:"component",onClick:function(e){return e.stopPropagation()}},L("div",null,t.getTitle(e),"flashOrder"===t.i?L(k.Z,{ml:"5px",arrow:!0,tip:e("trd-layout-quickTradingInfo",{defaultValue:"Quick Trading will send market order and could be filled immediately. "})},L(b.Z,{className:"info",color:"t.third",height:"14px",size:14})):null),L(E,{widget:t.i,onChange:m}))})))}),[f,y,e,m,h])},R=function(){var e=(0,l.useDispatch)(),t=(0,d.Z)(M.di,M.kj),r=(0,n.Z)(t,2),i=r[0],c=r[1],p=(0,u.ZK)().getI18n,h="rtl"===(0,u.gm)(),b=(0,A.yk)().getI18n,P=(0,o.useContext)(w.VY).setLayout,k=(0,l.useSelector)((function(e){return e.layout.pageLayout})),E=(0,d.Z)(T.IF),R=(0,n.Z)(E,2)[1],V=(0,u.Fs)().isIPad,D=(0,u.rd)().color,N=(0,s.useMediaQuery)({query:"screen and (max-width: 1440px)"}),B=(0,o.useCallback)((function(e){if(!N||"six"!==e){var t=window.location,r=t.pathname,n=t.search,i="";if(r.indexOf("multipleChart")>-1){var o=r.split("/").slice(0,4);i="".concat(o.join("/"),"?type=").concat(e)}else{var a=r.split("/").slice(0,2);i=""===n?"".concat(a.join("/"),"/futures/multipleChart?type=").concat(e):"".concat(a.join("/"),"/futures/multipleChart").concat(n,"&type=").concat(e)}return window.open(i,"_blank")}}),[N]);var _=function(t){k!==t&&(e.layout.toggleLayout(t),R(t));var r=window.location.pathname,n=r.split("/").slice(0,3),i="";r.indexOf("multipleChart")>-1&&(i="".concat(n.join("/"),"/BTC_USDT"),window.location.href=i)};return L(f.Z,{variant:"preference.dropdown",sx:{flexDirection:"column",width:"344px",height:"auto",fontSize:"sm",px:"sm",backgroundColor:"themeConfig.grey700",color:"themeConfig.secondary",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.08), 0px 0px 4px rgba(0, 0, 0, 0.08)"}},L(f.Z,{sx:{justifyContent:"space-between",alignItems:"center",height:"60px",width:"100%",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"themeConfig.grey600"}},L(m.Z,null,p("trd-layout-setting-theme",{defaultValue:"Theme"})),L(S.Z,null)),L(f.Z,{sx:{height:"134px",width:"100%",borderBottomWidth:"1px",borderBottomStyle:V?"none":"solid",borderBottomColor:"themeConfig.grey600",flexDirection:"column",py:"md"}},L(m.Z,{sx:{height:"18px",fontSize:"sm"}},p("trd-layout-setting-color-setting",{defaultValue:"Color Setting"})),L(C.Z,null)),L("div",{className:"customize-layout"},!V&&L(m.Z,{sx:{pt:"md"}},L("div",{style:{display:"inline-block",fontSize:"sm"}},p("trd-layout-setting-layout",{defaultValue:"Layout"})),L(f.Z,{flexDirection:"row"},L("div",{onClick:function(e){e.stopPropagation(),c(M.kj)}},L(x.ZP,{sx:{mt:"sm",color:"themeConfig.grey5",minWidth:"120px"},label:p("trd-layout-order-mode"),value:M.kj,checked:i===M.kj})),L("div",{onClick:function(e){e.stopPropagation(),c(M.Z$)}},L(x.ZP,{sx:{ml:"4px",mt:"sm",color:"themeConfig.grey5",minWidth:"120px"},label:p("trd-layout-multiple-chart"),value:M.Z$,checked:i===M.Z$}))),i!==M.Z$?null:L("div",{className:"multiple-box",style:{paddingTop:"24px"}},L(f.Z,{flexDirection:"row",flexWrap:"wrap"},O.map((function(e){return L(f.Z,{flexDirection:"column",sx:{cursor:"pointer",mr:e.mr,mb:"24px","&:hover":{".chart-desc":{color:N&&"six"===e.type?"themeConfig.grey300":"themeConfig.grey50"},".chart-tips":{visibility:"visible"}}},key:e.type},L(m.Z,{sx:{width:"88px",height:"57px",border:"solid 1px",borderColor:"transparent",borderRadius:"2px",cursor:"pointer","&:hover":{borderColor:N&&"six"===e.type?"none":"t.yellow200"},opacity:N&&"six"===e.type?"0.5":"1"},onClick:function(){return B(e.type)}},L(v.Z,{src:e.src})),L(g.Z,{sx:{mt:"xs",fontSize:"12px",width:"88px",color:"themeConfig.grey300",textAlign:"center",opacity:N&&"six"===e.type?"0.5":"1"},className:"chart-desc"},b("chart-".concat(e.type))),N&&"six"===e.type&&L(g.Z,{sx:{mt:"xs",fontSize:"12px",color:"themeConfig.error",width:"140px",visibility:"hidden"},className:"chart-tips"},b("chart-tips")))})))),i!==M.kj?null:L(a().Fragment,null,L(f.Z,{sx:{pt:"sm",mb:"16px"}},L(I.jx,Object.assign({type:T.$f,desc:p("trd-layout-setting-layout-pro",{defaultValue:"Pro"}),"data-testid":"LayoutProType",active:k===T.$f,handleClick:function(e){e.stopPropagation(),_(T.$f)}},D===T.Pe?I.x2:I.Xn)),L(I.jx,Object.assign({type:T.UW,desc:p("trd-layout-setting-layout-fullscreen",{defaultValue:"Full screen"}),"data-testid":"LayoutFullscreenType",active:k===T.UW,handleClick:function(e){e.stopPropagation(),_(T.UW)}},D===T.Pe?I.x2:I.Xn,{sx:{ml:"24px"}}))),k===T.$f&&!V&&L(a().Fragment,null,L(F,null),L("div",{onClick:function(){return P(w.di)}},L(y.Z,{className:"back-layout"},b("subheader-backlayout",{defaultValue:"Back to Default Layout"}))))))),!h&&L(f.Z,{className:"versionContainer",sx:{borderTop:"1px solid",borderColor:"themeConfig.grey600",paddingTop:"24px",marginTop:"16px",marginBottom:"16px"}},L(Z.n,{type:"futures"})))},V=function(){var e=(0,u.ZK)().getI18n,t=(0,d.Z)("futuresThemeView"),r=(0,n.Z)(t,2),i=r[0],a=r[1],l=(0,o.useRef)(),s=(0,u.Fs)(),p=s.isMobile,f=s.isIPad,m=(0,c.KO)(),v=m.putCoachMark,g=m.showCoachMarkSingle;return(0,o.useEffect)((function(){v("futuresThemeGuide",{target:l,title:e("trd-setting-guide-title",{defaultValue:"Customize your trading interface!"}),content:e("trd-setting-guide-content",{defaultValue:"Select your favorite theme, color and your preferred layout."}),position:"bottom-start"})}),[e]),(0,o.useEffect)((function(){i||f||p||setTimeout((function(){g("futuresThemeGuide"),a(!0)}),3e3)}),[i,f,p]),L(h.ZP,{trigger:"hover",ref:l,sx:{width:"48px",height:"64px",pt:"20px",pr:"12px",pl:"8px",bg:"#12161C",position:"relative",color:"t.grey0","&:hover":{color:"primary"},cursor:"pointer"},"data-testid":"UIOptionSelect",overlay:L(R,null),placement:"bottom",enablePortal:!0},L(P.Z,{sx:{zIndex:10}}))};const D=a().memo(V)},R2BT:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var n=r("DC7k"),i=r("xIFI"),o=r.n(i),a=r("ASW3"),l=r("jzeX"),s=r("qN/k"),u=r("I78S"),c=r("UIN9"),d=r("NXRQ"),p=r("eoBf"),f=r("U4Ym"),m=r("xDxD"),v=r("qoOy"),g=r("S2LQ"),y=r("2M4l"),x=r("jw37"),h=r("HFO+"),b=r("6uzN"),P=r("oUFo"),k=r("mnJM"),T=r("JLYw"),Z=r("WpYY"),S=o().createElement,C=(0,x.SA)((function(){return Promise.all([r.e(834),r.e(567),r.e(639),r.e(898),r.e(789)]).then(r.bind(r,"4UzO"))}),"csr"),I=y.Z.registerActionHandle,w=y.Z.constants;function M(){var e=(0,m.z4)(),t=(0,n.Z)(e,1)[0],r=(0,m.Kn)()[t]||{},a=(0,m.j2)(),l=(0,m.rR)(),c=(0,T.CE)()[t],d=(0,T.yk)().getI18n,v=(0,b.s)(a.deliveryDate),g=v.loading,y=v.value,x=!g&&y<1,P=(0,f.p)(l),k=Number((null===c||void 0===c?void 0:c.estimatedSettlePrice)||0).toFixed(P),C=(0,m.Fs)().isMobile,I=(0,T.oO)(),w=I.symbol,M=I.contractTypeI18n,A=I.deliveryDateFormat;return(0,i.useMemo)((function(){return S(o().Fragment,null,S(s.Z,{sx:{alignItems:"center",mr:0,mb:[1,0]}},S(s.Z,{flexDirection:"column",sx:{color:"t.primary",fontSize:2,fontWeight:"medium"}},S("h1",{style:{fontSize:"16px"}},w,"\xa0 "),S(h.XI,{sx:{fontSize:"sm"}},S("h1",{style:{fontSize:"16px",display:"flex",alignItems:"center"}},"".concat(M).concat(A),S(Z.ZP,{config:r,sx:{display:"inline-block",top:"2px",position:"relative","& svg":{fontSize:"20px"}}})))),S(p.Z,{color:"icon"})),x&&S(u.Z,{sx:{color:"t.yellow200",fontSize:"12px",fontWeight:"medium",width:C?"100%":"100px",whiteSpace:C?"normal":"nowrap"}},d("EstimatedDeliveryPrice",{defaultValue:"Est delivery price"}),"(USD):",k))}),[k,x,a])}const A=function(e){var t=e.name,r=(0,m.Fg)().isLight,n=(0,T.C3)()===g.UW?v.$_:r?v.Wb:v.$_,o=(0,k.G)(),s=(0,i.useRef)(),u=(0,T.yk)().getI18n,p=(0,d.KO)().putCoachMarkStep,f=(0,i.useState)(!1),y=f[0],x=f[1],h=(0,i.useState)(!1),b=h[0],Z=h[1];(0,i.useEffect)((function(){p("futuresGuide",1,{title:u("symbol-title"),content:u("symbol-content"),target:s,position:"bottom-start"})}),[u]),(0,i.useEffect)((function(){var e=I((function(e){switch(e.name){case w.ACTION_TRADE_SEARCH_SYMBOL:x(!0),Z(!0)}}));return function(){return e}}),[y,b]);var A=function(){x(!1)};(0,P.Z)({callback:A,id:"marketSymbol"});var L=(0,i.useMemo)((function(){return{}}),[y]);return S(a.ZP,Object.assign({ref:s,sx:{"&:hover":{cursor:"pointer"},whiteSpace:"nowrap",minWidth:"auto",mb:[o?"4px":0]},trigger:"hover",enablePortal:!0,overlay:S(l.Z,{id:"marketSymbol",className:"dropdown-box",sx:{bg:"marketCard",left:["-16px",0],px:0,pt:0,pb:"xs",minWidth:"425px",maxWidth:"100vw",height:318,maxHeight:"100vh",boxShadow:"selectShadow"}},S(c.Z,{theme:n},S(C,{name:t,isGridWidget:!1,openShotCut:b,selectedCallback:A})))},L),S(M,null))}},"n/wa":(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r("xIFI"),i=r.n(n),o=r("A7IO"),a=r("JLYw"),l=i().createElement;function s(){var e=(0,a.yk)().getI18n,t=(0,a.gN)(),r=(0,a.d0)();return l(o.Z,{i18n:e,contractInfo:t,changeSymbol:r,isDeliveryColumn:!1})}},"7q4T":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var n=r("xIFI"),i=r.n(n),o=r("Ng/A"),a=r("qN/k"),l=r("ACmA"),s=r("IvGC"),u=r("mm1D"),c=r("n/wa"),d=r("JLYw"),p=r("g4/P"),f=i().createElement,m={display:"grid",width:"100%",height:"100%",gridGap:"4px",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"35px 35px 35px",gridTemplateAreas:'"A B"\n                    "C D"\n                    "E F"'};const v=function(e){var t=e.type,r=e.children,n=(0,p.iq)({type:t}),i=n.list,v=n.fundingTimeProps,g=n.priceColor,y=n.change,x=n.changeColor,h=n.currentPrice,b=(0,d.oD)();return f(o.Z,{sx:{px:["sm","sm",0],pt:["12px",0],pb:["12px",0]}},f(a.Z,null,f(l.Ar,{sx:{mr:["xs","0"],flex:1,borderRight:"none",pr:["0","16px"]}},f(o.Z,{sx:{display:"flex",alignItems:"center"}},r),f(s.V,{priceColor:g,showPrice:h,differencePrice:y,color:x,fundingTimeProps:b?void 0:v}),b&&f(c.Z,null)),f(l.Ar,{sx:{flex:1}},f(u.Z,{layout:m,data:i}))))}},"0mzz":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("Ng/A"),l=r("xDxD"),s=r("XCrG"),u=r("2Y18"),c=r("mm1D"),d=r("OXhx"),p=r("n/wa"),f=r("JLYw"),m=r("TUpt"),v=r("g4/P"),g=o().createElement;const y=function(e){var t=e.type,r=e.sx,i=e.children,o=(0,v.L8)({type:t,useTicker:s.k,useSymbol:l.z4}),y=o.currentPrice,x=o.priceColor,h=o.list,b=(0,f.oD)();return g(a.Z,{sx:(0,n.Z)({},r)},g(a.Z,{sx:{ml:"16px",display:"flex",alignItems:"center"}},g(a.Z,{sx:{display:"flex",alignItems:"center"}},i),g(u.Z,{currentPrice:y,priceColor:x})),g("div",{style:{marginLeft:"17px",display:"flex",justifyContent:"space-between"}},g(c.Z,{data:h,layout:d.Dr},b&&g(p.Z,null)),g(a.Z,{sx:{mr:"2px",display:"flex",alignSelf:"center",justifyContent:"flex-end",paddingRight:"16px"}},g(m.Z,null))))}},JHPq:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("Ng/A"),l=r("qN/k"),s=r("ACmA"),u=r("S2LQ"),c=r("2Y18"),d=r("mm1D"),p=r("OXhx"),f=r("JLYw"),m=r("n/wa"),v=r("TUpt"),g=r("g4/P"),y=o().createElement;const x=function(e){var t=e.type,r=e.sx,i=e.children,o=(0,g.L8)({type:t}),x=o.currentPrice,h=o.priceColor,b=o.list,P=(0,f.oD)(),k=(0,f.C3)()===u.UW;return y(a.Z,{sx:(0,n.Z)({pl:"16px",display:"flex",justifyContent:"space-between"},r),className:"ticker-wrap"},y(l.Z,null,y(a.Z,{sx:{display:"flex"}},y(s.Ar,{sx:{mr:["xs","0"],flex:"none"}},y(a.Z,{sx:{display:"flex",alignItems:"center",flex:1}},i),y(c.Z,{currentPrice:x,priceColor:h}))),y(s.Ar,{sx:{flex:1,flexWrap:"nowrap",display:"flex",alignItems:"center",position:"relative"}},y(d.Z,{layout:p.bK,data:b,className:"scrollBar",isFullScreen:k},P&&y(m.Z,null)))),!k&&y(a.Z,{sx:{mr:"2px",display:"flex",alignSelf:"center",justifyContent:"flex-end",paddingRight:"16px"}},y(v.Z,null)))}},"g4/P":(e,t,r)=>{"use strict";r.d(t,{L8:()=>T,iq:()=>Z});var n=r("DtyY"),i=r("DC7k"),o=r("xIFI"),a=r.n(o),l=r("xDxD"),s=r("qf7v"),u=r("WbbQ"),c=r("c83x"),d=r("S2LQ"),p=r("XEm0"),f=r("wz6d"),m=r("GKk1"),v=r("OXhx"),g=r("qJlb"),y=r("bCmj"),x=r("XCrG"),h=r("SVjJ"),b=r("JLYw"),P=a().createElement,k=function(e){var t,r=e.type,n=(0,s.X)(r),a=(0,x.k)((0,d.l6)(n)).tickProps,m=a.lastPrice,v=void 0===m?0:m,g=a.tickSize,y=void 0===g?1e-7:g,h=a.highPrice,P=a.lowPrice,k=a.volume,T=a.quoteVolume,Z=a.diffPrice,S=a.difference,C=a.bigThan,I=(0,l.z4)(),w=(0,i.Z)(I,2),M=w[0],A=(0,i.Z)(w[1],2),L=A[0],O=A[1],E=(0,u.Fg)(),F=(0,c.useSelector)((function(e){return e.exchangeInfo.infos}))[M],R=(0,p.Z)({lastPrice:v}),V=(0,l.U1)(y),D=(0,b.CE)()[M]||{},N=D.markPrice,B=D.lastFundingRate,_=D.nextFundingTime,z=null===(t=(0,b.m8)()[M])||void 0===t?void 0:t.indexPrice,H=(0,l.mC)().formatTk,q=(0,o.useMemo)((function(){return(0,f.uf)(v,V)}),[v,V]),Y=isNaN(S)?"0.00":S;return{symbol:M,volume:k,quoteVolume:T,info:F,priceColor:R,currentPrice:q,change:(0,o.useMemo)((function(){return[(0,f.uf)(Z||0,V),"".concat(Y,"%")].join(" ")}),[Z,Y,V]),changeColor:(0,o.useMemo)((function(){return C?E.colors.buy:E.colors.sell}),[C,E.colors.buy,E.colors.sell]),baseAsset:L,nextFundingTime:_,quoteAsset:O,low:(0,o.useMemo)((function(){return(0,f.uf)(P,V)}),[P,V]),high:(0,o.useMemo)((function(){return(0,f.uf)(h,V)}),[h,V]),fundingFee:(0,o.useMemo)((function(){return(0,s.Y)(B)}),[B]),index:(0,o.useMemo)((function(){return H(z)}),[H,z]),mark:(0,o.useMemo)((function(){return H(N)}),[H,N])}},T=function(e){var t=e.type,r=k({type:t}),i=r.symbol,a=r.volume,s=r.quoteVolume,u=r.info,c=r.priceColor,d=r.currentPrice,p=r.change,f=r.changeColor,x=r.baseAsset,T=r.nextFundingTime,Z=r.quoteAsset,S=r.low,C=r.high,I=r.fundingFee,w=r.index,M=r.mark,A=(0,b.oD)(),L=(0,b.yk)().getI18n,O=(0,l.ZK)("trd-ticker","").getI18n,E=(0,l.tZ)(),F=null===u||void 0===u?void 0:u.quantityPrecision,R=(0,o.useMemo)((function(){return(0,g.kI)(a,{digits:F||2,isUnit:!1})}),[F,a]),V=(0,o.useMemo)((function(){return(0,g.kI)(s,{digits:2,isUnit:!1})}),[s]),D=[{label:P(m.Z,{tip:L("header-mark-markPriceTip")},P("div",{style:(0,n.Z)({display:"inline-block"},v.uV)},L("header-mark",{defaultValue:"mark"}))),price:M,labelStyle:{border:"none"},key:"mark"},{label:P(y.Z,{href:"/".concat(E,"/").concat(h.yf,"/3?contract=").concat(i),sx:(0,n.Z)({textDecoration:"none",color:"t.third",display:"inline-block"},v.uV),target:"_blank"},L("header-index",{defaultValue:"Index"})),price:w,labelStyle:{border:"none"},key:"index"},{label:L("header-funding",{defaultValue:"Funding/8h"}),price:I,time:T,timeTips:L("header-mark-countdownTimeTip"),key:"fund"},{label:O("change",{defaultValue:"24h Change"}),price:P("span",{style:{color:f}},p),key:"change"},{label:O("high",{defaultValue:"24h High"}),price:C,key:"high"},{label:O("low",{defaultValue:"24h Low"}),price:S,key:"low"},{label:"".concat(O("volume"),"(").concat(x,")"),price:R,key:"volume"},{label:"".concat(O("transaction"),"(").concat(Z,")"),price:V,key:"transaction"}];return{list:(0,o.useMemo)((function(){return A?D.filter((function(e){return"fund"!==e.key})):D}),[A,D]),currentPrice:d,priceColor:c}},Z=function(e){var t=e.type,r=k({type:t}),i=r.symbol,s=r.volume,u=r.quoteVolume,c=r.info,d=r.priceColor,p=r.currentPrice,f=r.change,x=r.changeColor,T=r.baseAsset,Z=r.nextFundingTime,S=r.quoteAsset,C=r.low,I=r.high,w=r.fundingFee,M=r.index,A=r.mark,L=(0,b.yk)().getI18n,O=(0,l.ZK)("trd-ticker","").getI18n,E=(0,l.tZ)(),F={label:L("header-funding",{defaultValue:"Funding/8h"}),labelTips:L("header-mark-fundingTip"),price:w,time:Z,timeTips:L("header-mark-countdownTimeTip")};return{list:(0,o.useMemo)((function(){return[{label:P(m.Z,{tip:L("header-mark-markPriceTip")},P("div",{style:(0,n.Z)({display:"inline-block"},v.uV)},L("header-mark",{defaultValue:"mark"}))),price:A,labelStyle:{border:"none"},key:"A",sx:{gridArea:"A"}},{label:P(y.Z,{href:"/".concat(E,"/").concat(h.yf,"/3?contract=").concat(i),sx:(0,n.Z)({textDecoration:"none",color:"t.third",display:"inline-block"},v.uV),target:"_blank"},L("header-index",{defaultValue:"Index"})),price:M,labelStyle:{border:"none"},key:"B",sx:{gridArea:"B"}},{label:O("high",{defaultValue:"High"}),price:I,key:"C",sx:{gridArea:"C"}},{label:O("low",{defaultValue:"Low"}),price:C,key:"E",sx:{gridArea:"E"}},{label:P(a().Fragment,null,P("div",{style:v.SJ},O("volume",{defaultValue:"24h Volume"})),P("div",null,"(".concat(T,")"))),price:(0,g.kI)(s,{digits:(null===c||void 0===c?void 0:c.quantityPrecision)||2,isUnit:!0}),key:"D",sx:{gridArea:"D"}},{label:P(a().Fragment,null,P("div",{style:v.SJ},O("transaction",{defaultValue:"24h Volume"})),P("div",null,"(".concat(S,")"))),price:(0,g.kI)(u,{digits:2,isUnit:!0}),key:"F",sx:{gridArea:"F"}}]}),[T,L,O,I,M,c.quantityPrecision,E,C,A,S,u,i,s]),fundingTimeProps:F,priceColor:d,currentPrice:p,change:f,changeColor:x}}},P4AV:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r("DtyY"),i=r("DC7k"),o=r("xIFI"),a=r.n(o),l=r("xDxD"),s=r("8+a1"),u=r("xLQ1"),c=r("S2LQ"),d=r("oOsE"),p=r("JLYw"),f=r("U4Ym"),m=a().createElement,v=function(e){var t=e.price,r=e.buyerIsMaker,n=e.quantity,i=e.tradeTime,o=(0,p.QV)().isCoinUnit,a=(0,l.j2)().tickSize,s=(0,f.p)(a),c=o?n:(0,p.WA)({quantity:n,price:t,precision:s,format:!1});return m(u.GK,{price:t,quantity:c,formatQty:o,buyerIsMaker:r,tradeTime:i})};const g=a().memo(v);var y=a().createElement,x=function(e){var t=e.onColumnClick,r=e.sx,o=void 0===r?{}:r,a=(0,l.z4)(),f=(0,i.Z)(a,2),m=f[0],v=f[1],x=(0,u.Rk)().getI18n,h=(0,l.mC)(),b=h.formatMi,P=h.formatTk,k=(0,p.QV)().isCoinUnit,T=(0,l.j2)().marginAsset,Z=(0,i.Z)(v,2),S=Z[0],C=Z[1],I=[{text:"".concat(x("price",{defaultValue:"Price"}),"(").concat(C,")"),area:"left"},{text:"".concat(x("amount",{defaultValue:"Amount"}),"(").concat(k?S:T,")"),area:"right"},{text:x("time",{defaultValue:"Time"}),area:"right"}],w=(0,d.K)({symbol:m,stream:(0,c.BN)(),isFutures:!0,isDelivery:!1}),M=w.trades,A=w.loading;return y(s.Z,{sx:(0,n.Z)({px:"0",pb:"12px"},o)},y(u.ZP,{headers:I,trades:M,loading:A,tradeItem:g,itemHeight:18,formatMi:b,formatTk:P,onItemClick:t}))};const h=a().memo(x)},"5fa5":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r("xIFI");const i=(0,n.createContext)({filterEnums:[],getSymbolText:function(e){return e}})},Wbna:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>J});var n=r("xIFI"),i=r.n(n),o=r("Ng/A"),a=r("qN/k"),l=r("I78S"),s=r("DtyY"),u=r("jYz7"),c=r("X84v"),d=r("ZODY"),p=r("0Z6a"),f=r("xDxD"),m=i().createElement,v=function(e){var t=e.loading,r=void 0!==t&&t,a=e.data,l=e.renderRow,v=e.empty,g=e.isEmpty,y=e.hasMore,x=e.loadMore,h=e.showSymbolColumn,b=e.isDelivery,P=e.rowHeight,k=void 0===P?80:P,T=e.minWidth,Z=void 0===T?0:T,S=e.sx,C=(0,n.useRef)({data:a,flag:-1});C.current.data!==a&&(C.current.flag*=-1),C.current.data=a;var I=(0,n.useRef)(null),w=(0,f.tZ)(),M=(0,p.cp)(w);(0,n.useEffect)((function(){if(I.current){var e=I.current.listRef;if(e&&e.current)e.current.resetAfterIndex(0,!0)}}),[C.current.flag]);var A=(0,n.useMemo)((function(){return[{title:"",dataIndex:"",hideTitle:!0,render:function(e,t){return l(e,t,h,b)}}]}),[h,b,l]);return g?m(i().Fragment,null,v):m(o.Z,{sx:(0,s.Z)({position:"relative",".list-grid":{width:"100%","> div > div":{border:0,"> div":{my:0,px:0,height:"100%",borderBottom:"1px solid",borderBottomColor:"lines.light"}}}},S)},m(d.Z,{fullScreen:!0,inner:!0,show:r}),m(u.Z,null,(function(e){var t=e.height,r=e.width;return m(c.Z,{style:{direction:M},threshold:5,hasMore:y,loadMore:x,className:"list-grid",columns:A,ref:I,data:a,listGridConfig:{collapseHeight:k,height:Math.max(t-4,0),width:Math.max(r,Z)},__hackDataChanged:C.current.flag})})))};const g=i().memo(v);var y,x=r("qJlb"),h=r("lukr"),b=(y="px",function(e){return"".concat(e).concat(y)}),P={my:0,py:"xs",display:"flex",alignItems:"center",flexGrow:0,flexShrink:0,color:"t.primary",fontSize:[0],cursor:"auto"},k={userSelect:"none",px:"xs",flexGrow:1,fontWeight:"normal",whiteSpace:"nowrap"},T={time:{minWidth:b(120)},type:{minWidth:b(90)},amount:{minWidth:b(100)},asset:{minWidth:b(50)},symbol:{minWidth:b(125)}},Z=Object.keys(T).reduce((function(e,t){return e+parseInt(T[t].minWidth,10)}),0),S=function(e){var t=T[e]||{};return(0,s.Z)((0,s.Z)((0,s.Z)({},k),t),{},{flexBasis:t.minWidth})},C=r("GwyG"),I=r("JLYw"),w=r("5fa5"),M=i().createElement,A=function(e){var t=e.time,r=e.balanceDelta,i=e.balancetype,o=e.asset,u=e.symbol,c=e.showSymbolColumn,d=(0,C.Z)().getI18n,p=(0,I.yk)().getI18n,f=(0,n.useContext)(w.Z).getSymbolText;return M(a.Z,{sx:(0,s.Z)((0,s.Z)({},P),{},{color:"t.primary",fontSize:[0],cursor:"auto",py:0,width:"100%"})},M(l.Z,{sx:(0,s.Z)((0,s.Z)({},S("time")),{},{color:"table.timeColor"})},(0,h.v)(new Date(t),"yyyy-MM-dd hh:mm:ss")),M(l.Z,{sx:S("type")},d("bt-".concat(i),{defaultValue:i})),M(l.Z,{sx:S("amount")},(0,x.uf)(r,8)),M(l.Z,{sx:S("asset")},o),c?M(l.Z,{sx:S("symbol")},u?f(u,p):"-"):null)};const L=i().memo(A);var O=i().createElement,E=[{key:"time",text:"Time",i18n:"time"},{key:"type",text:"Type",i18n:"type"},{key:"amount",text:"Amount",i18n:"amount"},{key:"asset",text:"Asset",i18n:"asset"}],F=[].concat(E,[{key:"symbol",text:"Symbol",i18n:"symbol"}]),R=function(e,t,r){return O(L,Object.assign({},t,{showSymbolColumn:r}))},V=function(){var e=(0,C.Z)().getI18n;return O(o.Z,{sx:{color:"t.secondary",textAlign:"center",fontSize:[0],marginTop:"xs"}},e("nodata",{defaultValue:"You have no trades."}))},D=function(e,t){var r=e.isEmpty,i=e.hasMore,s=e.loadMore,u=e.showSymbolColumn,c=e.loading,d=e.data,p=void 0===d?[]:d,f=(0,C.Z)().getI18n,m=(0,n.useMemo)((function(){return O(a.Z,{sx:P},(u?F:E).map((function(e){return O(o.Z,{key:e.key,sx:S(e.key)},O(l.Z,{sx:{fontSize:0,color:"t.third"}},f(e.i18n,{defaultValue:e.text})))})))}),[f,u]);return O(a.Z,{ref:t,sx:{flexDirection:"column",flex:"1 0",pt:"xs",overflowX:"auto"}},m,O(g,{sx:{flex:"1 0"},loading:c,rowHeight:40,renderRow:R,data:p,hasMore:i,loadMore:s,showSymbolColumn:u,isEmpty:r,empty:O(V,null),minWidth:Z}))};const N=i().memo(i().forwardRef(D));var B=r("MKSq"),_=r("o2Gz"),z=r("iCrG"),H=i().createElement;const q=function(e){var t=e.balanceType,r=e.onFilterChange,i=(0,C.Z)().getI18n,o=(0,n.useContext)(w.Z).filterEnums;return H(_.Z,{placeholder:i("ALL",{defaultValue:"All"}),sx:{marginLeft:"16px",fontSize:"12px",color:"#848E9C","> div":{height:"24px",mt:"0px"}},value:t,onChange:function(e){return r(e)}},o.map((function(e,t){return H(z.W,{key:t,value:e,__css:{color:"#848E9C",fontSize:"12px"}},i(e,{defaultValue:e}))})))};var Y=i().createElement;const U=function(e){var t=e.onReset,r=e.type,n=e.onSearch,i=e.balanceType,o=e.onFilterChange;return Y(a.Z,{sx:{alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",mb:"xs"}},Y(B.Z,{withReset:!0,onReset:t,type:r,onSearch:n},Y(q,{balanceType:i,onFilterChange:o})))};var j=r("Sfa6"),W=i().createElement;var K=function(e){var t=e.filterType,r=e.onReset,a=e.onSearch,l=e.balanceType,s=e.onFilterChange,u=e.hasMore,c=e.loadMore,d=e.showSymbolColumn,p=e.isEmpty,f=e.data,m=e.loading,v=function(e){var t=(0,n.useRef)(null);return(0,n.useEffect)((function(){if(e===j.li){var r=t.current;if(r&&r instanceof Element){var n=r.querySelector(".list-grid");n&&(n.scrollTop=0)}}})),t}(e.currentPage);return W(i().Fragment,null,W(o.Z,{sx:{pt:"xs"}},W(U,{onReset:r,type:t,onSearch:a,balanceType:l,onFilterChange:s})),W(N,{ref:v,hasMore:u,loadMore:c,showSymbolColumn:d,isEmpty:p,data:f,loading:m}))};const J=i().memo(K)},iOCf:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var n=r("xIFI"),i=r.n(n),o=r("Ng/A"),a=r("qN/k"),l=r("ZODY"),s=r("qbs8"),u=r("DtyY"),c=r("XP5A"),d=r("I78S"),p=r("Vns9"),f=r("lukr"),m=r("JLYw"),v=r("GwyG"),g=r("5fa5"),y=i().createElement,x=function(e){return y(d.Z,Object.assign({__css:{color:"t.secondary"}},e))},h=function(e){return y(d.Z,Object.assign({__css:{fontSize:2}},e))},b=function(e){return y(a.Z,Object.assign({variant:"columns.spaceLine",__css:{fontSize:1}},e))},P=function(e){var t=e.asset,r=e.symbol,i=(0,c.Z)(e,["asset","symbol"]),l=(0,n.useState)(!1),s=l[0],P=l[1],k=(0,v.Z)().getI18n,T=(0,m.yk)().getI18n,Z=(0,n.useContext)(g.Z).getSymbolText,S=r?Z(r,T):"-",C=function(e,t){var r=e.time,n=e.balanceDelta,i=e.balancetype,o=e.symbolText,a=e.showSymbolColumn,l=[{text:"Amount",i18n:"amount",value:n},{text:"Type",i18n:"type",value:t("bt-".concat(i),{defaultValue:i})},{text:"Time",i18n:"time",value:(0,f.v)(new Date(r),"yyyy-MM-dd hh:mm:ss")}];return a?[].concat(l,[{text:"Symbol",i18n:"symbol",value:o}]):l}((0,u.Z)({symbolText:S},i),k);return y(o.Z,{sx:{color:"t.primary",py:"xs"}},y(b,{onClick:function(){return P(!s)}},y(a.Z,{sx:{alignItems:"center"}},y(d.Z,{sx:{mx:"xs"}},t)),y(p.Z,{size:18,color:"icon",sx:{transform:s?"rotate(180deg)":null,transition:"transform 100ms"}})),C.slice(0,s?10:2).map((function(e){var t=e.i18n,r=e.text,n=e.value;return y(b,{key:t},y(x,null,k(t,{defaultValue:r})),y(h,null,n))})))};const k=i().memo(P);var T=i().createElement,Z=function(){var e=(0,v.Z)().getI18n;return T(o.Z,{sx:{color:"t.secondary",textAlign:"center",fontSize:[0],marginTop:"xs"}},e("nodata",{defaultValue:"You have no trades."}))},S=function(e){var t=e.isEmpty,r=e.hasMore,i=e.loadMore,o=e.showSymbolColumn,u=e.loading,c=e.data,d=void 0===c?[]:c;return(0,n.useEffect)((function(){r&&i()}),[r,i]),T(a.Z,{sx:{position:"relative",flexDirection:"column",flex:"1 0"}},T(l.Z,{fullScreen:!0,show:u}),t?T(Z,null):d.map((function(e){return function(e,t){return T(k,Object.assign({key:e.tradeId},e,{showSymbolColumn:t}))}(e,o)})),r&&T(s.Z,{showMore:i,check:{offset:200},loading:u}))};const C=i().memo(S)},Sfa6:(e,t,r)=>{"use strict";r.d(t,{Bs:()=>n,li:()=>i,n:()=>o,Wm:()=>a,t9:()=>l});var n="1d",i=1,o=200,a=["ALL","TRANSFER","REALIZED_PNL","FUNDING_FEE","COMMISSION","INSURANCE_CLEAR","REFERRAL_KICKBACK","COMMISSION_REBATE","CROSS_COLLATERAL_TRANSFER","OPTIONS_PREMIUM_FEE","OPTIONS_SETTLE_PROFIT"],l=function(e){return e}},"2Lm0":(e,t,r)=>{"use strict";function n(e,t){var r=new Date,n=r.setHours(24,0,0,0),i="get".concat(e);return{startTime:r["set".concat(e)](r[i]()-t),endTime:n}}r.d(t,{P:()=>o});var i={"1d":{label:"1 Day",getTimes:function(){return n("Date",1)}},"1w":{label:"1 Week",getTimes:function(){return n("Date",7)}},"1m":{label:"1 Month",getTimes:function(){return n("Month",1)}},"3m":{label:"3 Months",getTimes:function(){return n("Month",3)}}};function o(e){var t=i[e];return t?t.getTimes():null}},GwyG:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r("xDxD"),i=function(e){return(0,n.ZK)("trd-tradeTransaction",e)}},cc1t:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q});var n,i=r("DC7k"),o=r("gLnL"),a=r("DtyY"),l=r("VwJU"),s=r.n(l),u=r("HSMY"),c=r("t26l"),d=r("jw37"),p=r("LpXX"),f=r("gwkO"),m=r("A8g+"),v=r("hD76"),g=r("QK4s"),y=r("qN/k"),x=r("3j8H"),h=r("xIFI"),b=r.n(h),P=r("U9Tm"),k=r("Sfa6"),T=r("2Lm0"),Z=r("5fa5"),S=b().createElement,C=(0,d.ck)("mobile",(function(){return Promise.all([r.e(834),r.e(639),r.e(40)]).then(r.bind(r,"iOCf"))})),I=(0,d.ck)("pc",(function(){return Promise.all([r.e(834),r.e(639),r.e(18)]).then(r.bind(r,"Wbna"))})),w=["TRANSFER","WITHDRAW","DEPOSIT"],M=["COIN_SWAP_WITHDRAW","COIN_SWAP_DEPOSIT"],A=function(){var e=(0,u.Z)(s().mark((function e(){var t,r,n,i,o,a,l=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},r=t.startTime,n=t.endTime,i=t.rows,o=t.page,e.prev=1,e.next=4,(0,g.v_)("/gateway-api/v1/private/future/user-data/transaction-history",{startTime:r,endTime:n,page:o,rows:i});case 4:a=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),Sentry.captureException(e.t0),new Error("nework error");case 11:if("000000"===a.code){e.next=13;break}throw new Error(a.message||"unknown error");case 13:return e.abrupt("return",{data:a.data||[],total:a.total});case 14:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),L="Init",O="UpdateFilter",E="UpdateBalanceType",F="FetchSuccess",R={nextPage:k.li,hasMore:!0,balanceType:"ALL",filters:{timePeriod:k.Bs,startTime:null,endTime:null},items:[],symbolMap:{}},V=(0,p.jZ)((n={},(0,o.Z)(n,L,(function(e){var t=e.symbolMap,r=e.items;return(0,a.Z)((0,a.Z)({},R),{},{items:r,symbolMap:t})})),(0,o.Z)(n,E,(function(e,t){var r=t.payload.type;e.balanceType=r})),(0,o.Z)(n,O,(function(e,t){var r=t.payload,n=r.startTime,i=r.endTime,o=r.timePeriod,a=r.pair;void 0!==o&&(e.filters.timePeriod=o),void 0!==n&&(e.filters.startTime=n),void 0!==i&&(e.filters.endTime=i),void 0!==a&&(e.filters.l_pair=a)})),(0,o.Z)(n,F,(function(e,t){var r=t.payload,n=r.data,i=r.page;i===k.li?e.items=n:n.length&&(e.items=e.items.concat(n)),e.hasMore=n.length>0,e.nextPage=i+1})),n),R),D=(0,f.Z)(O),N=(0,f.Z)(E),B=(0,f.Z)(F),_=(0,f.Z)(L);var z=function(){return function(){return Promise.resolve()}},H=function(e){var t=e.active,r=(0,P.AM)(),n=(0,h.useReducer)(V,(0,a.Z)((0,a.Z)({},R),{},{symbolMap:r})),o=n[0],l=n[1],d=o.nextPage,p=o.filters,f=o.hasMore,g=o.items,b=void 0===g?[]:g,L=o.balanceType,O=(0,m.I9)(b);"TRANSFER"===L?O=b.filter((function(e){return-1!==w.indexOf(null===e||void 0===e?void 0:e.balancetype)})):"COIN_SWAP"===L?O=b.filter((function(e){return-1!==M.indexOf(null===e||void 0===e?void 0:e.balancetype)})):L&&"ALL"!==L&&(O=b.filter((function(e){return(null===e||void 0===e?void 0:e.balancetype)===L})));var E="ALL"===L||O.some((function(e){return null===e||void 0===e?void 0:e.symbol})),F=function(e){var t=(0,T.P)(e.timePeriod);return t||(t={startTime:e.startTime,endTime:e.endTime}),t}(p),H=F.startTime,q=F.endTime,Y=(0,h.useState)(z),U=Y[0],j=Y[1],W=(0,v.Z)((0,u.Z)(s().mark((function e(){var t,r,n,i,o,a,u,c,d,p=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:{},r=t.page,n=void 0===r?k.li:r,i=t.times,a=(o=i||{startTime:H,endTime:q}).startTime,u=o.endTime,j(z),null!==a&&null!==u){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,A({startTime:a,endTime:u,page:n,rows:k.n});case 7:c=e.sent,d=c.data,l(B({data:d,page:n}));case 10:case"end":return e.stop()}}),e)}))),[H,q],{loading:!0}),K=(0,i.Z)(W,2),J=K[0].loading,G=K[1];(0,h.useEffect)((0,x.P)((function(){j((function(){return function(){return G({page:d})}}))}),100),[G,d]);var Q=(0,h.useCallback)((function(e){var t=e.type,r=e.startTime,n=e.endTime;l(D({timePeriod:t,startTime:r,endTime:n})),G({page:k.li,times:{startTime:r,endTime:n}})}),[G]),X=function(e){return l(N({type:e}))},$=function(){l(_()),Q((0,m.OQ)("1d"))},ee=!J&&b.length<=0;(0,h.useEffect)((function(){t&&Q((0,m.OQ)("1d"))}),[t]);var te=(0,h.useMemo)((function(){return{filterEnums:k.Wm,getSymbolText:k.t9}}),[]);return S(Z.Z.Provider,{value:te},S(y.Z,{sx:{flexDirection:"column",height:"100%",pb:"xs"}},S(c.Z,null,(function(e){return e.isMobile?S(C,{hasMore:f,loadMore:U,showSymbolColumn:E,isEmpty:ee,data:O,loading:J}):S(I,{filterType:p.timePeriod,onSearch:Q,balanceType:L,onFilterChange:X,onReset:$,hasMore:f,loadMore:U,showSymbolColumn:E,isEmpty:ee,data:O,loading:J,currentPage:d-1})}))))};const q=b().memo(H)},TUpt:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r("gLnL"),i=r("DC7k"),o=r("xIFI"),a=r.n(o),l=r("Ng/A"),s=r("I78S"),u=r("xDxD"),c=r("JLYw"),d=r("c83x"),p=r("dYqW"),f=r("qN/k"),m=r("0pZZ"),v=r("53NN"),g=r("RMtB"),y=r("c0H5"),x=r("194l"),h=r("L4Ep"),b=r("9KK5"),P=a().createElement,k=h.AO;const T=(0,o.forwardRef)((function(e,t){var r=(0,o.useState)({}),n=r[0],a=r[1],s=(0,o.useState)(!1),h=s[0],T=s[1],Z=(0,o.useState)(k.usdt),S=Z[0],C=Z[1],I=(0,x.Z)().getI18n,w=(0,c.yk)().getI18n,M=n.title,A=void 0===M?"":M,L=n.unit,O=void 0===L?"":L,E=(0,u.z4)(),F=(0,i.Z)(E,1)[0],R=(0,u.iB)(),V=(null===R||void 0===R?void 0:R[F])||{},D=V.baseAsset,N=V.marginAsset,B=(0,y.Y)().setMessageInfo,_=(0,u._n)();(0,o.useEffect)((function(){C(O)}),[O]);var z=(0,o.useCallback)((function(){T(!1),a({})}),[]),H=(0,d.useDispatch)(),q=(0,o.useCallback)((function(e){return H.preference.changeUnit(e)}),[H]),Y=(0,o.useCallback)((function(){var e;O!==S?q(S).then((function(t){var r;t.success?e=w("changeUnitSuccess",{defaultValue:"change unit success"}):(e=(null===t||void 0===t||null===(r=t.error)||void 0===r?void 0:r.message)||w("changeUnitFail",{defaultValue:"change unit fail"}),C(O));B({message:e,variant:(null===t||void 0===t?void 0:t.success)?"success":"error"})})).then((function(){T(!1)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})):T(!1)}),[q,C,w,O,S,B]);return(0,o.useImperativeHandle)(t,(function(){return{showUnitPanel:function(e){a(e),T(!0)}}})),(0,o.useMemo)((function(){return P(p.Z,{tx:"unitDialog",variant:"container",sx:{width:["calc(100vw - 32px)","368px"],bg:"unitDialog.bg",borderRadius:"4px"},onMaskClick:function(e){e.stopPropagation(),z()},visible:h},P(l.Z,{sx:{my:"md",fontWeight:"600",textAlign:"center",fontSize:"16px",lineHeight:"22px"}},A,P(v.Z,{sx:{position:"absolute",top:"16px",right:"16px",cursor:"pointer",color:"t.grey500","&:hover":{color:"t.grey300"}},onClick:function(e){e.stopPropagation(),z()}})),P(l.Z,{sx:{m:"32px 24px",fontSize:"14px",lineHeight:"18px"},fontSize:[1]},P(f.Z,{sx:{justifyContent:"space-between"}},P(b.__,{selected:S===k.usdt,onClick:function(){C(k.usdt)},"data-testid":k.usdt},N),P(b.__,{selected:S===k.coin,onClick:function(){C(k.coin)},"data-testid":k.coin},D)),_?P(f.Z,{mt:16},P(m.Z,{height:40,width:"100%",bg:"primary",color:"tbody",onClick:function(e){e.stopPropagation(),Y()},"data-testid":"unit-confirm"},w("confirmBtn",{defaultValue:"Confirm"}))):P(g.Z,{getI18n:I})))}),[h,A,S,N,D,_,w,I,z,Y])}));var Z=a().createElement;const S=function(e){var t=e.isFullScreen,r=(0,u._n)(),a=(0,o.useRef)(),d=(0,c.yk)().getI18n,p=(0,o.useRef)(),f=(0,c.F7)().unit,m=(0,u.z4)(),v=(0,i.Z)(m,1)[0],g=(0,u.iB)(),y=(null===g||void 0===g?void 0:g[v])||{},x=y.baseAsset,h=y.marginAsset,b=f===k.coin?x:h,P=(0,o.useCallback)((function(){p.current.showUnitPanel({title:d("unitPreference",{defaultValue:"Unit Preference"}),unit:f})}),[f,d]);return(0,o.useMemo)((function(){var e;return r?Z(l.Z,{ref:a,sx:(e={},(0,n.Z)(e,t?"borderRight":"borderLeft","1px solid"),(0,n.Z)(e,"borderColor","t.grey700"),(0,n.Z)(e,"color","t.grey300"),(0,n.Z)(e,"fontSize","12px"),(0,n.Z)(e,"px",2),(0,n.Z)(e,t?"mr":"ml",2),(0,n.Z)(e,"cursor","pointer"),e),onClick:P,"data-testid":"unit"},d("unit",{defaultValue:"Unit"}),":"," ",Z(s.Z,{as:"span",sx:{color:"t.yellow200","&:hover":{color:"t.yellow300"}}},b),Z(l.Z,null,Z(T,{ref:p}))):null}),[r,t,P,d,b])}},BP6G:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("Wu5Z"),l=r("zRMB"),s=r("JLYw"),u=r("SVjJ"),c=o().createElement,d=u.gu.LAST_PRICE,p=u.gu.MARK_PRICE;const f=function(e){var t=e.workingType,r=e.changeWorkingType,o=e.sx,u=void 0===o?{}:o,f=(0,s.yk)().getI18n,m=(0,i.useMemo)((function(){return[{label:f("lastPrice",{defaultValue:"Last Price"}),type:d},{label:f("tradeHistory-positions-markPriceTitle",{defaultValue:"Mark Price"}),type:p}]}),[f]);return c(a.Z,{sx:(0,n.Z)({flex:"none",p:"5px 18px 5px 6px",height:"32px",ml:"xs",fontSize:"14px",color:"primary",svg:{right:0},"&:hover":{borderColor:"line"}},u),value:t,onValueChange:r},m.map((function(e){var r=e.label,n=e.type;return c(l.Z,{key:n,value:n,sx:{p:"xs",bg:"orderForm.advancedDropdownBg",color:t===n?"primary":"t.primary","&:hover":{bg:"orderForm.advancedDropdownHBg",cursor:"pointer"}}},r)})))}},"68vh":(e,t,r)=>{"use strict";r.d(t,{Z:()=>B});var n=r("xIFI"),i=r.n(n),o=r("Ng/A"),a=r("qN/k"),l=r("xDxD"),s=r("sYYw"),u=r("XP5A"),c=r("dYqW"),d=r("I78S"),p=r("0pZZ"),f=r("j0Ct"),m=r("53NN"),v=r("EFNh"),g=r("c0H5"),y=r("kmhi"),x=(r("tmgI"),r("F16+")),h=r("194l"),b=r("dZ3E"),P=r("bCmj"),k=i().createElement,T=function(e){var t=e.footer,r=(0,h.Z)("futures-ui"),i=r.i18n.language,l=void 0===i?"en":i,s=r.getI18n,u=(0,n.useCallback)((function(){b.G&&(0,b.G)(l)}),[l]),c=(0,n.useCallback)((function(){b.s&&(0,b.s)(l)}),[l]);return(0,n.useMemo)((function(){return k(a.Z,{tx:"orderForm.loginAndRegister",variant:"container"},k(o.Z,{sx:{width:"100%",fontSize:1}},"".concat(s("please",{defaultValue:"Please"},"futures-trade")," "),k(P.Z,{sx:{cursor:"pointer",textDecoration:"none"},onClick:u},s("tabLogIn",{defaultValue:"LogIn"},"futures-trade"))," ".concat(s("tabOr",{defaultValue:"or"},"futures-trade")," "),k(P.Z,{sx:{cursor:"pointer",textDecoration:"none"},onClick:c},s("tabRegister",{defaultValue:"Register"},"futures-trade"))," ".concat(t||s("tabStart",{defaultValue:"now to start trading."},"futures-trade"))))}),[u,c,t,s])},Z=r("c83x"),S=r("Xt0a"),C=i().createElement;var I="CROSSED",w="ISOLATED",M=function(e){var t=e.children,r=e.selected,n=(0,u.Z)(e,["children","selected"]),i=!0===r?{color:"#F0B90B",borderColor:"#F0B90B"}:{};return C(a.Z,Object.assign({tx:"orderForm.marginTypePanel",variant:"button",__css:{boxSizing:"border-box",borderRadius:"2px",width:"47.5%",height:"40px",border:"1px solid #E6E8EA",justifyContent:"center",alignItems:"center",cursor:"pointer",position:"relative"},style:i},n),t,C(f.Z,{display:r?"block":"none",sx:{color:"#F0B90B",position:"absolute",top:"-8px",right:"-6px"}}))};const A=(0,n.forwardRef)((function(e,t){var r=(0,n.useState)(!1),i=r[0],l=r[1],s=(0,n.useState)({}),u=s[0],f=s[1],h=u.title,b=void 0===h?"":h,P=(0,n.useContext)(x.UE),k=P.getFutI18n,A=P.isLoggedIn,L=P.marginType,O=void 0===L?I:L,E=P.changeMarginType,F=P.openOrders,R=P.symbol,V=(0,n.useState)(O),D=V[0],N=V[1],B=(0,n.useState)(!(0,y.rV)("FuturesMarginModeShowFlag")),_=B[0],z=B[1],H=function(e){var t=e.openOrders,r=e.symbol,n=(0,Z.useSelector)(S.makeValidPositionArr);return{openOrderAmount:Object.values(t).filter((function(e){return e.symbol&&e.symbol.includes(r)})).length,positionSize:n.filter((function(e){return e.symbol&&e.symbol.includes(r)})).length}}({openOrders:F,symbol:R}),q=H.openOrderAmount,Y=H.positionSize,U=0!==Number(Y)||0!==Number(q),j=(0,g.Y)().setMessageInfo;(0,n.useEffect)((function(){N(O)}),[O]);var W=(0,n.useCallback)((function(){var e;O!==D?E(D).then((function(t){var r;(null===t||void 0===t?void 0:t.marginType)?(e={title:k("changeMarginModeTitle",{defaultValue:"Adjust Margin"}),content:k("changeMarginModeSuccess",{defaultValue:"change margin mode success"})},N(t.marginType)):(e={title:k("changeMarginModeTitle",{defaultValue:"Adjust Margin"}),content:(null===t||void 0===t||null===(r=t.error)||void 0===r?void 0:r.message)||k("changeMarginModeFail",{defaultValue:"change margin mode fail"})},N(O));j({header:e.title,message:e.content,variant:(null===t||void 0===t?void 0:t.marginType)?"success":"error"})})).then((function(){l(!1)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})):l(!1)}),[E,j,k,O,D]);return(0,n.useImperativeHandle)(t,(function(){return{showMarginTypePanel:function(e){f(e),l(!0),N(O)}}})),(0,n.useMemo)((function(){return C(c.Z,{visible:i,tx:"orderForm.marginTypePanel",variant:"container",sx:{width:["calc(100vw - 32px)","368px"]},onMaskClick:function(){l(!1)}},C(o.Z,{sx:{my:"md",fontWeight:"600",textAlign:"center",fontSize:"16px",lineHeight:"22px"}},b,C(m.Z,{tx:"orderForm.marginTypePanel",variant:"close",sx:{position:"absolute",top:"16px",right:"16px",cursor:"pointer"},onClick:function(){l(!1)}})),C(o.Z,{sx:{m:"32px 24px",fontSize:"14px",lineHeight:"18px"},fontSize:[1]},C(a.Z,{sx:{justifyContent:"space-between"}},C(M,{selected:D===I,onClick:function(){N(I)},"data-testid":"cross"},k("header-Cross",{defaultValue:"Cross"})),C(M,{selected:D===w,onClick:function(){N(w)},"data-testid":"isolated"},k("headerIsolated",{defaultValue:"Isolated"}))),C(d.Z,{width:"100%",fontSize:12,mt:3,tx:"orderForm.marginTypePanel",variant:"tip",lineHeight:"16px"},"\xb7"," ",k("marginModeTip",{defaultValue:"Switching margin mode only applies to the selected contract."})),C(o.Z,{fontSize:12,mt:3,height:32,sx:{display:U?"":"none",width:"100%",color:"#F23051"}},C("svg",{style:{verticalAlign:"text-bottom",marginRight:"5px"},width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C("path",{d:"M7.5 9.66406H6.5V10.6641H7.5V9.66406Z",fill:"#F23051"}),C("path",{d:"M7.5 3.32617H6.5V8.66617H7.5V3.32617Z",fill:"#F23051"}),C("path",{d:"M7 1C10.31 1 13 3.69 13 7C13 10.31 10.31 13 7 13C3.69 13 1 10.31 1 7C1 3.69 3.69 1 7 1ZM7 0C3.135 0 0 3.135 0 7C0 10.865 3.135 14 7 14C10.865 14 14 10.865 14 7C14 3.135 10.865 0 7 0Z",fill:"#F23051"})),k("marginModeWarning",{defaultValue:"The margin mode cannot be changed while you have an open order/position."})),A?C(a.Z,{mt:16},C(p.Z,{height:40,width:"100%",bg:"primary",color:"#212833",onClick:W,disabled:U,"data-testid":"confirm"},k("confirmBtn",{defaultValue:"Confirm"}))):C(a.Z,{mt:24},C(T,null)),C(a.Z,{mt:16},C(o.Z,{__css:{px:2,width:"100%",borderRadius:"2px",bg:"#2B2F36"},tx:"orderForm.marginTypePanel",variant:"foldableTip"},C(o.Z,{py:2},C(d.Z,{onClick:function(){z(!_),(0,y.LS)("marginModeShowFlag",!0)},fontSize:12,sx:{fontWeight:"600",cursor:"pointer",lineHeight:"16px"},className:"title"},C(v.Z,{sx:{verticalAlign:"text-bottom",fontSize:"16px"}}),k("crossAndIsolatedComments",{defaultValue:"What are Cross and Isolated modes?"}))),C(o.Z,{py:4,sx:{display:_?"block":"none",fontStyle:"normal",fontWeight:600,fontSize:"12px"}},C(d.Z,null,C(o.Z,{as:"span"},k("crossMarginMode",{defaultValue:"Cross Margin Mode"}),":"," "),C(o.Z,{as:"span",sx:{fontWeight:"normal"}},k("crossMarginModeComments",{defaultValue:""}))),C(d.Z,{py:4},C(o.Z,{as:"span"},k("isolatedMarginMode",{defaultValue:"Isolated Margin Mode"}),":"," "),C(o.Z,{as:"span",sx:{fontWeight:"normal"}},k("isolatedMarginModeComments",{defaultValue:""}))))))))}),[W,U,k,A,_,D,b,i])}));var L=r("DC7k"),O=r("L+89"),E=r("JLYw"),F=r("jLyH"),R=i().createElement;function V(e){var t=e.visible,r=e.onClose,i=(0,Z.useDispatch)(),o=(0,l._n)(),a=(0,l.tZ)(),s=(0,Z.useSelector)(F.makeFuturesBrackets),u=(0,E.rf)().curLeverage,c=(0,E.$J)(),d=(0,l.z4)(),p=(0,L.Z)(d,1)[0],f=(0,l.j2)(),m=(0,l.Fs)().isMobile,v=(0,n.useCallback)((function(e){i.leverage.updateLeverage({symbol:p,leverage:e})}),[i.leverage,p]);return R(O.Z,{visible:t,symbol:p,isLoggedIn:o,lng:a,brackets:s,leverage:u,positions:c,ticker:f,onChangeLeverage:v,onClose:r,isMobile:m,buttonSx:{color:"orderForm.btnOutlineColor"}})}var D=r("yjJ8"),N=i().createElement;const B=function(e){var t,r,i,u=e.sx,c=void 0===u?{}:u,d=e.labelSx,p=void 0===d?{}:d,f="rtl"===(0,l.gm)(),m=(0,n.useContext)(x.UE),v=m.locale,g=m.getFutI18n,y=m.marginType,h=void 0===y?"CROSSED":y,b=m.leverage,P=void 0===b?20:b,k=m.symbol,T=void 0===k?"BTCUSDT":k,Z=m.isDelivery,S=void 0!==Z&&Z,C=m.contractType,I=void 0===C?"":C,w=(0,l.Fs)().isMobile,M=(0,n.useRef)({}),L=(0,n.useState)(!1),O=L[0],E=L[1],F=T.split("_");(r=r="".concat(null===F||void 0===F?void 0:F[0]," ").concat("PERPETUAL"===I?g("inversePerpetual",{defaultValue:"Perpetual"}):(null===F||void 0===F||null===(t=F[1])||void 0===t?void 0:t.substr(2))||""),f)&&(r=r="".concat("PERPETUAL"===I?g("perpetual",{defaultValue:"Perpetual"}):(null===F||void 0===F||null===(i=F[1])||void 0===i?void 0:i.substr(2))||"").concat(null===F||void 0===F?void 0:F[0]));return(0,n.useMemo)((function(){return N(o.Z,{sx:c},N(a.Z,{sx:{justifyContent:"space-between",a:{color:"t.yellow200",borderColor:"t.yellow200"}}},N(s.Z,{title:"CROSSED"===h?g("header-Cross",{defaultValue:"Cross"}):g("headerIsolated",{defaultValue:"Isolated"}),as:"a",onClick:function(){M.current.showMarginTypePanel({title:"".concat(r," ").concat(g("MarginModeTitle",{defaultValue:"Margin Mode"}))})},"data-testid":"Cross",sx:p},"CROSSED"===h?g("header-Cross",{defaultValue:"Cross"}):g("headerIsolated",{defaultValue:"Isolated"})),N(s.Z,{as:"a",onClick:function(){return E(!0)},"data-testid":"20x",sx:p},"".concat(P,"x")),w&&!S&&N(D.k,{locale:v,sx:{py:"4px"}})),N(A,{ref:M}),N(V,{visible:O,onClose:function(){return E(!1)}}))}),[c,h,g,p,P,w,S,v,O,r])}},"1Jj/":(e,t,r)=>{"use strict";r.d(t,{__:()=>S,ZP:()=>O});var n=r("DC7k"),i=r("DtyY"),o=r("XP5A"),a=r("xIFI"),l=r.n(a),s=r("c83x"),u=r("I78S"),c=r("Ng/A"),d=r("ASW3"),p=r("qN/k"),f=r("wz6d"),m=r("xDxD"),v=r("e0c5"),g=r("WmaC"),y=r("NXRQ"),x=r("LVI2"),h=r("uI99"),b=r("tmgI"),P=r("JLYw"),k=r("K9IN"),T=r("F16+"),Z=l().createElement,S=(0,a.forwardRef)((function(e,t){var r=e.children,n=(0,o.Z)(e,["children"]);return Z(u.Z,Object.assign({variant:"labelButton.default",sx:{flex:1,mr:"xs",py:"4px",color:"t.fifth",lineHeight:"16px",textDecoration:"none",":last-of-type":{mr:"0"}},ref:t},n),r)})),C=function(e){var t=e.balance,r=e.onChange,n=e.curAsset,o=e.sx,a=Object.values(t);return Z(c.Z,{sx:(0,i.Z)({},o)},Z(d.ZP,{trigger:"hover",overlay:Z(c.Z,{variant:"dropdown"},a.map((function(e){var t=(e||{}).asset;return Z(c.Z,{key:t,sx:{px:"sm",pt:"12px",pb:"6px",bg:"control",cursor:"pointer",":last-of-type":{pt:"6px",pb:"12px"}},onClick:function(){r(t)}},Z(u.Z,{color:"t.primary",key:t,value:t,sx:{":hover":{color:"primary"}}},t))})))},Z(p.Z,{as:"span",sx:{fontWeight:"400",color:"t.grey300",borderBottom:"2px solid",cursor:"pointer",borderBottomColor:"transparent",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},n,Z(v.Z,{color:"#929AA5",size:16}))))},I=l().memo((function(e){var t=e.getFutI18n,r=e.curAsset,n=e.balance,i=e.setCurAsset;return Z(p.Z,{as:"span",sx:{justifyContent:"space-between"}},Z(u.Z,{sx:{fontSize:"16px",fontWeight:"600",color:"t.primary"},as:"span"},t("assets",{defaultValue:"Assets"})),Z(C,{curAsset:r,balance:n,onChange:i}))}),(function(e,t){var r=e.curAsset,n=e.balance,i=e.setCurAsset,o=t.curAsset,a=t.balance,l=t.setCurAsset,s=Object.keys(n).join(),u=Object.keys(a).join();return r===o&&i===l&&s===u})),w=l().memo((function(e){var t=e.getFutI18n,r=e.futUrlConfig,n=e.locale,i=(e.base,e.curAsset),o=(0,a.useRef)(),l=(0,y.KO)().putCoachMarkStep;(0,a.useEffect)((function(){l("futuresGuide",0,{title:t("asset-title"),content:t("asset-content"),target:o,position:"top-start"})}),[t,l]);var s=function(e){h.Z.emit("triggerModal",e,i)};return Z(p.Z,{sx:{justifyContent:"space-between",pt:"sm",mt:"14px"}},Z(S,{as:"a",onClick:function(){var e=(0,x.CN)(r.BUYING_URL,{locale:n,crypto:i});window.open(e)}},t("buy-crypto",{defaultValue:"Buy Crypto"})),Z(S,{as:"a",ref:o,onClick:function(){return s(b.Ze.CONVERT)}},t("convert",{defaultValue:"Convert"})),Z(S,{as:"a",onClick:function(){return s(b.Ze.TRANSFER)}},t("transfer",{defaultValue:"Transfer"})))})),M=l().memo((function(e){var t=e.marginPrecision,r=e.marginAsset,n=(0,P.w2)(r);return Z(u.Z,{color:"t.fifth"},(0,f.uf)(n||0,t)," ",r)})),A=l().memo((function(e){var t=e.isEmptyBalance,r=e.loading,n=e.getFutI18n,i=e.tooltipTitleColor,o=void 0===i?"t.grey300":i,a=e.walletBalance,s=e.marginPrecision,d=e.curAsset;return Z(l().Fragment,null,!t&&!r&&Z(c.Z,{mt:"16px"},Z(p.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},Z(k.m,{tip:n("tradeHistory-positions-walletBalanceTip",{defaultValue:""}),placement:"bottom",color:o},n("tradeHistory-positions-walletBalanceLabel",{defaultValue:"Wallet Balance"})),Z(u.Z,{color:"t.fifth"},(0,f.GW)(a||0,s,!0)," ",d)),Z(p.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},Z(k.m,{tip:n("tradeHistory-positions-unrealizedPnlTip",{defaultValue:""}),placement:"bottom",color:o},n("tradeHistory-positions-unrealizedPNLLabel",{defaultValue:"Unrealized PNL"})),Z(M,{marginPrecision:s,marginAsset:d}))),t&&!r&&Z(p.Z,{flexDirection:"row",sx:{bg:"alert.bg",color:"alert.color",border:"1px solid",borderColor:"alert.border",p:"12px",borderRadius:"4px",mt:"12px"}},Z(g.Z,{sx:{mr:"10px",fontSize:"35px",position:"relative",top:"-5px","& path":{fill:"t.yellow200"}}}),Z(c.Z,null,n("TransferAssetToTrading",{defaultValue:"Please transfer assets into futures account to start trading."}))))})),L=function(e){var t,r=e.mt,i=void 0===r?"50px":r,o=e.noButtons,l=(0,a.useContext)(T.UE),u=l.getFutI18n,d=l.locale,p=l.base,f=l.isLoggedIn,v=l.futUrlConfig,g=(0,s.useDispatch)(),y=(0,P.KQ)(),x=(0,m.z4)(),h=(0,n.Z)(x,2),b=(0,n.Z)(h[1],1)[0],k=(0,a.useState)(b),S=k[0],C=k[1],M=(0,m.Fs)().isMobile,L=Object.values(y).every((function(e){return!e.walletBalance}));return(0,a.useEffect)((function(){C(b),g.transferAssets.updateState({transferAsset:b})}),[b,g]),M?null:f?Z(c.Z,{mt:i,fontSize:"12px"},Z(I,{getFutI18n:u,curAsset:S,balance:y,setCurAsset:C}),o||Z(w,{getFutI18n:u,futUrlConfig:v,locale:d,base:p,curAsset:S}),Z(A,{isEmptyBalance:L,loading:y.loading,getFutI18n:u,walletBalance:null===(t=y[S])||void 0===t?void 0:t.walletBalance,marginPrecision:4,curAsset:S})):null};const O=l().memo(L)},aF3K:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>E});var n=r("DC7k"),i=r("XP5A"),o=r("xIFI"),a=r.n(o),l=r("c83x"),s=r("I78S"),u=r("Ng/A"),c=r("ASW3"),d=r("qN/k"),p=r("wz6d"),f=r("e0c5"),m=r("WmaC"),v=r("7SQh"),g=r("NXRQ"),y=r("xDxD"),x=r("LVI2"),h=r("uI99"),b=r("tmgI"),P=r("JLYw"),k=r("K9IN"),T=r("F16+"),Z=a().createElement,S=(0,o.forwardRef)((function(e,t){var r=e.children,n=(0,i.Z)(e,["children"]);return Z(s.Z,Object.assign({variant:"labelButton.default",sx:{flex:1,mr:"xs",py:"4px",color:"t.fifth",lineHeight:"16px",textDecoration:"none",":last-of-type":{mr:"0"}},ref:t},n),r)})),C=function(e){var t=e.balance,r=e.onChange,n=e.curAsset,i=Object.values(t).filter((function(e){return"BNB"!==e.asset&&e.asset}));return Z(u.Z,null,Z(c.ZP,{trigger:"hover",overlay:Z(u.Z,{variant:"dropdown"},i.map((function(e){var t=(e||{}).asset;return Z(u.Z,{key:t,sx:{px:"sm",pt:"12px",pb:"6px",bg:"control",cursor:"pointer",":last-of-type":{pt:"6px",pb:"12px"}},onClick:function(){r(t)}},Z(s.Z,{color:"t.primary",key:t,value:t,sx:{":hover":{color:"primary"}}},t))})))},Z(d.Z,{as:"span",sx:{fontWeight:"400",color:"t.grey300",borderBottom:"2px solid",cursor:"pointer",borderBottomColor:"transparent",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},n,Z(f.Z,{color:"#929AA5",size:16}))))},I=a().memo((function(e){var t=e.getFutI18n,r=e.curAsset,n=e.balance,i=e.setCurAsset;return Z(d.Z,{as:"span",sx:{justifyContent:"space-between"}},Z(s.Z,{sx:{fontSize:"16px",fontWeight:"600",color:"t.primary"},as:"span"},t("assets",{defaultValue:"Assets"})),Z(C,{curAsset:r,balance:n,onChange:i}))}),(function(e,t){var r=e.curAsset,n=e.balance,i=e.setCurAsset,o=t.curAsset,a=t.balance,l=t.setCurAsset,s=Object.keys(n).join(),u=Object.keys(a).join();return r===o&&i===l&&s===u})),w=a().memo((function(e){var t=e.getFutI18n,r=e.futUrlConfig,n=e.locale,i=(e.base,e.curAsset),a=(0,o.useRef)(),l=(0,g.KO)().putCoachMarkStep;(0,o.useEffect)((function(){l("futuresGuide",0,{title:t("asset-title"),content:t("asset-content"),target:a,position:"top-start"})}),[t,l]);var s=function(e){h.Z.emit("triggerModal",e,i)};return Z(d.Z,{sx:{justifyContent:"space-between",pt:"sm",mt:"14px"}},Z(S,{as:"a",onClick:function(){var e=(0,x.CN)(r.BUYING_URL,{locale:n,crypto:i});window.open(e)}},t("buy-crypto",{defaultValue:"Buy Crypto"})),Z(S,{as:"a",ref:a,onClick:function(){return s(b.Ze.CONVERT)}},t("convert",{defaultValue:"Convert"})),Z(S,{as:"a",onClick:function(){return s(b.Ze.TRANSFER)}},t("transfer",{defaultValue:"Transfer"})))})),M=a().memo((function(e){var t=e.marginPrecision,r=e.marginAsset,n=(0,P.Gb)(r);return Z(s.Z,{color:"t.fifth"},(0,p.uf)(n||0,t)," ",r)})),A=a().memo((function(e){var t=e.isEmptyBalance,r=e.loading,n=e.getFutI18n,i=e.walletBalance,l=e.quotePricePrecision,c=e.quoteAsset,f=e.bnbWalletBalance,v=(0,o.useMemo)((function(){return Z(d.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},Z(k.m,{tip:n("tradeHistory-positions-walletBalanceTip",{defaultValue:""}),placement:"bottom"},n("tradeHistory-positions-walletBalanceLabel",{defaultValue:"Wallet Balance"})),Z(s.Z,{color:"t.fifth"},(0,p.GW)(i||0,l,!0)," ",c))}),[n,c,l,i]),g=(0,o.useMemo)((function(){return Z(d.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},Z(s.Z,{color:"t.third"},"BNB"),Z(s.Z,{color:"t.fifth"},(0,p.uf)(f||0,l)," BNB"))}),[f,l]);return Z(a().Fragment,null,!t&&!r&&Z(u.Z,{mt:"16px"},v,Z(d.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},Z(k.m,{tip:n("tradeHistory-positions-unrealizedPnlTip",{defaultValue:""}),placement:"bottom"},n("tradeHistory-positions-unrealizedPNLLabel",{defaultValue:"Unrealized PNL"})),Z(M,{marginPrecision:l,marginAsset:c})),g),t&&!r&&Z(d.Z,{flexDirection:"row",sx:{bg:"alert.bg",color:"alert.color",border:"1px solid",borderColor:"alert.border",p:"12px",borderRadius:"4px",mt:"12px"}},Z(m.Z,{sx:{mr:"10px",fontSize:"35px",position:"relative",top:"-5px","& path":{fill:"t.yellow200"}}}),Z(u.Z,null,n("TransferAssetToTrading",{defaultValue:"Please transfer assets into futures account to start trading."}))))})),L=a().memo((function(e){var t=e.futUrlConfig,r=e.locale,n=e.getFutI18n,i=e.isRtl;return Z(s.Z,{as:"a",target:"_blank",sx:{fontSize:"12px",color:"t.yellow200",display:"inline-block",mt:"sm",textDecoration:"none","&:hover":{color:"t.yellow300"}},href:(0,x.CN)(t.COLLATERAL_URL,{locale:r})},n("Collateral",{defaultValue:"Use Cross Collateral"}),Z(v.Z,{sx:{verticalAlign:"-22%",fontSize:"18px",transform:i?"rotate(180deg)":""}}))})),O=function(e){var t,r,i,a=e.mt,s=void 0===a?"50px":a,c=e.noButtons,d=(0,o.useContext)(T.UE),p=d.getFutI18n,f=d.locale,m=d.base,v=d.isLoggedIn,g=d.futUrlConfig,x=d.quoteAssets,h=(0,l.useDispatch)(),b="rtl"===(0,y.gm)(),k=(0,P.KQ)(),S=(0,y.z4)(),C=(0,n.Z)(S,2),M=(0,n.Z)(C[1],2)[1],O=(0,o.useState)(M),E=O[0],F=O[1],R=(null===x||void 0===x||null===(t=x[M])||void 0===t?void 0:t.pricePrecision)||2,V=(0,y.Fs)().isMobile,D=Object.values(k).every((function(e){return!e.walletBalance}));return(0,o.useEffect)((function(){F(M),h.transferAssets.updateState({transferAsset:M})}),[M,h]),V?null:v?Z(u.Z,{mt:s,fontSize:"12px"},Z(I,{getFutI18n:p,curAsset:E,balance:k,setCurAsset:F}),c||Z(w,{getFutI18n:p,futUrlConfig:g,locale:f,base:m,curAsset:E}),Z(A,{isEmptyBalance:D,loading:k.loading,getFutI18n:p,walletBalance:null===(r=k[E])||void 0===r?void 0:r.walletBalance,quotePricePrecision:R,quoteAsset:E,bnbWalletBalance:null===(i=k.BNB)||void 0===i?void 0:i.walletBalance}),Z(L,{isRtl:b,futUrlConfig:g,locale:f,getFutI18n:p})):null};const E=a().memo(O)},zeYv:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r("xIFI"),i=r.n(n),o=r("Ng/A"),a=r("ASW3"),l=r("I78S"),s=r("qN/k"),u=r("e0c5"),c=r("umcE"),d=r("xDxD"),p=r("zt87"),f=r("LVI2"),m=r("wz6d"),v=r("1wVY"),g=r("K9IN"),y=r("aF3K"),x=r("1Jj/"),h=r("F16+"),b=i().createElement,P=function(e){var t=e.marginRatioList,r=e.onChange,n=e.marginRatioLabel;return b(o.Z,null,b(a.ZP,{trigger:"hover",overlay:t.map((function(e){return b(o.Z,{key:e.key,sx:{px:"sm",maxWidth:"150px",pt:"12px",pb:"6px",bg:"control",color:"t.primary",cursor:"pointer",":hover":{color:"primary"},":last-of-type":{pt:"6px",pb:"12px"},div:{maxWidth:"100%"}},onClick:function(){r(e.key)}},b(l.Z,{key:e.key,value:e.key,sx:{display:"inline-block",maxWidth:"80px",color:"t.priamry"}},e.marginRatioLabel))}))},b(s.Z,{as:"span",sx:{width:"auto",maxWidth:"138px",textAlign:"right",fontWeight:"400",color:"t.grey300",cursor:"pointer",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},n,b(u.Z,{color:"t.grey300",size:24}))))},k=i().memo((function(e){var t=e.getFutI18n,r=e.marginRatioLabel,n=e.marginRatioList,i=e.setMarginRatioKey,o=e.handleShowAssets;return b(s.Z,{as:"span",sx:{justifyContent:"space-between"}},b(l.Z,{sx:{fontSize:"14px",fontWeight:"600",color:"t.primary",flex:"0 0 auto"},as:"span"},t("tradeHistory-positions-marginRatioLabel",{defaultValue:"Assets"})),(null===n||void 0===n?void 0:n.length)>0&&b(P,{marginRatioLabel:r,marginRatioList:n,onChange:i}),b(c.Z,{sx:{transform:"rotate(180deg)",cursor:"pointer"},color:"t.grey500",size:20,onClick:o}))}),(function(e,t){var r=e.marginRatioLabel,n=e.marginRatioList,i=e.setMarginRatioItem,o=t.marginRatioLabel,a=t.marginRatioList,l=t.setMarginRatioItem,s=n.map((function(e){return e.marginRatioLabel})).join(),u=a.map((function(e){return e.marginRatioLabel})).join();return r===o&&i===l&&s===u})),T=i().memo((function(e){var t=e.isRtl,r=e.getFutI18n,n=e.tooltipTitleColor,i=e.riskRatio,a=e.deg,u=e.maintenanceMargin,c=e.marginBalance,d=e.marginAsset,v=e.marginPrecision;return b(o.Z,{mt:"8px",sx:{borderBottom:"1px solid",borderColor:"t.grey700"}},b(s.Z,null,b(s.Z,{width:"50%",flexDirection:"column"},b(g.m,{tip:r("tradeHistory-positions-marginRatioTip",{defaultValue:""}),placement:"bottom",color:n},r("tradeHistory-positions-marginRatioLabel",{defaultValue:"Margin Ratio"})),b(l.Z,{mt:"8px",fontSize:3,color:"buy"},(0,f.JX)(i,2)||"0.00","%")),b(s.Z,{width:"50%",justifyContent:"flex-end"},b(p.Z,{deg:a}))),b(s.Z,{sx:{marginTop:"16px",lineHeight:"16px"},justifyContent:"space-between"},b(g.m,{tip:r("tradeHistory-positions-maintenanceMarginTip",{defaultValue:"The minimum amount of margin balance required to keep your open positions."}),placement:"bottom",color:n},r("tradeHistory-positions-maintenanceMarginLabel",{defaultValue:"Maintenance Margin"})),b(s.Z,{flexDirection:t?"row-reverse":""},b(l.Z,{color:"t.fifth"},(0,m.uf)(u,v)),"\xa0",b(l.Z,{color:"t.fifth"},d))),b(s.Z,{sx:{marginTop:"8px",lineHeight:"16px",paddingBottom:"11px"},justifyContent:"space-between"},b(g.m,{tip:r("tradeHistory-positions-marginBalanceTip",{defaultValue:""}),placement:"bottom",color:n},r("tradeHistory-positions-marginBalanceLabel",{defaultValue:"Margin Balance"})),b(s.Z,{flexDirection:t?"row-reverse":""},b(l.Z,{color:"t.fifth"},(0,m.uf)(c,v)),"\xa0",b(l.Z,{color:"t.fifth"},d))))})),Z=function(e){var t,r=e.handleShowAssets,a=(0,n.useContext)(h.UE),l=a.getFutI18n,s=a.isLoggedIn,u=a.symbol,c=a.quoteAssets,p=a.ticker.marginAsset,m=a.usePreference,g=a.isDelivery,P="rtl"===(0,d.gm)(),Z=(0,n.useState)(""),S=Z[0],C=Z[1],I=m().positionMode,w=void 0!==I&&I,M=(0,v.m)(l,w,g),A=M.find((function(e){return e.key===S})),L=A||{},O=L.riskRatio,E=void 0===O?0:O,F=L.marginBalance,R=L.maintenanceMargin,V=L.marginAsset,D=L.marginRatioLabel;(0,n.useEffect)((function(){var e;!A&&M.length>0&&((e=M.find((function(e){return e.symbol===u})))||(e=M.find((function(e){return e.marginAsset===p&&!e.isolated}))),e||(e=M[0]||{}),C(e.key))}),[M]);var N=(0,f.JX)(1.2*E-60,0),B=g?"t.grey300":void 0,_=g?4:(null===c||void 0===c||null===(t=c[V])||void 0===t?void 0:t.pricePrecision)||2;return s?b(i().Fragment,null,b(o.Z,{fontSize:"12px",display:["none","block"]},b(k,{getFutI18n:l,marginRatioLabel:D,marginRatioList:M,setMarginRatioKey:C,handleShowAssets:r}),b(T,{isRtl:P,getFutI18n:l,tooltipTitleColor:B,riskRatio:E,deg:N,maintenanceMargin:R,marginBalance:F,marginAsset:V||p,marginPrecision:_})),b(g?x.ZP:y.ZP,{mt:"12px",noButtons:!0})):null};const S=i().memo(Z)},sYYw:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r("DtyY"),i=r("XP5A"),o=r("xIFI"),a=r.n(o),l=r("I78S"),s=a().createElement;const u=function(e){var t=e.children,r=e.sx,o=(0,i.Z)(e,["children","sx"]);return s(l.Z,Object.assign({sx:(0,n.Z)({mr:"xs",py:"4px",flex:"1",fontSize:[0],lineHeight:"16px",color:"t.primary",fontWeight:"500",cursor:"pointer",textAlign:"center",borderRadius:"4px",bg:"orderformBtn.bg",textDecoration:"none",":last-of-type":{mr:"0"},":hover":{bg:"orderformBtnHover.bg",borderColor:"orderformBtnHover.borderColor"}},r)},o),t)}},XD0T:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r("wz6d"),i=r("tmgI"),o=r("ZIGC");const a=function(e){var t,r=e.orderType,a=e.qty,l=void 0===a?0:a,s=e.triggerPrice,u=e.orderPrice,c=e.contractVal,d=e.activationPrice,p=e.lastPrice,f=e.markPrice,m=e.isDelivery,v=e.precision;switch(r){case i.Jm.LIMIT:case i.Jm.STOP_LIMIT:case i.Jm.TAKE_PROFIT_LIMIT:t=u;break;case i.Jm.MARKET:t=p;break;case i.Jm.STOP_MARKET:case i.Jm.TAKE_PROFIT_MARKET:t=s;break;case i.Jm.TRAILING_STOP_MARKET:t=d||f;break;default:t=u}var g=Number(c);return m?g?(0,n.Jp)(l/g,t).toFixed(0,1):0:(0,o.GW)(l/t,v)}},qjze:(e,t,r)=>{"use strict";r.d(t,{C:()=>m});var n=r("gLnL"),i=r("DtyY"),o=r("c83x"),a=r("xDxD"),l=r("jLyH"),s=r("Xt0a"),u=r("nxhI"),c=r("VOLh"),d=r("t+KN"),p=r("ttLG"),f=r("kUbO"),m=function(e){var t=e.symbol,r=e.positionSide,m=e.orderPrice,v=e.assumePrice,g=e.triggerPrice,y=e.activationPrice,x=e.orderAmount,h=e.formType,b=e.side,P=e.cost,k=e.openLost,T=e.reduceOnly,Z=void 0!==T&&T,S=(0,o.useSelector)(l.makeFuturesBrackets),C=(0,o.useSelector)(s.makePositions),I=(0,o.useSelector)(u.makeFuturesBalances),w=(0,o.useSelector)(c.makeLeverage),M=(0,a.iB)(),A=((null===M||void 0===M?void 0:M[t])||{}).marginAsset,L=void 0===A?"USDT":A,O=(null===I||void 0===I?void 0:I[L])||{},E=(0,d._g)(t,r),F=C[E]||{},R=F.entryPrice,V=F.positionSize,D=F.isolatedWallet,N=F.bidNotional,B=F.askNotional,_=Math.abs(V),z=Number(V);if((1===b&&z<0||-1===b&&z>0)&&_&&(_===x||_<x&&Z))return{liquidationPrice:0,currentPosition:F};var H=(0,f.VX)({entryPrice:R,positionSize:V,orderPrice:m,assumePrice:v,triggerPrice:g,activationPrice:y,orderAmount:x,formType:h,side:b,isolatedWallet:D,crossWalletBalance:(null===O||void 0===O?void 0:O.crossWalletBalance)||0,cost:P,openLost:k,bidNotional:N,askNotional:B}),q=H.estIsolatedWallet,Y=H.estCrossWalletBalance,U=(0,i.Z)((0,i.Z)({},F),{},{entryPrice:(0,f.dK)({entryPrice:R,positionSize:V,orderPrice:m,assumePrice:v,triggerPrice:g,activationPrice:y,orderAmount:x,formType:h,side:b}),positionSize:(0,f.iZ)({positionSize:V,orderAmount:x,side:b}),isolatedWallet:q}),j=Object.values((0,i.Z)((0,i.Z)({},C),{},(0,n.Z)({},E,(0,i.Z)({},U)))),W=(0,d.nn)({positions:(0,d.J9)(j),marginAsset:L}),K=(0,p.Zk)(S,[U],(0,i.Z)((0,i.Z)({},I),(0,n.Z)({},L,(0,i.Z)((0,i.Z)({},I[L]),{},{crossWalletBalance:Y}))),w,t,!0,!1,W),J=((null===K||void 0===K?void 0:K[0])||{}).liquidationPrice;return{liquidationPrice:void 0===J?0:J,currentPosition:U}}},"8qum":(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r("DtyY"),i=r("xIFI"),o=r("c83x"),a=r("xDxD"),l=r("S2LQ"),s=r("L4Ep"),u=r("PPQ/"),c=r("ZIGC"),d=r("SVjJ"),p=r("2vt+"),f=r("ar6A"),m=r("V4sd"),v=r("Uo7H"),g=r("tmer"),y=r("Kbhs"),x=r("50Wb"),h=r("Ev73"),b=r("85D2"),P=r("t+KN"),k=r("kUbO"),T=r("wiC8"),Z=r("mnJM"),S=r("HI97");function C(e){var t,r,C,I,w,M,A,L,O,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USDT",F=arguments.length>2?arguments[2]:void 0,R=arguments.length>3?arguments[3]:void 0,V=arguments.length>4?arguments[4]:void 0,D=(0,Z.G)(),N=(0,y.K)(),B=(0,o.useDispatch)(),_=(0,b.k)(),z=_.showKycDialog,H=(0,h.F)(),q=H.positionMode,Y=H.unit,U=void 0===Y?"cont":Y,j=H.priceProtection,W=void 0===j||j,K=(0,a.j2)()||{},J=K.pricePrecision,G=K.close,Q=K.filters,X=void 0===Q?[]:Q,$=K.contractVal,ee=void 0===$?1:$,te=K.contractType,re=void 0===te?"":te,ne=K.marginAsset,ie=(null===(t=d.vQ[E])||void 0===t?void 0:t.pricePrecision)||d.vQ.delivery.pricePrecision,oe={PRICE_FILTER:"PRICE_FILTER",LOT_SIZE:"LOT_SIZE",MARKET_LOT_SIZE:"MARKET_LOT_SIZE"},ae=(0,f.G)()[e]||[],le=(0,k.BJ)(F),se=(0,o.useSelector)(p.makeOrderForm),ue=se.positionDirection,ce=V||(null===se||void 0===se?void 0:se[F])||{},de=null===ce||void 0===ce?void 0:ce.timeInForce,pe=null===ce||void 0===ce?void 0:ce.reduceOnly,fe=(0,m.E)(e),me=Number((null===fe||void 0===fe?void 0:fe.price)||G),ve=Number(null===(r=(0,v.C)()[e])||void 0===r?void 0:r.markPrice),ge=null===(C=X.find((function(e){return oe.PRICE_FILTER===(null===e||void 0===e?void 0:e.filterType)})))||void 0===C?void 0:C.maxPrice,ye=null===(I=X.find((function(e){return oe.LOT_SIZE===(null===e||void 0===e?void 0:e.filterType)})))||void 0===I?void 0:I.maxQty,xe=null===(w=X.find((function(e){return oe.MARKET_LOT_SIZE===(null===e||void 0===e?void 0:e.filterType)})))||void 0===w?void 0:w.maxQty,he=null===(M=X.find((function(e){return oe.PRICE_FILTER===(null===e||void 0===e?void 0:e.filterType)})))||void 0===M?void 0:M.tickSize,be=null===(A=X.find((function(e){return oe.LOT_SIZE===(null===e||void 0===e?void 0:e.filterType)})))||void 0===A?void 0:A.stepSize,Pe=null===(L=X.find((function(e){return oe.MARKET_LOT_SIZE===(null===e||void 0===e?void 0:e.filterType)})))||void 0===L?void 0:L.stepSize,ke=le?ve:R||(null===ce||void 0===ce?void 0:ce.buyPrice),Te=null===ce||void 0===ce?void 0:ce.buyQty,Ze=(null===ce||void 0===ce?void 0:ce.triggerPrice)||(null===ce||void 0===ce?void 0:ce.buyTriggerPrice),Se=le?ve:R||(null===ce||void 0===ce?void 0:ce.sellPrice),Ce=null===ce||void 0===ce?void 0:ce.sellQty,Ie=(null===ce||void 0===ce?void 0:ce.triggerPrice)||(null===ce||void 0===ce?void 0:ce.sellTriggerPrice),we=(0,l.l6)(!0),Me=(0,a.d)(e,we,{num:1,level:he,isDelivery:D}),Ae=(0,a.H0)(e,we,{num:1,level:he,isDelivery:D}),Le=(0,i.useMemo)((function(){var e;return null===(e=Me[0])||void 0===e?void 0:e.price}),[Me]),Oe=(0,i.useMemo)((function(){var e;return null===(e=Ae[0])||void 0===e?void 0:e.price}),[Ae]),Ee=(0,g.$)(),Fe=(0,P.nn)({positions:Ee,marginAsset:ne}),Re=null===ce||void 0===ce?void 0:ce.workingType,Ve=(0,x.r)(),De=Ve.curLeverage,Ne=(0,k.zS)({data:Fe,isolated:!1,isDelivery:D,contractVal:ee}),Be=(0,k.wf)({data:Fe,isolated:!1,curLeverage:De,symbol:e,isDelivery:D,contractVal:ee}),_e=(0,k.sE)({data:Fe,curLeverage:De,curSymbol:e,isDelivery:D,contractVal:ee}),ze=Number(null===N||void 0===N||null===(O=N[ne])||void 0===O?void 0:O.crossWalletBalance),He=Math.max(ze+Ne-(Be+_e),0);ce.oLastPrice=me;var qe,Ye,Ue,je,We=0,Ke=0,Je=D&&U===s.SW.coin||U===s.AO.usdt?null===ce||void 0===ce?void 0:ce.buyCont:Te,Ge=D&&U===s.SW.coin||U===s.AO.usdt?null===ce||void 0===ce?void 0:ce.sellCont:Ce;if(q){var Qe=(null===Ee||void 0===Ee?void 0:Ee["".concat(e,"_").concat(d.PR.LONG)])||{},Xe=(null===Ee||void 0===Ee?void 0:Ee["".concat(e,"_").concat(d.PR.SHORT)])||{};if("CLOSE"===ue)We=Math.abs(Number(Xe.positionSize)||0),Ke=Math.abs(Number(Qe.positionSize)||0);else{var $e=(0,k.qH)({riskTable:ae,markPrice:ve,availableBalance:He,formType:F,askPrice:Oe,bidPrice:Le,leverage:De,positionMode:q,longPosition:Qe,shortPosition:Xe,buyPrice:ke,sellPrice:Se,pricePrecision:J,contractVal:ee,isDelivery:D,currentPairPositions:Fe,getAllOthersPresentNotional:S.getAllOthersPresentNotional,isNew:!0}),et=$e.maxBidAmount,tt=$e.maxAskAmount;We=et,Ke=tt}var rt=(0,k.sk)({leverage:De,positionSize:(null===Qe||void 0===Qe?void 0:Qe.positionSize)||0,orderBidAmount:Je,orderAskAmount:Ge,formType:F,type:"bid",askPrice:Oe,bidPrice:Le,orderPrice:ke,markPrice:ve,bidNotional:(null===Qe||void 0===Qe?void 0:Qe.bidNotional)||0,askNotional:(null===Qe||void 0===Qe?void 0:Qe.askNotional)||0,positionMode:q,pricePrecision:J,isDelivery:D,contractVal:ee,isNew:!0})||{};qe=rt.cost,Ue=rt.openLost;var nt=(0,k.sk)({leverage:De,positionSize:(null===Xe||void 0===Xe?void 0:Xe.positionSize)||0,orderBidAmount:Je,orderAskAmount:Ge,formType:F,type:"ask",askPrice:Oe,bidPrice:Le,orderPrice:Se,markPrice:ve,bidNotional:(null===Xe||void 0===Xe?void 0:Xe.bidNotional)||0,askNotional:(null===Xe||void 0===Xe?void 0:Xe.askNotional)||0,positionMode:q,pricePrecision:J,isDelivery:D,contractVal:ee,isNew:!0})||{};Ye=nt.cost,je=nt.openLost}else{var it=(null===Ee||void 0===Ee?void 0:Ee[e])||{},ot=(null===it||void 0===it?void 0:it.isolated)||!1,at=Number(null===it||void 0===it?void 0:it.positionSize)||0,lt=Number(null===it||void 0===it?void 0:it.bidNotional)||0,st=Number(null===it||void 0===it?void 0:it.askNotional)||0;We=(0,k.qb)({riskTable:ae,positionSize:at,markPrice:ve,availableBalance:He,type:"bid",formType:F,askPrice:Oe,bidPrice:Le,orderPrice:ke,leverage:De,bidNotional:lt,askNotional:st,isolated:ot,pricePrecision:J,isDelivery:D,contractVal:ee,crossWalletBalance:ze,currentPairPositions:Fe,calculateDeliveryActualMaxAmount:S.calculateActualMaxAmount,getAllOthersPresentNotional:S.getAllOthersPresentNotional,isNew:!0}).maxBidAmount||0,Ke="0"!==Se&&Se&&(0,k.qb)({riskTable:ae,positionSize:at,markPrice:ve,availableBalance:He,type:"ask",formType:F,askPrice:Oe,bidPrice:Le,orderPrice:Se,leverage:De,bidNotional:lt,askNotional:st,isolated:ot,pricePrecision:J,isDelivery:D,contractVal:ee,crossWalletBalance:ze,currentPairPositions:Fe,calculateDeliveryActualMaxAmount:S.calculateActualMaxAmount,getAllOthersPresentNotional:S.getAllOthersPresentNotional,isNew:!0}).maxAskAmount||0;var ut=(0,k.sk)({leverage:De,positionSize:at,orderBidAmount:Je,orderAskAmount:Ge,formType:F,type:"bid",askPrice:Oe,bidPrice:Le,orderPrice:ke,markPrice:ve,bidNotional:lt,askNotional:st,pricePrecision:J,isDelivery:D,contractVal:ee,isNew:!0})||{};qe=ut.cost,Ue=ut.openLost;var ct=(0,k.sk)({leverage:De,positionSize:at,orderBidAmount:Je,orderAskAmount:Ge,formType:F,type:"ask",askPrice:Oe,bidPrice:Le,orderPrice:Se,markPrice:ve,bidNotional:lt,askNotional:st,pricePrecision:J,isDelivery:D,contractVal:ee,isNew:!0})||{};Ye=ct.cost,je=ct.openLost,pe&&(at?at>0?(We=0,Ke=at):(Ke=0,We=Math.abs(at)):Ke=We=0)}We<0&&(We=0),Ke<0&&(Ke=0),qe<0&&(qe=0),Ye<0&&(Ye=0);var dt=(0,i.useCallback)((function(){var t,r,i,o,a,l,p=F,f=ce.side,m=ce.buyPrice,v=ce.sellPrice,g=ce.buyTriggerPrice,y=ce.sellTriggerPrice,x=ce.positionSide,h=ce.buyCallbackRate,b=ce.sellCallbackRate,P=ce.buyActivationPrice,k=ce.sellActivationPrice,T=ce.buyCont,Z=void 0===T?0:T,S=ce.sellCont,C=void 0===S?0:S,I=ce.subWorkingType,w=void 0===I?"":I,M=ce.buyTakeProfit,A=void 0===M?0:M,L=ce.sellTakeProfit,O=void 0===L?0:L,E=ce.buyStopLoss,R=void 0===E?0:E,V=ce.sellStopLoss,N=A||O,_=R||(void 0===V?0:V);f===d.hp.BUY?(i=Number(g),o=Number(m),a=Number(h),l=Number(P)):(i=Number(y),o=Number(v),a=Number(b),l=Number(k)),f===d.hp.BUY?(r=Number(Te),(Re===d.gu.LAST_PRICE&&i<me||Re===d.gu.MARK_PRICE&&i<ve)&&(p=p===d.PH.STOP_LIMIT?d.PH.TAKE_PROFIT_LIMIT:d.PH.TAKE_PROFIT_MARKET)):f===d.hp.SELL&&(r=Number(Ce),(Re===d.gu.LAST_PRICE&&i>me||Re===d.gu.MARK_PRICE&&i>ve)&&(p=p===d.PH.STOP_LIMIT?d.PH.TAKE_PROFIT_LIMIT:d.PH.TAKE_PROFIT_MARKET));var H={symbol:e,type:p,side:f,positionSide:x},Y=(0,n.Z)((0,n.Z)({},H),{},{side:f===d.hp.BUY?d.hp.SELL:d.hp.BUY});F.includes("MARKET")||(H.price="".concat(o)),H.quantity=r,H.timeInForce=de;var j=[(0,n.Z)({strategySubId:1,firstDrivenId:0,secondDrivenId:0,securityType:"USDT_FUTURES"},H)];H.leverage=De,H.workingType=Re,(null===(t=d.SI[p])||void 0===t?void 0:t.enableStopPrice)&&(H=(0,n.Z)((0,n.Z)((0,n.Z)({},H),{workingType:Re}),{},{stopPrice:i})),F===d.PH.TRAILING_STOP_MARKET&&(H.activatePrice=l,H.priceRate=a,H.workingType=Re),x&&x!==d.PR.BOTH||(H.reduceOnly=!!pe);var K={strategyType:d.fj.OTO};if(!pe){var J={strategySubId:2,firstDrivenId:1,secondDrivenId:0,securityType:"USDT_FUTURES",firstDrivenOn:"PARTIALLY_FILLED_OR_FILLED",timeInForce:"GTE_GTC",firstTrigger:"PLACE_ORDER",workingType:w,quantity:r};if(!q&&(J.reduceOnly=!0),N&&_?(j[1]=(0,n.Z)((0,n.Z)((0,n.Z)({},J),Y),{},{secondDrivenId:3,secondDrivenOn:"PARTIALLY_FILLED_OR_FILLED",secondTrigger:"CANCEL_ORDER",stopPrice:N,type:d.PH.TAKE_PROFIT_MARKET}),K.strategyType=d.fj.OTOCO,j[2]=(0,n.Z)((0,n.Z)((0,n.Z)({},J),Y),{},{strategySubId:3,secondDrivenId:2,secondDrivenOn:"PARTIALLY_FILLED_OR_FILLED",secondTrigger:"CANCEL_ORDER",stopPrice:_,type:d.PH.STOP_MARKET})):(K.strategyType=d.fj.OTO,N?j[1]=(0,n.Z)((0,n.Z)((0,n.Z)({},J),Y),{},{type:d.PH.TAKE_PROFIT_MARKET,stopPrice:N}):_&&(j[1]=(0,n.Z)((0,n.Z)((0,n.Z)({},J),Y),{},{type:d.PH.STOP_MARKET,stopPrice:_}))),N||_)return K.subOrderList=j,B.futuresOrderForm.placeStrategy(K)}return~[d.PH.LIMIT_TYPE,d.PH.MARKET_TYPE].indexOf(F)||(H.priceProtect=W),U!==s.SW.coin&&U!==s.AO.usdt||(H.quantity=Number(f===d.hp.BUY?Z:C)),(0,u.r)({event:"trade",type:D?"delivery":"futures",conversionValue:D?(H.quantity*ee/De).toFixed(2):(H.quantity*o/De).toFixed(2),isAttempted:1,side:"".concat(f).toLowerCase()}),B.futuresOrderForm.placeOrder((0,n.Z)((0,n.Z)({},H),{},{placeType:"order-form"})).then((function(e){var t=e||{},r=t.code,n=t.message;return(0,c.tw)(r)&&z(n),Promise.resolve(e)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[q,D,ee,U,Te,B.futuresOrderForm,F,me,De,ve,ce,pe,Ce,e,de,Re,W,z]),pt=(0,i.useCallback)((function(e){return(0,k.w_)({bidPrice:Le,askPrice:Oe,orderPrice:"bid"===e?ke:Se,formType:F,markPrice:ve,pricePrecision:J,isDelivery:D,type:e})}),[Se,F,Le,Oe,ke,ve,J,D]);return ce.buyCost=(0,T.GW)(qe,ie,!0),ce.sellCost=(0,T.GW)(Ye,ie,!0),ce.availableBalance=Math.max(He,0),ce.leverage=De,ce.tickSize=(0,T.OR)(he),ce.limitStepSize=(0,T.OR)(be),ce.marketStepSize=(0,T.OR)(Pe),{availableBalance:Math.max(He,0),maxPrice:ge,limitMaxQty:ye,marketMaxQty:xe,buyPrice:ke,sellPrice:Se,buyQty:Te,sellQty:Ce,buyStopPrice:Ze,sellStopPrice:Ie,markPrice:(0,T.GW)(ve,J)||0,lastPrice:(0,T.GW)(me,J)||0,oLastPrice:Number(me),timeInForce:de,reduceOnly:pe,bCost:qe,sCost:Ye,buyCost:(0,T.GW)(qe,ie,!0),sellCost:(0,T.GW)(Ye,ie,!0),buyOpenLost:Ue,sellOpenLost:je,maxBuyAmount:We,maxSellAmount:Ke,placeOrder:dt,orderForm:ce,activePrice:null===ce||void 0===ce?void 0:ce.activationPrice,buyActivePrice:null===ce||void 0===ce?void 0:ce.buyActivationPrice,sellActivePrice:null===ce||void 0===ce?void 0:ce.sellActivationPrice,contractVal:ee,contractType:re,getAssumePrice:pt}}},dtaw:(e,t,r)=>{"use strict";r.d(t,{j:()=>o});var n=r("xIFI"),i=r("wz6d"),o=function(e){var t=e.currentPosition,r=void 0===t?{}:t,o=e.liquidationPrice,a=e.markPrice,l=e.places,s=r||{},u=s.positionSize,c=s.entryPrice;return(0,n.useMemo)((function(){if(o<=0)return{liquidationPrice:"--",diff:"--"};var e=o-a;return{liquidationPrice:(0,i.uf)(o,l),diff:e}}),[l,u,c,o,a])}},"1wVY":(e,t,r)=>{"use strict";r.d(t,{m:()=>g});var n=r("DC7k"),i=r("c83x"),o=r("tmgI"),a=r("Mn35"),l=r.n(a),s=r("qJlb"),u=r("UraT"),c=r("t+KN"),d=r("nxhI"),p=r("jLyH"),f=r("Xt0a"),m=r("ttLG"),v=r("8ePF"),g=function(e,t,r){return r?x(e,t):y(e,t)},y=function(e,t){var r=(0,i.useSelector)(d.makeFuturesBalances),a=(0,i.useSelector)(p.makeFuturesBrackets),s=(0,i.useSelector)(f.makeValidPositionArr),v=[],g=e("header-Cross",{defaultValue:"Cross"}),y=(0,c.L6)(s.filter((function(e){var r=e.positionSide;return 0!==e.positionSize&&(!t&&r===o.PR.BOTH||t&&r!==o.PR.BOTH)})));return Object.values(y).forEach((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=l()(i,(function(e){return e.isolated})),s=(0,n.Z)(o,2),c=s[0],d=s[1];if(d.length>0){var p=d[0]||{},f=p.marginAsset,y=(null===r||void 0===r?void 0:r[f])||{},x=y.crossWalletBalance,b=void 0===x?0:x,P=(0,m.zW)(d,a),k=(0,m.ot)(d);v.push({riskRatio:h(P,b,k),marginBalance:b+k,maintenanceMargin:P,key:"".concat(f),marginAsset:f,isolated:!1,marginRatioLabel:"".concat(f," ").concat(g)})}c.forEach((function(r){var n=r.positionSide,i=r.symbol,o=r.isolatedWallet,l=void 0===o?0:o,s=r.marginAsset,c=(0,u.lE)(i,e),d=(null===a||void 0===a?void 0:a[i])||[],p=(0,m.SH)(d,r),f=(0,m.nn)(r);v.push({riskRatio:h(p,l,f),marginBalance:l+f,maintenanceMargin:p,key:"".concat(i,"_").concat(n),marginAsset:s,isolated:!0,marginRatioLabel:"".concat(c).concat(t?" ".concat(n):" "," ").concat(e("headerIsolated",{defaultValue:"Isolated"}))})}))})),v},x=function(e,t){var r=(0,i.useSelector)(d.makeFuturesBalances),a=(0,i.useSelector)(p.makeFuturesBrackets),s=(0,i.useSelector)(f.makeValidPositionArr),m=[],g=e("header-Cross",{defaultValue:"Cross"}),y=(0,c.L6)(s.filter((function(e){var r=e.positionSide;return 0!==e.positionSize&&(!t&&r===o.PR.BOTH||t&&r!==o.PR.BOTH)})));return Object.values(y).forEach((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=l()(i,(function(e){return e.isolated})),s=(0,n.Z)(o,2),c=s[0],d=s[1];if(d.length>0){var p=d[0]||{},f=p.marginAsset,y=p.symbol,x=y.split("_"),b=(0,n.Z)(x,1),P=b[0],k=(null===r||void 0===r?void 0:r[f])||{},T=k.crossWalletBalance,Z=void 0===T?0:T,S=(0,v.zW)(d,a),C=(0,v.ot)(d);m.push({riskRatio:h(S,Z,C),marginBalance:Z+C,maintenanceMargin:S,key:P,marginAsset:f,isolated:!1,marginRatioLabel:"".concat(P," ").concat(g)})}c.forEach((function(r){var n=r.positionSide,i=r.symbol,o=r.isolatedWallet,l=void 0===o?0:o,s=r.marginAsset,c=(0,u.lE)(i,e),d=(null===a||void 0===a?void 0:a[i])||[],p=(0,v.SH)(d,r),f=(0,v.nn)(r);m.push({riskRatio:h(p,l,f),marginBalance:l+f,maintenanceMargin:p,key:i,marginAsset:s,isolated:!0,marginRatioLabel:"".concat(c).concat(t?" ".concat(n):" "," ").concat(e("headerIsolated",{defaultValue:"Isolated"}))})}))})),m},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t+r;return(0,s.JX)(n?e/n*100:0,2)}},rXUd:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r("xIFI"),i=r("L4Ep"),o=r("SVjJ");const a=function(e){var t=e.orderType,r=e.equalQtyPrecision,a=e.marketStepSize,l=e.limitStepSize,s=e.tickSize,u=void 0===s?2:s,c=e.unit;return(0,n.useCallback)((function(){var e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e=(0,o.Br)(t)?a:l,c===i.SW.coin&&(e=r),(void 0===n||n)&&c===i.AO.usdt&&(e=u),e}),[t,c,a,l,r,u])}},bD8W:(e,t,r)=>{"use strict";r.d(t,{Z:()=>z});var n=r("VwJU"),i=r.n(n),o=r("gLnL"),a=r("DtyY"),l=r("HSMY"),s=r("XP5A"),u=r("xIFI"),c=r.n(u),d=r("qN/k"),p=r("I78S"),f=r("Ng/A"),m=r("dYqW"),v=r("kaBW"),g=r("FXY6"),y=r("0pZZ"),x=r("53NN"),h=r("wd/R"),b=r.n(h),P=r("wz6d"),k=r("h/10"),T=r("c83x"),Z=r("tmgI"),S=r("L4Ep"),C=r("2vt+"),I=r("Mh5j"),w=r("qjze"),M=r("dtaw"),A=r("K9IN"),L=r("JLYw"),O=r("XD0T"),E=r("SVjJ"),F=r("rXUd"),R=c().createElement,V=[Z.Jm.STOP_LIMIT,Z.Jm.STOP_MARKET,Z.Jm.TAKE_PROFIT_LIMIT,Z.Jm.TAKE_PROFIT_MARKET],D=[Z.Jm.MARKET,Z.Jm.STOP_MARKET,Z.Jm.TAKE_PROFIT_MARKET],N=function(e){var t=e.before,r=e.after,n=e.text,i=e.slot,o=void 0===i?"":i,a=(0,s.Z)(e,["before","after","text","slot"]);return R(d.Z,Object.assign({sx:{justifyContent:"space-between",alignItems:"center"}},a),R(p.Z,{display:"flex"},t),null!==n&&R(p.Z,{display:"flex"},n,R("i",{style:{width:"6px"}}),r),o)},B=function(e){var t=e.left,r=void 0===t?"":t,n=e.content,i=void 0===n?"":n,o=e.pureContent,a=void 0===o?"":o,l=e.right,s=void 0===l?"":l,c=e.size,d=void 0===c?18:c,f=e.places,m=e.mt,v=void 0===m?"12px":m;return(0,u.useMemo)((function(){return R(N,{mt:v,height:"16px",tx:"orderForm.confirmPanel",variant:"content",before:R(p.Z,{width:"auto",tx:"orderForm.confirmPanel",variant:"label",style:{fontSize:"".concat(d,"px")}},r),text:R("span",{style:{fontSize:"".concat(d,"px")}},a||(0,P.uf)(i,f)),after:R(p.Z,{style:{fontSize:"14px",alignSelf:"center"}},s)})}),[r,i,v,f,s,d,a])},_=function(e){var t=e.children,r=(0,s.Z)(e,["children"]);return R(f.Z,Object.assign({__css:{ml:0,mr:5,height:38,width:"100%",borderRadius:"4px",color:k.BA[0],border:"1px solid",borderColor:k.BA[600],"&:hover:not(:disabled):not(:active)":{bg:k.er[700],borderColor:k.er[600]},appearance:"none",userSelect:"none",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",fontSize:"inherit",fontFamily:"inherit",textAlign:"center",textDecoration:"none",outline:"none"}},r),t)};const z=(0,u.forwardRef)((function(e,t){var r,n,s,h,k,N,z,H,q,Y,U,j=e.symbol,W=e.quote,K=e.ticker,J=e.base,G=e.marginAsset,Q=(0,u.useState)(!1),X=Q[0],$=Q[1],ee=(0,u.useState)({}),te=ee[0],re=ee[1],ne=(0,u.useState)(""),ie=ne[0],oe=ne[1],ae=(0,T.useSelector)(C.makeOrderForm),le=(0,L.yk)().getI18n,se=(0,T.useDispatch)(),ue=(0,L.F7)(),ce=ue.unit,de=void 0===ce?"cont":ce,pe=ue.orderConfirmation,fe=ue.positionMode,me=te.positionDirection,ve=void 0===me?Z.RS.OPEN:me,ge=(0,L.x_)(ve),ye=ge.BuyText,xe=ge.SellText,he=te.orderType,be=void 0===he?Z.Jm.LIMIT:he,Pe=te.placeOrder,ke=te.bCost,Te=void 0===ke?"":ke,Ze=te.sCost,Se=void 0===Ze?"":Ze,Ce=te.isDelivery,Ie=void 0!==Ce&&Ce,we=te.contractType,Me=void 0===we?"":we,Ae=te.Cont,Le=te.buyOpenLost,Oe=void 0===Le?"":Le,Ee=te.sellOpenLost,Fe=void 0===Ee?"":Ee,Re=te.contractVal,Ve=void 0===Re?"":Re,De=te.getAssumePrice,Ne=void 0===De?function(){}:De,Be=te.orderForm,_e=void 0===Be?{}:Be,ze=te.side,He=void 0===ze?1:ze,qe=_e||{},Ye=qe.buyTriggerPrice,Ue=void 0===Ye?"":Ye,je=qe.sellTriggerPrice,We=void 0===je?"":je,Ke=qe.buyPrice,Je=qe.sellPrice,Ge=qe.buyQty,Qe=void 0===Ge?"":Ge,Xe=qe.sellQty,$e=void 0===Xe?"":Xe,et=qe.buyCallbackRate,tt=qe.sellCallbackRate,rt=qe.buyActivationPrice,nt=void 0===rt?"":rt,it=qe.sellActivationPrice,ot=void 0===it?"":it,at=qe.positionSide,lt=qe.buyCost,st=qe.sellCost,ut=qe.availableBalance,ct=qe.marketStepSize,dt=qe.limitStepSize,pt=qe.tickSize,ft=(null===ae||void 0===ae?void 0:ae[be])||{},mt=ft.buyTakeProfit,vt=ft.sellTakeProfit,gt=ft.buyStopLoss,yt=ft.sellStopLoss,xt=ft.subWorkingType,ht=ft.reduceOnly,bt=void 0!==ht&&ht,Pt=Number(null===(r=(0,L.CE)()[j])||void 0===r?void 0:r.markPrice),kt=1===He,Tt=kt?"buy":"sell",Zt=kt?"button.buyHover":"button.sellHover",St=kt?ye:xe,Ct=(0,u.useState)(!1),It=Ct[0],wt=Ct[1],Mt=K.equalQtyPrecision,At=void 0===Mt?2:Mt,Lt=pt;kt?(N=Ke,s=Qe,h=lt,k=Te,z=Number(mt),H=Number(gt),q=Number(nt),Y=et,U=Ue):(N=Je,s=$e,h=st,k=Se,z=Number(vt),H=Number(yt),q=Number(ot),Y=tt,U=We);var Ot,Et,Ft=!bt&&(z||H||!1),Rt=le(xt===Z.HZ.LAST_PRICE?"lastPrice":"tradeHistory-positions-markPriceTitle",{defaultValue:"Last Price"}),Vt=kt?Oe:Fe,Dt=Ie?I.C:w.C,Nt=(0,F.Z)({orderType:be,equalQtyPrecision:At,marketStepSize:ct,limitStepSize:dt,tickSize:pt,unit:de})(),Bt=(0,O.Z)({orderType:be,qty:s,triggerPrice:U,orderPrice:N,contractVal:Ve,activationPrice:q,lastPrice:_e.oLastPrice,markPrice:Pt,isDelivery:Ie,precision:Nt}),_t=de===S.SW.coin||de===S.AO.usdt?Bt:Number(1===He?Qe:$e||0),zt=Dt({symbol:j,positionSide:at,orderPrice:Number(N||0),assumePrice:Ne(1===He?"bid":"ask")||0,triggerPrice:Number(U||0),activationPrice:Number(q||0),orderAmount:_t,formType:be,side:He,cost:k,openLost:Vt,contractVal:Ve,reduceOnly:bt}),Ht=zt.currentPosition,qt=zt.liquidationPrice,Yt=(0,M.j)({currentPosition:Ht,liquidationPrice:qt,markPrice:Pt,places:Lt}),Ut=Yt.liquidationPrice,jt=Yt.diff,Wt=j.split("_");Et=Et="".concat(null===Wt||void 0===Wt?void 0:Wt[0]," ").concat("PERPETUAL"===Me?le("inversePerpetual",{defaultValue:"Perpetual"}):(null===Wt||void 0===Wt||null===(n=Wt[1])||void 0===n?void 0:n.substr(2))||""),Ot=Ie?de===S.SW.coin?J:Ae:de===S.AO.coin?J:G,(0,u.useImperativeHandle)(t,(function(){return{showOrderConfirmPanel:function(e){re(e),$(!0)}}}));var Kt=(0,L.se)().marginType,Jt=fe&&ve===Z.RS.CLOSE||Kt===E.Yl.ISOLATED||be===E.PH.TRAILING_STOP_MARKET||k>ut,Gt=(0,u.useCallback)((0,l.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:It&&(t=(0,a.Z)((0,a.Z)({},pe),{},(0,o.Z)({},be.toUpperCase(),!1)),se.preference.changeOrderConfirmation(t)),Pe(_e),$(!1);case 3:case"end":return e.stop()}}),e)}))),[It,Pe,_e,pe,be,se.preference]);return(0,u.useEffect)((function(){var e=setInterval((function(){oe(b()().format("YYYY-MM-DD HH:mm:ss"))}),1e3);return function(){return clearInterval(e)}}),[]),(0,u.useMemo)((function(){return R(m.Z,{visible:X,tx:"orderForm.confirmPanel",variant:"container",sx:{width:["calc(100vw - 32px)","464px"],padding:"0 24px 24px 24px"},onMaskClick:function(){$(!1)}},R(f.Z,{sx:{textAlign:"center",position:"relative"},tx:"orderForm.confirmPanel",variant:"content"},R(p.Z,{mt:"24px",fontSize:22,fontWeight:500},R("span",{style:{color:Tt}}," ",St," ")," ",Et),R(p.Z,{mt:"6px",fontSize:14},R("span",{style:{marginRight:"8px"}},le(be===Z.Jm.STOP_LIMIT?"stopLimit":be===Z.Jm.MARKET?be.toLowerCase():be,{defaultValue:"Limit"})),ie),R(x.Z,{sx:{position:"absolute",top:"-4px",right:"-4px",cursor:"pointer"},onClick:function(){$(!1)}})),R(f.Z,{mt:"31px"},V.includes(be)&&R(B,{left:le("stopPriceTitle",{defaultValue:"Stop Price"}),content:U,places:Lt,right:W}),D.includes(be)?R(B,{left:le("priceTitle",{defaultValue:"Price"}),pureContent:le("market",{defaultValue:"Market"}),right:""}):be===Z.Jm.TRAILING_STOP_MARKET?R(c().Fragment,null,R(B,{left:le("callbackRate",{defaultValue:"Callback Rate"}),content:Y,places:1,right:"%"}),Number(q)?R(B,{left:le("activationPrice",{defaultValue:"Activation Price"}),content:q,places:Lt,right:W}):null):R(B,{left:le("priceTitle",{defaultValue:"Price"}),content:N,places:Lt,right:W}),R(B,{left:le("orderQtyTitle",{defaultValue:"Order Qty"}),content:s,places:Nt,right:Ot})),ve===Z.RS.OPEN&&R(f.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line",__css:{borderTop:"1px solid #2B2F36",paddingTop:"16px"}},R(B,{size:"14",left:le("cost",{defaultValue:"Cost"}),pureContent:h,right:G})),Ft&&R(f.Z,{mt:"8px",sx:{padding:"16px",backgroundColor:"control"}},z&&R(B,{mt:0,size:"14",left:le("takeProfit",{defaultValue:"Take Profit"}),pureContent:"".concat(Rt," ").concat(kt?">=":"<="," ").concat(z),right:W}),H&&R(B,{size:"14",left:le("stopLoss",{defaultValue:"Stop Loss"}),pureContent:"".concat(Rt," ").concat(kt?"<=":">="," ").concat(H),right:W})),!Jt&&R(c().Fragment,null,R(f.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},R(B,{size:"14",left:le("markPrice",{defaultValue:"Mark Price"}),content:Pt,right:W,places:Lt})),R(f.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},R(B,{size:"14",left:R(A.m,{sx:{verticalAlign:"50%"},tip:R(p.Z,{as:"div",sx:{padding:"10px"}},le("estLiquidationPriceTip",{defaultValue:""})),placement:"bottom"},le("estLiquidationPrice",{defaultValue:"Est. Liquidation Price"})),pureContent:Ut,right:W})),R(f.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},R(B,{size:"14",left:R(A.m,{sx:{verticalAlign:"50%"},tip:R(p.Z,{as:"div",sx:{padding:"10px"}},le("estLiqMpDifferenceTip",{defaultValue:""})),placement:"bottom"},le("estLiqMpDifference",{defaultValue:"Est. Liquidation Price/Mark Price Difference"})),pureContent:"--"===jt?jt:"".concat((0,P.uf)(100*(Pt?jt/Pt:0),2),"%"),right:"--"===jt?"":"(".concat((0,P.uf)(jt,Lt),")")}))),R(d.Z,{mt:"30px",tx:"orderForm.confirmPanel",variant:"label"},R(v.Z,{style:{cursor:"pointer",fontSize:"14px"}},R(g.ZP,{defaultChecked:It,onChange:function(){wt(!It)}}),le("dontAskAgain",{defaultValue:"Don\u2019t ask me again"}))),R(d.Z,{mt:"19px",width:"100%"},R(_,{tx:"orderForm.confirmPanel",variant:"cancelBtn",onClick:function(){$(!1)}},le("cancelBtnText",{defaultValue:"Cancel"})),R(y.Z,{onClick:Gt,colorStyle:Tt,sx:{color:"#FFFFFF",height:40,width:"100%","&:hover:not(:disabled):not(:active)":{background:Zt}}},St)))}),[X,Tt,St,Et,le,be,ie,U,Lt,W,Y,q,N,s,Nt,Ot,ve,h,Ft,z,Rt,kt,H,Pt,Jt,Ut,jt,It,Gt,Zt,G])}))},yjJ8:(e,t,r)=>{"use strict";r.d(t,{k:()=>f});var n=r("DC7k"),i=r("XP5A"),o=r("xIFI"),a=r.n(o),l=r("xDxD"),s=r("LVI2"),u=(r("dZ3E"),r("Ng/A")),c=r("SVjJ"),d=r("JLYw"),p=a().createElement,f=function(e){var t=e.locale,r=(0,i.Z)(e,["locale"]),a=(0,d.yk)().getI18n,f=(0,l.z4)(),m=(0,n.Z)(f,1)[0],v=(0,s.CN)(c.x.GRID_TRADING_URL,{locale:t,symbol:m}),g=(0,l.tZ)(),y=(0,l._n)(),x=(0,o.useCallback)((function(e){e.preventDefault(),window.open(v,"_blank")}),[y,g,v]);return p(u.Z,Object.assign({as:"a",target:"_blank",onClick:x,href:(0,s.CN)(c.x.GRID_TRADING_URL,{locale:t,symbol:m}),__css:{mr:"xs",color:"t.yellow200",textDecoration:"none"}},r),a("grid-trading",{defaultValue:"Grid Trading"}))}},K9IN:(e,t,r)=>{"use strict";r.d(t,{m:()=>c});var n=r("DtyY"),i=r("XP5A"),o=r("xIFI"),a=r.n(o),l=r("I78S"),s=r("wHkB"),u=a().createElement,c=a().memo((function(e){var t=e.children,r=e.tip,o=e.sx,a=void 0===o?{}:o,c=e.placeholdSx,d=void 0===c?{}:c,p=(0,i.Z)(e,["children","tip","sx","placeholdSx"]);return u(s.Z,Object.assign({sx:(0,n.Z)((0,n.Z)({},a),{},{"& > div:first-of-type":{maxWidth:["352px","352px","264px"]}}),delay:1e3,tip:r},p),u(l.Z,{tx:"orderForm",variant:"tooltip",color:"t.third",__css:{width:"fit-content",borderBottom:"1px dotted #fff",borderBottomColor:"t.third"},sx:d},t))}))},"F16+":(e,t,r)=>{"use strict";r.d(t,{I$:()=>d,ih:()=>p,UE:()=>f});var n,i=r("DtyY"),o=r("XP5A"),a=r("gLnL"),l=r("xIFI"),s=r.n(l),u=r("LVI2"),c=r("tmgI"),d=(n={balance:"10000",isFetching:!1},(0,a.Z)(n,c.Jm.LIMIT,(0,u.XC)(c.Jm.LIMIT)),(0,a.Z)(n,c.Jm.MARKET,(0,u.XC)(c.Jm.MARKET)),(0,a.Z)(n,c.Jm.STOP_LIMIT,(0,u.XC)(c.Jm.STOP_LIMIT)),(0,a.Z)(n,c.Jm.STOP_MARKET,(0,u.XC)(c.Jm.STOP_MARKET)),(0,a.Z)(n,c.Jm.TRAILING_STOP_MARKET,(0,u.XC)(c.Jm.TRAILING_STOP_MARKET)),n),p=function(e,t){var r=t.type,n=t.payload,l=n.orderType,s=(0,o.Z)(n,["orderType"]);switch(r){case c.pp.FIELD_CHANGE:return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},l,(0,i.Z)((0,i.Z)({},e[l]),s.field)));case c.pp.SHADOW_CHANGE:return(0,i.Z)((0,i.Z)({},e),s);default:return e}},f=s().createContext({})},YtaA:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r("DtyY"),i=r("xIFI"),o=r.n(i),a=r("xDxD"),l=r("XP5A"),s=r("194l"),u=r("F16+"),c=o().createElement,d=function(e){var t=e.children,r=(0,l.Z)(e,["children"]),o=(0,s.Z)(),a=o.getI18n,d=o.i18n.language,p=(0,i.useMemo)((function(){return(0,n.Z)((0,n.Z)({},r),{},{getI18n:a,locale:d})}),[d,r,a]);return c(u.UE.Provider,{value:p},t)};const p=o().memo(d);var f=r("68vh"),m=r("TYUO"),v=r("JLYw"),g=o().createElement;function y(e){var t=e.sx,r=(0,m.useOrderFormProps)(),i=(0,v.yk)().getI18n;return(0,a.Fs)().isMobile?null:g(p,Object.assign({getFutI18n:i},r),g(f.Z,{sx:(0,n.Z)({ml:"8px",mr:"20px",minWidth:"auto"},t),labelSx:{width:"48px",maxWidth:"55px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",height:"24px",fontSize:"xs",lineHeight:"24px",padding:0,mr:"5px",borderRadius:"2px",textAlign:"center",border:"1px solid",cursor:"pointer",flex:"none",display:"inline-block",px:"4px",py:0,bg:"orderForm.leverageBg"}}))}},UV7S:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var n=r("VwJU"),i=r.n(n),o=r("DtyY"),a=r("HSMY"),l=r("xIFI"),s=r.n(l),u=r("c83x"),c=r("MrD4"),d=r("DyY0"),p=r("S2LQ"),f=r("t26l"),m=r("qN/k"),v=r("Ng/A"),g=r("I78S"),y=r("bCmj"),x=r("OKEt"),h=r("WmaC"),b=r("vsgX"),P=r("7k23"),k=r("xDxD"),T=r("JLYw"),Z=(r("2M4l"),r("7I/4")),S=s().createElement,C=function(e){var t=e.getI18n,r=e.handleOpenFuturesAccount,n=e.helpUrl,i=e.referralCode,o=e.isValid,a=e.handleCodeChange,u=e.isCanUseFutureAgentCode,c=(0,l.useState)(!1),d=c[0],p=c[1],f=function(){p(!d)};return S(m.Z,{sx:{px:"sm",py:["8px","16px"],bg:"board",color:"t.primary",height:d?"300px":"72px",fontSize:[1],position:d?"fixed":"relative",transition:["transform .3s ease-in-out","none"],transform:["translate3d(0, 300, 0)","none"],bottom:0,left:0,width:"100%",zIndex:"999",userSelect:"none",flexDirection:"column"}},d?S(s().Fragment,null,S(v.Z,{sx:{py:3,display:"flex",alignItems:"center"}},S(Z.Z,{size:16,color:"icon",onClick:f}),S(g.Z,{sx:{lineHeight:"24px",fontWeight:"600",fontSize:"24px",color:"t.yellow200",ml:2}},t("openAccout-title",{defaultValue:"Open Futures Account"}))),S(v.Z,{sx:{display:"flex",alignItems:"center",mb:3}},S(h.Z,{mr:1,size:14,color:"t.secondary"}),S(g.Z,{sx:{fontSize:1,color:"t.secondary"}},t("openAccout-reminderLabel",{defaultValue:"Reminder:"}))),S(v.Z,{sx:{fontSize:1,color:"t.secondary",lineHeight:"20px",mb:3}},t("openAccout-reminderContent")),S(v.Z,{width:"100%",position:"relative"},S(x.Z,{sx:{bg:u?"orderForm.textFieldBg":"orderForm.textFieldBgDisabled"},disabled:!u,value:i,onChange:a,variant:"outline",placeholder:t("openAccout-refCodeLabel"),error:!o,errorText:t("openAccout-refCodeError"),boxProps:{width:"100%",bg:"rgba(255,255,255,0.08)",borderRadius:"2px",border:"none"}})),S(v.Z,{sx:{background:"linear-gradient(180deg, #F8D12F 0%, #F0B90B 99.77%)",cursor:"pointer",width:"100%",height:"40px",lineHeight:"40px",fontSize:1,display:"inline-flex",justifyContent:"center",alignItems:"center",px:"xs",py:"minor",color:"#212833",borderRadius:"2px",my:3,bottom:"50px"},onClick:r},t("openAccout-openBtn",{defaultValue:"Open Now"})),S(g.Z,{sx:{fontSize:1,color:"t.yellow",width:"100%",textAlign:"center",cursor:"pointer"}},S(y.Z,{href:n,target:"_blank",sx:{textDecoration:"none"}},t("openAccout-toTradingGuide",{defaultValue:"Click to see Margin Trading Guide"})))):S(v.Z,{sx:{background:"linear-gradient(180deg, #F8D12F 0%, #F0B90B 99.77%)",cursor:"pointer",height:"40px",lineHeight:"40px",fontSize:1,display:"inline-flex",justifyContent:"center",alignItems:"center",px:"xs",py:"minor",color:"#212833",borderRadius:"2px"},onClick:f},t("openAccout-title",{defaultValue:"Open Futures Account"})))};const I=s().memo(C);var w=s().createElement,M=/^[\w]{3,16}$/,A=function(e){var t=e.getI18n,r=e.handleOpenFuturesAccount,n=e.helpUrl,i=e.referralCode,o=e.isValid,a=e.handleCodeChange,s=e.isCanUseFutureAgentCode,u=(0,l.useRef)(null);return w(m.Z,{sx:{p:"sm",pt:"12px",bg:"orderformBg",zIndex:"12",color:"t.primary",fontSize:[1],position:"relative",userSelect:"none",flexDirection:"column"}},w(v.Z,{sx:{pt:2,pb:3,alignItems:"center",justifyContent:"space-between"},ref:u},w(g.Z,{sx:{color:"t.yellow200",lineHeight:"18px",fontWeight:"600",fontSize:"22px"}},t("openAccout-title",{defaultValue:"Open Futures Account"}))),w(v.Z,{sx:{display:"flex",alignItems:"center",my:2}},w(h.Z,{mr:1,size:14,color:"t.secondary"}),w(g.Z,{sx:{fontSize:1,color:"t.secondary"}},t("openAccout-reminderLabel",{defaultValue:"Reminder:"}))),w(v.Z,{sx:{fontSize:1,color:"t.secondary",lineHeight:"20px"}},t("openAccout-reminderContent")),w(v.Z,{width:"100%",mt:3,position:"relative",sx:{width:"100%"}},w(x.Z,{sx:{bg:s?"formInputBg.bg":"orderForm.textFieldBgDisabled",borderColor:s?"formInputBg.bg":"orderForm.textFieldBgDisabled"},disabled:!s,value:i,onChange:a,labelFixed:!0,variant:"outline",placeholder:t("openAccout-refCodeLabel"),error:!o,errorText:t("openAccout-refCodeError"),boxProps:{width:"100%",bg:"rgba(255,255,255,0.08)",border:"none",borderColor:"formInputBg.bg"}})),w(v.Z,{sx:{width:"256px",background:"linear-gradient(180deg, #F8D12F 0%, #F0B90B 99.77%)",cursor:"pointer",height:"40px",lineHeight:"40px",fontSize:1,display:"inline-flex",justifyContent:"center",alignItems:"center",px:"xs",py:"minor",color:"#212833",borderRadius:"4px",margin:"24px auto"},onClick:function(){return r(i)}},t("openAccout-openBtn",{defaultValue:"Open Now"})),w(g.Z,{color:"t.yellow",fontSize:14,textAlign:"center"},w(y.Z,{href:n,target:"_blank",sx:{textDecoration:"none"}},t("openAccout-toTradingGuide",{defaultValue:"Click to see Margin Trading Guide"}))))},L=function(){var e,t=(0,k.ZK)("trd-futures",e),r=t.i18n.language,n=void 0===r?"en":r,s=t.getI18n,m=(0,T.kP)().showKycDialog,v=(0,k.lr)().ref,g=void 0===v?"":v,y=(0,k.YT)().setMessageInfo,x=(0,l.useState)(!0),h=x[0],Z=x[1],S=(0,l.useState)(g),C=S[0],L=S[1],O=(0,u.useDispatch)(),E=(0,k.Pc)(),F=(0,T.f3)().value,R=function(){var e=(0,a.Z)(i().mark((function e(t){var r,n,a,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.L)({agentCode:t});case 2:if(!(null===(r=e.sent)||void 0===r?void 0:r.success)&&!(null===r||void 0===r?void 0:r.rootUserId)){e.next=11;break}return y({message:s("openAccout-successOpen",{defaultValue:"open success"}),variant:"success"}),O.userCenter.updateState({userInfo:(0,o.Z)((0,o.Z)({},E),{},{isExistFutureAccount:!0})}),e.next=9,O.preference.getPositionMode();case 9:e.next=16;break;case 11:if(a=(n=r||{}).code,l=n.message,!(0,P.t)(a)){e.next=15;break}return m(l),e.abrupt("return");case 15:y({message:(null===r||void 0===r?void 0:r.message)||s("openAccout-failureOpen",{defaultValue:"open failured"})});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=e.target.value.trim().toLowerCase();L(t),""!==t&&!M.test(t)&&t.length<=16?Z(!1):Z(!0)},D={locale:n,callback:(0,c.Ok)(window.location.href)},N=(0,b.CN)(p.x.FUTURES_HELP_URL,D);return w(f.Z,null,(function(e){var t=e.isMobile;return w(t?I:A,{referralCode:C,isValid:h,handleCodeChange:V,getI18n:s,helpUrl:N,handleOpenFuturesAccount:function(){return R(C)},isCanUseFutureAgentCode:F})}))};const O=s().memo(L)},TYUO:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ei,useOrderFormProps:()=>l.X});var n=r("xIFI"),i=r.n(n),o=r("xDxD"),a=r("jw37"),l=r("NDPa"),s=r("tmgI"),u=r("XP5A"),c=r("Ng/A"),d=r("qN/k"),p=r("53NN"),f=r("uI99"),m=r("LVI2"),v=r("uk6z"),g=r("u6EX"),y=r("F16+"),x=r("68vh"),h=r("9kya"),b=r("I78S"),P=r("7r9v"),k=r("QLxY"),T=r("JLYw"),Z=r("VwJU"),S=r.n(Z),C=r("DC7k"),I=r("HSMY"),w=r("gLnL"),M=r("DtyY"),A=r("c83x"),L=r("3k8n"),O=r("wz6d"),E=r("dYqW"),F=r("hcLW"),R=r("0pZZ"),V=r("EibB"),D=r("bCmj"),N=r("c0H5"),B=r("OKEt"),_=r("nXUx"),z=r("w45g"),H=r("TG9/"),q=i().createElement,Y={LIMIT:"limit",MARKET:"market",STOP:"stopLimit",STOP_MARKET:"stopMarket",TRAILING_STOP_MARKET:"trailingStopMarket"},U=[{i18n:"order-confirmation",defaultI18n:"Order Confirmation",key:"oc"},{i18n:"position-mode",defaultI18n:"Position Mode",key:"pm"},{i18n:"priceProtection",defaultI18n:"Price Protection",key:"pp"},{i18n:"preferenceNotification",defaultI18n:"Notification",key:"pn"}],j=(0,n.forwardRef)((function(e,t){var r=(0,T.yk)().getI18n,i=(0,n.useState)({}),o=i[0],a=i[1],l=o.defaultActiveKey,s=void 0===l?"oc":l,u=(0,n.useState)(!1),f=u[0],m=u[1],v=(0,n.useState)(s),g=v[0],y=v[1],x=(0,A.useDispatch)(),h=(0,n.useCallback)((function(){m(!1)}),[m]);return(0,n.useImperativeHandle)(t,(function(){return{showPreferencePanel:function(e){x.preference.getFundingFeeNotify(),x.preference.getStopLimitOrderNotify(),m(!0),a(e)}}})),(0,n.useEffect)((function(){var e=o.defaultActiveKey;y(void 0===e?"oc":e)}),[o]),(0,n.useMemo)((function(){return f?q(E.Z,{visible:f,tx:"preference.dialog",variant:"container",onMaskClick:h},q(d.Z,{alignItems:"center",justifyContent:"space-between",tx:"preference.header",variant:"container"},q(b.Z,{tx:"preference.header",variant:"title"},r("preference",{defaultValue:"Preference"})),q(p.Z,{tx:"preference.header",variant:"close",onClick:h})),q(d.Z,{sx:{height:"424px"}},q(c.Z,{tx:"preference.navigation",variant:"container"},U.map((function(e){var t=e.i18n,n=e.defaultI18n,i=e.key;return q(d.Z,{alignItems:"center",tx:"preference.navigation",variant:"list",sx:g===i&&{bg:"commonDialog.labelActiveBg","&::before":{content:"''",width:"4px",height:"100%",bg:"t.yellow200",position:"absolute",left:0}},key:i,onClick:function(){return y(i)}},r(t,{defaultValue:n}))}))),q(c.Z,{tx:"preference.content",variant:"container"},q(W,{tabKey:g,hidePreferencePanel:h})))):null}),[f,h,g,r])})),W=function(e){switch(e.tabKey){case"oc":return q(Q,e);case"pm":return q(X,e);case"pp":return q($,e);case"pn":return q(ne,e);default:return null}};const K=j;var J=function(){var e=(0,T.yk)().getI18n,t=(0,T.G3)();return e(t?"settingDelivery":"settingPerpetual",{defaultValue:t?"This setting is only apply for Delivery Futures.":"This setting is only apply for Perpetual Futures."})},G=function(e){var t=e.name,r=e.label,i=e.checked,o=e.onChange,a=e.children;return(0,n.useMemo)((function(){return q(d.Z,{tx:"preference.switch",variant:"container"},q(d.Z,{tx:"preference.switch",variant:"header"},q(b.Z,{tx:"preference.switch",variant:"label"},r),q(F.Z,{sx:{"& div":{backgroundColor:"#FFFFFF"},"& input":{backgroundColor:"#C1C6CD"}},checked:i,onChange:o,name:t,color:"#2EBD85",size:24})),a)}),[i,a,r,t,o])},Q=function(e){var t=e.hidePreferencePanel,r=(0,n.useRef)(["LIMIT","MARKET","STOP","STOP_MARKET","TRAILING_STOP_MARKET"]),i=(0,T.F7)().orderConfirmation,o=(0,T.yk)().getI18n,a=(0,N.Y)().setMessageInfo,l=J(),s=(0,A.useDispatch)(),u=(0,n.useCallback)((function(e){return s.preference.changeOrderConfirmation(e)}),[s.preference]),p=(0,n.useState)(i),f=p[0],m=p[1];(0,n.useEffect)((function(){0!==Object.keys(i).length&&m((0,M.Z)({},i))}),[i]);var v=(0,n.useCallback)((function(){u(f).then((function(e){var r,n=e.success;n?r={title:o("changeOrderConfirmation",{defaultValue:"Change Order Confirmation"}),text:o("changeOrderConfirmationSuccess",{defaultValue:"Change Order Confirmation successfully."})}:(r={title:o("changeOrderConfirmation",{defaultValue:"Change Order Confirmation"}),text:o("changeOrderConfirmationFail",{defaultValue:"Change Order Confirmation failed"})},u(i)),a({header:r.title,message:r.text,variant:n?"success":"error"}),t()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e),u(i),t()}))}),[u,f,a,t,o,i]);return q(c.Z,null,q(d.Z,{tx:"preference.content",variant:"header",sx:{lineHeight:["20px","16px"]}},o("order-confirmation-content",{defaultValue:""}),"\xa0",l),r.current.map((function(e){return q(G,{key:e,name:e,label:"".concat(o(Y[e],{defaultValue:""})," "," "," ").concat(o("Order",{defaultValue:"Order"})),checked:f[e]||!1,onChange:function(t){var r=t.target;m((0,M.Z)((0,M.Z)({},f),{},(0,w.Z)({},e,r.checked)))}})})),q(d.Z,{tx:"preference.confirm",variant:"button"},q(R.Z,{height:40,width:"100%",onClick:v},o("PreferenceConfirm",{defaultValue:"Confirm"}))))},X=function(e){var t=e.hidePreferencePanel,r=(0,A.useDispatch)(),i=(0,T.F7)().positionMode,o=void 0!==i&&i,a=(0,T.yk)().getI18n,l=(0,n.useState)(o),s=l[0],u=l[1],p=(0,N.Y)().setMessageInfo,f=J(),m=(0,n.useCallback)((function(e){return r.preference.changePositionMode({dualSidePosition:e})}),[r.preference]);(0,n.useEffect)((function(){void 0!==o&&u(o)}),[o]);var v=(0,n.useCallback)((function(){o!==s?m(s).then((function(e){var r,n=e.success;n?r={title:a("AdjustPositionMode",{defaultValue:"Adjust Position Mode"}),text:a("AdjustPositionModeSuccess",{defaultValue:"Position mode adjusted successfully."})}:(r={title:a("AdjustPositionMode",{defaultValue:"Adjust Position Mode"}),text:a("AdjustPositionModeFail",{defaultValue:"Position mode adjusted failed"})},u(o)),p({header:r.title,message:r.text,variant:n?"success":"error"}),t()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e),u(o),t()})):t()}),[m,p,a,t,o,s]);return q(c.Z,null,q(d.Z,{tx:"preference.content",variant:"header"},a("AdjustPositionModeDes",{defaultValue:""}),"\xa0",f),q(c.Z,{mt:"27px","data-testid":"One-wayMode"},q(V.ZP,{name:"positionSide",value:"false",sx:{svg:{borderWidth:"1px"},color:!1===s?"radio.t.active":"t.primary"},checked:!1===s,onChange:function(){u(!1)}},q(c.Z,{tx:"preference.switch",variant:"label"},a("OneWayPosition",{defaultValue:"One-way Mode"}))),q(b.Z,{tx:"preference.radio",variant:"desc"},a("OneWayModeDes",{defaultValue:""}))),q(c.Z,{mt:"27px","data-testid":"HedgeMode"},q(V.ZP,{name:"positionSide",value:"true",sx:{svg:{borderWidth:"1px"},color:!0===s?"radio.t.active":"t.primary"},checked:!0===s,onChange:function(){u(!0)}},q(c.Z,{tx:"preference.switch",variant:"label"},a("TwoWayPosition",{defaultValue:"Hedge Mode"}))),q(b.Z,{tx:"preference.radio",variant:"desc"},a("TwoWayModeDes",{defaultValue:""}))),q(d.Z,{tx:"preference.confirm",variant:"button"},q(R.Z,{height:40,width:"100%",onClick:v,"data-testid":"corfirm"},a("PreferenceConfirm",{defaultValue:"Confirm"}))))},$=function(e){var t=e.hidePreferencePanel,r=(0,T.G3)(),i=(0,o.tZ)(),a=(0,A.useDispatch)(),l=(0,T.yk)().getI18n,s=(0,T.$G)().t,u=(0,N.Y)().setMessageInfo,p=(0,T.F7)().priceProtection,f=J(),m=(0,n.useState)(p),v=m[0],g=m[1],y=(0,n.useCallback)((function(e){var t=e.target;g(t.checked)}),[]),x=(0,n.useCallback)((function(){(0,_.P2)((0,w.Z)({},r?"deliveryPriceDifferSwitch":"perpetualPriceDifferSwitch",v)).then((function(e){var r,n=e.data;n?(r={title:l("AdjustPriceProtection",{defaultValue:"Adjust Price Protection"}),text:l("AdjustPriceProtectionSuccess",{defaultValue:"Price protection adjusted successfully"})},a.preference.updateState({priceProtection:v})):r={title:l("AdjustPriceProtection",{defaultValue:"Adjust Price Protection"}),text:l("AdjustPriceProtectionFailed",{defaultValue:"Price Protection adjusted failed"})},u({header:r.title,message:r.text,variant:n?"success":"error"}),t()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e),t()}))}),[a.preference,l,t,r,v,u]);return q(c.Z,null,q(d.Z,{tx:"preference.content",variant:"header",flexDirection:"column"},q(L.c,{t:s,i18nKey:(0,T.Gv)("priceProtectionDes"),defaults:"<text>After enabling price protection, if the difference between the Last price and Mark price of the contract exceeds the set threshold when the stop loss / take profit orders reach the trigger price, the stop loss / take profit orders will not be triggered. View threshold in <jump>{{tradingRule}}</jump></text>",components:{text:q(b.Z,null),jump:q(D.Z,{href:"/".concat(i,"/futures/trading-rules/").concat(r?"quarterly":"perpetual"),tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"},target:""})},values:{tradingRule:l("trading-rules",{defaultValue:"Trading Rules"})}}),q(c.Z,{mt:10},f)),q(G,{name:"priceProtection",label:l("priceProtection",{defaultValue:"Price Protection"}),checked:v,onChange:y}),q(d.Z,{tx:"preference.confirm",variant:"button"},q(R.Z,{height:40,width:"100%",onClick:x,"data-testid":"corfirm"},l("PreferenceConfirm",{defaultValue:"Confirm"}))))},ee=1e-4,te={pr:"54px","& .bn-input-tooltip":{minWidth:"238px",height:"32px",lineHeight:"32px",textAlign:"center",bg:"t.grey500",borderRadius:"4px",color:"t.grey0",fontSize:"sm",right:"-45px !important",bottom:"155% !important"},"& .bn-input-tooltip-arrow":{right:"63px !important"},"& .bn-input-tooltip-content":{padding:"7px 8px !important"},"& > div:nth-of-type(2)":{borderColor:"calculator.inputBorderColor"},"& .bn-input-status-error":{borderColor:"#D9304E !important"}},re=function(e){var t=e.hidePreferencePanel,r=(0,T.F7)(),i=r.TPSLNotify,o=r.fundingFee,a=r.isEnableFundingFee,l=(0,A.useDispatch)(),s=(0,T.yk)().getI18n,u=(0,N.Y)().setMessageInfo,p=(0,n.useState)(i),f=p[0],m=p[1],v=(0,n.useState)(a),g=v[0],y=v[1],x=(0,n.useState)(o),h=x[0],b=x[1],P=(0,n.useState)(null),k=P[0],Z=P[1],w=(0,n.useCallback)((0,I.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=2;break}return e.abrupt("return");case 2:Promise.all([(0,z.hw)({threshold:(0,O.QZ)(h,100).toNumber(),isEnable:g}),(0,z.rR)(f)]).then((function(e){var r,n=(0,C.Z)(e,2),i=n[0].success,o=n[1].success,a=i&&o;a?(r={title:s("AdjustNotification",{defaultValue:"Adjust Notification"}),text:s("AdjustNotificationSuccess",{defaultValue:"Notification adjusted successfully."})},l.preference.updateState({fundingFee:h,isEnableFundingFee:g,TPSLNotify:f})):r={title:s("AdjustNotification",{defaultValue:"Adjust Notification"}),text:s("AdjustNotificationFail",{defaultValue:"Notification adjusted failed"})},u({header:r.title,message:r.text,variant:a?"success":"error"}),t()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e),t()}));case 3:case"end":return e.stop()}}),e)}))),[f,l.preference,k,h,g,s,t,u]),M=(0,n.useCallback)((function(e){var t=e.target;m(t.checked)}),[]);(0,n.useEffect)((function(){m(i),y(a),b(o)}),[i,o,a]);var L=(0,n.useCallback)((function(e){var t=e.target.checked;y(t),Z("")}),[]),E=(0,n.useCallback)((function(e){b(e),Z(e<ee||e>.75?s("fundingFeeTriggerTips",{min:ee,max:.75,defaultValue:"Trigger is limited to {{min}}%-{{max}}%."}):null)}),[s]);return q(c.Z,null,q(d.Z,{tx:"preference.content",variant:"header",flexDirection:"column"},s("preferenceNotificationDes",{defaultValue:"preferenceNotificationDes"})),q(G,{name:"priceProtection",label:s("TPSLTrigger",{defaultValue:"TP/SL Trigger"}),checked:f,onChange:M},q(c.Z,{tx:"preference.switch",variant:"desc"},s("TPSLTriggerDesc",{defaultValue:"TPSLTriggerDesc"}))),q(G,{name:"priceProtection",label:s("fundingFeeTrigger",{defaultValue:"Funding Fee Trigger"}),checked:g,onChange:L},q(d.Z,{tx:"preference.switch",variant:"desc",alignItems:"center",sx:te},q(c.Z,{tx:"preference.switch",variant:"desc",sx:{pr:0}},s("fundingFeeTriggerDesc",{defaultValue:"You will be notified when funding fee reaches"})),q(B.Z,{boxProps:{width:"80px",minWidth:"80px",height:"24px",ml:"minor",mt:0,mb:0},variant:"inline",type:"number",value:h,onChange:function(e){return(0,H._p)(e,E,"",4)},onBlur:H.Y5,errorText:k,error:k,suffix:"%",disabled:!g}))),q(d.Z,{tx:"preference.confirm",variant:"button"},q(R.Z,{height:40,width:"100%",onClick:w,"data-testid":"corfirm"},s("PreferenceConfirm",{defaultValue:"Confirm"}))))},ne=i().memo(re),ie=i().createElement,oe={position:"fixed",width:"100vw",height:"100vh",left:0,right:0,top:0,bottom:0,zIndex:"modal",mb:"sm"},ae={fontSize:"16px",color:"t.third",p:"8px 0",mr:"16px"},le={borderBottom:"1px solid",borderColor:"calculator.tabBtColor",mb:"md"};const se=(0,n.forwardRef)((function(e,t){var r=(0,T.yk)().getI18n,i=(0,n.useState)({}),o=i[0],a=i[1],l=o.defaultActiveKey,s=void 0===l?"oc":l,u=(0,n.useState)(!1),f=u[0],m=u[1],v=(0,n.useCallback)((function(){m(!1)}),[m]);(0,n.useImperativeHandle)(t,(function(){return{showPreferencePanel:function(e){m(!0),a(e)}}}));var g=(0,n.useMemo)((function(){return{pb:0}}),[]),y=(0,n.useMemo)((function(){return{hidePreferencePanel:v}}),[v]);return(0,n.useMemo)((function(){return f?ie(h.ZP,null,ie(c.Z,{tx:"preference.dialog",variant:"container",sx:oe},ie(d.Z,{alignItems:"center",justifyContent:"space-between",tx:"preference.header",variant:"container"},ie(b.Z,{tx:"preference.header",variant:"title"},r("preference",{defaultValue:"Preference"})),ie(p.Z,{tx:"preference.header",variant:"close",onClick:v})),ie(c.Z,{sx:{p:"sm"}},ie(P.Z,{defaultActiveKey:s,variant:"trade-next",tabDefaultNodeSx:ae,tabSx:g,tabsSx:le,lazy:!0},ie(k.Z,{tab:r("order-confirmation",{defaultValue:"Order Confirmation"}),tabKey:"oc"},ie(Q,y)),ie(k.Z,{tab:r("position-mode",{defaultValue:"Position Mode"}),tabKey:"pm"},ie(X,y)),ie(k.Z,{tab:r("priceProtection",{defaultValue:"Price Protection"}),tabKey:"pp"},ie($,y)),ie(k.Z,{tab:r("preferenceNotification",{defaultValue:"Notification"}),tabKey:"pn"},ie(ne,y)))))):null}),[s,r,v,y,g,f])}));var ue=i().createElement,ce={pb:"20px",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(255, 255, 255, 0.16)",paddingBottom:"13px"},de=function(e){var t=e.children,r=(0,u.Z)(e,["children"]);return ue(c.Z,Object.assign({variant:"dropdown",__css:{display:"flex",flexDirection:"column"}},r),t)},pe=function(e){var t=e.locale,r=(e.base,e.quote),o=e.getFutI18n,a=e.futUrlConfig,l=e.isDelivery,u=e.showPreferencePanel,c=(0,n.useCallback)((function(e){f.Z.emit("triggerModal",e)}),[]);return ue(de,null,ue(g.__,{handle:function(){var e=(0,m.CN)(a.BUYING_URL,{locale:t,crypto:r});window.location.href=e}},o("buy-crypto",{defaultValue:"Buy Crypto"})),l?ue(i().Fragment,null,ue(g.__,{handle:function(){return c(s.Ze.CONVERT)}},o("convert",{defaultValue:"Convert"})),ue(g.__,{handle:function(){return c(s.Ze.TRANSFER)}},o("transfer",{defaultValue:"Transfer"})),ue(g.__,{handle:function(){return u("oc")}},o("Preference",{defaultValue:"Preference"}))):ue(i().Fragment,null,ue(g.__,{handle:function(){return window.location.href=(0,m.CN)(a.DEPOSIT_URL,{locale:t,coin:r})}},o("deposit",{defaultValue:"Deposit"})),ue(g.__,{handle:function(){return c(s.Ze.TRANSFER)}},o("transfer",{defaultValue:"Transfer"})),ue(g.__,{handle:function(){return u("oc")}},o("preference",{defaultValue:"Preference"}))))},fe=function(e){return ue(c.Z,{lineHeight:"0"},e.isLoggedIn&&ue(v.Z,{overlay:ue(pe,e)}),ue(p.Z,{ml:"sm",color:"t.third",fontSize:"16px",onClick:function(){return e.hideMask()}}))},me=function(){var e=(0,n.useContext)(y.UE),t=e.getI18n,r=e.getFutI18n,a=e.base,l=e.quote,s=e.locale,u=e.hideMask,c=e.futUrlConfig,p=e.isLoggedIn,f=e.isDelivery,m=(0,n.useRef)(null),v=(0,o.Fs)().isMobile,g=(0,T.r8)(),h=g.preferencePanelRef,b=g.showPreferencePanel;return(0,n.useMemo)((function(){return v?ue(i().Fragment,null,ue(d.Z,{sx:ce,ref:m},ue(i().Fragment,null,ue(x.Z,{sx:{width:"248px"},labelSx:{border:"1px solid #fff",borderColor:"orderformBtnHover.borderColor"}}),ue(fe,{base:a,quote:l,locale:s,getI18n:t,getFutI18n:r,hideMask:u,isLoggedIn:p,futUrlConfig:c,isDelivery:f,showPreferencePanel:b}))),ue(se,{ref:h})):null}),[v,a,l,s,t,r,u,p,c,f,h,b])};const ve=i().memo(me);var ge=r("MXyZ"),ye=r("0axZ"),xe=r("JZM8"),he=r.n(xe),be=r("9+6n"),Pe=r("BblE"),ke=r("L4Ep"),Te=r("DUC0"),Ze=r("Hr2e"),Se=r("NvfF"),Ce=r("xfKf"),Ie=r("gQYy"),we=r("2M4l"),Me=r("guhI"),Ae=r("ASW3"),Le=r("3TKe"),Oe=r("e0c5"),Ee=r("wHkB"),Fe=r("NXRQ"),Re=r("S2LQ"),Ve=i().createElement,De=function(e){var t=e.locale,r=e.getI18n,i=e.getFutI18n,o=e.tradeType;return(0,n.useMemo)((function(){return Ve(Ee.Z,{arrow:!0,pos:"bottom-end",delay:1e3,sx:{mr:1,cursor:"pointer"},tip:Ve(g.Ch,{locale:t,getI18n:r,getFutI18n:i,tradeType:o,selfHost:Re.$g})},Ve(Le.Z,{color:"t.third",size:14,verticalAlign:"middle",sx:{":hover":{color:"t.yellow300"}}}))}),[i,r,t,o])},Ne=function(e){var t=e.locale,r=e.getI18n,i=e.orderType,a=e.onChange,l=e.tradeType,u=e.getFutI18n,p=void 0===u?function(){}:u,f=e.sx,m=void 0===f?{}:f,v=(0,o.Jr)(),y=(0,o.hd)()?"cn":"en",x=(0,n.useRef)(),h=(0,Fe.KO)().putCoachMarkStep,P=(0,n.useMemo)((function(){return"ph"===v?{fontSize:"xs"}:{}}),[v]),k=l===s.xy.FUTURES,T=(0,n.useRef)(k?[[s.Jm.STOP_LIMIT,s.OO.STOP_LIMIT],[s.Jm.STOP_MARKET,s.OO.STOP_MARKET],[s.Jm.TRAILING_STOP_MARKET,s.OO.TRAILING_STOP_MARKET]]:[[s.Jm.OCO],[s.Jm.STOPLIMIT]]),Z=(0,n.useState)(k?s.Jm.STOP_LIMIT:s.Jm.OCO),S=Z[0],I=Z[1],w=(0,n.useCallback)((function(e){I(e),a(e)}),[a]),A=(0,n.useCallback)((function(e){return k?{"data-testid":e}:{}}),[k]);return(0,n.useEffect)((function(){if(!k){var e=Ve(d.Z,null,Ve(b.Z,null,p("ordertab-content"),Ve(D.Z,{href:ke.gQ[y],target:"_blank",sx:{color:"t.grey800",ml:1,display:"inline-block"}},p("ordertab-link"))));h("futuresGuide",2,{title:p("ordertab-title"),content:e,target:x,position:"left-start"})}}),[k,p,v]),Ve(d.Z,{justifyContent:"space-between",sx:(0,M.Z)((0,M.Z)({},m),{},{fontSize:1,lineHeight:"12px",borderBottom:"1px solid",borderBottomColor:"lines.light"}),ref:x},Ve(g.Gj,Object.assign({type:s.Jm.LIMIT,actived:i===s.Jm.LIMIT,handleClick:a},A("limit"),P),r("LIMIT")),Ve(g.Gj,Object.assign({type:s.Jm.MARKET,actived:i===s.Jm.MARKET,handleClick:a},A("market"),P),r("MARKET")),Ve(c.Z,null,Ve(De,{locale:t,getI18n:r,getFutI18n:p,tradeType:l}),Ve(g.Gj,Object.assign({type:S,actived:Boolean(T.current.find((function(e){return(0,C.Z)(e,1)[0]===i}))),handleClick:w},P),k?p(S,{defaultValue:"Stop Limit"}):r(S)),Ve(Ae.ZP,{trigger:"hover",enablePortal:!0,sx:{px:"3px",cursor:"pointer"},overlay:(0,g.j3)(r,p,w,i,{subTypes:T.current,tradeType:l})},Ve(Oe.Z,Object.assign({color:"t.third",size:16,verticalAlign:"middle"},A("moreStopMode"))))))};const Be=i().memo(Ne);var _e=r("vsgX"),ze=r("SVjJ"),He=i().createElement,qe=function(e){var t=e.feeTierInfo,r=(0,T.yk)().getI18n,n=(0,o.tZ)(),i=ze.x.FEE_URL,a=t.feeTier,l=t.makerCommission,s=t.takerCommission,u=1e6,d=(0,O.Bq)(s,u,{digit:4}),p=(0,O.Bq)(l,u,{digit:4});return He(c.Z,{variant:"dropdown",sx:{minWidth:"160px",mt:"sm",p:"sm",bg:"filterDropdown.bg",color:"filterDropdown.color",lineHeight:"16px",fontSize:"0",position:"relative",top:"-15px"}},He(b.Z,{as:"a",fontSize:"1",color:"primary",display:"inline-block",sx:{fontWeight:"500",textDecoration:"none",":hover":{color:"t.yellow300"}},target:"",href:(0,_e.CN)(i,{locale:n})},r("fee-feeTierLabel",{defaultValue:"Fee Tier"}),": ",a||"-"," >"),He(b.Z,{pt:"20px"},r("fee-takerLabel",{defaultValue:"Taker"}),":",He(b.Z,{as:"span",sx:{float:"right"}},d)),He(b.Z,{pt:"xs"},r("fee-makerLabel",{defaultValue:"Maker"}),":",He(b.Z,{as:"span",sx:{float:"right"}},"".concat(l<0?"-":"").concat(p))))};const Ye=function(){var e=(0,T.aq)(),t=(0,o._n)(),r=e.feeTier,n=void 0===r?"-":r;return t?He(Ae.ZP,{arrow:!0,trigger:"hover",placement:"bottom-end",overlay:"-"===n?null:He(qe,{feeTierInfo:e}),enablePortal:!0},He(c.Z,{sx:{fontSize:"xs",color:"t.third",mr:"8px",cursor:"pointer",borderBottom:"1px dotted",borderBottomColor:"t.third","&:hover":{color:"t.yellow200",borderBottomColor:"t.yellow200"}}},"VIP ",n)):null};r("dZ3E");var Ue=r("jzeX"),je=r("RKRd"),We=r("qJlb"),Ke=i().createElement,Je="%",Ge=function(e){var t=e.hasTip,r=void 0===t||t,n=e.label,i=e.tip,o=e.value,a=(0,u.Z)(e,["hasTip","label","tip","value"]);return Ke(d.Z,Object.assign({tx:"tradingRules.dialog",variant:"rules"},a),r?Ke(Ee.Z,{arrow:!0,tip:i,delay:1e3},Ke(b.Z,{tx:"tradingRules.dialog",variant:"label"},n)):Ke(b.Z,{sx:{color:"t.third"}},n),o)},Qe=(0,n.forwardRef)((function(e,t){var r=(0,o.tZ)(),i=(0,T.yk)().getI18n,a=(0,n.useState)(!1),l=a[0],s=a[1],u=(0,n.useState)({}),f=u[0],m=u[1],v=f.symbol,g=f.contractSize,y=f.triggerProtect,x=f.filterInfo,h=function(e,t){return[{labelKey:"minimumTradeAmount",defaultLabel:"Minimum Trade Amount",filterType:"LOT_SIZE",field:"minQty",tipKey:"minimumTradeAmountTip",defaultTip:"The minimum Limit Order amount for the contract.",unit:e},{labelKey:"minPriceMovement",defaultLabel:"Min Price Movement",filterType:"PRICE_FILTER",field:"tickSize",tipKey:"minPriceMovementTip",defaultTip:"The minimum change in the unit price of the contract.",unit:t},{labelKey:"orderPriceCapRatio",defaultLabel:"Order Price Cap Ratio",filterType:"PERCENT_PRICE",field:"multiplierUp",tipKey:"orderPriceCapRatioTip",defaultTip:"The upper limit ratio of the order price to current Mark Price of the contract.",unit:Je,shouldFormat:!0},{labelKey:"orderPriceFloorRatio",defaultLabel:"Order Price Floor Ratio",filterType:"PERCENT_PRICE",field:"multiplierDown",tipKey:"orderPriceFloorRatioTip",defaultTip:"The lower limit ratio of the order price to current Mark Price of the contract.",unit:Je,shouldFormat:!0},{labelKey:"maximumMarketOrderAmount",defaultLabel:"Maximum Market Order Amount",filterType:"MARKET_LOT_SIZE",field:"maxQty",tipKey:"maximumMarketOrderAmountTip",defaultTip:"The minimum Market Order amount for the contract.",unit:e},{labelKey:"maximumOpenOrderAmount",defaultLabel:"Maximum Open Order Amount",filterType:"MAX_NUM_ORDERS",field:"limit",tipKey:"maximumOpenOrderAmountTip",defaultTip:"The maxium Open Orders for the contract."}]}(f.baseUint,f.quoteUint);return(0,n.useImperativeHandle)(t,(function(){return{showPanel:function(e){s(!0),m(e)}}})),Ke(E.Z,{tx:"tradingRules.dialog",variant:"container",visible:l,onMaskClick:function(){return s(!1)}},Ke(d.Z,{tx:"tradingRules.dialog",variant:"title"},i("trading-rules",{defaultValue:"Trading Rules"}),Ke(p.Z,{tx:"tradingRules.dialog",variant:"close",onClick:function(){return s(!1)}})),Ke(c.Z,{tx:"tradingRules.dialog",variant:"content"},Ke(Ge,{hasTip:!1,label:i("symbol",{defaultValue:"Symbol"}),value:v}),h.map((function(e){var t,r=e.labelKey,n=e.defaultLabel,o=e.filterType,a=e.field,l=e.unit,s=void 0===l?"":l,u=e.tipKey,c=e.defaultTip,d=e.shouldFormat,p=null===x||void 0===x||null===(t=x[o])||void 0===t?void 0:t[a];return p=s===Je?100*("multiplierUp"===a?p-1:1-p):p,Ke(Ge,{key:r,label:i(r,{defaultValue:n}),tip:i(u,{defaultValue:c}),value:"".concat(d?(0,We.uf)(p,0):p," ").concat(s)})})),Ke(Ge,{label:i("contractSize",{defaultValue:"Contract Size"}),tip:i("contractSizeTip"),value:g}),Ke(Ge,{label:i("triggerProtect",{defaultValue:"Price Protection Rate"}),tip:i("triggerProtectTip"),value:"".concat(100*y," ").concat(Je)}),Ke(D.Z,{href:"/".concat(r,"/futures/trading-rules/quarterly"),tx:"tradingRules.dialog",variant:"viewMore",target:""},i("viewMore",{defaultValue:"View More"}))))}));const Xe=i().memo(Qe);var $e=i().createElement,et="%",tt=function(e){var t=e.hasTip,r=void 0===t||t,n=e.label,i=e.tip,o=e.value,a=(0,u.Z)(e,["hasTip","label","tip","value"]);return $e(d.Z,Object.assign({tx:"tradingRules.dialog",variant:"rules"},a),r?$e(Ee.Z,{arrow:!0,tip:i,delay:1e3},$e(b.Z,{tx:"tradingRules.dialog",variant:"label"},n)):$e(b.Z,{sx:{color:"t.third"}},n),o)},rt=(0,n.forwardRef)((function(e,t){var r=(0,o.tZ)(),i=(0,T.yk)().getI18n,a=(0,n.useState)(!1),l=a[0],s=a[1],u=(0,n.useState)({}),f=u[0],m=u[1],v=f.symbol,g=f.triggerProtect,y=f.filterInfo,x=function(e,t){return[{labelKey:"minimumTradeAmount",defaultLabel:"Minimum Trade Amount",filterType:"LOT_SIZE",field:"minQty",tipKey:"minimumTradeAmountTip",defaultTip:"The minimum Limit Order amount for the contract.",unit:e},{labelKey:"minPriceMovement",defaultLabel:"Min Price Movement",filterType:"PRICE_FILTER",field:"tickSize",tipKey:"minPriceMovementTip",defaultTip:"The minimum change in the unit price of the contract.",unit:t},{labelKey:"orderPriceCapRatio",defaultLabel:"Order Price Cap Ratio",filterType:"PERCENT_PRICE",field:"multiplierUp",tipKey:"orderPriceCapRatioTip",defaultTip:"The upper limit ratio of the order price to current Mark Price of the contract.",unit:et,shouldFormat:!0},{labelKey:"orderPriceFloorRatio",defaultLabel:"Order Price Floor Ratio",filterType:"PERCENT_PRICE",field:"multiplierDown",tipKey:"orderPriceFloorRatioTip",defaultTip:"The lower limit ratio of the order price to current Mark Price of the contract.",unit:et,shouldFormat:!0},{labelKey:"maximumMarketOrderAmount",defaultLabel:"Maximum Market Order Amount",filterType:"MARKET_LOT_SIZE",field:"maxQty",tipKey:"maximumMarketOrderAmountTip",defaultTip:"The minimum Market Order amount for the contract.",unit:e},{labelKey:"maximumOpenOrderAmount",defaultLabel:"Maximum Open Order Amount",filterType:"MAX_NUM_ORDERS",field:"limit",tipKey:"maximumOpenOrderAmountTip",defaultTip:"The maxium Open Orders for the contract."}]}(f.baseUint,f.quoteUint),h=(0,o.gm)(),b=(0,T.G3)();return(0,n.useImperativeHandle)(t,(function(){return{showPanel:function(e){s(!0),m(e)}}})),$e(E.Z,{tx:"tradingRules.dialog",variant:"container",visible:l,onMaskClick:function(){return s(!1)}},$e(d.Z,{tx:"tradingRules.dialog",variant:"title"},i("trading-rules",{defaultValue:"Trading Rules"}),$e(p.Z,{tx:"tradingRules.dialog",variant:"close",onClick:function(){return s(!1)}})),$e(c.Z,{tx:"tradingRules.dialog",variant:"content"},$e(tt,{hasTip:!1,label:i("symbol",{defaultValue:"Symbol"}),value:v}),x.map((function(e){var t,r=e.labelKey,n=e.defaultLabel,o=e.filterType,a=e.field,l=e.unit,s=void 0===l?"":l,u=e.tipKey,c=e.defaultTip,d=e.shouldFormat,p=null===y||void 0===y||null===(t=y[o])||void 0===t?void 0:t[a];p=s===et?100*("multiplierUp"===a?p-1:1-p):p;var f=d?(0,We.uf)(p,0):p,m="rtl"===h?"".concat(s," ").concat(f):"".concat(f," ").concat(s);return $e(tt,{key:r,label:i(r,{defaultValue:n}),tip:i(u,{defaultValue:c}),value:m})})),$e(tt,{label:i("triggerProtect",{defaultValue:"Price Protection Rate"}),tip:i("triggerProtectTip"),value:"".concat(100*g," ").concat(et)}),$e(D.Z,{href:"/".concat(r,"/futures/trading-rules/").concat(b?"quarterly":"perpetual"),target:"",tx:"tradingRules.dialog",variant:"viewMore"},i("viewMore",{defaultValue:"View More"}))))}));const nt=i().memo(rt);var it=i().createElement,ot=function(e){var t=e.isDelivery,r=(0,T.yk)().getI18n,n=((0,o.tZ)(),(0,o._n)()),a=(0,T.r8)(),l=a.preferencePanelRef,s=a.showPreferencePanel,u=(0,T.tS)(t),c=u.tradingRulesModalRef,d=u.showTradingRulesModal,p=(0,T.u$)(!0).reviewDialog;return it(i().Fragment,null,it(Ae.ZP,{overlay:it(Ue.Z,{variant:"preference.orderDropdown",sx:{width:"auto",p:0,position:"relative",top:"-20px",right:"10px"}},it("div",null,n&&it("div",{className:"opr",onClick:function(){return s("oc")}},r("preference",{defaultValue:"Preference"})),it("div",{className:"opr",onClick:d},r("trading-rules",{defaultValue:"Trading Rules"})),n&&it("div",{className:"opr",onClick:p},r("futures-quiz-tutorial",{defaultValue:"Tutorial"})),!1)),trigger:"hover",enablePortal:!0,placement:"bottom-start"},it(je.Z,{sx:{transform:"rotate(90deg)",position:"relative",top:"2px",color:"t.grey400",cursor:"pointer","&:hover":{color:"t.yellow300"}}})),n&&it(K,{ref:l}),it(t?Xe:nt,{ref:c}))},at=r("yjJ8"),lt=i().createElement;const st=function(e){var t=e.isDelivery,r=e.locale,i=(0,T.yk)().getI18n;return(0,n.useMemo)((function(){return lt(d.Z,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",sx:(0,M.Z)({mb:"20px",height:"18px"},(0,m.tq)()?{mt:"15px"}:{})},lt(c.Z,{sx:{fontSize:"14px",fontWeight:"600",color:"orderForm.placeOrder"}},i("placeOrder",{defaultValue:"Place Order"})),lt(d.Z,{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},!t&&lt(at.k,{locale:r}),lt(Ye,null),lt(ot,{isDelivery:t})))}),[i,t,r])};var ut=r("kaBW"),ct=r("FXY6"),dt=r("wd/R"),pt=r.n(dt),ft=r("h/10"),mt=r("2vt+"),vt=r("Mh5j"),gt=r("qjze"),yt=r("dtaw"),xt=r("K9IN"),ht=r("XD0T"),bt=r("rXUd"),Pt=i().createElement,kt=1,Tt=[s.Jm.STOP_LIMIT,s.Jm.STOP_MARKET,s.Jm.TAKE_PROFIT_LIMIT,s.Jm.TAKE_PROFIT_MARKET],Zt=[s.Jm.MARKET,s.Jm.STOP_MARKET,s.Jm.TAKE_PROFIT_MARKET],St=function(e){var t=e.before,r=e.after,n=e.text,i=e.slot,o=void 0===i?"":i,a=(0,u.Z)(e,["before","after","text","slot"]);return Pt(d.Z,Object.assign({sx:{justifyContent:"space-between",alignItems:"center"}},a),Pt(b.Z,{display:"flex"},t),null!==n&&Pt(b.Z,{display:"flex"},n,Pt("i",{style:{width:"6px"}}),r),o)},Ct=function(e){var t=e.left,r=void 0===t?"":t,i=e.content,o=void 0===i?"":i,a=e.pureContent,l=void 0===a?"":a,s=e.right,u=void 0===s?"":s,c=e.size,d=void 0===c?18:c,p=e.places,f=e.mt,m=void 0===f?"12px":f;return(0,n.useMemo)((function(){return Pt(St,{mt:m,height:"16px",tx:"orderForm.confirmPanel",variant:"content",before:Pt(b.Z,{width:"auto",tx:"orderForm.confirmPanel",variant:"label",style:{fontSize:"".concat(d,"px")}},r),text:Pt("span",{style:{fontSize:"".concat(d,"px")}},l||(0,O.uf)(o,p)),after:Pt(b.Z,{style:{fontSize:"14px",alignSelf:"center"}},u)})}),[r,o,m,p,u,d,l])},It=function(e){var t=e.children,r=(0,u.Z)(e,["children"]);return Pt(c.Z,Object.assign({__css:{ml:0,mr:5,height:38,width:"100%",borderRadius:"4px",color:ft.BA[0],border:"1px solid",borderColor:ft.BA[600],"&:hover:not(:disabled):not(:active)":{bg:ft.er[700],borderColor:ft.er[600]},appearance:"none",userSelect:"none",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",fontSize:"inherit",fontFamily:"inherit",textAlign:"center",textDecoration:"none",outline:"none"}},r),t)};const wt=(0,n.forwardRef)((function(e,t){var r,o,a=e.symbol,l=e.quote,u=e.ticker,f=e.base,m=e.marginAsset,v=(0,n.useState)(!1),g=v[0],y=v[1],x=(0,n.useState)({}),h=x[0],P=x[1],k=(0,n.useState)(""),Z=k[0],C=k[1],L=(0,A.useSelector)(mt.makeOrderForm),F=(0,T.yk)().getI18n,V=(0,A.useDispatch)(),D=(0,T.F7)(),N=D.unit,B=void 0===N?"cont":N,_=D.orderConfirmation,z=D.positionMode,H=h.orderType,q=void 0===H?s.Jm.LIMIT:H,Y=h.placeOrder,U=h.bCost,j=void 0===U?"":U,W=h.sCost,K=void 0===W?"":W,J=h.positionDirection,G=void 0===J?s.RS.OPEN:J,Q=h.isDelivery,X=void 0!==Q&&Q,$=h.Cont,ee=h.buyOpenLost,te=void 0===ee?"":ee,re=h.sellOpenLost,ne=void 0===re?"":re,ie=h.contractVal,oe=void 0===ie?"":ie,ae=h.getAssumePrice,le=void 0===ae?function(){}:ae,se=h.orderForm,ue=void 0===se?{}:se,ce=ue||{},de=ce.triggerPrice,pe=void 0===de?"":de,fe=ce.price,me=void 0===fe?"":fe,ve=ce.buyQty,ge=void 0===ve?"":ve,ye=ce.sellQty,xe=void 0===ye?"":ye,he=ce.side,be=void 0===he?s.g.BUY:he,Pe=ce.callbackRate,Te=ce.activationPrice,Ze=void 0===Te?"":Te,Se=ce.positionSide,Ce=void 0===Se?s.PR.BOTH:Se,Ie=ce.buyCost,we=ce.sellCost,Ae=ce.availableBalance,Le=ce.tickSize,Oe=ce.limitStepSize,Ee=ce.marketStepSize,Fe=(null===L||void 0===L?void 0:L[q])||{},Re=Fe.buyTakeProfit,Ve=Fe.sellTakeProfit,De=Fe.buyStopLoss,Ne=Fe.sellStopLoss,Be=Fe.subWorkingType,_e=Fe.reduceOnly,He=void 0!==_e&&_e,qe=(0,T.x_)(G),Ye=qe.BuyText,Ue=qe.SellText,je=Number(Re)||Number(Ve)||!1,We=Number(De)||Number(Ne)||!1,Ke=!He&&(je||We||!1),Je=Number(null===(r=(0,T.CE)()[a])||void 0===r?void 0:r.markPrice),Ge=be===s.g.BUY,Qe=Ge?"buy":"sell",Xe=Ge?"button.buyHover":"button.sellHover",$e=Ge?Ye:Ue,et=(0,n.useState)(!1),tt=et[0],rt=et[1],nt=u.equalQtyPrecision,it=void 0===nt?2:nt,ot=Le,at=Ge?ge:xe,lt=Ge?Ie:we,st=Ge?j:K,dt=F(Be===s.HZ.LAST_PRICE?"lastPrice":"tradeHistory-positions-markPriceTitle",{defaultValue:"Last Price"}),ft=Ge?te:ne,St=X?vt.C:gt.C,wt=(0,bt.Z)({orderType:q,equalQtyPrecision:it,marketStepSize:Ee,limitStepSize:Oe,tickSize:Le,unit:B})(),Mt=(0,ht.Z)({orderType:q,qty:at,triggerPrice:pe,orderPrice:ue.price,contractVal:oe,activationPrice:Ze,lastPrice:ue.oLastPrice,markPrice:Je,isDelivery:X,precision:wt}),At=B===ke.SW.coin||B===ke.AO.usdt?Mt:Number(be===s.g.BUY?ge:xe||0),Lt=St({symbol:a,positionSide:Ce,orderPrice:Number(me||0),assumePrice:le(be===s.g.BUY?"bid":"ask")||0,triggerPrice:Number(pe||0),activationPrice:Number(Ze||0),orderAmount:At,formType:q,side:be===s.g.BUY?1:-1,cost:st,openLost:ft,contractVal:oe,reduceOnly:He}),Ot=Lt.currentPosition,Et=Lt.liquidationPrice,Ft=(0,yt.j)({currentPosition:Ot,liquidationPrice:Et,markPrice:Je,places:ot}),Rt=Ft.liquidationPrice,Vt=Ft.diff,Dt=(0,T.oO)().shortName;o=X?B===ke.SW.coin?f:$:B===ke.AO.coin?f:m,(0,n.useImperativeHandle)(t,(function(){return{showOrderConfirmPanel:function(e){P(e),y(!0)}}}));var Nt=(0,T.se)().marginType,Bt=z&&G===s.RS.CLOSE||Nt===ze.Yl.ISOLATED||q===ze.PH.TRAILING_STOP_MARKET||st>Ae,_t=(0,n.useCallback)((0,I.Z)(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tt&&(t=(0,M.Z)((0,M.Z)({},_),{},(0,w.Z)({},q.toUpperCase(),!1)),V.preference.changeOrderConfirmation(t)),Y(ue),y(!1);case 3:case"end":return e.stop()}}),e)}))),[tt,Y,ue,_,q,V.preference]);return(0,n.useEffect)((function(){var e=setInterval((function(){C(pt()().format("YYYY-MM-DD HH:mm:ss"))}),1e3);return function(){return clearInterval(e)}}),[]),(0,n.useEffect)((function(){return(0,Me.GY)(function(){var e=(0,I.Z)(S().mark((function e(t){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.name,t._,e.t0=r,e.next=e.t0===Me.BV?4:e.t0===Me.DX?7:10;break;case 4:return g&&y(!1),kt++,e.abrupt("break",11);case 7:return g&&_t(),kt++,e.abrupt("break",11);case 10:return e.abrupt("break",11);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[_t,kt,g]),(0,n.useMemo)((function(){return Pt(E.Z,{visible:g,tx:"orderForm.confirmPanel",variant:"container",sx:{width:["calc(100vw - 32px)","464px"],padding:"0 24px 24px 24px"},onMaskClick:function(){y(!1)}},Pt(c.Z,{sx:{textAlign:"center",position:"relative"},tx:"orderForm.confirmPanel",variant:"content"},Pt(b.Z,{mt:"24px",fontSize:22,fontWeight:500},Pt("span",{style:{color:Qe}}," ",$e," ")," ",Dt),Pt(b.Z,{mt:"6px",fontSize:14},Pt("span",{style:{marginRight:"8px"}},F(q===s.Jm.STOP_LIMIT?"stopLimit":q===s.Jm.MARKET?q.toLowerCase():q,{defaultValue:"Limit"})),Z),Pt(p.Z,{sx:{position:"absolute",top:"-4px",right:"-4px",cursor:"pointer"},onClick:function(){y(!1)}})),Pt(c.Z,{mt:"31px"},Tt.includes(q)&&Pt(Ct,{left:F("stopPriceTitle",{defaultValue:"Stop Price"}),content:pe,places:ot,right:l}),Zt.includes(q)?Pt(Ct,{left:F("priceTitle",{defaultValue:"Price"}),pureContent:F("market",{defaultValue:"Market"}),right:""}):q===s.Jm.TRAILING_STOP_MARKET?Pt(i().Fragment,null,Pt(Ct,{left:F("callbackRate",{defaultValue:"Callback Rate"}),content:Pe,places:1,right:"%"}),Number(Ze)?Pt(Ct,{left:F("activationPrice",{defaultValue:"Activation Price"}),content:Ze,places:ot,right:l}):null):Pt(Ct,{left:F("priceTitle",{defaultValue:"Price"}),content:me,places:ot,right:l}),Pt(Ct,{left:F("orderQtyTitle",{defaultValue:"Order Qty"}),content:at,places:wt,right:o})),G===s.RS.OPEN&&Pt(c.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line",__css:{borderTop:"1px solid #2B2F36",paddingTop:"16px"}},Pt(Ct,{size:"14",left:F("cost",{defaultValue:"Cost"}),pureContent:lt,right:m})),Ke&&Pt(c.Z,{mt:"8px",sx:{padding:"16px",backgroundColor:"control"}},je&&Pt(Ct,{mt:0,size:"14",left:F("takeProfit",{defaultValue:"Take Profit"}),pureContent:"".concat(dt," ").concat(Ge?">=":"<="," ").concat(je),right:l}),We&&Pt(Ct,{size:"14",left:F("stopLoss",{defaultValue:"Stop Loss"}),pureContent:"".concat(dt," ").concat(Ge?"<=":">="," ").concat(We),right:l})),!Bt&&Pt(i().Fragment,null,Pt(c.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},Pt(Ct,{size:"14",left:F("markPrice",{defaultValue:"Mark Price"}),content:Je,right:l,places:ot})),Pt(c.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},Pt(Ct,{size:"14",left:Pt(xt.m,{sx:{verticalAlign:"50%"},tip:Pt(b.Z,{as:"div",sx:{padding:"10px"}},F("estLiquidationPriceTip",{defaultValue:""})),placement:"bottom"},F("estLiquidationPrice",{defaultValue:"Est. Liquidation Price"})),pureContent:Rt,right:l})),Pt(c.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},Pt(Ct,{size:"14",left:Pt(xt.m,{sx:{verticalAlign:"50%"},tip:Pt(b.Z,{as:"div",sx:{padding:"10px"}},F("estLiqMpDifferenceTip",{defaultValue:""})),placement:"bottom"},F("estLiqMpDifference",{defaultValue:"Est. Liquidation Price/Mark Price Difference"})),pureContent:"--"===Vt?Vt:"".concat((0,O.uf)(100*(Je?Vt/Je:0),2),"%"),right:"--"===Vt?"":"(".concat((0,O.uf)(Vt,ot),")")}))),Pt(d.Z,{mt:"30px",tx:"orderForm.confirmPanel",variant:"label"},Pt(ut.Z,{style:{cursor:"pointer",fontSize:"14px"}},Pt(ct.ZP,{variant:"ds",size:14,sx:{"& svg":{borderColor:"t.grey300"}},onChange:function(){rt(!tt)}}),F("dontAskAgain",{defaultValue:"Don\u2019t ask me again"}))),Pt(d.Z,{mt:"19px",width:"100%"},Pt(It,{tx:"orderForm.confirmPanel",variant:"cancelBtn",onClick:function(){rt(!1),y(!1)}},F("cancelBtnText",{defaultValue:"Cancel"})),Pt(R.Z,{colorStyle:Qe,onClick:_t,sx:{color:"#FFFFFF",height:40,width:"100%","&:hover:not(:disabled):not(:active)":{background:Xe}}},$e)))}),[g,Qe,$e,Dt,F,q,Z,pe,ot,l,Pe,Ze,me,at,wt,o,G,lt,Ke,je,dt,Ge,We,Je,Bt,Rt,Vt,tt,_t,Xe,m])}));const Mt=function(e,t,r,i){var o=e.orderType,a=e.curOrderState;return(0,n.useCallback)((function(e,n,l){var u=(0,M.Z)((0,M.Z)({},a),{},(0,w.Z)({},n,{value:l,invalid:!1}));(~u.quantity.value.indexOf("%")||0!==Number(u.sliderQty.value))&&(u.sliderQty.value="0"),i((0,M.Z)((0,M.Z)({},r(u)),{},{orderType:o})),t({type:s.pp.FIELD_CHANGE,payload:{orderType:o,field:u}})}),[i,a,t,r,o])};const At=function(e,t,r,i){var o=e.orderType,a=e.curOrderState;return(0,n.useCallback)((function(e){var n=(0,M.Z)((0,M.Z)({},a),e);(~n.quantity.value.indexOf("%")||0!==Number(n.sliderQty.value))&&(n.sliderQty.value="0"),i((0,M.Z)((0,M.Z)({},r(n)),{},{orderType:o})),t({type:s.pp.FIELD_CHANGE,payload:{orderType:o,field:n}})}),[i,a,t,r,o])};const Lt=function(e,t){var r=e.orderType,i=e.placeOrder,o=e.isFetching,a=e.orderConfirmation,l=e.bCost,u=e.sCost,c=e.buyCost,d=e.sellCost,p=e.positionDirection,f=e.confirmTitle,v=e.isDelivery,g=e.contractType,x=e.markPrice,h=e.getAssumePrice,b=e.buyOpenLost,P=e.sellOpenLost,k=e.contractVal,T=(0,n.useContext)(y.UE),Z=T.hideMask,S=T.isLoggedIn,C=T.unit,I=void 0===C?"":C,w=T.cont;return(0,n.useCallback)((function(e,n,y){if(e&&e.preventDefault(),S&&!o){var T=y.side,C=y.price,M=y.buyQty,A=y.sellQty,L=y.triggerPrice,O=y.callbackRate,E=T===s.g.BUY,F=r===s.Jm.TRAILING_STOP_MARKET,R=r.includes(s.Jm.MARKET)&&!F,V=Number(C),D=Number(E?M:A),N=Number(L),B=ke.SI[r].enableStopPrice;D>0&&(F?O>0&&O<=5:R||V>0)&&(!B||N>0)&&(I!==ke.SW.coin||Number((E?y.buyCont:y.sellCont)||0)>=y.coinFuturesMinBuyContQty)&&(I!==ke.AO.usdt||Number((E?null===y||void 0===y?void 0:y.usdtFuturesBuyCoin:null===y||void 0===y?void 0:y.usdtFuturesSellCoin)||0)>=y.usdtFuturesMinBuyCoinQty)&&(Z(),!(0,m.tq)()&&a[r]?t.current.showOrderConfirmPanel({orderType:r,placeOrder:i,orderForm:y,bCost:l,sCost:u,buyCost:c,sellCost:d,positionDirection:p,title:f,isDelivery:v,Cont:w,contractType:g,markPrice:x,getAssumePrice:h,buyOpenLost:b,sellOpenLost:P,contractVal:k}):i(y))}}),[l,u,h,P,k,b,x,g,I,v,w,S,o,r,Z,a,t,i,c,d,p,f])};const Ot=function(e,t,r){var i=e.ticker,o=e.orderType;(0,n.useEffect)((function(){if(i.lastPrice){var e,n=(0,m.JX)(i.lastPrice,i.tickSizePrecision),a={price:n},l=(e={},(0,w.Z)(e,s.Jm.LIMIT,(0,m.XC)(s.Jm.LIMIT,a)),(0,w.Z)(e,s.Jm.MARKET,(0,m.XC)(s.Jm.MARKET)),(0,w.Z)(e,s.Jm.STOP_LIMIT,(0,m.XC)(s.Jm.STOP_LIMIT,a)),(0,w.Z)(e,s.Jm.STOP_MARKET,(0,m.XC)(s.Jm.STOP_MARKET)),e);t({type:s.pp.SHADOW_CHANGE,payload:l}),r({orderType:o,buyPrice:n,price:n,sellPrice:n})}}),[i,t,o,r])};const Et=function(e,t,r,i){var o=e.isLoggedIn,a=e.quantityPrecision,l=void 0===a?0:a,u=e.orderFormPriceQty,c=e.curQuantity,d=e.orderType,p=e.curOrderState,f=(0,n.useRef)({});(0,n.useEffect)((function(){var e,n=f.current,o=n.price,a=n.qty;if(u&&(o!==u.price||a!==u.qty)){f.current=u;var l=u.price,v=u.qty||c,g=(0,M.Z)((0,M.Z)({},i(p)),{},{price:l,buyPrice:l,sellPrice:l,quantity:v,sliderQty:0}),y=(e={},(0,w.Z)(e,s.Jm.LIMIT,(0,m.XC)(s.Jm.LIMIT,g)),(0,w.Z)(e,s.Jm.STOP_LIMIT,(0,m.XC)(s.Jm.STOP_LIMIT,g)),e);t({type:s.pp.SHADOW_CHANGE,payload:y}),r({orderType:d,price:l,buyPrice:l,sellPrice:l})}}),[o,c,u,t,l,r,d,i,p])};var Ft=r("ZIGC");function Rt(e,t){e({type:s.pp.SHADOW_CHANGE,payload:{isFetching:t}})}const Vt=function(e){var t=e.orderType,r=e.placeOrder,i=e.dispatch,a=e.getFutI18n,l=e.changeOrderFormData,u=e.getPriceQuantity,c=(0,o.YT)().setMessageInfo,d=(0,T.kP)().showKycDialog;return(0,n.useCallback)(function(){var e=(0,I.Z)(S().mark((function e(n){var o,p,f,m,v,g,y,x,h,b;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rt(i,!0),o=n.side,e.next=4,r(n);case 4:if(p=e.sent,f=p.success,m=p.data,v=p.message,g=p.code,x=t.replace(/_/g,"-"),f&&m?(y={title:a("order-submitted",{defaultValue:""}),text:a("".concat(x,"-").concat(o,"Success"),{defaultValue:""})||a("".concat(x,"Form-").concat(o,"Success"),{defaultValue:""})||a("".concat(x,"LimitForm-").concat(o,"Success"),{defaultValue:""})},h={sliderQty:{value:"",invalid:!1},quantity:{value:"",invalid:!1}},i({type:s.pp.FIELD_CHANGE,payload:{orderType:t,field:h}}),l((0,M.Z)({orderType:t},u(h)))):y={title:a("order-rejected",{defaultValue:""}),text:(null===m||void 0===m||null===(b=m.error)||void 0===b?void 0:b.message)||v||a("".concat(x,"-").concat(o,"Failure"),{defaultValue:""})||a("".concat(x,"Form-").concat(o,"Failure"),{defaultValue:""})||a("".concat(x,"LimitForm-").concat(o,"Failure"),{defaultValue:""})},!(0,Ft.tw)(g)){e.next=15;break}return d(v),Rt(i,!1),e.abrupt("return");case 15:c({header:y.title,message:y.text,variant:f?"success":"error"}),Rt(i,!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,i,c,a,u,t,r,d])};const Dt=function(e){var t=e.orderType,r=e.qty,n=void 0===r?0:r,i=e.triggerPrice,o=e.orderPrice,a=e.contractVal,l=e.activationPrice,u=e.lastPrice,c=e.unit,d=e.precision,p=c===ke.SW.coin,f=c===ke.AO.usdt;if(p||f){var m;switch(t){case s.Jm.LIMIT:case s.Jm.STOP_LIMIT:case s.Jm.TAKE_PROFIT_LIMIT:m=o||0;break;case s.Jm.MARKET:m=u||0;break;case s.Jm.STOP_MARKET:case s.Jm.TAKE_PROFIT_MARKET:m=i||0;break;case s.Jm.TRAILING_STOP_MARKET:m=l||0;break;default:m=0}if(p){var v=Number(a);return(m=Number(m))?(0,O.Jp)(v/m,n).toFixed(d,2):0}return f&&m?(0,O.Jp)(m,n).toFixed(d,2):0}return n};var Nt=r("BdPR"),Bt=r("CrFz"),_t=r("Y+p1"),zt=r.n(_t),Ht=i().createElement,qt=(0,n.memo)((function(e){var t,r=e.orderType,i=e.dispatch,o=e.selectOptions,a=void 0===o?[]:o,l=e.orderFormState,u=e.reduceOnly,p=void 0!==u&&u,f=e.futuresAdvanced,m=e.setFuturesAdvanced,v=(0,n.useContext)(y.UE),g=v.getFutI18n,x=v.changeOrderFormData,h=v.ticker,P=v.quote,k=(0,n.useState)((null===f||void 0===f?void 0:f.strategy)||!1),T=k[0],Z=k[1],S=(0,n.useState)((null===f||void 0===f?void 0:f.strategyType)||s.HZ.MARK_PRICE),C=S[0],I=S[1],w=(0,n.useState)((null===f||void 0===f?void 0:f.strategyLabel)||(null===(t=a[1])||void 0===t?void 0:t.label)),A=w[0],L=w[1];(0,n.useEffect)((function(){if([s.Jm.LIMIT,s.Jm.MARKET].includes(r)){var e={orderType:r,subWorkingType:C},t=(0,M.Z)({},e),n=(0,M.Z)({},e);T||(t=(0,M.Z)({field:{buyTakeProfit:{value:""},sellTakeProfit:{value:""},buyStopLoss:{value:""},sellStopLoss:{value:""},takeProfit:{value:""},stopLoss:{value:""}}},e),n=(0,M.Z)({buyTakeProfit:"",sellTakeProfit:"",buyStopLoss:"",sellStopLoss:"",takeProfit:"",stopLoss:""},e)),i({type:s.pp.FIELD_CHANGE,payload:(0,M.Z)({},t)}),x(n)}}),[T,C,r,i,x]);var O=(0,n.useCallback)((function(e){Z(e),m((0,M.Z)((0,M.Z)({},f),{},{strategy:e})),Ft.TB.emit("toggleStrategy",e)}),[m,f]);return(0,n.useMemo)((function(){return Ht(d.Z,{sx:{paddingBottom:"".concat(T?"16px":0),borderBottom:"".concat(T?"1px solid":0),borderColor:"orderForm.strategyBorderBottom"},width:"100%",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},Ht(c.Z,{sx:{minWidth:"45%",py:"2px",fontSize:[1,0]}},Ht(ut.Z,{variant:"checkbox"},Ht(ct.ZP,{variant:"ds",size:14,disabled:p,sx:{color:"radio.gray","& svg":{borderColor:"t.grey300"}},color:"orderForm.advancedIconColor",checked:T,onChange:function(){O(!T),m((0,M.Z)((0,M.Z)({},f),{},{strategy:!T}))}}),Ht(xt.m,{sx:{boxSizing:"border-box",verticalAlign:"50%"},placeholdSx:{color:p?"orderForm.strategyTextDisable":""},tip:Ht(b.Z,{sx:{padding:"10px"}},g("limitType-strategyOrder-tip",{defaultValue:"strategyOrderTip"})),placement:"bottom"},g("limitType-strategyOrder",{defaultValue:"Strategy Order"})))),T&&Ht(c.Z,{sx:{minWidth:"45%",py:"2px",fontSize:[1,0],textAlign:"right"}},Ht(Ae.ZP,{sx:{ml:"5px",verticalAlign:"50%"},enablePortal:!0,trigger:"click",overlay:Ht(c.Z,{__css:{bg:"advanced.downDropBg"},sx:{boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",bg:"orderForm.advancedDropdownBg"},width:"fit-content"},a.map((function(e){var t=e.label,r=e.type;return Ht(c.Z,{key:t,sx:{padding:"3px",color:A===t?"primary":"t.primary","&:hover":{bg:"orderForm.advancedDropdownHBg",cursor:"pointer"}},onClick:function(){I(r),L(t),m((0,M.Z)((0,M.Z)({},f),{},{strategyType:r,strategyLabel:t}))}},Ht(b.Z,{pt:"4px",pb:"4px",px:"12px",fontSize:"12px"},t))})))},Ht(ut.Z,{sx:{background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.35) 100)",display:"flex",alignItems:"center",cursor:"pointer",height:"24px",px:"5px",color:"t.grey300"},variant:"small","data-testid":"TriggerSelect"},A,Ht(Oe.Z,{color:"#76808F",size:16,ml:"4px"})))),T&&Object.values(ke.Pt).map((function(e){var t,r,n=e.name,i=e.inputBefore,o=e.placeholder,a=void 0===o?"":o,u=e.helperText,c=void 0===u?"":u,d=h.tickSizePrecision,f=h.tickSize;return Ht(Ie.Z,{type:"number",disabled:p,key:n,name:n,min:f,step:f,precision:d,before:g(i,{defaultValue:""}),tradeType:s.xy.FUTURES,after:P,value:null===(t=l[n])||void 0===t?void 0:t.value,errorText:null===(r=l[n])||void 0===r?void 0:r.errorMsg,placeholder:a&&g(a),maxLength:ke.ze,helperText:c,boxSx:{mt:"4px",mb:"4px"}})})))}),[f,m,O,p,l,h.tickSizePrecision,P,h.tickSize,g,a,T,A])})),Yt=i().createElement,Ut=function(e){var t=e.text,r=e.key;return(0,n.useMemo)((function(){return Yt("div",null,Yt(b.Z,{as:"span",p:0,mb:2,key:r},t))}),[r,t])},jt=(0,n.memo)((function(e){var t=e.orderType,r=e.dispatch,i=e.positionMode,o=e.positionDirection,a=e.orderFormState,l=e.title,u=e.isDelivery,p=(0,n.useContext)(y.UE),f=p.getFutI18n,m=p.changeOrderFormData,v=ke.SI[t],g=v.enablePostOnly,x=v.enableTIF,h=v.enableTrigger,P=v.enableStrategy,k=v.enableAdvanced,T=ke.SI[t].enableReduceOnly;T=T&&!i;var Z=(0,Nt.Z)(Re.Qd)||{},S=(0,C.Z)(Z,2),I=S[0],w=S[1],A=(0,n.useRef)(I||{}),L=o!==s.RS.CLOSE&&P,O=g||x||T||h||L,E=(0,n.useState)((null===I||void 0===I?void 0:I.triggerType)||ze.gu.MARK_PRICE),F=E[0],R=E[1],D=(0,n.useState)((null===I||void 0===I?void 0:I.advancedType)||ke.jn.POST_ONLY),N=D[0],B=D[1],_=(0,n.useState)(T&&(null===I||void 0===I?void 0:I.reduceOnly)||!1),z=_[0],H=_[1],q=(0,n.useState)((null===I||void 0===I?void 0:I.timeInForce)||ke.rb.POST_ONLY),Y=q[0],U=q[1],j=(0,n.useState)(!1),W=j[0],K=j[1],J=(0,n.useState)((null===I||void 0===I?void 0:I.strategy)||!1),G=J[0],Q=J[1],X=(0,n.useCallback)((function(e){w(e),A.current=e}),[w]),$=(0,n.useCallback)((function(e){U(e),X((0,M.Z)((0,M.Z)({},A.current),{},{timeInForce:e})),r({type:s.pp.FIELD_CHANGE,payload:{orderType:t,field:{timeInForce:e}}}),m({orderType:t,timeInForce:e})}),[X,m,r,t]),ee=(0,n.useCallback)((function(e){H(e),X((0,M.Z)((0,M.Z)({},A.current),{},{reduceOnly:e})),r({type:s.pp.FIELD_CHANGE,payload:{orderType:t,field:{reduceOnly:e}}}),m({orderType:t,reduceOnly:e})}),[X,m,r,t]);(0,n.useEffect)((function(){var e=A.current,r=e.reduceOnly,n=void 0!==r&&r,i=e.timeInForce;T&&void 0!==n&&m({orderType:t,reduceOnly:n}),x&&void 0!==i&&(t===s.Jm.STOP_LIMIT&&i===ke.rb.POST_ONLY?($(ke.rb.TIF.GTC),B(ke.jn.TIF),X((0,M.Z)((0,M.Z)({},A.current),{},{advancedType:ke.jn.TIF,timeInForce:ke.rb.TIF.GTC}))):m({orderType:t,timeInForce:i})),T||H(!1)}),[X,$,x,m,t,T]),(0,n.useEffect)((function(){[s.Jm.STOP_LIMIT,s.Jm.STOP_MARKET,s.Jm.TAKE_PROFIT_LIMIT,s.Jm.TAKE_PROFIT_MARKET,s.Jm.TRAILING_STOP_MARKET].includes(t)&&(r({type:s.pp.FIELD_CHANGE,payload:{workingType:F}}),m({orderType:t,workingType:F}))}),[F,t,r,m,Y]);var te=(0,n.useMemo)((function(){return[{label:f("lastPrice",{defaultValue:"Last Price"}),type:ze.gu.LAST_PRICE},{label:f("tradeHistory-positions-markPriceTitle",{defaultValue:"Mark Price"}),type:ze.gu.MARK_PRICE}]}),[f]),re=(0,n.useState)((null===I||void 0===I?void 0:I.triggerLabel)||te[1].label),ne=re[0],ie=re[1];(0,n.useEffect)((function(){return Ft.TB.on("toggleStrategy",(function(e){Q(e),X((0,M.Z)((0,M.Z)({},A.current),{},{strategy:e}))}))}),[X]);var oe=(0,n.useMemo)((function(){return Yt(d.Z,{alignItems:"center",flexWrap:"wrap"},Yt(d.Z,{sx:{minWidth:"100%",paddingTop:"".concat(L&&i&&(k||T)?"10px":0)},justifyContent:"space-between",alignItems:"center"},!u&&i?k&&Yt(c.Z,{sx:{pl:"2px",color:"#848E9C",fontWeight:"medium"}},l):T&&Yt(c.Z,{sx:{paddingTop:G?"16px":"10px",fontSize:[1,0]},"data-testid":"ReduceOnly"},Yt(ut.Z,{variant:"checkbox"},Yt(ct.ZP,{variant:"ds",size:14,sx:{color:"radio.gray","& svg":{borderColor:"t.grey300"}},color:"orderForm.advancedIconColor",checked:z,onChange:function(){ee(!z)}}),Yt(xt.m,{sx:{boxSizing:"border-box",verticalAlign:"50%"},tip:Yt(b.Z,null,f("limitType-reduceOnly-tip",{defaultValue:""})),placement:"bottom"},f("limitType-reduceOnly",{defaultValue:"Reduce Only"})))),!u&&t!==s.Jm.MARKET&&Yt(d.Z,{sx:{cursor:"pointer"},onClick:function(){K(!W)}},Yt(Bt.Z,W?{color:"#929AA5"}:{color:"#929AA5",sx:{transform:"rotate(180deg)"}}))),(!!u||W)&&g&&Yt(c.Z,{sx:t===s.Jm.LIMIT?{py:"8px",display:"flex",alignItems:"center",mr:"16px"}:{minWidth:"50%",py:"8px"}},Yt(V.ZP,{sx:{width:"20px",marginLeft:"3px",svg:{color:N===ke.jn.POST_ONLY?"primary":"orderForm.advancedIconColor"}},name:"Tif",value:ke.jn.POST_ONLY,checked:N===ke.jn.POST_ONLY,onChange:function(){B(ke.jn.POST_ONLY),$(ke.rb.POST_ONLY),X((0,M.Z)((0,M.Z)({},A.current),{},{advancedType:ke.jn.POST_ONLY,timeInForce:ke.rb.POST_ONLY}))},"data-testid":"postOnly"}),Yt(xt.m,{sx:{ml:"8px",verticalAlign:"50%"},tip:Yt(b.Z,{as:"div",sx:{padding:"10px"}},f("limitType-postOnly-tip",{defaultValue:"limitType-postOnly-tip"})),placement:"bottom"},f("limitType-postOnly",{defaultValue:"Post Only"}))),(!!u||W)&&x&&Yt(c.Z,{sx:t===s.Jm.LIMIT?{py:"2px",display:"flex",alignItems:"center"}:{minWidth:"50%",py:"2px"},"data-testid":"TIF"},Yt(V.ZP,{sx:{width:"20px",svg:{color:N===ke.jn.TIF?"primary":"orderForm.advancedIconColor"}},name:"Tif",value:ke.jn.TIF,checked:N===ke.jn.TIF,onChange:function(){B(ke.jn.TIF),$(ke.rb.TIF.GTC),X((0,M.Z)((0,M.Z)({},A.current),{},{advancedType:ke.jn.TIF,timeInForce:ke.rb.TIF.GTC}))}}),Yt(xt.m,{sx:{ml:"8px",verticalAlign:"50%"},tip:Yt(c.Z,{sx:{padding:"10px"}},Yt(Ut,{text:f("timeInForce-title",{defaultValue:"Time in Force"}),key:0}),Yt(Ut,{text:f("timeInForce-GTC",{defaultValue:"GTC: Good Till Cancel"}),key:1}),Yt(Ut,{text:f("timeInForce-IOC",{defaultValue:"IOC: Immediate Or Cancel"}),key:2}),Yt(Ut,{text:f("timeInForce-FOK",{defaultValue:"FOK: Fill Or Kill"}),key:3})),placement:"bottom"},f("limitType-TIF",{defaultValue:"TIF"})),Yt(Ae.ZP,{sx:{ml:"5px",verticalAlign:"50%"},enablePortal:!0,trigger:"click","data-testid":"TIFSelect",overlay:Yt(c.Z,{__css:{bg:"advanced.downDropBg"},sx:{boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",bg:"orderForm.advancedDropdownBg"},width:"56px"},Object.keys(ke.rb.TIF).map((function(e){return Yt(c.Z,{key:e,sx:{color:Y===e?"primary":"orderForm.advancedDropdownColor","&:hover":{bg:"orderForm.advancedDropdownHBg",cursor:"pointer"}},"data-testid":e,onClick:function(){$(e)}},Yt(b.Z,{pb:"4px",pt:"4px",pl:"10px",fontSize:"12px",textAlign:"left"},e))})))},Yt(ut.Z,{sx:{height:"24px",border:"1px solid #ccc",borderColor:"orderForm.advancedDropPlaceBorder",px:"5px",cursor:"pointer",backgroundImage:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.35) 100)",color:N===ke.jn.TIF?"orderForm.advancedDropdownColor":"","& path":{fill:N===ke.jn.TIF?"orderForm.advancedDropdownFill":"#848E9C"}},variant:"small",onClick:function(e){N!==ke.jn.TIF&&e.stopPropagation()}},Y,Yt("svg",{style:{marginRight:"15px"},width:"6",height:"4",viewBox:"0 0 6 4",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Yt("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.87006 0.855655L3.30346 3.85338C3.22681 3.9466 3.1163 4 3.00008 4C2.88394 4 2.77343 3.9466 2.69668 3.85338L0.130181 0.855655C0.00489473 0.714313 -0.0338278 0.508304 0.0309405 0.326341C0.0957088 0.144457 0.252008 0.0173411 0.433562 0L5.56455 0C5.7468 0.016602 5.90384 0.1429 5.96853 0.325602C6.03407 0.508304 5.99534 0.713574 5.87006 0.855655Z"}))))),(!!u||W)&&h&&Yt(c.Z,{sx:{minWidth:"55%",py:"2px"}},Yt(xt.m,{sx:{ml:"10px",verticalAlign:"50%"},tip:f("triggerType",{defaultValue:"Please choose which price will trigger this order"}),placement:"bottom","data-testid":"Trigger"},f("trigger",{defaultValue:"Trigger"})),Yt(Ae.ZP,{sx:{ml:"5px",verticalAlign:"50%"},enablePortal:!0,trigger:"click",overlay:Yt(c.Z,{__css:{bg:"advanced.downDropBg"},sx:{boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",bg:"orderForm.advancedDropdownBg"},width:"fit-content"},te.map((function(e){var t=e.label,r=e.type;return Yt(c.Z,{key:t,sx:{padding:"3px",color:ne===t?"primary":"t.primary","&:hover":{bg:"orderForm.advancedDropdownHBg",cursor:"pointer"}},onClick:function(){R(r),ie(t),X((0,M.Z)((0,M.Z)({},A.current),{},{triggerType:r,triggerLabel:t}))},"data-testid":null===r||void 0===r?void 0:r.toLowerCase()},Yt(b.Z,{pt:"4px",pb:"4px",px:"12px",fontSize:"12px"},t))})))},Yt(ut.Z,{sx:{border:"1px solid #ccc",borderColor:"orderForm.advancedDropPlaceBorder",backgroundImage:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.35) 100)",color:"primary",display:"flex",alignItems:"center",cursor:"pointer",height:"24px",px:"5px"},variant:"small","data-testid":"TriggerSelect"},ne,Yt(Oe.Z,{color:"#F0B90B",size:16,ml:"4px"})))))}),[X,N,ee,$,k,g,T,x,h,f,u,W,t,i,z,te,G,L,Y,l,ne]);return O?Yt(c.Z,{sx:{padding:"8px",fontSize:[1,0],borderRadius:"2px",margin:"16px 0"},bg:"orderForm.advancedBg"},L&&Yt(qt,{selectOptions:te,orderType:t,dispatch:r,orderFormState:a,reduceOnly:z,futuresAdvanced:I,setFuturesAdvanced:X}),oe):null}),(function(e,t){return zt()(e,t)})),Wt=r("sYYw"),Kt=i().createElement,Jt=1,Gt=.1,Qt=.1,Xt=function(e){var t=e.leftLabel,r=e.rightLabel,i=e.leftContent,o=e.rightContent,a=(0,n.useMemo)((function(){return Kt(d.Z,{justifyContent:"flex-start",width:"48.47%",sx:{color:"t.third"}},"string"===typeof t?Kt(b.Z,{sx:{maxWidth:"48px",overflow:"hidden",textOverflow:"ellipsis"},title:t},t,":"," "):t,Kt(b.Z,{sx:{ml:"2px",color:"themeConfig.primary",width:"fit-content",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},title:i},i))}),[i,t]),l=(0,n.useMemo)((function(){return Kt(d.Z,{justifyContent:"flex-end",width:"48.47%",sx:{color:"t.third"}},"string"===typeof r?Kt(b.Z,{sx:{maxWidth:"48px",overflow:"hidden",textOverflow:"ellipsis"},title:r},r,":"," "):r,Kt(b.Z,{sx:{ml:"2px",color:"themeConfig.primary",width:"fit-content",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},title:o},o))}),[o,r]);return(0,n.useMemo)((function(){return Kt(d.Z,{justifyContent:"space-between",fontSize:12,mt:"8px"},a,l)}),[a,l])},$t=function(e){var t=e.BuyText,r=e.SellText,i=e.buyClick,o=e.sellClick,a=e.buyDisabled,l=e.sellDisabled;return(0,n.useMemo)((function(){return Kt(d.Z,{justifyContent:"space-between",mt:"8px"},Kt(R.Z,{colorStyle:"buy",sx:{borderRadius:"4px",width:"48.47%",height:"40px",color:"#fff","&:hover:not(:disabled):not(:active)":{background:"button.buyHover"}},onClick:i,disabled:a,"data-testid":null===t||void 0===t?void 0:t.replace("/","")},t),Kt(R.Z,{colorStyle:"sell",sx:{borderRadius:"4px",width:"48.47%",height:"40px",color:"#fff","&:hover:not(:disabled):not(:active)":{background:"button.sellHover"}},onClick:o,disabled:l,"data-testid":null===r||void 0===r?void 0:r.replace("/","")},r))}),[t,r,i,a,o,l])},er=function(e){var t=e.selectCallbackRate,r=e.rate;return Kt(d.Z,{width:"14%"},Kt(Wt.Z,{mb:"8px",mt:"8px",as:"a",height:"32px",bg:"formInputBg.bg",py:"0",lineHeight:"32px",onClick:function(){t(Number(r))}},r,"%"))},tr=function(e){var t=e.openText,r=e.closeText,n=e.positionDirection,i=e.setPositionDirection,o={width:"50%",bg:"t.grey700",height:"32px",pt:0,pb:0,lineHeight:"32px"},a={background:"linear-gradient(180deg, #F8D12F 0%, #F0B90B 100%)",color:"t.grey800","&:hover":{color:"t.grey800"}};return Kt(c.Z,{sx:{position:"relative",borderRadius:"4px",textAlign:"center",mb:"10px"}},Kt(g.Gj,{sx:(0,M.Z)((0,M.Z)({},o),{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}),actived:n===s.RS.OPEN,activedStyle:a,handleClick:function(){i(s.RS.OPEN)},"data-testid":"open"},t),Kt(g.Gj,{sx:(0,M.Z)((0,M.Z)({},o),{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}),actived:n===s.RS.CLOSE,activedStyle:a,handleClick:function(){i(s.RS.CLOSE)},"data-testid":"close"},r))},rr=function(e){var t=e.before,r=e.name,i=e.tradeType,o=void 0===i?s.xy.FUTURES:i,a=e.callbackRate,l=e.selectCallbackRate,u=void 0===l?function(){}:l,p=Qt,f=Gt,m=Jt,v=(0,n.useCallback)((function(e){var t=Number(e);return t>=0&&t<=5?e:5}),[]);return(0,n.useMemo)((function(){return Kt(d.Z,{flexDirection:"row",justifyContent:"space-between"},Kt(c.Z,{width:"69.5%",mt:"8px"},Kt(Ie.Z,{key:r,type:"number",name:r,min:p,step:f,precision:m,before:t,tradeType:o,after:"%",value:a,futuresHandleChange:v})),Kt(er,{rate:"1",selectCallbackRate:u}),Kt(er,{rate:"2",selectCallbackRate:u}))}),[r,p,f,m,t,o,a,v,u])},nr=r("cZZN"),ir=r("rVVi"),or=r("9PIT"),ar=r("5+SQ"),lr=r("iOSY"),sr=r("iX0o"),ur=r("flUW"),cr=i().createElement,dr="PNL",pr="TARGET_PRICE",fr="LIQ",mr="MAX_OPEN",vr="OPEN_PRICE";function gr(e){var t=e.title,r=e.testId,n=e.active;return cr(c.Z,{tx:"tabs",variant:"trade-next.tab",sx:{padding:"18px 1px 12px 1px",fontSize:"18px",mr:"24px"},className:n?"active":"","data-testid":r},t)}const yr=function(e){var t=e.sx,r=void 0===t?{}:t,i=(0,n.useState)(!1),o=i[0],a=i[1],l=(0,n.useState)(dr),s=l[0],u=l[1],c=(0,ur.Z)().getI18n;return(0,n.useEffect)((function(){o||u(dr)}),[o]),(0,n.useMemo)((function(){return cr("div",{"data-testid":"Caculator",style:(0,M.Z)({marginBottom:"4px"},r)},cr(E.Z,{tx:"calculator.dialog",variant:"container",visible:o,onMaskClick:function(){return a(!1)},contentSx:{p:0}},cr(p.Z,{tx:"calculator.dialog",variant:"close",onClick:function(){return a(!1)}}),cr(P.Z,{defaultActiveKey:dr,variant:"trade-next",tabsSx:{pl:5,borderBottom:"1px solid",borderColor:"calculator.tabBtColor"},onChange:function(e){return u(e)}},cr(k.Z,{tab:function(e){return cr(gr,{title:c("PNL",{defaultValue:"PNL"}),testId:"PNL",active:e})},tabKey:dr},s===dr&&o&&cr(ir.Z,null)),cr(k.Z,{tab:function(e){return cr(gr,{title:c("targetPrice",{defaultValue:"Target Price"}),testId:"TargetPrice",active:e})},tabKey:pr},s===pr&&cr(or.Z,null)),cr(k.Z,{tab:function(e){return cr(gr,{title:c("liqPrice",{defaultValue:"Liquidation Price"}),testId:"LiquidationPrice",active:e})},tabKey:fr},s===fr&&o&&cr(ar.Z,null)),cr(k.Z,{tab:function(e){return cr(gr,{title:c("maxOpen",{defaultValue:"Max Open"}),active:e})},tabKey:mr},s===mr&&o&&cr(lr.Z,null)),cr(k.Z,{tab:function(e){return cr(gr,{title:c("openPrice",{defaultValue:"Open Price"}),active:e})},tabKey:vr},s===vr&&o&&cr(sr.Z,null)))),cr(nr.Z,{color:"#76808F",sx:{"&:hover":{color:"t.yellow",cursor:"pointer"}},onClick:function(){return a(!0)}}))}),[r,s,c,o])};var xr=r("QEdm"),hr=i().createElement,br=1;const Pr=function(e){var t=e.positionDirection,r=e.activePrice,i=e.orderForm,o=e.orderType,a=e.lastPrice,l=e.markPrice,u=e.setConfirmTitle,c=e.isFetching,d=e.tradeType,p=e.renderRegisterLogin,f=(0,n.useContext)(y.UE),m=f.base,v=f.locale,g=f.getI18n,x=f.urlConfig,h=f.changeOrderFormData,b=f.isLoggedIn,P=f.usePreference,k=(void 0===P?function(){return{}}:P)().positionMode,Z=void 0!==k&&k,S=(0,T.x_)(t),C=S.BuyText,I=S.SellText,w=i.workingType===s.HZ.LAST_PRICE?Number(a):Number(l),M=(0,T.nL)({orderType:o,activePrice:r,price:w}),A=M.buyDisabled,L=M.sellDisabled,O=(0,n.useCallback)((function(){var e=s.PR.BOTH;Z&&(t===s.RS.OPEN?e=s.PR.LONG:t===s.RS.CLOSE&&(e=s.PR.SHORT)),u(C),h({side:s.g.BUY,positionSide:e,orderType:o})}),[C,h,o,t,Z,u]),E=(0,n.useCallback)((function(){var e=s.PR.BOTH;Z&&(t===s.RS.OPEN?e=s.PR.SHORT:t===s.RS.CLOSE&&(e=s.PR.LONG)),u(I),h({side:s.g.SELL,positionSide:e,orderType:o})}),[I,h,o,t,Z,u]);return(0,n.useEffect)((function(){return(0,Me.GY)((function(e){switch(e.name){case Me.HE:A||(O(),u("")),br++;break;case Me.Lz:L||(E(),u(""),br++)}}))}),[br,O,E]),(0,n.useMemo)((function(){return b?hr($t,{BuyText:C,SellText:I,buyClick:function(){return O()},sellClick:function(){return E()},buyDisabled:A,sellDisabled:L}):hr(xr.Z,{base:m,locale:v,getI18n:g,urlConfig:x,isFetching:c,isLoggedIn:b,tradeType:d,renderRegisterLogin:p})}),[C,I,m,A,g,O,E,c,b,v,p,L,d,x])};var kr=r("J14u"),Tr=r("V4sd"),Zr=r("W0IN"),Sr=r("wiC8"),Cr=i().createElement,Ir=we.Z.constants,wr=1,Mr=function(e){var t=e.tradeType,r=(0,be.u)().showDialog,i=(0,Pe.P)().showBattleDialog,a=(0,n.useState)(s.Jm.LIMIT),l=a[0],u=a[1],p=(0,n.useState)(s.RS.OPEN),f=p[0],m=p[1],v=(0,n.useRef)({}),g=(0,n.useRef)({}),x=(0,n.useContext)(y.UE),h=x.unit,P=void 0===h?"cont":h,k=x.base,Z=x.quote,C=x.ticker,w=x.locale,A=x.symbol,L=x.getI18n,E=x.userAssets,F=x.getFutI18n,R=x.isLoggedIn,V=x.cont,D=x.orderFormPriceQty,N=x.isDelivery,B=void 0!==N&&N,_=x.usePreference,z=void 0===_?function(){return{}}:_,H=x.changeOrderFormData,q=void 0===H?function(){return{}}:H,Y=x.useOrderForm,U=void 0===Y?function(){return{}}:Y,j=x.updatePositionDirection,W=void 0===j?function(){return{}}:j,K=x.renderRegisterLogin,J=x.marginAsset,G=(0,n.useReducer)(y.ih,y.I$),Q=G[0],X=G[1],$=C.quantityPrecision,ee=C.equalQtyPrecision,te=void 0===ee?2:ee,re=C.minQty,ne=C.tickSizePrecision,ie=(0,Zr.c)(),oe=(0,Tr.E)(A),ae=Q[l],le=Q.isFetching,se=z(),ue=se.orderConfirmation,ce=se.positionMode,de=void 0!==ce&&ce,pe=(0,n.useState)(!1),fe=pe[0],me=pe[1],ve=(0,n.useState)(),xe=ve[0],we=ve[1],Ae=F("Open",{defaultValue:"Open"}),Le=F("Close",{defaultValue:"Close"}),Oe=F("Buy",{defaultValue:"Buy"}),Ee=F("Sell",{defaultValue:"Sell"}),Fe=F("cost",{defaultValue:"Cost"}),Re=F("costTip",{}),Ve=F("Max",{defaultValue:"Max"}),De=F("Avbl",{defaultValue:"Avbl"}),Ne=F("Advanced",{defaultValue:"Advanced"}),_e=(0,T.yk)().getI18n,ze=(0,n.useMemo)((function(){return Cr(c.Z,{sx:{color:"orderForm.placeOrder"}},_e("placeOrder",{defaultValue:"Place Order"}))}),[_e]),He=(0,kr.M)().inBattle,qe=U(A,Z,l),Ye=qe.availableBalance,Ue=qe.buyQty,je=qe.sellQty,We=qe.bCost,Ke=qe.sCost,Je=qe.buyCost,Ge=qe.sellCost,Qe=qe.maxBuyAmount,Xe=qe.maxSellAmount,$e=qe.placeOrder,et=qe.orderForm,tt=qe.lastPrice,rt=qe.markPrice,nt=qe.activePrice,it=qe.contractVal,ot=qe.contractType,at=qe.buyOpenLost,lt=qe.sellOpenLost,ut=qe.getAssumePrice,ct=void 0===ut?function(){}:ut,dt=(0,o.Fs)().isMobile,pt=et.tickSize,ft=et.limitStepSize,mt=et.marketStepSize,vt=(0,bt.Z)({orderType:l,equalQtyPrecision:te,marketStepSize:mt,limitStepSize:ft,tickSize:pt,unit:P}),gt=et.workingType===s.HZ.LAST_PRICE?Number(tt):Number(rt),yt=(0,T.nL)({orderType:l,activePrice:nt,price:gt}),Pt=yt.buyDisabled,kt=yt.sellDisabled,Tt=Dt((0,M.Z)({qty:Qe,orderType:l,lastPrice:tt,activationPrice:nt,unit:P,contractVal:it,orderPrice:et.price,precision:vt(!1)},et)),Zt=Dt((0,M.Z)({qty:Xe,orderType:l,lastPrice:tt,activationPrice:nt,unit:P,contractVal:it,precision:vt(!1),orderPrice:et.price},et));(0,n.useEffect)((function(){!de&&W(s.RS.BOTH)}),[de,W]),(0,n.useEffect)((function(){+ae.sliderQty.value||me(!1)}),[ae.sliderQty.value]);var St=(0,n.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{price:{value:"0"},quantity:{value:"0"}},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0,i=0,o=0,a=0,u=r||l,c=t.quantity||{},d=c.value,p=void 0===d?"":d,f=vt(!1);~p.indexOf("%")?(n=(0,O.Jp)(parseFloat(p)/100,Tt).toFixed(f,1),i=(0,O.Jp)(parseFloat(p)/100,Zt).toFixed(f,1)):n=i=p;var m,v,g,y,x={quantity:null===t||void 0===t||null===(e=t.quantity)||void 0===e?void 0:e.value,buyQty:n,sellQty:i,buyCont:0,sellCont:0,buyTakeProfit:0,sellTakeProfit:0,buyStopLoss:0,sellStopLoss:0},h=0;u!==s.Jm.STOP_LIMIT&&u!==s.Jm.LIMIT||void 0!==(o=null===t||void 0===t||null===(m=t.price)||void 0===m?void 0:m.value)&&(x.price=o);u!==s.Jm.LIMIT&&u!==s.Jm.MARKET||(x.buyTakeProfit=x.sellTakeProfit=Number((null===t||void 0===t||null===(v=t.takeProfit)||void 0===v?void 0:v.value)||0),x.buyStopLoss=x.sellStopLoss=Number((null===t||void 0===t||null===(g=t.stopLoss)||void 0===g?void 0:g.value)||0));if(u===s.Jm.STOP_LIMIT||u===s.Jm.STOP_MARKET)void 0!==(h=null===t||void 0===t||null===(y=t.triggerPrice)||void 0===y?void 0:y.value)&&(x.triggerPrice=h);else if(u===s.Jm.TRAILING_STOP_MARKET){var b,k;a=null===t||void 0===t||null===(b=t.activationPrice)||void 0===b?void 0:b.value;var T=null===t||void 0===t||null===(k=t.callbackRate)||void 0===k?void 0:k.value;void 0!==a&&(x.activationPrice=a),void 0!==T&&(x.callbackRate=T)}return P===ke.SW.coin&&(x.buyCont=(0,ht.Z)({orderType:u,contractVal:it,orderPrice:o||(null===et||void 0===et?void 0:et.price)||0,triggerPrice:h||(null===et||void 0===et?void 0:et.triggerPrice)||0,activationPrice:a||(null===et||void 0===et?void 0:et.activationPrice)||0,qty:n,lastPrice:tt,markPrice:rt,isDelivery:B}),x.sellCont=(0,ht.Z)({orderType:u,contractVal:it,orderPrice:o||(null===et||void 0===et?void 0:et.price)||0,triggerPrice:h||(null===et||void 0===et?void 0:et.triggerPrice)||0,activationPrice:a||(null===et||void 0===et?void 0:et.activationPrice)||0,qty:i,lastPrice:tt,markPrice:rt,isDelivery:B}),x.coinFuturesMinBuyContQty=1),P===ke.AO.usdt&&(x.usdtFuturesBuyCoin=(0,ht.Z)({orderType:u,contractVal:it,orderPrice:o||(null===et||void 0===et?void 0:et.buyPrice)||0,triggerPrice:h||(null===et||void 0===et?void 0:et.buyTriggerPrice)||0,activationPrice:a||(null===et||void 0===et?void 0:et.buyActivationPrice)||0,qty:n,lastPrice:tt,markPrice:rt,isDelivery:B,precision:f}),x.usdtFuturesSellCoin=(0,ht.Z)({orderType:u,contractVal:it,orderPrice:o||(null===et||void 0===et?void 0:et.sellPrice)||0,triggerPrice:h||(null===et||void 0===et?void 0:et.sellTriggerPrice)||0,activationPrice:a||(null===et||void 0===et?void 0:et.sellActivationPrice)||0,qty:i,lastPrice:tt,markPrice:rt,isDelivery:B,precision:f}),x.usdtFuturesMinBuyCoinQty=re),x}),[vt,it,tt,rt,B,P,et,Tt,Zt,l,re]),Ct=(0,n.useCallback)((function(){var e={quantity:{value:"0"},sliderQty:{value:"0"},buyTakeProfit:{value:0},sellTakeProfit:{value:0},buyStopLoss:{value:0},sellStopLoss:{value:0},takeProfit:{value:0},stopLoss:{value:0}};X({type:s.pp.FIELD_CHANGE,payload:{orderType:l,field:e}}),q((0,M.Z)({orderType:l},St((0,M.Z)({},e))))}),[q,St,l]),It=(0,n.useCallback)((function(e){m(e),W(e),Ct()}),[Ct,W]),Ft=(0,ge.D)((function(e){if(R&&(0!==+Tt||0!==+Zt)){var t={quantity:{value:"".concat(e,"%"),invalid:!1},sliderQty:{value:e,invalid:!1}};X({type:s.pp.FIELD_CHANGE,payload:{orderType:l,field:t}}),q((0,M.Z)({orderType:l},St((0,M.Z)((0,M.Z)({},ae),t)))),me(!!e)}})),Rt=Vt({orderType:l,placeOrder:$e,dispatch:X,getFutI18n:F,getPriceQuantity:St,changeOrderFormData:q}),Nt=Mt({orderType:l,curOrderState:ae},X,St,q),Bt=At({orderType:l,curOrderState:ae},X,St,q),_t=Lt({orderType:l,isFetching:le,orderConfirmation:ue,placeOrder:Rt,bCost:We,sCost:Ke,buyCost:Je,sellCost:Ge,positionDirection:de?f:s.RS.BOTH,confirmTitle:xe,isDelivery:B,contractType:ot,markPrice:rt,getAssumePrice:ct,buyOpenLost:at,sellOpenLost:lt,contractVal:it},g),zt=(0,n.useCallback)((function(e){X({type:s.pp.FIELD_CHANGE,payload:{orderType:l,field:{callbackRate:{value:e}}}}),q({orderType:l,callbackRate:e})}),[q,l]);Ot({ticker:C,orderType:l},X,q),Et({isLoggedIn:R,quantityPrecision:$,orderFormPriceQty:D,curQuantity:ae.quantity.value,orderType:l,curOrderState:ae},X,q,St);var Ht=(0,n.useMemo)((function(){return{mt:"6px"}}),[]),qt=(0,ge.D)((function(e){u(e),q((0,M.Z)((0,M.Z)({},St(Q[e],e)),{},{orderType:e}))})),Yt=(0,n.useCallback)((function(e){13===e.nativeEvent.keyCode&&(e.preventDefault(),e.stopPropagation())}),[]),Ut=(0,n.useCallback)((function(e,t){e.preventDefault(),r()&&(He?i():_t(e,t,et))}),[_t,et,r,He,i]),Wt=(0,n.useCallback)((function(){var e=0;switch(l){case s.Jm.LIMIT:case s.Jm.STOP_LIMIT:case s.Jm.TAKE_PROFIT_LIMIT:e=null===et||void 0===et?void 0:et.price;break;case s.Jm.MARKET:e=tt;break;case s.Jm.STOP_MARKET:case s.Jm.TAKE_PROFIT_MARKET:e=null===et||void 0===et?void 0:et.triggerPrice;break;case s.Jm.TRAILING_STOP_MARKET:e=nt;break;default:e=null===et||void 0===et?void 0:et.price}return e}),[nt,tt,et.price,et.triggerPrice,l]),Kt=(0,o.pb)();(0,n.useEffect)((function(){return(0,Me.GY)(function(){var e=(0,I.Z)(S().mark((function e(t){var n,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name,o=t.payload,e.t0=n,e.next=e.t0===Ir.ACTION_TRADE_ONECLIKE_BUY?4:e.t0===Ir.ACTION_TRADE_ONECLIKE_SELL?6:e.t0===Me.aV?8:e.t0===Me.hr?10:e.t0===Me.HE?12:e.t0===Me.Lz?14:16;break;case 4:return setTimeout((function(){var e,t,r=o.priceLevel,n=o.valueInput,i=n.type,a=void 0===i?"percentage":i,u=n.value,c=Number(r),d=c>0?null===(e=Kt.bid[Math.abs(c)-1])||void 0===e?void 0:e.price:null===(t=Kt.ask[Math.abs(c)-1])||void 0===t?void 0:t.price,p=oe.price,f={price:{value:d||p,invalid:!1},quantity:{value:"percentage"===a?"".concat(u,"%"):u,invalid:!1}};Bt(f),"percentage"===a&&Ft(u),q((0,M.Z)((0,M.Z)({},St(f)),{},{side:s.g.BUY,positionSide:de?s.PR.LONG:s.PR.BOTH,orderType:l})),wr++}),10),e.abrupt("break",17);case 6:return setTimeout((function(){var e,t,r=o.priceLevel,n=o.valueInput,i=n.type,a=void 0===i?"percentage":i,u=n.value,c=Number(r),d=c>0?null===(e=Kt.bid[Math.abs(c)-1])||void 0===e?void 0:e.price:null===(t=Kt.ask[Math.abs(c)-1])||void 0===t?void 0:t.price,p=oe.price,f={price:{value:d||p,invalid:!1},quantity:{value:"percentage"===a?"".concat(u,"%"):u,invalid:!1}};Bt(f),"percentage"===a&&Ft(u),q((0,M.Z)((0,M.Z)({},St(f)),{},{side:s.g.SELL,positionSide:de?s.PR.SHORT:s.PR.BOTH,orderType:l})),wr++}),10),e.abrupt("break",17);case 8:return setTimeout((function(){de&&It(s.RS.OPEN),wr++}),10),e.abrupt("break",17);case 10:return setTimeout((function(){de&&It(s.RS.CLOSE),wr++}),10),e.abrupt("break",17);case 12:return Pt||setTimeout((function(){var e=(0,M.Z)((0,M.Z)((0,M.Z)({},et),St((0,M.Z)((0,M.Z)({},ae),{},{orderType:l}))),{},{side:"BUY",positionSide:de?s.PR.LONG:s.PR.BOTH});r()&&(He?i():_t(void 0,void 0,e)),wr++}),10),e.abrupt("break",17);case 14:return kt||setTimeout((function(){var e=(0,M.Z)((0,M.Z)((0,M.Z)({},et),St((0,M.Z)((0,M.Z)({},ae),{},{orderType:l}))),{},{side:"SELL",positionSide:de?s.PR.SHORT:s.PR.BOTH});r()&&(He?i():_t(void 0,void 0,e)),wr++}),10),e.abrupt("break",17);case 16:return e.abrupt("break",17);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[wr,Nt,Pt,kt,Kt.bid,Kt.ask,oe.price,Bt,Ft,q,St,de,l,It,et,ae,r,He,i,_t]);var Jt=(0,n.useMemo)((function(){return Cr(xt.m,{tip:Cr(b.Z,{as:"div",sx:{backgroundColor:"control",padding:"10px",width:"200px",whiteSpace:"pre-wrap"}},Re),placement:"bottom",placeholdSx:{color:"t.secondary"}},Fe,":")}),[Fe,Re]);return(0,n.useMemo)((function(){return Cr("div",null,Cr(Se.Z,{ref:v}),Cr(wt,{symbol:A,base:k,quote:Z,ticker:C,ref:g,marginAsset:J}),!dt&&Cr(st,{locale:w,leftTitle:ze,isDelivery:B}),de&&Cr(tr,{openText:Ae,closeText:Le,positionDirection:f,setPositionDirection:It}),Cr(Be,{tradeType:t,locale:w,getI18n:L,getFutI18n:F,orderType:l,sx:Ht,onChange:qt}),Cr(d.Z,{justifyContent:"space-between",alignItems:"center",pt:"14px"},Cr(Ce.Z,{tradeType:t,balance:(0,O.Jp)(Ye).toFixed(ie,1),dispatch:X,transfer:!0,base:k,quote:Z,getI18n:L,isLoggedIn:R,userAssets:E,isDelivery:B,getFutI18n:F,marginAsset:J,pt:"8px",pb:"4px"}),Cr(yr,null)),Cr(ye.Z,{onKeyPress:Yt,onChange:Nt,onSubmit:Ut,trim:!0,noValidate:!0,autoComplete:"off"},ke.XA[l].map((function(e){var r,n,i=e.name,o=e.type,a=e.isBase,u=e.disabled,c=e.needLogin,d=e.placeholder,p=e.isPrice,m=(e.minKey,e.stepKey),v=void 0===m?"tickSize":m;if(c&&!R)return null;var g=$,y="";if(B)if(P===ke.SW.coin){var x;n=k,g=te;var h=null===(x=ae[i])||void 0===x?void 0:x.value;if("quantity"===i&&Number(h)){var T=Wt();y=et.buyCont<1?T?"".concat(F("mininumQtyPrefix",{defaultValue:"Minimum Qty is"},"futures-trade")," ").concat((0,O.Jp)(it/T).toFixed(g,0)," ").concat(k," \u2248 1 ").concat(V):"":" \u2248 ".concat(et.buyCont||0," ").concat(V)}}else n=V,"quantity"===i&&(d="".concat(A," ").concat(F("Contract",{defaultValue:"Contract"}),": 1 ").concat(F("Cont",{defaultValue:"Cont"})," = ").concat(it," ").concat(Z));else if(P===ke.AO.usdt){var S;n=J,g=ne;var I=null===(S=ae[i])||void 0===S?void 0:S.value;if("quantity"===i&&Number(I)){g=vt();var w=Wt();y=et.usdtFuturesBuyCoin<re?w?"".concat(F("mininumQtyPrefix",{defaultValue:"Minimum Qty is"},"futures-trade")," ").concat((0,O.Jp)(re*w).toFixed(g,0)," ").concat(J," \u2248 ").concat(re," ").concat(k):"":" \u2248 ".concat(et.usdtFuturesBuyCoin||0," ").concat(k),w||(y="")}}else n=k,g=$;if("slider"===o)return Cr(Ze.Z,{key:o,value:ae.sliderQty.value,onChange:Ft});if("amount"===o)return fe?Cr("div",{style:{marginRight:12},key:o},Cr(Xt,{leftLabel:Oe,rightLabel:Ee,leftContent:"".concat((0,O.Jp)(Ue).toFixed(g,1)," ").concat(n),rightContent:"".concat((0,O.Jp)(je).toFixed(g,1)," ").concat(n)})):null;if("cost"===o)return de&&f===s.RS.CLOSE?null:Cr(Xt,{key:o,leftLabel:Jt,rightLabel:Jt,leftContent:"".concat(Je," ").concat(J),rightContent:"".concat(Ge," ").concat(J)});if(g=vt(),"price"!==i&&"activationPrice"!==i&&"triggerPrice"!==i||(g=pt),"maxAmount"===o){var M=de&&f===s.RS.CLOSE;return Cr(Xt,{key:o,leftLabel:M?De:Ve,rightLabel:M?De:Ve,leftContent:"".concat((0,O.Jp)(Tt).toFixed(g,1)," ").concat(n),rightContent:"".concat((0,O.Jp)(Zt).toFixed(g,1)," ").concat(n)})}if("advanced"===o){var E=he()(ae,Object.values(ke.Pt).map((function(e){return e.name})));return R?Cr(jt,{key:o,isDelivery:B,orderType:l,title:Ne,dispatch:X,positionMode:de,positionDirection:f,orderFormState:E}):null}if("callbackRate"===o){var D=Cr(xt.m,{key:o,tip:Cr(b.Z,{as:"div",sx:{backgroundColor:"control",padding:"10px",width:"200px",whiteSpace:"pre-wrap"}},F("callbackRateTip",{defaultValue:Te.Z.callBackTip},"futures-trade")),placement:"bottom",placeholdSx:{color:"t.secondary",maxWidth:"108px",textAlign:"left",lineHeight:1}},F("callbackRate",{defaultValue:"Callback Rate"},"futures-trade"));return Cr(rr,{tradeType:t,before:D,callbackRate:ae[i].value,name:i,selectCallbackRate:zt})}if("placeOrderButton"===o)return Cr(Pr,{key:o,positionDirection:f,activePrice:nt,orderForm:et,orderType:l,lastPrice:tt,markPrice:rt,setConfirmTitle:we,isFetching:le,tradeType:t,renderRegisterLogin:K});var N=F("triggerPrice"===i?"stopPrice":i,{defaultValue:i.charAt(0).toUpperCase()+i.slice(1)}),_=a?k:Z;B?"quantity"!==i&&(n=_):n="quantity"===i&&P===ke.AO.usdt?J:_;var z=p?C[v]:(0,Sr.nH)(g),H=ae.quantity.value,q=void 0===H?"":H;return Cr(Ie.Z,{type:~q.indexOf("%")&&"quantity"===i?"text":"number",key:i,name:i,min:z,step:z,precision:g,before:"activationPrice"===i?Cr(xt.m,{tip:Cr(b.Z,{as:"div",sx:{backgroundColor:"control",padding:"10px",width:"200px",whiteSpace:"pre-wrap"}},F("activationPriceTip",{defaultValue:Te.Z.activationPriceTip})),placement:"bottom",placeholdSx:{color:"t.secondary"}},N):N,tradeType:t,after:n,value:ae[i].value,disabled:u,errorText:null===(r=ae[i])||void 0===r?void 0:r.errorMsg,placeholder:d&&L(d),maxLength:ke.ze,helperText:"quantity"===i?y:"",autoZero:i===s.u9.QUANTITY})}))))}),[vt,pt,ze,A,k,Z,C,J,dt,B,de,Ae,Le,f,It,t,w,L,F,l,Ht,qt,Ye,ie,R,E,Yt,Nt,Ut,$,ae,P,te,Wt,et,it,V,ne,re,Ft,fe,Oe,Ee,Ue,je,Jt,Je,Ge,Ve,De,Tt,Zt,Ne,zt,nt,tt,rt,le,K])};const Ar=i().memo(Mr);var Lr=r("zt87"),Or=r("1wVY"),Er=i().createElement,Fr=function(e){var t=e.marginRatioList,r=e.onChange,n=e.marginRatioLabel;return Er(c.Z,{mb:"14px"},Er(Ae.ZP,{trigger:"hover",overlay:t.map((function(e){return Er(c.Z,{key:e.key,sx:{maxWidth:"150px",px:"sm",pt:"12px",pb:"6px",bg:"control",cursor:"pointer",":hover":{color:"primary"},":last-of-type":{pt:"6px",pb:"12px"},div:{maxWidth:"100%"}},onClick:function(){r(e.key)}},Er(b.Z,{key:e.key,value:e.key},e.marginRatioLabel))}))},Er(d.Z,{as:"span",sx:{width:"auto",maxWidth:"138px",fontWeight:"400",color:"t.grey300",cursor:"pointer",alignItems:"center",textAlign:"right",":hover":{svg:{transform:"rotate(180deg)"}}}},n,Er(Oe.Z,{color:"t.grey300",size:16}))))},Rr=i().memo((function(e){var t=e.getFutI18n,r=e.marginRatioLabel,n=e.marginRatioList,i=e.setMarginRatioKey;return Er(d.Z,{as:"span",sx:{fontWeight:"600",justifyContent:"space-between"}},Er(b.Z,{sx:{fontSize:"16px",color:"t.primary"},as:"span"},t("tradeHistory-positions-marginRatioLabel",{defaultValue:"Margin Ratio"})),(null===n||void 0===n?void 0:n.length)>0&&Er(Fr,{marginRatioLabel:r,marginRatioList:n,onChange:i}))}),(function(e,t){var r=e.marginRatioLabel,n=e.marginRatioList,i=e.setMarginRatioItem,o=t.marginRatioLabel,a=t.marginRatioList,l=t.setMarginRatioItem,s=n.map((function(e){return e.marginRatioLabel})).join(),u=a.map((function(e){return e.marginRatioLabel})).join();return r===o&&i===l&&s===u})),Vr=i().memo((function(e){var t=e.isRtl,r=e.getFutI18n,n=e.tooltipTitleColor,i=e.riskRatio,o=e.deg,a=e.maintenanceMargin,l=e.marginBalance,s=e.marginAsset,u=e.marginPrecision;return Er(c.Z,{mt:"8px"},Er(d.Z,null,Er(d.Z,{width:"50%",flexDirection:"column"},Er(xt.m,{tip:r("tradeHistory-positions-marginRatioTip",{defaultValue:""}),placement:"bottom",color:n},r("tradeHistory-positions-marginRatioLabel",{defaultValue:"Margin Ratio"})),Er(b.Z,{mt:"8px",fontSize:3,color:"#00C582"},(0,m.JX)(i,2)||"0.00","%")),Er(d.Z,{width:"50%",justifyContent:"flex-end"},Er(Lr.Z,{deg:o}))),Er(d.Z,{sx:{marginTop:"16px",lineHeight:"16px"},justifyContent:"space-between"},Er(xt.m,{tip:r("tradeHistory-positions-maintenanceMarginTip",{defaultValue:"The minimum amount of margin balance required to keep your open positions."}),placement:"bottom",color:n},r("tradeHistory-positions-maintenanceMarginLabel",{defaultValue:"Maintenance Margin"})),Er(d.Z,{flexDirection:t?"row-reverse":""},Er(b.Z,{color:"t.fifth"},(0,O.uf)(a,u)),"\xa0",Er(b.Z,null,s))),Er(d.Z,{sx:{marginTop:"8px",lineHeight:"16px",paddingBottom:"11px"},justifyContent:"space-between"},Er(xt.m,{tip:r("tradeHistory-positions-marginBalanceTip",{defaultValue:""}),placement:"bottom",color:n},r("tradeHistory-positions-marginBalanceLabel",{defaultValue:"Margin Balance"})),Er(d.Z,{flexDirection:t?"row-reverse":""},Er(b.Z,{color:"t.fifth"},(0,O.uf)(l,u)),"\xa0",Er(b.Z,null,s))))})),Dr=function(){var e,t=(0,n.useContext)(y.UE),r=t.getFutI18n,i=t.isLoggedIn,a=t.symbol,l=t.quoteAssets,s=t.ticker.marginAsset,u=t.usePreference,d=t.isDelivery,p="rtl"===(0,o.gm)(),f=(0,n.useState)(""),v=f[0],g=f[1],x=u().positionMode,h=void 0!==x&&x,b=(0,Or.m)(r,h,d),P=b.find((function(e){return e.key===v})),k=P||{},T=k.riskRatio,Z=void 0===T?0:T,S=k.marginBalance,C=k.maintenanceMargin,I=k.marginAsset,w=k.marginRatioLabel;(0,n.useEffect)((function(){var e;!P&&b.length>0&&((e=b.find((function(e){return e.symbol===a})))||(e=b.find((function(e){return e.marginAsset===s&&!e.isolated}))),e||(e=b[0]||{}),g(e.key))}),[b]);var M=(0,m.JX)(1.2*Z-60,0),A=d?"t.grey300":void 0,L=d?4:(null===l||void 0===l||null===(e=l[I])||void 0===e?void 0:e.pricePrecision)||2;return i?Er(c.Z,{mt:"50px",fontSize:"12px",display:["none","block"]},Er(Rr,{getFutI18n:r,marginRatioLabel:w,marginRatioList:b,setMarginRatioKey:g}),Er(Vr,{isRtl:p,getFutI18n:r,tooltipTitleColor:A,riskRatio:Z,deg:M,maintenanceMargin:C,marginBalance:S,marginAsset:I||s,marginPrecision:L})):null};const Nr=i().memo(Dr);var Br=r("aF3K"),_r=r("6Ybu"),zr=r("194l"),Hr=r("87Ep"),qr=i().createElement,Yr=function(e){var t=e.getI18n,r=e.onClick;return qr(d.Z,{justifyContent:"space-between",display:["flex","none"],p:"sm"},qr(R.Z,{flex:"1",color:"white",colorStyle:"buy",sx:{height:"40px",borderRadius:"2px"},onClick:function(){return r(s.g.BUY)},mr:"xs"},t("BUY")),qr(R.Z,{flex:"1",color:"white",colorStyle:"sell",sx:{height:"40px",borderRadius:"2px"},onClick:function(){return r(s.g.SELL)}},t("SELL")))},Ur=function(e){var t=e.children,r=(0,u.Z)(e,["children"]),i=(0,n.useState)({visible:!1,type:{side:s.g.BUY}}),o=i[0],a=i[1],l=(0,n.useCallback)((function(){a((function(e){return(0,M.Z)((0,M.Z)({},e),{},{visible:!1})}))}),[a]),d=(0,zr.Z)(),p=d.getI18n,f=d.i18n.language,m=(0,Hr.yk)().getI18n,v=o.visible?"-100%":"0",g=(0,n.useMemo)((function(){return(0,M.Z)((0,M.Z)({futUrlConfig:{}},r),{},{getI18n:p,getFutI18n:m,hideMask:l,locale:f,curSide:o.type})}),[f,r,l,p,m,o.type]),x=(0,n.useCallback)((function(e){a({type:{side:e},visible:!0})}),[]);return qr(y.UE.Provider,{value:g},qr(Yr,{getI18n:p,onClick:x}),qr(_r.Z,{visible:o.visible,onClick:l}),qr(c.Z,{sx:{p:"12px 10px 16px 16px",pr:["16px","16px","10px"],bg:"board",zIndex:"30",color:"t.primary",fontSize:[1],position:"relative",userSelect:"none",background:["#1E2126","transparent"],borderTopLeftRadius:["10px","0"],borderTopRightRadius:["10px","0"],transition:["transform .3s ease-in-out","none"],transform:["translate3d(0, ".concat(v,", 0)"),"none"]}},t))};const jr=i().memo(Ur);var Wr=r("1Jj/"),Kr=r("3dfD"),Jr=i().createElement,Gr=Kr.Z.ModalType,Qr=Kr.Z.Tab;const Xr=function(e){var t=e.visible,r=e.tab,i=e.onClose,a=e.curAsset,l=(0,o.tZ)(),s=(0,o.Fs)().isMobile,u=(0,n.useContext)(y.UE),c=u.isDelivery,d=u.getTransferAssets,p=u.transferAssets,f=u.getFutI18n,m=(0,o.YT)().setMessageInfo,v=p.assets,g=p.assetTypes,x=void 0===g?[]:g,h=Object.values((0,o.iB)()),b=(0,n.useMemo)((function(){return Object.keys(v).reduce((function(e,t){var r,n,i,o;return e[t]={assetName:null===v||void 0===v||null===(r=v[t])||void 0===r?void 0:r.assetName,assetCode:null===v||void 0===v||null===(n=v[t])||void 0===n?void 0:n.asset,assetLogo:null===v||void 0===v||null===(i=v[t])||void 0===i?void 0:i.logoUrl,balance:null===v||void 0===v||null===(o=v[t])||void 0===o?void 0:o.free},e}),{})}),[v]),P=(0,n.useMemo)((function(){return Object.values(b)}),[b]),k=(0,n.useMemo)((function(){return Object.keys(b)}),[b]),Z=(0,n.useMemo)((function(){return c?[]:x}),[c,x]),S=(0,n.useMemo)((function(){return c?x:[]}),[c,x]);(0,n.useEffect)((function(){t&&d()}),[t,d]);var C=c?a||"BTC":"BUSD",I=c?"BTC"===C?"BNB":"BTC":a&&"BUSD"!==a?a:"USDT",w=(0,n.useCallback)((function(e,t){var r=t.asset;i(),m(e?{header:f("transfer-asset",{defaultValue:""}),message:e.message||f("failureTransferAsset",{defaultValue:""}),variant:"error"}:{header:f("transfer-asset",{defaultValue:""}),message:"".concat(r," ").concat(f("successTransferAsset",{defaultValue:""})),variant:"success"})}),[f,i,m]),M=(0,T.d0)(c),A=(0,n.useCallback)((function(e){var t=h.filter((function(t){return t.marginAsset===e})),r=(t.find((function(e){return"CURRENT_QUARTER"===e.contractType}))||t.find((function(e){return"PERPETUAL"===e.contractType}))||t[0]||{}).symbol;r?M({stateSymbol:r}):console.log("target asset no matched exchange symbol"),i()}),[M,h,i]);return Jr(Kr.Z,{transferConfig:{spotAssetNames:k,assetMap:b,usdtFutureAssetNames:Z,coinFutureAssetNames:S,afterSubmit:w},convertConfig:{assets:P,defaultToAsset:C,defaultFromAsset:I,goTrade:A},otcConfig:{visible:c,url:(0,_e.CN)(Re.x.OTC_URL,{locale:l})},type:c?Gr.COIN_FUTURE:Gr.USDT_FUTURE,isMobile:s,visible:t,activeTab:r,onClose:i})};var $r=i().createElement;const en=function(){var e=(0,n.useState)(!1),t=e[0],r=e[1],i=(0,n.useState)("BTC"),o=i[0],a=i[1],l=(0,n.useState)(Qr.TRANSFER),u=l[0],c=l[1];return(0,n.useEffect)((function(){return f.Z.on("triggerModal",(function(e,t){switch(e){case s.Ze.TRANSFER:r(!0),c(Qr.TRANSFER),a(t||"BTC");break;case s.Ze.CONVERT:r(!0),c(Qr.CONVERT),a(t||"BTC")}}))})),$r(Xr,{visible:t,onClose:function(){return r(!1)},tab:u,curAsset:o})};var tn=i().createElement;const rn=function(e){return tn(jr,Object.assign({prefix:"futures-trade"},e),tn(ve,null),tn(Ar,{tradeType:s.xy.FUTURES}),tn(Nr,null),e.isDelivery?tn(Wr.ZP,null):tn(Br.ZP,null),tn(en,null))};var nn=i().createElement,on=function(e){var t=e.feeTierInfo,r=(0,T.yk)().getI18n,n=(0,o.tZ)(),i=ze.x.FEE_URL,a=t.feeTier,l=t.makerCommission,s=t.takerCommission,u=1e6,d=(0,O.Bq)(s,u,{digit:4}),p=(0,O.Bq)(l,u,{digit:4});return nn(c.Z,{variant:"dropdown",sx:{minWidth:"160px",mt:"sm",p:"sm",bg:"filterDropdown.bg",color:"filterDropdown.color",lineHeight:"16px",fontSize:"0",position:"relative",top:"-15px"}},nn(b.Z,{as:"a",fontSize:"1",color:"primary",display:"inline-block",sx:{fontWeight:"500",textDecoration:"none",":hover":{color:"t.yellow300"}},href:(0,_e.CN)(i,{locale:n})},r("fee-feeTierLabel",{defaultValue:"Fee Tier"}),": ",a||"-"," >"),nn(b.Z,{pt:"20px"},r("fee-takerLabel",{defaultValue:"Taker"}),":",nn(b.Z,{as:"span",sx:{float:"right"}},d)),nn(b.Z,{pt:"xs"},r("fee-makerLabel",{defaultValue:"Maker"}),":",nn(b.Z,{as:"span",sx:{float:"right"}},"".concat(l<0?"-":"").concat(p))))};const an=function(){var e=(0,T.aq)(),t=(0,o._n)(),r=e.feeTier,i=void 0===r?"-":r,a=(0,n.useState)(!1),l=a[0],s=a[1];return t?nn(Ae.ZP,{arrow:!0,trigger:"hover",placement:"bottom-end",overlay:"-"===i?null:nn(on,{feeTierInfo:e}),onVisibleChange:s,enablePortal:!0,sx:{borderRight:"1px solid",borderColor:"t.grey700",mr:"6px"}},nn(c.Z,{sx:{fontSize:"xs",color:l?"t.yellow200":"t.third",borderBottom:"1px dotted",mr:"8px",cursor:"pointer"}},"VIP ",i)):null};var ln=r("9KK5"),sn=i().createElement;const un=function(){var e=(0,o._n)(),t=(0,n.useRef)(),r=(0,T.yk)().getI18n,i=(0,n.useRef)(),a=(0,T.F7)().unit,l=(0,o.z4)(),s=(0,C.Z)(l,2)[1],u=a===ln.iI.coin?s[0]:r("cont-unit"),d=(0,n.useCallback)((function(){i.current.showUnitPanel({title:r("unitPreference",{defaultValue:"Unit Preference"}),unit:a})}),[a,r]);return(0,n.useMemo)((function(){return e?sn(c.Z,{ref:t,sx:{borderRight:"1px solid",borderColor:"t.grey700",color:"t.grey300",fontSize:"12px",px:2,mr:"8px",cursor:"pointer"},onClick:d,"data-testid":"unit"},r("unit",{defaultValue:"Unit"}),":"," ",sn(b.Z,{as:"span",sx:{color:"t.yellow200","&:hover":{color:"t.yellow300"}}},u),sn(c.Z,null,sn(ln.ZP,{ref:i}))):null}),[u,d,e,r])};var cn=r("TUpt"),dn=i().createElement;const pn=function(e){var t=e.isDelivery,r=e.leftLabel,i=e.bottomLabel;return(0,n.useMemo)((function(){return dn(d.Z,{sx:{borderBottom:"1px solid",borderBottomColor:"lines.border"},flexDirection:"column"},dn(d.Z,{flexDirection:"row",justifyContent:"space-between",alignItems:"stretch"},r,dn(d.Z,{sx:"24px",ml:"12px",mb:"4px",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},t?dn(un,null):dn(cn.Z,{isFullScreen:!0}),dn(an,null),dn(ot,{isDelivery:t}))),i)}),[i,r,t])};var fn=r("bD8W"),mn=i().createElement,vn=function(e){var t=e.text,r=e.key;return(0,n.useMemo)((function(){return mn("div",null,mn(b.Z,{as:"span",p:0,mb:2,key:r},t))}),[r,t])},gn=(0,n.memo)((function(e){var t=e.orderType,r=e.dispatch,i=e.positionMode,o=(e.positionDirection,(0,n.useContext)(y.UE)),a=o.getFutI18n,l=o.changeOrderFormData,u=ke.SI[t],p=u.enablePostOnly,f=u.enableTIF,m=u.enableTrigger,v=ke.SI[t].enableReduceOnly,g=(0,Nt.Z)(Re.Qd)||{},x=(0,C.Z)(g,2),h=x[0],P=x[1],k=(0,n.useRef)(h||{});v=v&&!i;var T=p||f||v||m,Z=(0,n.useState)((null===h||void 0===h?void 0:h.triggerType)||ze.gu.MARK_PRICE),S=Z[0],I=Z[1],w=(0,n.useState)((null===h||void 0===h?void 0:h.advancedType)||ke.jn.POST_ONLY),A=w[0],L=w[1],O=(0,n.useState)(v&&(null===h||void 0===h?void 0:h.reduceOnly)||!1),E=O[0],F=O[1],R=(0,n.useState)((null===h||void 0===h?void 0:h.timeInForce)||ke.rb.POST_ONLY),D=R[0],N=R[1],B=(0,n.useCallback)((function(e){P(e),k.current=e}),[P]),_=(0,n.useCallback)((function(e){N(e),B((0,M.Z)((0,M.Z)({},k.current),{},{timeInForce:e})),r({type:s.pp.FIELD_CHANGE,payload:{orderType:t,field:{timeInForce:e}}}),l({orderType:t,timeInForce:e})}),[B,l,r,t]),z=(0,n.useCallback)((function(e){F(e),B((0,M.Z)((0,M.Z)({},k.current),{},{reduceOnly:e})),r({type:s.pp.FIELD_CHANGE,payload:{orderType:t,field:{reduceOnly:e}}}),l({orderType:t,reduceOnly:e})}),[B,l,r,t]);(0,n.useEffect)((function(){var e=k.current,r=e.reduceOnly,n=void 0!==r&&r,i=e.timeInForce;v&&void 0!==n&&l({orderType:t,reduceOnly:n}),f&&void 0!==i&&(t===s.Jm.STOP_LIMIT&&i===ke.rb.POST_ONLY?(_(ke.rb.TIF.GTC),L(ke.jn.TIF),B((0,M.Z)((0,M.Z)({},k.current),{},{advancedType:ke.jn.TIF,timeInForce:ke.rb.TIF.GTC}))):l({orderType:t,timeInForce:i})),v||F(!1)}),[B,_,f,l,t,v]),(0,n.useEffect)((function(){[s.Jm.STOP_LIMIT,s.Jm.STOP_MARKET,s.Jm.TAKE_PROFIT_LIMIT,s.Jm.TAKE_PROFIT_MARKET,s.Jm.TRAILING_STOP_MARKET].includes(t)&&(r({type:s.pp.FIELD_CHANGE,payload:{workingType:S}}),l({orderType:t,workingType:S}))}),[S,t,r,l,D]);var H=(0,n.useMemo)((function(){return[{label:a("lastPrice",{defaultValue:"Last Price"}),type:ze.gu.LAST_PRICE},{label:a("tradeHistory-positions-markPriceTitle",{defaultValue:"Mark Price"}),type:ze.gu.MARK_PRICE}]}),[a]),q=(0,n.useState)((null===h||void 0===h?void 0:h.triggerLabel)||H[1].label),Y=q[0],U=q[1],j=(0,n.useMemo)((function(){return mn(d.Z,{justifyContent:"space-between",alignItems:"center"},v&&mn(c.Z,{sx:{fontSize:[1,0],marginRight:"16px"},"data-testid":"ReduceOnly"},mn(ut.Z,{variant:"checkbox"},mn(ct.ZP,{variant:"ds",sx:{svg:{borderColor:"orderForm.advancedIconColor"}},checked:E,onChange:function(){z(!E)}}),mn(xt.m,{sx:{boxSizing:"border-box",verticalAlign:"50%"},tip:mn(b.Z,{sx:{padding:"10px"}},a("limitType-reduceOnly-tip",{defaultValue:""})),placement:"bottom"},a("limitType-reduceOnly",{defaultValue:"Reduce Only"})))),p&&mn(c.Z,{sx:{py:"8px",display:"flex",alignItems:"center",mr:"16px"}},mn(V.ZP,{sx:{width:"20px",svg:{color:A===ke.jn.POST_ONLY?"primary":"orderForm.advancedIconColor"}},name:"Tif",value:ke.jn.POST_ONLY,checked:A===ke.jn.POST_ONLY,onChange:function(){L(ke.jn.POST_ONLY),_(ke.rb.POST_ONLY),B((0,M.Z)((0,M.Z)({},k.current),{},{advancedType:ke.jn.POST_ONLY,timeInForce:ke.rb.POST_ONLY}))},"data-testid":"postOnly"}),mn(xt.m,{sx:{ml:"5px",verticalAlign:"50%"},tip:mn(b.Z,{as:"div",sx:{padding:"10px"}},a("limitType-postOnly-tip",{defaultValue:"limitType-postOnly-tip"})),placement:"bottom"},a("limitType-postOnly",{defaultValue:"Post Only"}))),f&&mn(c.Z,{sx:{display:"flex",alignItems:"center"},"data-testid":"TIF"},mn(V.ZP,{sx:{width:"16px",svg:{color:A===ke.jn.TIF?"primary":"orderForm.advancedIconColor"}},name:"Tif",value:ke.jn.TIF,checked:A===ke.jn.TIF,onChange:function(){L(ke.jn.TIF),_(ke.rb.TIF.GTC),B((0,M.Z)((0,M.Z)({},k.current),{},{advancedType:ke.jn.TIF,timeInForce:ke.rb.TIF.GTC}))}}),mn(xt.m,{sx:{ml:"5px",verticalAlign:"50%"},tip:mn(c.Z,{sx:{padding:"10px"}},mn(vn,{text:a("timeInForce-title",{defaultValue:"Time in Force"}),key:0}),mn(vn,{text:a("timeInForce-GTC",{defaultValue:"GTC: Good Till Cancel"}),key:1}),mn(vn,{text:a("timeInForce-IOC",{defaultValue:"IOC: Immediate Or Cancel"}),key:2}),mn(vn,{text:a("timeInForce-FOK",{defaultValue:"FOK: Fill Or Kill"}),key:3})),placement:"bottom"},a("limitType-TIF",{defaultValue:"TIF"})),mn(Ae.ZP,{sx:{ml:"5px",verticalAlign:"50%"},enablePortal:!0,trigger:"click","data-testid":"TIFSelect",overlay:mn(c.Z,{__css:{bg:"advanced.downDropBg"},sx:{boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",bg:"orderForm.advancedDropdownBg"},width:"56px"},Object.keys(ke.rb.TIF).map((function(e){return mn(c.Z,{key:e,sx:{color:D===e?"primary":"orderForm.advancedDropdownColor","&:hover":{bg:"orderForm.advancedDropdownHBg",cursor:"pointer"}},"data-testid":e,onClick:function(){_(e)}},mn(b.Z,{pb:"4px",pt:"4px",pl:"10px",fontSize:"12px",textAlign:"left"},e))})))},mn(ut.Z,{sx:{height:"24px",border:"1px solid #ccc",borderColor:"orderForm.advancedDropPlaceBorder",px:"5px",cursor:"pointer",backgroundImage:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.35) 100)",color:A===ke.jn.TIF?"orderForm.advancedDropdownColor":"","& path":{fill:A===ke.jn.TIF?"orderForm.advancedDropdownFill":"#848E9C"}},variant:"small",onClick:function(e){A!==ke.jn.TIF&&e.stopPropagation()}},D,mn("svg",{style:{marginRight:"15px"},width:"6",height:"4",viewBox:"0 0 6 4",fill:"none",xmlns:"http://www.w3.org/2000/svg"},mn("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.87006 0.855655L3.30346 3.85338C3.22681 3.9466 3.1163 4 3.00008 4C2.88394 4 2.77343 3.9466 2.69668 3.85338L0.130181 0.855655C0.00489473 0.714313 -0.0338278 0.508304 0.0309405 0.326341C0.0957088 0.144457 0.252008 0.0173411 0.433562 0L5.56455 0C5.7468 0.016602 5.90384 0.1429 5.96853 0.325602C6.03407 0.508304 5.99534 0.713574 5.87006 0.855655Z"}))))),m&&mn(c.Z,null,mn(xt.m,{sx:{ml:"10px",verticalAlign:"50%"},tip:a("triggerType",{defaultValue:"Please choose which price will trigger this order"}),placement:"bottom","data-testid":"Trigger"},a("trigger",{defaultValue:"Trigger"})),mn(Ae.ZP,{sx:{ml:"5px",verticalAlign:"50%"},enablePortal:!0,trigger:"click",overlay:mn(c.Z,{__css:{bg:"advanced.downDropBg"},sx:{boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",bg:"orderForm.advancedDropdownBg"},width:"fit-content"},H.map((function(e){var t=e.label,r=e.type;return mn(c.Z,{key:t,sx:{padding:"3px",color:Y===t?"primary":"t.primary","&:hover":{bg:"orderForm.advancedDropdownHBg",cursor:"pointer"}},onClick:function(){I(r),U(t),B((0,M.Z)((0,M.Z)({},k.current),{},{triggerType:r,triggerLabel:t}))},"data-testid":null===r||void 0===r?void 0:r.toLowerCase()},mn(b.Z,{pt:"4px",pb:"4px",px:"12px",fontSize:"12px"},t))})))},mn(ut.Z,{sx:{border:"1px solid #ccc",borderColor:"orderForm.advancedDropPlaceBorder",backgroundImage:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.35) 100)",color:"primary",display:"flex",alignItems:"center",cursor:"pointer",height:"24px",px:"5px"},variant:"small","data-testid":"TriggerSelect"},Y,mn(Oe.Z,{color:"#F0B90B",size:16,ml:"4px"})))))}),[B,A,z,_,p,v,f,m,a,E,H,D,Y]);return T?mn(c.Z,{sx:{fontSize:[1,0],borderRadius:"2px"}},j):null}),(function(e,t){return zt()(e,t)})),yn=i().createElement,xn=function(e){var t=e.leftLabel,r=e.leftContent;return(0,n.useMemo)((function(){return yn(d.Z,{justifyContent:"space-between",fontSize:12,mt:"8px"},"string"===typeof t?yn(b.Z,{sx:{color:"#848E9C",mr:"2px",maxWidth:"48px",overflow:"hidden",textOverflow:"ellipsis"},title:t},t):t,yn(b.Z,{sx:{width:"fit-content",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},title:r},r))}),[r,t])},hn=function(e){var t=e.openText,r=e.closeText,n=e.positionDirection,i=e.setPositionDirection,o={width:"84px",borderBottom:"none",height:"24px",pt:0,pb:0,lineHeight:"24px"},a={borderBottom:"none",backgroundColor:"orderItemBg",color:"orderItemColor","&:hover":{color:"t.yellow300"}};return yn(c.Z,{sx:{height:"24px",position:"relative",textAlign:"center",borderRadius:"4px",bg:"t.grey700"}},yn(g.Gj,{sx:(0,M.Z)((0,M.Z)({},o),{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}),actived:n===s.RS.OPEN,activedStyle:a,handleClick:function(){i(s.RS.OPEN)},"data-testid":"open"},t),yn(g.Gj,{sx:(0,M.Z)((0,M.Z)({},o),{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}),actived:n===s.RS.CLOSE,activedStyle:a,handleClick:function(){i(s.RS.CLOSE)},"data-testid":"close"},r))},bn=function(e){var t=e.BuyText,r=e.SellText,i=e.buyClick,o=e.sellClick,a=e.buyDisabled,l=e.sellDisabled,s=e.side;return(0,n.useMemo)((function(){return yn(d.Z,{justifyContent:"space-between",mt:"8px"},1===s?yn(R.Z,{colorStyle:"buy",sx:{borderRadius:"2px",width:"100%",height:"40px",color:"#fff","&:hover:not(:disabled):not(:active)":{background:"button.buyHover"}},onClick:i,disabled:a,"data-testid":null===t||void 0===t?void 0:t.replace("/","")},t):yn(R.Z,{colorStyle:"sell",sx:{borderRadius:"2px",width:"100%",height:"40px",color:"#fff","&:hover:not(:disabled):not(:active)":{background:"button.sellHover"}},onClick:o,disabled:l,"data-testid":null===r||void 0===r?void 0:r.replace("/","")},r))}),[s,t,r,i,a,o,l])},Pn=i().createElement,kn=function(e){var t=e.locale,r=e.getI18n,i=e.getFutI18n,o=e.tradeType;return(0,n.useMemo)((function(){return Pn(Ee.Z,{arrow:!0,pos:"bottom-end",delay:1e3,sx:{mr:1,cursor:"pointer"},tip:Pn(g.Ch,{locale:t,getI18n:r,getFutI18n:i,tradeType:o,selfHost:Re.$g})},Pn(Le.Z,{color:"t.third",size:14,verticalAlign:"middle",sx:{":hover":{color:"t.yellow300"}}}))}),[i,r,t,o])},Tn=function(e){var t=e.locale,r=e.getI18n,i=e.orderType,a=e.onChange,l=e.tradeType,u=e.getFutI18n,p=void 0===u?function(){}:u,f=e.sx,m=void 0===f?{}:f,v=(0,o.Jr)(),y=(0,o.hd)()?"cn":"en",x=(0,n.useRef)(),h=(0,Fe.KO)().putCoachMarkStep,P=(0,n.useMemo)((function(){return"ph"===v?{fontSize:"xs"}:{}}),[v]),k=l===s.xy.FUTURES,T=(0,n.useRef)(k?[[s.Jm.STOP_LIMIT,s.OO.STOP_LIMIT],[s.Jm.STOP_MARKET,s.OO.STOP_MARKET],[s.Jm.TRAILING_STOP_MARKET,s.OO.TRAILING_STOP_MARKET]]:[[s.Jm.OCO],[s.Jm.STOPLIMIT]]),Z=(0,n.useState)(k?s.Jm.STOP_LIMIT:s.Jm.OCO),S=Z[0],I=Z[1],w=(0,n.useCallback)((function(e){I(e),a(e)}),[a]),A=(0,n.useCallback)((function(e){return k?{"data-testid":e}:{}}),[k]);return(0,n.useEffect)((function(){if(!k){var e=Pn(d.Z,null,Pn(b.Z,null,p("ordertab-content"),Pn(D.Z,{href:ke.gQ[y],target:"_blank",sx:{color:"t.grey800",ml:1,display:"inline-block"}},p("ordertab-link"))));h("futuresGuide",2,{title:p("ordertab-title"),content:e,target:x,position:"left-start"})}}),[k,p,v]),Pn(d.Z,{justifyContent:"space-between",sx:(0,M.Z)((0,M.Z)({},m),{},{fontSize:1}),ref:x},Pn(g.Gj,Object.assign({type:s.Jm.LIMIT,actived:i===s.Jm.LIMIT,handleClick:a},A("limit"),P),r("LIMIT")),Pn(g.Gj,Object.assign({type:s.Jm.MARKET,actived:i===s.Jm.MARKET,handleClick:a},A("market"),P),r("MARKET")),Pn(c.Z,null,Pn(kn,{locale:t,getI18n:r,getFutI18n:p,tradeType:l}),Pn(g.Gj,Object.assign({type:S,actived:Boolean(T.current.find((function(e){return(0,C.Z)(e,1)[0]===i}))),handleClick:w},P),k?p(S,{defaultValue:"Stop Limit"}):r(S)),Pn(Ae.ZP,{trigger:"hover",enablePortal:!0,sx:{px:"3px",cursor:"pointer"},overlay:(0,g.j3)(r,p,w,i,{subTypes:T.current,tradeType:l})},Pn(Oe.Z,Object.assign({color:"t.third",size:16,verticalAlign:"middle"},A("moreStopMode"))))))};const Zn=i().memo(Tn);var Sn=i().createElement;const Cn=function(e){var t=e.tradeType,r=e.locale,i=e.isDelivery,a=e.getI18n,l=e.getFutI18n,s=e.orderType,u=e.orderTabSx,c=e.orderTabOnChange,p=e.TransferButton,f=(0,o._n)();return(0,n.useMemo)((function(){return Sn(d.Z,{justifyContent:"space-between",alignItems:"center",sx:{flexGrow:1,orderTabSx:u,fontSize:1}},Sn(Zn,{sx:{width:"220px"},tradeType:t,locale:r,getI18n:a,getFutI18n:l,orderType:s,onChange:c}),!i&&Sn(at.k,{locale:r,pb:"5px"}),f?Sn(p,null):null)}),[f,t,i,r,a,l,s,u,c])};var In=i().createElement;const wn=function(){var e=(0,n.useContext)(y.UE).getFutI18n,t=(0,o.z4)(),r=(0,C.Z)(t,2),i=(0,C.Z)(r[1],1)[0],a=(0,n.useCallback)((function(){f.Z.emit("triggerModal",s.Ze.TRANSFER,i)}),[i]);return(0,n.useMemo)((function(){return In(d.Z,{width:"79px",mb:"7px"},In(Wr.__,{as:"a",onClick:a},e("transfer",{defaultValue:"Transfer"})))}),[e,a])};var Mn=i().createElement;const An=function(){var e=(0,n.useContext)(y.UE).getFutI18n,t=(0,o.z4)(),r=(0,C.Z)(t,2),i=(0,C.Z)(r[1],1)[0],a=(0,n.useCallback)((function(){f.Z.emit("triggerModal",s.Ze.TRANSFER,i)}),[i]);return(0,n.useMemo)((function(){return Mn(d.Z,{width:"79px",mb:"7px"},Mn(Wr.__,{as:"a",onClick:a},e("transfer",{defaultValue:"Transfer"})))}),[e,a])};var Ln=r("53Dg"),On=r("lgsv"),En=r("0aGK"),Fn=r("fiM/"),Rn=i().createElement,Vn=function(e){var t=e.balance,r=e.dispatch,i=e.tradeType,o=e.side,a=void 0===o?s.g.BUY:o,l=e.mode,d=void 0===l?s.q0.NORMAL:l,p=e.transfer,m=void 0!==p&&p,v=e.base,g=e.quote,y=e.getI18n,x=e.isLoggedIn,h=e.userAssets,P=e.isDelivery,k=void 0!==P&&P,T=(0,u.Z)(e,["balance","dispatch","tradeType","side","mode","transfer","base","quote","getI18n","isLoggedIn","userAssets","isDelivery"]),Z=(0,n.useState)("0"),S=Z[0],C=Z[1],I="".concat(v).concat(g),w=k?v:i===s.xy.FUTURES||a===s.g.BUY?g:v,M=(h[w]||{free:"0.00000000"}).free,A=(0,n.useRef)("".concat(w,"_").concat(I,"_").concat(d)),L=(0,n.useCallback)((function(){f.Z.emit("triggerModal",s.Ze.TRANSFER,w)}),[w]);(0,n.useEffect)((function(){if(x){var e=(0,O.PD)(M,S).toFixed(ke.Az);r({type:s.pp.SHADOW_CHANGE,payload:{balance:e}})}}),[M,S,x,r]),(0,n.useEffect)((function(){if(i===s.xy.FUTURES||k)(0,Fn.Te)({mode:d,asset:w,isLoggedIn:x,symbol:I,tradeType:i}).then((function(e){C(e)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}));else{var e="".concat(w,"_").concat(I,"_").concat(d),t=e===A.current?ke.iO:0;(0,Fn.EI)(e,{mode:d,asset:w,isLoggedIn:x,symbol:I,tradeType:i,delay:t}).then((function(t){e===A.current&&C(t)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})),A.current=e}}),[k,d,w,I,M,x,i]);var E=(0,n.useMemo)((function(){return Rn(b.Z,{as:"span",color:"t.third",display:"inline-block",sx:{verticalAlign:"middle"}},x?t:"-"," ",w)}),[w,t,x]);return(0,n.useMemo)((function(){return Rn(c.Z,Object.assign({fontSize:"12px",lineHeight:"18px"},T),d===s.q0.BORROW?Rn(Ee.Z,{arrow:!0,delay:1e3,pos:"top-start",tip:Rn(c.Z,{sx:{maxWidth:"200px"}},y("assetModeBuyTip"))},Rn(Ln.Z,{fontSize:[3],sx:{mr:"4px",cursor:"pointer",color:"t.secondary",verticalAlign:"middle",borderBottom:"1px dotted currentColor","&:hover":{color:"primary"}}})):Rn(On.Z,{color:"t.secondary",fontSize:[3],sx:{verticalAlign:"middle",mr:"4px"}}),E,x&&m&&Rn(En.Z,{color:"t.yellow200",fontSize:"16px",sx:{verticalAlign:"middle",ml:"5px",border:"1px solid",borderColor:"t.yellow200",borderRadius:"2px",cursor:"pointer"},onClick:L}))}),[T,d,y,E,x,m,L])},Dn=function(e){var t=e.tradeType,r=e.balance,i=e.pricePrecision,o=e.dispatch,a=e.base,l=e.quote,s=e.getI18n,u=e.isLoggedIn,c=e.userAssets,p=e.isDelivery,f=e.getFutI18n;return(0,n.useMemo)((function(){return Rn(d.Z,{justifyContent:"space-between",alignItems:"center"},Rn(Vn,{tradeType:t,balance:(0,O.Jp)(r).toFixed(i,1),dispatch:o,transfer:!1,base:a,quote:l,getI18n:s,isLoggedIn:u,userAssets:c,isDelivery:p,getFutI18n:f}),Rn(yr,{sx:{marginBottom:0,marginLeft:"4px","& svg":{fontSize:"20px!important"}}}))}),[t,r,i,o,a,l,s,u,c,p,f])};const Nn=i().memo(Dn);const Bn=function(e,t){var r=e.orderType,i=e.placeOrder,o=e.isFetching,a=e.orderConfirmation,l=e.bCost,u=e.sCost,c=e.buyCost,d=e.sellCost,p=e.positionDirection,f=e.confirmTitle,v=e.isDelivery,g=e.contractType,x=e.markPrice,h=e.getAssumePrice,b=e.buyOpenLost,P=e.sellOpenLost,k=e.contractVal,T=e.side,Z=(0,n.useContext)(y.UE),S=Z.hideMask,C=Z.isLoggedIn,I=Z.unit,w=void 0===I?"":I,M=Z.cont;return(0,n.useCallback)((function(e,n,y){if(e&&e.preventDefault(),C&&!o){var Z=y.buyPrice,I=y.sellPrice,A=y.buyQty,L=y.sellQty,O=y.buyTriggerPrice,E=y.sellTriggerPrice,F=y.buyCallbackRate,R=y.sellCallbackRate,V=y.buyCont,D=void 0===V?0:V,N=y.sellCont,B=void 0===N?0:N,_=y.coinFuturesMinBuyContQty,z=y.usdtFuturesMinBuyCoinQty,H=1===T,q=r===s.Jm.TRAILING_STOP_MARKET,Y=r.includes(s.Jm.MARKET)&&!q,U=Number(H?Z:I),j=Number(H?A:L),W=Number(H?D:B),K=Number(H?O:E),J=Number(H?F:R),G=ke.SI[r].enableStopPrice;j>0&&(q?J>0&&J<=5:Y||U>0)&&(!G||K>0)&&(w!==ke.SW.coin||W>=_)&&(w!==ke.AO.usdt||W>=z)&&(S(),!(0,m.tq)()&&a[r]?t.current.showOrderConfirmPanel({orderType:r,placeOrder:i,orderForm:y,bCost:l,sCost:u,buyCost:c,sellCost:d,positionDirection:p,title:f,isDelivery:v,Cont:M,contractType:g,markPrice:x,getAssumePrice:h,buyOpenLost:b,sellOpenLost:P,contractVal:k,side:T}):i(y))}}),[T,l,u,h,P,k,b,x,g,w,v,M,C,o,r,S,a,t,i,c,d,p,f])};var _n=i().createElement;const zn=function(e){var t=e.positionDirection,r=e.activePrice,i=e.orderForm,o=e.orderType,a=e.lastPrice,l=e.markPrice,u=e.setConfirmTitle,c=e.isFetching,d=e.tradeType,p=e.renderRegisterLogin,f=e.side,m=(0,n.useContext)(y.UE),v=m.base,g=m.locale,x=m.getI18n,h=m.urlConfig,b=m.changeOrderFormData,P=m.isLoggedIn,k=m.usePreference,Z=(void 0===k?function(){return{}}:k)().positionMode,S=void 0!==Z&&Z,C=(0,T.x_)(t),I=C.BuyText,w=C.SellText,M=i.workingType===s.HZ.LAST_PRICE?Number(a):Number(l),A=(0,T.nL)({orderType:o,activePrice:r,price:M}),L=A.buyDisabled,O=A.sellDisabled;return(0,n.useMemo)((function(){return P?_n(bn,{BuyText:I,SellText:w,buyClick:function(){var e=s.PR.BOTH;S&&(t===s.RS.OPEN?e=s.PR.LONG:t===s.RS.CLOSE&&(e=s.PR.SHORT)),u(I),b({side:s.g.BUY,positionSide:e,orderType:o})},sellClick:function(){var e=s.PR.BOTH;S&&(t===s.RS.OPEN?e=s.PR.SHORT:t===s.RS.CLOSE&&(e=s.PR.LONG)),u(w),b({side:s.g.SELL,positionSide:e,orderType:o})},buyDisabled:L,sellDisabled:O,side:f}):_n(xr.Z,{base:v,locale:g,getI18n:x,urlConfig:h,isFetching:c,isLoggedIn:P,tradeType:d,renderRegisterLogin:p})}),[f,I,w,v,L,b,x,c,P,g,o,t,S,p,O,u,d,h])};var Hn=i().createElement,qn=we.Z.constants,Yn=1;const Un=function(e){var t=e.orderType,r=e.curOrderState,i=e.quantityPrecision,a=e.equalQtyPrecision,l=e.positionMode,u=e.positionDirection,c=e.changePositionDirection,d=e.curMaxBuyAmount,p=e.curMaxSellAmount,f=e.tradeType,m=e.dispatch,v=e.isFetching,g=e.orderConfirmation,x=e.orderConfirmRef,h=e.side,P=(0,n.useContext)(y.UE),k=P.unit,Z=void 0===k?"cont":k,C=P.base,w=P.quote,A=P.ticker,L=P.symbol,E=P.getI18n,F=P.getFutI18n,R=P.isLoggedIn,V=P.cont,D=P.isDelivery,N=void 0!==D&&D,B=P.renderRegisterLogin,_=P.useHorizontalOrderForm,z=void 0===_?function(){return{}}:_,H=P.changeOrderFormData,q=P.marginAsset,Y=z(L,w,t),U=Y.bCost,j=Y.sCost,W=Y.buyCost,K=Y.sellCost,J=Y.placeOrder,G=Y.orderForm,Q=Y.lastPrice,X=Y.markPrice,$=Y.contractVal,ee=Y.contractType,te=Y.buyOpenLost,re=Y.sellOpenLost,ne=Y.buyActivePrice,ie=Y.sellActivePrice,oe=Y.getAssumePrice,ae=void 0===oe?function(){}:oe,le=(0,kr.M)().inBattle,se=(0,Pe.P)().showBattleDialog,ue=A.minQty,ce=A.tickSizePrecision,de=1===h?ne:ie,pe=F("Max",{defaultValue:"Max"}),fe=F("Avbl",{defaultValue:"Avbl"}),me=F("cost",{defaultValue:"Cost"}),ve=F("costTip",{}),xe=G.tickSize,he=G.limitStepSize,be=G.marketStepSize,Se=(0,bt.Z)({orderType:t,equalQtyPrecision:a,marketStepSize:be,limitStepSize:he,tickSize:xe,unit:Z}),Ce=(0,o.pb)(),we=(0,T.Ex)(L),Ae=G.workingType===s.HZ.LAST_PRICE?Number(Q):Number(X),Le=(0,T.nL)({orderType:t,activePrice:de,price:Ae}),Oe=Le.buyDisabled,Ee=Le.sellDisabled,Fe=(0,n.useState)(),Re=Fe[0],Ve=Fe[1],De=(0,n.useCallback)((function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{price:{value:"0"},quantity:{value:"0"}},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=0,o=0,a=0,l=0,u=n||t,c=r.quantity||{},f=c.value,m=void 0===f?"":f,v={quantity:null===r||void 0===r||null===(e=r.quantity)||void 0===e?void 0:e.value},g=Se(!1);~m.indexOf("%")?1===h?v.buyQty=i=(0,O.Jp)(parseFloat(m)/100,d).toFixed(g,1):v.sellQty=o=(0,O.Jp)(parseFloat(m)/100,p).toFixed(g,1):1===h?v.buyQty=i=m:v.sellQty=o=m;var y,x,b,P,k=0;u!==s.Jm.STOP_LIMIT&&u!==s.Jm.LIMIT||void 0!==(a=null===r||void 0===r||null===(y=r.price)||void 0===y?void 0:y.value)&&(1===h?v.buyPrice=a:v.sellPrice=a);u!==s.Jm.LIMIT&&u!==s.Jm.MARKET||(1===h?v.buyTakeProfit=v.sellTakeProfit=Number((null===r||void 0===r||null===(x=r.takeProfit)||void 0===x?void 0:x.value)||0):v.buyStopLoss=v.sellStopLoss=Number((null===r||void 0===r||null===(b=r.stopLoss)||void 0===b?void 0:b.value)||0));if(u===s.Jm.STOP_LIMIT||u===s.Jm.STOP_MARKET)void 0!==(k=null===r||void 0===r||null===(P=r.triggerPrice)||void 0===P?void 0:P.value)&&(1===h?v.buyTriggerPrice=k:v.sellTriggerPrice=k);else if(u===s.Jm.TRAILING_STOP_MARKET){var T,S;l=null===r||void 0===r||null===(T=r.activationPrice)||void 0===T?void 0:T.value;var C=null===r||void 0===r||null===(S=r.callbackRate)||void 0===S?void 0:S.value;void 0!==l&&(1===h?v.buyActivationPrice=l:v.sellActivationPrice=l),void 0!==C&&(1===h?v.buyCallbackRate=C:v.sellCallbackRate=C)}return Z===ke.SW.coin&&(1===h?v.buyCont=(0,ht.Z)({orderType:u,contractVal:$,orderPrice:a||(null===G||void 0===G?void 0:G.buyPrice)||0,triggerPrice:k||(null===G||void 0===G?void 0:G.buyTriggerPrice)||0,activationPrice:l||(null===G||void 0===G?void 0:G.buyActivationPrice)||0,qty:i,lastPrice:Q,markPrice:X,isDelivery:N}):v.sellCont=(0,ht.Z)({orderType:u,contractVal:$,orderPrice:a||(null===G||void 0===G?void 0:G.sellPrice)||0,triggerPrice:k||(null===G||void 0===G?void 0:G.sellTriggerPrice)||0,activationPrice:l||(null===G||void 0===G?void 0:G.sellActivationPrice)||0,qty:o,lastPrice:Q,markPrice:X,isDelivery:N}),v.coinFuturesMinBuyContQty=1),Z===ke.AO.usdt&&(1===h?v.buyCont=(0,ht.Z)({orderType:u,contractVal:$,orderPrice:a||(null===G||void 0===G?void 0:G.buyPrice)||0,triggerPrice:k||(null===G||void 0===G?void 0:G.buyTriggerPrice)||0,activationPrice:l||(null===G||void 0===G?void 0:G.buyActivationPrice)||0,qty:i,lastPrice:Q,markPrice:X,isDelivery:N,precision:g}):v.sellCont=(0,ht.Z)({orderType:u,contractVal:$,orderPrice:a||(null===G||void 0===G?void 0:G.sellPrice)||0,triggerPrice:k||(null===G||void 0===G?void 0:G.sellTriggerPrice)||0,activationPrice:l||(null===G||void 0===G?void 0:G.sellActivationPrice)||0,qty:o,lastPrice:Q,markPrice:X,isDelivery:N,precision:g}),v.usdtFuturesMinBuyCoinQty=ue),v}),[Se,ue,h,$,Q,X,N,Z,G,d,p,t]),Ne=(0,ge.D)((function(e){if(R&&(0!==+d||0!==+p)){var n=Se(!1),i={quantity:{value:1===h?(0,O.Jp)(parseFloat(e)/100,d).toFixed(n,1):(0,O.Jp)(parseFloat(e)/100,p).toFixed(n,1),invalid:!1},sliderQty:{value:e,invalid:!1}};m({type:s.pp.FIELD_CHANGE,payload:{orderType:t,field:i}}),H((0,M.Z)({orderType:t},De((0,M.Z)((0,M.Z)({},r),i))))}})),Be=Mt({orderType:t,curOrderState:r},m,De,H),_e=At({orderType:t,curOrderState:r},m,De,H),ze=Vt({orderType:t,placeOrder:J,dispatch:m,getFutI18n:F,getPriceQuantity:De,changeOrderFormData:H}),He=Bn({orderType:t,isFetching:v,orderConfirmation:g,placeOrder:ze,bCost:U,sCost:j,buyCost:W,sellCost:K,positionDirection:u,confirmTitle:Re,isDelivery:N,contractType:ee,markPrice:X,getAssumePrice:ae,buyOpenLost:te,sellOpenLost:re,contractVal:$,side:h},x),qe=(0,n.useCallback)((function(e){13===e.nativeEvent.keyCode&&(e.preventDefault(),e.stopPropagation())}),[]),Ye=(0,T.u$)().showDialog,Ue=(0,n.useCallback)((function(e,t){e.preventDefault(),Ye()&&He(e,t,G)}),[He,G,Ye]);(0,n.useEffect)((function(){return(0,Me.GY)(function(){var e=(0,I.Z)(S().mark((function e(n){var i,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.name,o=n.payload,e.t0=i,e.next=e.t0===qn.ACTION_TRADE_ONECLIKE_BUY?4:e.t0===qn.ACTION_TRADE_ONECLIKE_SELL?6:e.t0===Me.aV?8:e.t0===Me.hr?10:e.t0===Me.HE?12:e.t0===Me.Lz?14:16;break;case 4:return 1===h&&setTimeout((function(){var e,r,n=o.priceLevel,i=o.valueInput,a=i.type,u=void 0===a?"percentage":a,c=i.value,d=Number(n),p=d>0?null===(e=Ce.bid[Math.abs(d)-1])||void 0===e?void 0:e.price:null===(r=Ce.ask[Math.abs(d)-1])||void 0===r?void 0:r.price,f=we.price,m={price:{value:p||f,invalid:!1},quantity:{value:"percentage"===u?"".concat(c,"%"):c,invalid:!1}};_e(m),"percentage"===u&&Ne(c),H((0,M.Z)((0,M.Z)({},De(m)),{},{side:s.g.BUY,positionSide:l?s.PR.LONG:s.PR.BOTH,orderType:t})),Yn++}),10),e.abrupt("break",17);case 6:return-1===h&&setTimeout((function(){var e,r,n=o.priceLevel,i=o.valueInput,a=i.type,u=void 0===a?"percentage":a,c=i.value,d=Number(n),p=d>0?null===(e=Ce.bid[Math.abs(d)-1])||void 0===e?void 0:e.price:null===(r=Ce.ask[Math.abs(d)-1])||void 0===r?void 0:r.price,f=we.price,m={price:{value:p||f,invalid:!1},quantity:{value:"percentage"===u?"".concat(c,"%"):c,invalid:!1}};_e(m),"percentage"===u&&Ne(c),H((0,M.Z)((0,M.Z)({},De(m)),{},{side:s.g.SELL,positionSide:l?s.PR.SHORT:s.PR.BOTH,orderType:t})),Yn++}),10),e.abrupt("break",17);case 8:return setTimeout((function(){l&&c(s.RS.OPEN),Yn++}),10),e.abrupt("break",17);case 10:return setTimeout((function(){l&&c(s.RS.CLOSE),Yn++}),10),e.abrupt("break",17);case 12:return Oe||1!==h||setTimeout((function(){var e=(0,M.Z)((0,M.Z)((0,M.Z)({},G),De((0,M.Z)((0,M.Z)({},r),{},{orderType:t}))),{},{side:"BUY",positionSide:l?s.PR.LONG:s.PR.BOTH});Ye()&&(le?se():He(void 0,void 0,e)),Yn++}),10),e.abrupt("break",17);case 14:return Ee||-1!==h||setTimeout((function(){var e=(0,M.Z)((0,M.Z)((0,M.Z)({},G),De((0,M.Z)((0,M.Z)({},r),{},{orderType:t}))),{},{side:"SELL",positionSide:l?s.PR.SHORT:s.PR.BOTH});Ye()&&(le?se():He(void 0,void 0,e)),Yn++}),10),e.abrupt("break",17);case 16:return e.abrupt("break",17);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[Yn,Be,Oe,Ee,Ce.bid,Ce.ask,we.price,_e,Ne,H,De,l,t,c,G,r,Ye,le,se,He]);var je=(0,n.useMemo)((function(){return Hn(xt.m,{tip:Hn(b.Z,{as:"div",sx:{backgroundColor:"control",padding:"10px",width:"200px",whiteSpace:"pre-wrap"}},ve),placement:"bottom",placeholdSx:{color:"t.secondary"}},me)}),[me,ve]),We=(0,n.useCallback)((function(){var e=0;switch(t){case s.Jm.LIMIT:case s.Jm.STOP_LIMIT:case s.Jm.TAKE_PROFIT_LIMIT:e=1===h?null===G||void 0===G?void 0:G.buyPrice:null===G||void 0===G?void 0:G.sellPrice;break;case s.Jm.MARKET:e=Q;break;case s.Jm.STOP_MARKET:case s.Jm.TAKE_PROFIT_MARKET:e=1===h?null===G||void 0===G?void 0:G.buyTriggerPrice:null===G||void 0===G?void 0:G.sellTriggerPrice;break;case s.Jm.TRAILING_STOP_MARKET:e=de;break;default:e=1===h?null===G||void 0===G?void 0:G.buyPrice:null===G||void 0===G?void 0:G.sellPrice}return e}),[h,de,Q,G.buyPrice,G.sellPrice,G.buyTriggerPrice,G.sellTriggerPrice,t]),Ke=(0,n.useCallback)((function(e){m({type:s.pp.FIELD_CHANGE,payload:{orderType:t,field:{callbackRate:{value:e}}}}),H({orderType:t,callbackRate:e})}),[H,t,m]);return(0,n.useMemo)((function(){return Hn(ye.Z,{onKeyPress:qe,onChange:Be,onSubmit:Ue,trim:!0,noValidate:!0,autoComplete:"off"},ke.XA[t].map((function(e){var n,o,c,m=e.name,g=e.type,y=e.isBase,x=e.disabled,P=e.needLogin,k=e.placeholder,T=e.isPrice;e.minKey,e.stepKey;if(P&&!R)return null;var S=i,I="";if(N)if(Z===ke.SW.coin){var M;c=C,S=a;var D=null===(M=r[m])||void 0===M?void 0:M.value;if("quantity"===m&&Number(D)){var _=1===h?G.buyCont:G.sellCont,z=We();I=_<1?z?"".concat(F("mininumQtyPrefix",{defaultValue:"Minimum Qty is"},"futures-trade")," ").concat((0,O.Jp)($/z).toFixed(S,0)," ").concat(C," \u2248 1 ").concat(V):"":" \u2248 ".concat(_||0," ").concat(V)}}else c=V,"quantity"===m&&(k="".concat(L," ").concat(F("Contract",{defaultValue:"Contract"}),": 1 ").concat(F("Cont",{defaultValue:"Cont"})," = ").concat($," ").concat(w));else if(Z===ke.AO.usdt){var H;c=q,S=ce;var Y=null===(H=r[m])||void 0===H?void 0:H.value;if("quantity"===m&&Number(Y)){S=Se();var U=1===h?G.buyCont:G.sellCont,j=We();I=U<ue?j?"".concat(F("mininumQtyPrefix",{defaultValue:"Minimum Qty is"},"futures-trade")," ").concat((0,O.Jp)(ue*j).toFixed(S,0)," ").concat(q," \u2248 ").concat(ue," ").concat(C):"":" \u2248 ".concat(U||0," ").concat(C),j||(I="")}}else c=C,S=i;if("slider"===g)return Hn(Ze.Z,{key:g,value:r.sliderQty.value,onChange:Ne});if("amount"===g)return null;if("cost"===g)return l&&u===s.RS.CLOSE?null:Hn(xn,{key:g,leftLabel:je,leftContent:1===h?"".concat(W," ").concat(q):"".concat(K," ").concat(q)});if(S=Se(),"price"!==m&&"activationPrice"!==m&&"triggerPrice"!==m||(S=xe),"maxAmount"===g){var J=l&&u===s.RS.CLOSE;return Hn(xn,{key:g,leftLabel:J?fe:pe,leftContent:1===h?"".concat((0,O.Jp)(d).toFixed(S,1)," ").concat(c):"".concat((0,O.Jp)(p).toFixed(S,1)," ").concat(c)})}if("advanced"===g)return null;if("callbackRate"===g){var ee=Hn(xt.m,{key:g,tip:Hn(b.Z,{as:"div",sx:{backgroundColor:"control",padding:"10px",width:"200px",whiteSpace:"pre-wrap"}},F("callbackRateTip",{defaultValue:Te.Z.callBackTip},"futures-trade")),placement:"bottom",placeholdSx:{color:"t.secondary",maxWidth:"108px",textAlign:"left",lineHeight:1}},F("callbackRate",{defaultValue:"Callback Rate"},"futures-trade"));return Hn(rr,{tradeType:f,before:ee,callbackRate:r[m].value,name:m,selectCallbackRate:Ke})}if("placeOrderButton"===g)return Hn(zn,{key:g,positionDirection:u,activePrice:de,orderForm:G,orderType:t,lastPrice:Q,markPrice:X,setConfirmTitle:Ve,isFetching:v,tradeType:f,renderRegisterLogin:B,side:h});var te=F("triggerPrice"===m?"stopPrice":m,{defaultValue:m.charAt(0).toUpperCase()+m.slice(1)}),re=y?C:w;N?"quantity"!==m&&(c=re):c="quantity"===m&&Z===ke.AO.usdt?q:re;var ne=T?A.tickSize:(0,Sr.nH)(S);return Hn(Ie.Z,{key:m,type:"number",name:m,min:ne,step:ne,precision:S,before:"activationPrice"===m?Hn(xt.m,{tip:Hn(b.Z,{as:"div",sx:{backgroundColor:"control",padding:"10px",width:"200px",whiteSpace:"pre-wrap"}},F("activationPriceTip",{defaultValue:Te.Z.activationPriceTip})),placement:"bottom",placeholdSx:{color:"t.secondary"}},te):te,tradeType:f,after:c,value:null===(n=r[m])||void 0===n?void 0:n.value,disabled:x,errorText:null===(o=r[m])||void 0===o?void 0:o.errorMsg,placeholder:k&&E(k),maxLength:ke.ze,helperText:"quantity"===m?I:"",autoZero:"quantity"===m})})))}),[qe,Be,Ue,t,R,i,N,Z,Se,F,C,w,A.tickSize,f,r,E,a,h,G,We,$,V,L,q,ce,ue,Ne,l,u,je,W,K,xe,pe,fe,d,p,Ke,de,Q,X,v,B])};var jn=i().createElement,Wn=function(e){var t=e.tradeType,r=(0,n.useState)(s.Jm.LIMIT),i=r[0],a=r[1],l=(0,n.useState)(s.RS.OPEN),u=l[0],c=l[1],p=(0,n.useRef)({}),f=(0,n.useRef)({}),m=(0,n.useContext)(y.UE),v=m.unit,g=void 0===v?"cont":v,x=m.base,h=m.quote,b=m.ticker,P=m.locale,k=m.symbol,T=m.getI18n,Z=m.userAssets,S=m.getFutI18n,C=m.isLoggedIn,I=m.orderFormPriceQty,w=m.isDelivery,A=void 0!==w&&w,L=m.usePreference,E=void 0===L?function(){return{}}:L,F=m.changeOrderFormData,R=void 0===F?function(){return{}}:F,V=m.useHorizontalOrderForm,D=void 0===V?function(){return{}}:V,N=m.updatePositionDirection,B=void 0===N?function(){return{}}:N,_=m.marginAsset,z=(0,n.useReducer)(y.ih,y.I$),H=z[0],q=z[1],Y=b.quantityPrecision,U=b.pricePrecision,j=b.equalQtyPrecision,W=void 0===j?2:j,K=b.minQty,J=H[i],G=H.isFetching,Q=(0,n.useReducer)(y.ih,y.I$),X=Q[0],$=Q[1],ee=X[i],te=(0,n.useReducer)(y.ih,y.I$),re=te[0],ne=te[1],ie=re[i],oe=X.isFetching,ae=E(),le=ae.orderConfirmation,se=ae.positionMode,ue=void 0!==se&&se,ce=S("Open",{defaultValue:"Open"}),de=S("Close",{defaultValue:"Close"}),pe=S("Advanced",{defaultValue:"Advanced"}),fe=D(k,h,i),me=fe.availableBalance,ve=fe.maxBuyAmount,ye=fe.maxSellAmount,xe=fe.orderForm,he=fe.lastPrice,be=fe.markPrice,Pe=fe.buyActivePrice,Te=fe.sellActivePrice,Ze=fe.contractVal,Ce=(0,o.Fs)().isMobile,Ie=xe.tickSize,we=xe.limitStepSize,Me=xe.marketStepSize,Ae=(0,bt.Z)({orderType:i,equalQtyPrecision:W,marketStepSize:Me,limitStepSize:we,tickSize:Ie,unit:g}),Le=Dt((0,M.Z)({qty:ve,orderType:i,lastPrice:he,activationPrice:Pe,unit:g,contractVal:Ze,orderPrice:xe.buyPrice,precision:Ae(!1),triggerPrice:xe.buyTriggerPrice},xe)),Oe=Dt((0,M.Z)({qty:ye,orderType:i,lastPrice:he,activationPrice:Te,unit:g,contractVal:Ze,precision:Ae(!1),orderPrice:xe.sellPrice,triggerPrice:xe.sellTriggerPrice},xe));(0,n.useEffect)((function(){!ue&&B(s.RS.BOTH)}),[ue,B]);var Ee=(0,n.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{price:{value:"0"},quantity:{value:"0"}},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0,o=0,a=0,l=0,u=r||i,c=t.quantity||{},d=c.value,p=void 0===d?"":d,f=Ae(!1);~p.indexOf("%")?(n=(0,O.Jp)(parseFloat(p)/100,Le).toFixed(f,1),o=(0,O.Jp)(parseFloat(p)/100,Oe).toFixed(f,1)):n=o=p;var m,v,y,x,h={quantity:null===t||void 0===t||null===(e=t.quantity)||void 0===e?void 0:e.value,buyQty:n,sellQty:o,buyCont:0,sellCont:0,buyTakeProfit:0,sellTakeProfit:0,buyStopLoss:0,sellStopLoss:0},b=0;u!==s.Jm.STOP_LIMIT&&u!==s.Jm.LIMIT||void 0!==(a=null===t||void 0===t||null===(m=t.price)||void 0===m?void 0:m.value)&&(h.buyPrice=h.sellPrice=a);u!==s.Jm.LIMIT&&u!==s.Jm.MARKET||(h.buyTakeProfit=h.sellTakeProfit=Number((null===t||void 0===t||null===(v=t.takeProfit)||void 0===v?void 0:v.value)||0),h.buyStopLoss=h.sellStopLoss=Number((null===t||void 0===t||null===(y=t.stopLoss)||void 0===y?void 0:y.value)||0));if(u===s.Jm.STOP_LIMIT||u===s.Jm.STOP_MARKET)void 0!==(b=null===t||void 0===t||null===(x=t.triggerPrice)||void 0===x?void 0:x.value)&&(h.buyTriggerPrice=h.sellTriggerPrice=b);else if(u===s.Jm.TRAILING_STOP_MARKET){var P,k;l=null===t||void 0===t||null===(P=t.activationPrice)||void 0===P?void 0:P.value;var T=null===t||void 0===t||null===(k=t.callbackRate)||void 0===k?void 0:k.value;void 0!==l&&(h.buyActivationPrice=h.sellActivationPrice=l),void 0!==T&&(h.buyCallbackRate=h.sellCallbackRate=T)}return g===ke.SW.coin&&(h.buyCont=(0,ht.Z)({orderType:u,contractVal:Ze,orderPrice:a||(null===xe||void 0===xe?void 0:xe.buyPrice)||0,triggerPrice:b||(null===xe||void 0===xe?void 0:xe.buyTriggerPrice)||0,activationPrice:l||(null===xe||void 0===xe?void 0:xe.buyActivationPrice)||0,qty:n,lastPrice:he,markPrice:be,isDelivery:A}),h.coinFuturesMinBuyContQty=1,h.sellCont=(0,ht.Z)({orderType:u,contractVal:Ze,orderPrice:a||(null===xe||void 0===xe?void 0:xe.sellPrice)||0,triggerPrice:b||(null===xe||void 0===xe?void 0:xe.sellTriggerPrice)||0,activationPrice:l||(null===xe||void 0===xe?void 0:xe.sellActivationPrice)||0,qty:o,lastPrice:he,markPrice:be,isDelivery:A})),g===ke.AO.usdt&&(h.buyCont=(0,ht.Z)({orderType:u,contractVal:Ze,orderPrice:a||(null===xe||void 0===xe?void 0:xe.buyPrice)||0,triggerPrice:b||(null===xe||void 0===xe?void 0:xe.buyTriggerPrice)||0,activationPrice:l||(null===xe||void 0===xe?void 0:xe.buyActivationPrice)||0,qty:n,lastPrice:he,markPrice:be,isDelivery:A,precision:f}),h.sellCont=(0,ht.Z)({orderType:u,contractVal:Ze,orderPrice:a||(null===xe||void 0===xe?void 0:xe.sellPrice)||0,triggerPrice:b||(null===xe||void 0===xe?void 0:xe.sellTriggerPrice)||0,activationPrice:l||(null===xe||void 0===xe?void 0:xe.sellActivationPrice)||0,qty:o,lastPrice:he,markPrice:be,isDelivery:A,precision:f}),h.usdtFuturesMinBuyCoinQty=K),h}),[Ae,K,Ze,he,be,A,g,xe,Le,Oe,i]),Fe=(0,n.useCallback)((function(){var e={quantity:{value:"0"},sliderQty:{value:"0"},buyTakeProfit:{value:0},sellTakeProfit:{value:0},buyStopLoss:{value:0},sellStopLoss:{value:0},takeProfit:{value:0},stopLoss:{value:0}};q({type:s.pp.FIELD_CHANGE,payload:{orderType:i,field:e}}),R((0,M.Z)({orderType:i},Ee((0,M.Z)({},e))))}),[R,Ee,i]),Re=(0,n.useCallback)((function(e){c(e),B(e),Fe()}),[Fe,B]);Ot({ticker:b,orderType:i},q,R),Ot({ticker:b,orderType:i},$,R),Ot({ticker:b,orderType:i},ne,R),Et({isLoggedIn:C,quantityPrecision:Y,orderFormPriceQty:I,curQuantity:J.quantity.value,orderType:i,curOrderState:J},q,R,Ee),Et({isLoggedIn:C,quantityPrecision:Y,orderFormPriceQty:I,curQuantity:ee.quantity.value,orderType:i,buyCurOrderState:ee},$,R,Ee),Et({isLoggedIn:C,quantityPrecision:Y,orderFormPriceQty:I,curQuantity:ie.quantity.value,orderType:i,sellCurOrderState:ie},ne,R,Ee);var Ve=(0,n.useMemo)((function(){return{mt:"6px"}}),[]),De=(0,ge.D)((function(e){a(e),R((0,M.Z)((0,M.Z)({},Ee(H[e],e)),{},{orderType:e}))})),Ne=(0,n.useMemo)((function(){return ue?{orderFormHeaderLeftLabel:jn(hn,{openText:ce,closeText:de,positionDirection:u,setPositionDirection:Re}),orderFormHeaderBottomLabel:jn(Cn,{tradeType:t,isDelivery:A,locale:P,getI18n:T,getFutI18n:S,orderType:i,orderTabSx:Ve,orderTabOnChange:De,TransferButton:A?An:wn})}:{orderFormHeaderLeftLabel:jn(Cn,{tradeType:t,isDelivery:A,locale:P,getI18n:T,getFutI18n:S,orderType:i,orderTabSx:Ve,orderTabOnChange:De,TransferButton:A?An:wn}),orderFormHeaderBottomLabel:null}}),[u,ue,Re,ce,de,A,t,P,T,S,i,Ve,De]),Be=Ne.orderFormHeaderLeftLabel,_e=Ne.orderFormHeaderBottomLabel;return(0,n.useMemo)((function(){return jn("div",null,jn(Se.Z,{ref:p}),jn(fn.Z,{symbol:k,base:x,quote:h,ticker:b,ref:f,side:s.g.BUY,marginAsset:_}),!Ce&&jn(pn,{leftLabel:Be,bottomLabel:_e,isDelivery:A,locale:P}),jn(d.Z,{justifyContent:"space-between",alignItems:"stretch",pt:"8px",pb:"8px"},jn(d.Z,null,C?jn(gn,{isDelivery:A,orderType:i,title:pe,dispatch:q,positionMode:ue,positionDirection:u}):null),jn(Nn,{tradeType:t,balance:me,dispatch:q,transfer:!1,base:x,quote:h,getI18n:T,isLoggedIn:C,userAssets:Z,isDelivery:A,getFutI18n:S,pricePrecision:U})),jn(d.Z,{justifyContent:"space-between",flexDirection:"row"},jn(d.Z,{sx:{width:"50%","& form":{width:"95%"}},justifyContent:"flex-start"},jn(Un,{orderType:i,curOrderState:ee,changePositionDirection:Re,quantityPrecision:Y,equalQtyPrecision:W,positionMode:ue,positionDirection:u,curMaxBuyAmount:Le,curMaxSellAmount:Oe,tradeType:t,dispatch:$,isFetching:oe,orderConfirmation:le,orderConfirmRef:f,side:1})),jn(d.Z,{sx:{width:"50%","& form":{width:"95%"}},justifyContent:"flex-end"},jn(Un,{orderType:i,curOrderState:ie,changePositionDirection:Re,quantityPrecision:Y,equalQtyPrecision:W,positionMode:ue,positionDirection:u,curMaxBuyAmount:Le,curMaxSellAmount:Oe,tradeType:t,dispatch:ne,isFetching:G,orderConfirmation:le,orderConfirmRef:f,side:-1}))))}),[P,ie,oe,ee,le,G,Re,Oe,Le,W,Y,_e,Be,k,x,h,b,Ce,ue,u,t,T,S,i,me,U,C,Z,A,pe,_])};const Kn=i().memo(Wn);var Jn=i().createElement;const Gn=function(e){return Jn(jr,Object.assign({prefix:"futures-trade"},e),Jn(ve,null),Jn(Kn,{tradeType:s.xy.FUTURES}),Jn(en,null))};var Qn=i().createElement,Xn=(0,a.ck)("afterLogin",(function(){return Promise.all([r.e(834),r.e(639),r.e(215)]).then(r.bind(r,"UV7S"))})),$n=function(e){var t=e.horizontal,r=void 0!==t&&t,i=(0,o._n)(),a=(0,o.Pc)().isExistFutureAccount,s=(0,l.X)();return(0,n.useMemo)((function(){return i&&!a?Qn(Xn,null):Qn(r?Gn:rn,s)}),[a,i,r,s])};const ei=i().memo($n)},SVjJ:(e,t,r)=>{"use strict";r.d(t,{yf:()=>l,vQ:()=>s,dk:()=>u,PR:()=>c,Yl:()=>d,hp:()=>p,HZ:()=>f,gu:()=>m,PH:()=>v,SI:()=>g,HM:()=>y,Jg:()=>x,x:()=>h,CN:()=>b,IA:()=>P,Fy:()=>k,rb:()=>T,cQ:()=>Z,fj:()=>S,di:()=>C,kj:()=>I,Z$:()=>w,cu:()=>M,GD:()=>A,Tm:()=>L,yX:()=>O,kH:()=>E,Br:()=>F});var n,i=r("gLnL"),o=r("S2LQ"),a=r("tmgI"),l="futures/funding-history",s={USDT:{pricePrecision:2},USDT2:{pricePrecision:8},BNB:{pricePrecision:2},BNB2:{pricePrecision:8},perpetual:{pricePrecision:2},delivery:{pricePrecision:4}},u={UFutures:{precision:2},CFutures:{precision:4}},c={LONG:"LONG",SHORT:"SHORT",BOTH:"BOTH"},d={ISOLATED:"ISOLATED",CROSSED:"CROSSED"},p={BUY:"BUY",SELL:"SELL"},f={CONTRACT_PRICE:"Last Price",MARK_PRICE:"Mark Price"},m={LAST_PRICE:"CONTRACT_PRICE",MARK_PRICE:"MARK_PRICE"},v={LIMIT:"limit",LIMIT_TYPE:"LIMIT",MARKET:"market",MARKET_TYPE:"MARKET",STOP:"stop",STOP_TYPE:"STOP",TAKE_PROFIT:"takeProfit",CLOSE:"close",STOP_LIMIT:"STOP",STOP_MARKET:"STOP_MARKET",TAKE_PROFIT_LIMIT:"TAKE_PROFIT",TAKE_PROFIT_MARKET:"TAKE_PROFIT_MARKET",TRAILING_STOP_MARKET:"TRAILING_STOP_MARKET"},g=(n={},(0,i.Z)(n,v.LIMIT,{enableReduceOnly:!0,enableStopPrice:!1,enablePostOnly:!0,enableTIF:!0,enableTrigger:!1}),(0,i.Z)(n,v.MARKET,{enableReduceOnly:!0,enableStopPrice:!1,enablePostOnly:!1,enableTIF:!1,enableTrigger:!1}),(0,i.Z)(n,v.STOP_LIMIT,{enableReduceOnly:!0,enableStopPrice:!0,enablePostOnly:!1,enableTIF:!0,enableTrigger:!0}),(0,i.Z)(n,v.STOP_MARKET,{enableReduceOnly:!0,enableStopPrice:!0,enablePostOnly:!1,enableTIF:!1,enableTrigger:!0}),(0,i.Z)(n,v.TAKE_PROFIT_LIMIT,{enableReduceOnly:!1,enableStopPrice:!0,enablePostOnly:!1,enableTIF:!0,enableTrigger:!0}),(0,i.Z)(n,v.TAKE_PROFIT_MARKET,{enableReduceOnly:!1,enableStopPrice:!0,enablePostOnly:!1,enableTIF:!1,enableTrigger:!0}),n),y={ONE_WAY:.001,TWO_WAY:5e-4},x=null===o.$g||void 0===o.$g?void 0:o.$g.includes(".binancefuture."),h={FEE_URL:"".concat(o.$g,"/%locale%/fee/futureFee"),DEPOSIT_URL:"".concat(o.$g,"/%locale%/my/wallet/exchange/deposit/crypto/%coin%"),BUYING_URL:"".concat(o.$g,"/%locale%/buy-sell-crypto?source=future&crypto=%crypto%"),BUYING_URL_ELECTRON:"binance://buy-sell-crypto?source=future&crypto=%crypto%",COLLATERAL_URL:"".concat(o.$g,"/%locale%/my/wallet/account/futures"),GRID_TRADING_URL:"".concat(o.$g,"/%locale%/futures/strategy/grid?symbol=%symbol%"),GRID_LEARN_URL:"".concat(o.$g,"/%locale%/futures/strategy/grid?symbol=%symbol%&activeTab=%activeTab%")};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce((function(e,r){return e.replace(new RegExp("%".concat(r,"%"),"g"),t[r])}),e)}var P=1,k={transferAvailable:!x,openAccountAvailable:!x,feeAvailable:!x,enableReduceOnly:!0,enableTakeProfit:!0,enableFundingHistory:!x,leverageInfo:{symbol:"\u2715",defaultVal:20,minVal:1,maxVal:125,avaliableVal:40,minNationalVal:5e4},slideFlag:!0,enabledMonthly:!1,enabledActivity:!x&&!1},T={POST_ONLY:"GTX",TIF:{GTC:"GTC",IOC:"IOC",FOK:"FOK"}},Z=[v.STOP_MARKET,v.TAKE_PROFIT_MARKET],S={OTOCO:"OTOCO",OTO:"OTO"},C="page-mode",I="order_mode",w="chart_mode",M="futures-chartSymbol",A={two:["btcusd_quarter","btcusd_quarter"],three:["btcusd_quarter","btcusd_quarter","btcusd_quarter"],four:["btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter"],six:["btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter"]},L={two:["delivery","delivery"],three:["delivery","delivery","delivery"],four:["delivery","delivery","delivery","delivery"],six:["delivery","delivery","delivery","delivery","delivery","delivery"]},O={futures:"futures",delivery:"delivery"},E="btcusd_quarter",F=function(e){return e.includes(a.Jm.MARKET)&&!function(e){return e===a.Jm.TRAILING_STOP_MARKET}(e)}},JLYw:(e,t,r)=>{"use strict";r.d(t,{$f:()=>be,Gv:()=>G.Gv,Ze:()=>Le.Ze,WA:()=>_e.WA,Ex:()=>h.E,KQ:()=>v.K,he:()=>mt,Wr:()=>Ze,Gf:()=>g.G,qO:()=>$,nL:()=>$e,w2:()=>Fe,d0:()=>Le.d0,ob:()=>Pe,f3:()=>ue,oD:()=>Ne,gN:()=>Oe,_Z:()=>ke,oO:()=>Me,G3:()=>O.G,lZ:()=>nt,aq:()=>te,_k:()=>gt,e5:()=>yt,x:()=>d,yk:()=>G.yk,C3:()=>Re.C,nN:()=>Ve,m8:()=>Ce,kP:()=>E.k,rf:()=>i.r,ho:()=>i.h,H3:()=>Qe,Qd:()=>W,se:()=>l,CE:()=>n.C,ux:()=>lt,IP:()=>vt,_Y:()=>qe,m4:()=>R,F$:()=>J,db:()=>je,$J:()=>M.$,F7:()=>m.F,r8:()=>m.r,QV:()=>Be.Q,x_:()=>xt,ql:()=>kt,tS:()=>Ae,_$:()=>f,$G:()=>G.$G,Gb:()=>Ee,kW:()=>u,u$:()=>ze.u});var n=r("Uo7H"),i=r("50Wb"),o=r("c83x"),a=r("ocsQ");function l(){return(0,o.useSelector)(a.makeMarginType)}var s=r("mKzN");function u(){return(0,o.useSelector)(s.makeUserAsset)}var c=r("4C5t");function d(){return(0,o.useSelector)(c.makeFutureAsset)}var p=r("cMm6");function f(){return(0,o.useSelector)(p.makeTransferAssets)}var m=r("Ev73"),v=r("Kbhs"),g=r("ar6A"),y=r("xDxD");function x(e){return(0,y.iB)()[e]||{}}var h=r("V4sd");var b=r("DtyY"),P=r("xIFI"),k=r("S2LQ"),T=r("L4Ep"),Z=r("PPQ/"),S=r("ZIGC"),C=r("SVjJ"),I=r("t+KN"),w=r("2vt+"),M=r("tmer"),A=r("wiC8"),L=r("kUbO"),O=r("mnJM"),E=r("85D2"),F=r("HI97");function R(e){var t,r,a,l,s,u,c,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USDT",p=arguments.length>2?arguments[2]:void 0,f=arguments.length>3?arguments[3]:void 0,x=(0,O.G)(),R=(0,v.K)(),V=(0,o.useDispatch)(),D=(0,E.k)(),N=D.showKycDialog,B=(0,m.F)(),_=B.positionMode,z=B.unit,H=void 0===z?"cont":z,q=B.priceProtection,Y=void 0===q||q,U=(0,y.j2)()||{},j=U.pricePrecision,W=U.close,K=U.filters,J=void 0===K?[]:K,G=U.contractVal,Q=void 0===G?1:G,X=U.marginAsset,$=U.contractType,ee=void 0===$?"":$,te=(null===(t=C.vQ[d])||void 0===t?void 0:t.pricePrecision)||C.vQ.delivery.pricePrecision,re={PRICE_FILTER:"PRICE_FILTER",LOT_SIZE:"LOT_SIZE",MARKET_LOT_SIZE:"MARKET_LOT_SIZE"},ne=(0,g.G)()[e]||[],ie=(0,L.BJ)(p),oe=(0,o.useSelector)(w.makeOrderForm),ae=oe.positionDirection,le=(null===oe||void 0===oe?void 0:oe[p])||{},se=null===le||void 0===le?void 0:le.timeInForce,ue=null===le||void 0===le?void 0:le.reduceOnly,ce=(0,h.E)(e),de=Number((null===ce||void 0===ce?void 0:ce.price)||W),pe=Number(null===(r=(0,n.C)()[e])||void 0===r?void 0:r.markPrice),fe=null===(a=J.find((function(e){return re.PRICE_FILTER===(null===e||void 0===e?void 0:e.filterType)})))||void 0===a?void 0:a.maxPrice,me=null===(l=J.find((function(e){return re.LOT_SIZE===(null===e||void 0===e?void 0:e.filterType)})))||void 0===l?void 0:l.stepSize,ve=null===(s=J.find((function(e){return re.MARKET_LOT_SIZE===(null===e||void 0===e?void 0:e.filterType)})))||void 0===s?void 0:s.stepSize,ge=null===(u=J.find((function(e){return re.PRICE_FILTER===(null===e||void 0===e?void 0:e.filterType)})))||void 0===u?void 0:u.tickSize,ye=ie?pe:f||(null===le||void 0===le?void 0:le.price),xe=null===le||void 0===le?void 0:le.buyQty,he=null===le||void 0===le?void 0:le.triggerPrice,be=ie?pe:f||(null===le||void 0===le?void 0:le.price),Pe=null===le||void 0===le?void 0:le.sellQty,ke=null===le||void 0===le?void 0:le.triggerPrice,Te=(0,k.l6)(!0),Ze=(0,y.d)(e,Te,{num:1,level:ge,isDelivery:x}),Se=(0,y.H0)(e,Te,{num:1,level:ge,isDelivery:x}),Ce=(0,P.useMemo)((function(){var e;return null===(e=Ze[0])||void 0===e?void 0:e.price}),[Ze]),Ie=(0,P.useMemo)((function(){var e;return null===(e=Se[0])||void 0===e?void 0:e.price}),[Se]),we=(0,M.$)(),Me=(0,I.nn)({positions:we,marginAsset:X}),Ae=null===le||void 0===le?void 0:le.workingType,Le=(0,i.r)(),Oe=Le.curLeverage,Ee=(0,L.zS)({data:Me,isolated:!1,isDelivery:x,contractVal:Q}),Fe=(0,L.wf)({data:Me,isolated:!1,curLeverage:Oe,symbol:e,isDelivery:x,contractVal:Q}),Re=(0,L.sE)({data:Me,curLeverage:Oe,curSymbol:e,isDelivery:x,contractVal:Q}),Ve=Number(null===R||void 0===R||null===(c=R[X])||void 0===c?void 0:c.crossWalletBalance),De=Math.max(Ve+Ee-(Fe+Re),0);le.oLastPrice=de;var Ne,Be,_e,ze,He=0,qe=0,Ye=x?H===T.SW.coin?null===le||void 0===le?void 0:le.buyCont:xe:H===T.AO.usdt?null===le||void 0===le?void 0:le.usdtFuturesBuyCoin:xe,Ue=x?H===T.SW.coin?null===le||void 0===le?void 0:le.sellCont:Pe:H===T.AO.usdt?null===le||void 0===le?void 0:le.usdtFuturesSellCoin:Pe;if(_){var je=(null===we||void 0===we?void 0:we["".concat(e,"_").concat(C.PR.LONG)])||{},We=(null===we||void 0===we?void 0:we["".concat(e,"_").concat(C.PR.SHORT)])||{};if("CLOSE"===ae)He=Math.abs(Number(We.positionSize)||0),qe=Math.abs(Number(je.positionSize)||0);else{var Ke=(0,L.qH)({riskTable:ne,markPrice:pe,availableBalance:De,formType:p,askPrice:Ie,bidPrice:Ce,leverage:Oe,positionMode:_,longPosition:je,shortPosition:We,buyPrice:ye,sellPrice:be,pricePrecision:j,contractVal:Q,isDelivery:x,currentPairPositions:Me,getAllOthersPresentNotional:F.getAllOthersPresentNotional}),Je=Ke.maxBidAmount,Ge=Ke.maxAskAmount;He=Je,qe=Ge}var Qe=(0,L.sk)({leverage:Oe,positionSize:(null===je||void 0===je?void 0:je.positionSize)||0,orderBidAmount:Ye,orderAskAmount:Ue,formType:p,type:"bid",askPrice:Ie,bidPrice:Ce,orderPrice:ye,markPrice:pe,bidNotional:(null===je||void 0===je?void 0:je.bidNotional)||0,askNotional:(null===je||void 0===je?void 0:je.askNotional)||0,positionMode:_,pricePrecision:j,isDelivery:x,contractVal:Q})||{};Ne=Qe.cost,_e=Qe.openLost;var Xe=(0,L.sk)({leverage:Oe,positionSize:(null===We||void 0===We?void 0:We.positionSize)||0,orderBidAmount:Ye,orderAskAmount:Ue,formType:p,type:"ask",askPrice:Ie,bidPrice:Ce,orderPrice:be,markPrice:pe,bidNotional:(null===We||void 0===We?void 0:We.bidNotional)||0,askNotional:(null===We||void 0===We?void 0:We.askNotional)||0,positionMode:_,pricePrecision:j,isDelivery:x,contractVal:Q})||{};Be=Xe.cost,ze=Xe.openLost}else{var $e=(null===we||void 0===we?void 0:we[e])||{},et=(null===$e||void 0===$e?void 0:$e.isolated)||!1,tt=Number(null===$e||void 0===$e?void 0:$e.positionSize)||0,rt=Number(null===$e||void 0===$e?void 0:$e.bidNotional)||0,nt=Number(null===$e||void 0===$e?void 0:$e.askNotional)||0;He=(0,L.qb)({riskTable:ne,positionSize:tt,markPrice:pe,availableBalance:De,type:"bid",formType:p,askPrice:Ie,bidPrice:Ce,orderPrice:ye,leverage:Oe,bidNotional:rt,askNotional:nt,isolated:et,pricePrecision:j,isDelivery:x,contractVal:Q,crossWalletBalance:Ve,currentPairPositions:Me,calculateDeliveryActualMaxAmount:F.calculateActualMaxAmount,getAllOthersPresentNotional:F.getAllOthersPresentNotional}).maxBidAmount||0,qe="0"!==be&&be&&(0,L.qb)({riskTable:ne,positionSize:tt,markPrice:pe,availableBalance:De,type:"ask",formType:p,askPrice:Ie,bidPrice:Ce,orderPrice:be,leverage:Oe,bidNotional:rt,askNotional:nt,isolated:et,pricePrecision:j,isDelivery:x,contractVal:Q,crossWalletBalance:Ve,currentPairPositions:Me,calculateDeliveryActualMaxAmount:F.calculateActualMaxAmount,getAllOthersPresentNotional:F.getAllOthersPresentNotional}).maxAskAmount||0;var it=(0,L.sk)({leverage:Oe,positionSize:tt,orderBidAmount:Ye,orderAskAmount:Ue,formType:p,type:"bid",askPrice:Ie,bidPrice:Ce,orderPrice:ye,markPrice:pe,bidNotional:rt,askNotional:nt,pricePrecision:j,isDelivery:x,contractVal:Q})||{};Ne=it.cost,_e=it.openLost;var ot=(0,L.sk)({leverage:Oe,positionSize:tt,orderBidAmount:Ye,orderAskAmount:Ue,formType:p,type:"ask",askPrice:Ie,bidPrice:Ce,orderPrice:be,markPrice:pe,bidNotional:rt,askNotional:nt,pricePrecision:j,isDelivery:x,contractVal:Q})||{};Be=ot.cost,ze=ot.openLost,ue&&(tt?tt>0?(He=0,qe=tt):(qe=0,He=Math.abs(tt)):qe=He=0)}He<0&&(He=0),qe<0&&(qe=0),Ne<0&&(Ne=0),Be<0&&(Be=0);var at=(0,P.useCallback)((function(t){var r,n,i=p,o=t||le,a=o.side,l=o.price,s=o.triggerPrice,u=o.positionSide,c=o.callbackRate,d=o.activationPrice,f=o.buyCont,m=void 0===f?0:f,v=o.sellCont,g=void 0===v?0:v,y=o.subWorkingType,h=void 0===y?"":y,P=o.buyTakeProfit,k=void 0===P?0:P,I=o.sellTakeProfit,w=void 0===I?0:I,M=o.buyStopLoss,A=void 0===M?0:M,L=o.sellStopLoss,O=k||w,E=A||(void 0===L?0:L),F=Number(s);a===C.hp.BUY?(n=Number(xe),(Ae===C.gu.LAST_PRICE&&F<de||Ae===C.gu.MARK_PRICE&&F<pe)&&(i=i===C.PH.STOP_LIMIT?C.PH.TAKE_PROFIT_LIMIT:C.PH.TAKE_PROFIT_MARKET)):a===C.hp.SELL&&(n=Number(Pe),(Ae===C.gu.LAST_PRICE&&F>de||Ae===C.gu.MARK_PRICE&&F>pe)&&(i=i===C.PH.STOP_LIMIT?C.PH.TAKE_PROFIT_LIMIT:C.PH.TAKE_PROFIT_MARKET));var R={symbol:e,type:i,side:a,positionSide:u},D=(0,b.Z)((0,b.Z)({},R),{},{side:a===C.hp.BUY?C.hp.SELL:C.hp.BUY});p.includes("MARKET")||(R.price="".concat(l));var B=x?"COIN_FUTURES":"USDT_FUTURES";R.quantity=n,H===T.SW.coin&&(R.quantity=Number(a===C.hp.BUY?m:g)),H===T.AO.usdt&&(R.quantity=Number(a===C.hp.BUY?null===le||void 0===le?void 0:le.usdtFuturesBuyCoin:null===le||void 0===le?void 0:le.usdtFuturesSellCoin)),R.timeInForce=se;var z=[(0,b.Z)({strategySubId:1,firstDrivenId:0,secondDrivenId:0,securityType:B},R)];R.leverage=Oe,R.stopPrice=F,R.workingType=Ae,(null===(r=C.SI[i])||void 0===r?void 0:r.enableStopPrice)&&(R=(0,b.Z)((0,b.Z)({},R),{workingType:Ae})),p===C.PH.TRAILING_STOP_MARKET&&(R.activatePrice=d,R.priceRate=c,R.workingType=Ae),u&&u!==C.PR.BOTH||(R.reduceOnly=!!ue);var q={strategyType:C.fj.OTO};if(!ue){var U={strategySubId:2,firstDrivenId:1,secondDrivenId:0,securityType:B,firstDrivenOn:"PARTIALLY_FILLED_OR_FILLED",timeInForce:"GTE_GTC",firstTrigger:"PLACE_ORDER",workingType:h,quantity:R.quantity};if(!_&&(U.reduceOnly=!0),O&&E?(z[1]=(0,b.Z)((0,b.Z)((0,b.Z)({},U),D),{},{secondDrivenId:3,secondDrivenOn:"PARTIALLY_FILLED_OR_FILLED",secondTrigger:"CANCEL_ORDER",stopPrice:O,type:C.PH.TAKE_PROFIT_MARKET}),q.strategyType=C.fj.OTOCO,z[2]=(0,b.Z)((0,b.Z)((0,b.Z)({},U),D),{},{strategySubId:3,secondDrivenId:2,secondDrivenOn:"PARTIALLY_FILLED_OR_FILLED",secondTrigger:"CANCEL_ORDER",stopPrice:E,type:C.PH.STOP_MARKET})):(q.strategyType=C.fj.OTO,O?z[1]=(0,b.Z)((0,b.Z)((0,b.Z)({},U),D),{},{type:C.PH.TAKE_PROFIT_MARKET,stopPrice:O}):E&&(z[1]=(0,b.Z)((0,b.Z)((0,b.Z)({},U),D),{},{type:C.PH.STOP_MARKET,stopPrice:E}))),O||E)return z[1]&&(z[1].priceProtect=Y),z[2]&&(z[2].priceProtect=Y),q.subOrderList=z,V.futuresOrderForm.placeStrategy(q)}return~[C.PH.LIMIT_TYPE,C.PH.MARKET_TYPE].indexOf(p)||(R.priceProtect=Y),H===T.SW.coin&&(R.quantity=Number(a===C.hp.BUY?m:g)),H===T.AO.usdt&&(R.quantity=Number(a===C.hp.BUY?null===le||void 0===le?void 0:le.usdtFuturesBuyCoin:null===le||void 0===le?void 0:le.usdtFuturesSellCoin)),(0,Z.r)({event:"trade",type:x?"delivery":"futures",conversionValue:x?(R.quantity*Q/Oe).toFixed(2):(R.quantity*l/Oe).toFixed(2),isAttempted:1,side:"".concat(a).toLowerCase()}),V.futuresOrderForm.placeOrder((0,b.Z)((0,b.Z)({},R),{},{placeType:"order-form"})).then((function(e){var t=e||{},r=t.code,n=t.message;return-4061===r&&V.preference.getPositionMode(),(0,S.tw)(r)&&N(n),e})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[_,x,Q,H,xe,V.preference,V.futuresOrderForm,p,de,Oe,pe,le,ue,Pe,e,se,Ae,Y,N]),lt=(0,P.useCallback)((function(e){return(0,L.w_)({bidPrice:Ce,askPrice:Ie,orderPrice:ye,formType:p,markPrice:pe,pricePrecision:j,isDelivery:x,type:e})}),[p,Ce,Ie,ye,pe,j,x]);return le.buyCost=(0,A.GW)(Ne,te,!0),le.sellCost=(0,A.GW)(Be,te,!0),le.availableBalance=Math.max(De,0),le.tickSize=(0,A.OR)(ge),le.limitStepSize=(0,A.OR)(me),le.marketStepSize=(0,A.OR)(ve),{availableBalance:Math.max(De,0),maxPrice:fe,buyPrice:ye,sellPrice:be,buyQty:xe,sellQty:Pe,buyStopPrice:he,sellStopPrice:ke,markPrice:(0,A.GW)(pe,j)||0,lastPrice:(0,A.GW)(de,j)||0,oLastPrice:Number(de),timeInForce:se,reduceOnly:ue,bCost:Ne,sCost:Be,buyCost:(0,A.GW)(Ne,te,!0),sellCost:(0,A.GW)(Be,te,!0),buyOpenLost:_e,sellOpenLost:ze,maxBuyAmount:He,maxSellAmount:qe,placeOrder:at,orderForm:le,activePrice:null===le||void 0===le?void 0:le.activationPrice,contractVal:Q,contractType:ee,getAssumePrice:lt}}var V=r("DC7k"),D=r("nxhI"),N=r("jLyH"),B=r("Xt0a"),_=r("8ePF"),z=r("VOLh"),H=C.Fy.leverageInfo,q=function(e){var t,r=e.symbol,n=e.marginAsset,i=e.contractVal,a=e.positionSide,l=e.delta,s=void 0===l?0:l,u=(0,y.z4)(),c=(0,V.Z)(u,1)[0],d=(0,I._g)(r,a),p=(0,o.useSelector)(N.makeFuturesBrackets),f=(0,o.useSelector)(D.makeFuturesBalances),m=(0,o.useSelector)(z.makeLeverage),v=m.curLeverage,g=m.leverageList,x=(void 0===g?{}:g)[r]||H.defaultVal,h=c===r?v:x,P=(0,o.useSelector)(B.makePositions),k=P[d];if(!k)return{};var T=(0,I.nn)({positions:P,marginAsset:n}),Z=k.entryPrice,S=k.markPrice,C=k.isolated,w=k.isolatedWallet,M=(k.positionSize,[(0,b.Z)((0,b.Z)({},k),{},{isolatedWallet:w+s})]),A=(0,_.Ak)(p,M,f,m,r,!0,!1,T),L=((null===A||void 0===A?void 0:A[0])||{}).liquidationPrice,O=void 0===L?0:L,E=function(e){var t=e.markPrice,r=void 0===t?1:t,n=e.entryPrice,i=void 0===n?1:n,o=e.leverage,a=void 0===o?1:o,l=e.position,s=e.bracket,u=e.contractVal,c=void 0===u?0:u;if(0===i||0===r)return 0;var d=l.isolatedWallet,p=void 0===d?0:d,f=l.positionSize,m=void 0===f?0:f,v=(0,_.yh)(a),g=(0,_.SH)(s,l);return Math.max(0,Math.min(p-g,p+m*c*(1/i-1/r)-Math.abs(m)*v*c/r))}({markPrice:S,entryPrice:Z,leverage:h,position:k,bracket:(null===p||void 0===p?void 0:p[c])||[],contractVal:i}),F=T.filter((function(e){return!(null===e||void 0===e?void 0:e.isolated)})),R=T.filter((function(e){return null===e||void 0===e?void 0:e.isolated})),q=(0,_.ot)(F),Y=(0,_.Uy)(F,h,r),U=(0,_.sE)(R,h,r),j=null===f||void 0===f||null===(t=f[n])||void 0===t?void 0:t.crossWalletBalance,W=j+q-(Y+U),K=(0,_.zW)(F,p),J=Math.max(Math.min(W,j-K),0);return(0,b.Z)((0,b.Z)({maxAppend:J,maxRemovable:E},k),{},{isolated:C,isolatedWallet:w,liquidationPrice:O,marginAsset:n})},Y=r("ttLG"),U=C.Fy.leverageInfo,j=function(e){var t,r=e.symbol,n=e.marginAsset,i=e.positionSide,a=e.delta,l=void 0===a?0:a,s=(0,y.z4)(),u=(0,V.Z)(s,1)[0],c=(0,I._g)(r,i),d=(0,o.useSelector)(N.makeFuturesBrackets),p=(0,o.useSelector)(D.makeFuturesBalances),f=(0,o.useSelector)(z.makeLeverage),m=f.curLeverage,v=f.leverageList,g=(void 0===v?{}:v)[r]||U.defaultVal,x=u===r?m:g,h=(0,o.useSelector)(B.makePositions),P=h[c];if(!P)return{};var k=(0,I.nn)({positions:h,marginAsset:n}),T=P.entryPrice,Z=P.markPrice,S=P.isolated,C=P.isolatedWallet,w=[(0,b.Z)((0,b.Z)({},P),{},{isolatedWallet:C+l})],M=(0,Y.Zk)(d,w,p,f,r,!0,!1,k),A=((null===M||void 0===M?void 0:M[0])||{}).liquidationPrice,L=void 0===A?0:A,O=function(e){var t=e.markPrice,r=void 0===t?0:t,n=e.entryPrice,i=e.leverage,o=void 0===i?0:i,a=e.position,l=e.bracket,s=a.isolatedWallet,u=void 0===s?0:s,c=a.positionSize,d=void 0===c?0:c,p=(0,Y.yh)(o),f=(0,Y.SH)(l,a);return Math.max(0,Math.min(u-f,u+d*(r-n)-r*Math.abs(d)*p))}({markPrice:Z,entryPrice:T,leverage:x,position:P,bracket:(null===d||void 0===d?void 0:d[u])||[]}),E=k.filter((function(e){return!(null===e||void 0===e?void 0:e.isolated)})),F=k.filter((function(e){return null===e||void 0===e?void 0:e.isolated})),R=(0,Y.ot)(E),_=(0,Y.Uy)(E,x,r),H=(0,Y.sE)(F,x,r),q=null===p||void 0===p||null===(t=p[n])||void 0===t?void 0:t.crossWalletBalance,j=q+R-(_+H),W=(0,Y.zW)(E,d),K=Math.max(Math.min(j,q-W),0);return(0,b.Z)((0,b.Z)({maxAppend:K,maxRemovable:O},P),{},{isolated:S,isolatedWallet:C,liquidationPrice:L,marginAsset:n})},W=function(e){return(0,O.G)()?q(e):j(e)},K=r("vo1k"),J=function(){var e=(0,y.z4)(),t=(0,V.Z)(e,1)[0],r=(0,O.G)(),n=(0,o.useSelector)(D.makeFuturesBalances),i=(0,o.useSelector)(N.makeFuturesBrackets),a=(0,o.useSelector)(B.makeValidPositionArr),l=(0,o.useSelector)(K.makeOpenOrder).preOrders,s=(0,o.useSelector)(z.makeLeverage)||{},u=(0,m.F)().useLastPrice;return r?(0,_.Ak)(i,a,n,s,t,!0,u,void 0,l):(0,Y.Zk)(i,a,n,s,t,!0,u,void 0,l)},G=r("87Ep"),Q=r("NZqc"),X=r("bGQA");function $(){return{bridge:(0,P.useMemo)((function(){return(0,Q.Ue)((0,Q.xf)(X))}),[])}}var ee=r("Iz4p");function te(){return(0,o.useSelector)(ee.makeFeeTier)}var re=r("VwJU"),ne=r.n(re),ie=r("HSMY"),oe=r("0yN5"),ae=r("V9Nt");function le(){return se.apply(this,arguments)}function se(){return(se=(0,ie.Z)(ne().mark((function e(){var t,r;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,oe.w)();case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){var e=(0,ae.N)(le,[]),t=e.value;return{value:void 0!==t&&t,error:e.error,loading:e.loading}}var ce=r("yCSn"),de=r("iC1K"),pe=r("ScZy"),fe=r("/8CB"),me=pe.futures.chatroom,ve=me.ClientMessage,ge=me.ChatMessages,ye=me.MessageChannel,xe=me.MessageType,he=me.ControlType,be={MessageChannels:ye,MessageTypes:xe,ControlTypes:he};function Pe(){var e,t=(0,o.useDispatch)(),r=(0,P.useRef)(),n=(0,P.useRef)(0),i=(0,P.useRef)([]),a=(0,P.useState)(!1),l=a[0],s=a[1],u=(0,o.useSelector)(fe.makeChat),c=u.token,d=u.userInfo,p=u.messages,f=u.hasOpened,m=u.hasUnread,v=u.showDialog,g=u.lastMsgId,x=u.enableChat,h=u.isChannelMaster,T=(0,y._n)(),Z=d.futureUid,S=(0,y.YT)().setMessageInfo,C=null===(e=p.slice(-1)[0])||void 0===e?void 0:e.id,I=p.length;(0,P.useEffect)((function(){T&&(t.chat.getChatUserInfoData(),t.chat.checkIsChannelMaster("ENGLISH"))}),[t.chat,T]),(0,P.useEffect)((function(){f&&(v?t.chat.updateState({hasUnread:!1,lastMsgId:""}):I>0&&t.chat.updateState({lastMsgId:C}))}),[f,t.chat,v,C,I]),(0,P.useEffect)((function(){g&&!v&&g!==C&&t.chat.updateState({hasUnread:!0})}),[g,v,t.chat,C]),(0,P.useEffect)((function(){d.nickname&&f&&!c&&t.chat.getChatTokenData()}),[t.chat,d.nickname,c,f]);var w=(0,P.useCallback)((function(e){e&&(e.time=Date.now(),e.type===be.MessageTypes.BATCH_HISTORY&&t.chat.updateMessage());var n=ve.encode(e).finish();l&&r.current.send(n)}),[t.chat,l]);return(0,P.useEffect)((function(){var e;c&&!l&&(r.current=(0,de.Z)((e={token:c,uid:Z},"".concat(k.Vl,"/chat-room?").concat(Object.keys(e).map((function(t){return Array.isArray(e[t])?e[t].map((function(e){return"".concat(t,"=").concat(e)})).join("&"):"".concat(t,"=").concat(e[t])})).join("&")))),r.current.open(),r.current.onmessage((function(e){if(e.data){var r=new FileReader;r.onload=function(){var e,o=r.result,a=(null===(e=ge.toObject(ge.decode(new Uint8Array(o))))||void 0===e?void 0:e.messages)||[],l=a.length;if(l>0){var s=function(){var e;(e=i.current).push.apply(e,(0,ce.Z)(a));var r=Date.now();if(!(n.current&&r-n.current<400)){n.current=r;var o=i.current.slice(Math.max(i.current.length-100,0));t.chat.updateMessage({collList:o,controlTypeList:be.ControlTypes}),i.current=[]}};if(1===l){var u=a[0],c=u.type,p=u.controlMessage,f=u.payload;if(c===be.MessageTypes.CTRL){var m=p.controlType,v=p.uid,g=p.liftBanTime,y=p.banReason,x=p.messageId,h=p.view,P=be.ControlTypes,k=P.FORBIDDEN_PERSON,T=P.NO_VIEW,C=P.DELETE_MESSAGE;m===k?v===Z&&t.chat.updateState({userInfo:(0,b.Z)((0,b.Z)({},d),{},{liftBanTime:g,banReason:y})}):m===T?t.chat.updateState({enableChat:!!h}):t.chat.updateMessage({messageId:x,controlType:m||C,controlTypeList:be.ControlTypes})}else c===be.MessageTypes.ERROR?S({message:f}):s()}else s()}},r.readAsArrayBuffer(e.data)}})),r.current.onopen((function(){s("OPEN"===r.current.readyState())})),r.current.onclose((function(e){var n=function(){s(!1),r.current&&r.current.close(1e3),t.chat.getChatTokenData()};e.wasClean?-5===JSON.parse(e.reason).code&&n():n()})))}),[t.chat,c,d,Z,l,S]),{userInfo:d,token:c,messages:p,sendMessage:w,isWsOpen:l,hasUnread:m,showDialog:v,enableChat:x,isChannelMaster:h}}function ke(e){var t,r=(0,y.iB)(),n=(0,y.z4)(),i=(0,V.Z)(n,1)[0];return(null===(t=r[e||i])||void 0===t?void 0:t.contractVal)||1}var Te=r("HnIJ");function Ze(e){var t=e.symbol,r=e.isDelivery,n=(0,ae.N)((function(){return r?(0,Te.u)(t):(0,Te.x)(t)}),[t,r]).value;return void 0===n?t?{}:[]:n}var Se=r("AXW9"),Ce=function(){return(0,o.useSelector)(Se.makeFuturesIndexPrice)||{}},Ie=r("8xbW"),we=r("IFcF");function Me(){var e=(0,G.yk)().getI18n,t=(0,y.j2)();return(0,we.H)(t,e)}function Ae(e){var t=(0,P.useRef)(),r=(0,G.yk)().getI18n,n=(0,y.j2)()||{},i=n.baseAsset,o=n.quoteAsset,a=n.filters,l=void 0===a?[]:a,s=n.contractVal,u=void 0===s?0:s,c=n.triggerProtect,d=void 0===c?0:c,p=Me().shortName,f=(0,Ie.FB)(l,"filterType"),m=(0,P.useCallback)((function(){t.current.showPanel({symbol:p,contractSize:u,triggerProtect:d,filterInfo:f,baseUint:e?r("Cont",{defaultValue:"Cont"}):i,quoteUint:o})}),[i,u,d,f,r,e,o,p]);return{tradingRulesModalRef:t,showTradingRulesModal:m}}var Le=r("xmLA");function Oe(){var e=(0,P.useState)({}),t=e[0],r=e[1];return(0,P.useEffect)((function(){return(0,k.BN)().getContractInfoStream().subscribe((function(e){r(e)}))}),[]),t}var Ee=function(e){var t=(0,o.useSelector)(B.makeValidPositionArr),r=(0,I.L6)(t)[e]||[];return(0,Y.ot)(r)},Fe=function(e){var t=(0,o.useSelector)(B.makeValidPositionArr),r=(0,I.L6)(t)[e]||[];return(0,_.ot)(r)},Re=r("wVdo");r("BkRI");function Ve(){var e=(0,G.yk)().getI18n,t=(0,P.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return De({product:t,objValue:r,getFuturesI18n:e})}),[e]);return(0,P.useMemo)((function(){return{genSymbolDisplay:t}}),[t])}function De(e){var t,r,n,i,o=e.product,a=void 0===o?{}:o,l=e.getFuturesI18n,s=a.pair,u=a.baseAsset,c=a.quoteAsset,d=a.deliveryDate,p=(null===(t=a.contractType)||void 0===t||null===(r=t.toLowerCase())||void 0===r||null===(n=r.split(" "))||void 0===n?void 0:n[0])||"",f=d?new Date(d):null,m=s||"".concat(u).concat(c),v=(0,S.Hn)(a),g=l({perpetual:"inversePerpetual"}[i=p]||i,{defaultValue:p||""}),y=v||!f?"":"".concat("0".concat(f.getMonth()+1).slice(-2)).concat("0".concat(f.getDate()).slice(-2));return{symbol:m,contractTypeI18n:g,deliveryDateFormat:y,fullName:"".concat(m," ").concat(g," ").concat(y),shortName:"".concat(m," ").concat(v?g:y)}}var Ne=function(){return(0,y.j2)().contractType!==k.Yp.PERPETUAL},Be=r("O+dC"),_e=r("jSf8"),ze=r("9+6n"),He=r("emBa"),qe=function(){return(0,o.useSelector)(He.makeOpenGrids)},Ye=r("U4Ym"),Ue=r("qJlb");C.Fy.leverageInfo;function je(e){var t=e.symbol,r=e.tickSize,i=J(),o=(0,n.C)(),a=(0,y.AM)(),l=(0,m.F)().unit,s=(0,Ye.p)(r);return(0,P.useMemo)((function(){return i.filter((function(e){var r=e.symbol,n=e.positionSize,i=Number(n);return r===t&&0!==i})).map((function(e){var t,r=e.id,n=e.entryPrice,i=e.positionSize,u=e.unrealizedPnl,c=e.symbol,d=(a[c]||{}).contractVal,p=void 0===d?0:d,f=null===(t=o[c])||void 0===t?void 0:t.markPrice,m=0;return l===T.SW.cont||l===T.AO.coin?m=Number(i):l===T.SW.coin?m=(0,F.unitChangeCoinQty)({quantity:Number(i),contractVal:p,price:n||f,precision:s}):l===T.AO.usdt&&(m=function(e){var t=e.quantity,r=e.price,n=e.func,i=void 0===n?Ue.mD:n,o=e.precision;return i(t*r,void 0===o?2:o,e.format)}({quantity:Number(i),price:n||f,precision:s})),{id:r,price:n,quantity:m,isBuy:m>0,PNL:Number(u.toFixed(2))}}))}),[i,t,l,o,a,s])}var We=r("E+oP"),Ke=r.n(We),Je=r("XL6Z"),Ge=r("Jx1D");function Qe(e){var t=e.symbol,r=e.tickSize,n=((0,Je.s)((0,k.l6)(!0))||{}).tickers,i=void 0===n?{}:n,o=(0,Ge.W)().delOpenOrders,a=(0,y.E)().preOrders,l=(0,y.AM)(),s=(0,y.YT)().setMessageInfo,u=(0,m.F)().unit,c=(0,Ye.p)(r),d=(0,P.useCallback)(function(){var e=(0,ie.Z)(ne().mark((function e(t){var r,n,i;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ke()(t)){e.next=7;break}return e.next=3,o(t);case 3:r=e.sent,n=r.success,i=r.message,n||s(new Error(i));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,s]);return(0,P.useMemo)((function(){var e=[C.PH.LIMIT_TYPE,C.PH.TAKE_PROFIT_LIMIT,C.PH.TAKE_PROFIT_MARKET,C.PH.STOP_LIMIT,C.PH.STOP_MARKET];return a.filter((function(r){var n=r.symbol,i=r.type;return n===t&&e.includes(i)})).map((function(e){var t=e.orderId,r=e.origQty,n=e.type,o=e.price,a=e.stopPrice,s=e.symbol,p=e.side,f=e.activatePrice,m=Number(r),v=Number(a)>0?a:o,g="BUY"===p,y="";if(n===C.PH.STOP_LIMIT?y="Stop Limit: ".concat((0,A.mD)(Number(o),c)," Trigger ").concat(g?">=":"<="," ").concat((0,A.mD)(Number(a),c)):n===C.PH.STOP_MARKET?y="Stop Market Trigger ".concat(g?">=":"<="," ").concat((0,A.mD)(Number(a),c)):n===C.PH.TAKE_PROFIT_LIMIT?y="Take Profit Limit: ".concat((0,A.mD)(Number(o),c)," Trigger ").concat(g?"<=":">="," ").concat((0,A.mD)(Number(a),c)):n===C.PH.TAKE_PROFIT_MARKET?y="Take Profit Market: Trigger ".concat(g?"<=":">="," ").concat((0,A.mD)(Number(a),c)):n===C.PH.LIMIT_TYPE&&(y="Limit: ".concat((0,A.mD)(Number(o),c))),u===T.SW.coin){var x=(l[s]||{}).contractVal,h=void 0===x?0:x,b=(i[s]||{}).lastPrice,P=C.cQ.includes(n)?a:n===C.PH.TRAILING_STOP_MARKET?f||b:o;m=(0,F.unitChangeCoinQty)({quantity:r,contractVal:h,price:P,precision:c})}if(u===T.AO.usdt){var k=(i[s]||{}).lastPrice,Z=C.cQ.includes(n)?a:n===C.PH.TRAILING_STOP_MARKET?f||k:o;m=(0,_e.WA)({quantity:r,price:Z,precision:c})}return{orderId:t,quantity:m,price:v,isBuy:g,text:y,symbol:s,stopPrice:a,cancel:function(){return d(e)}}}))}),[a,t,d,l,u,i,c])}var Xe=r("tmgI");function $e(e){var t=e.orderType,r=e.activePrice,n=e.price,i=!1,o=!1;if(t===Xe.Jm.TRAILING_STOP_MARKET){var a=Number(r);r&&(a<n?o=!0:a>n&&(i=!0))}return{buyDisabled:i,sellDisabled:o}}var et=r("U9Tm"),tt=r("YJ5r"),rt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r?e.map((function(e){var n=Object.values(t).find((function(t){var r=t.pair,n=t.contractType;if("string"===typeof e&&e.indexOf("-")){var i=e.split("-"),o=(0,V.Z)(i,2),a=o[0],l=o[1];return a===r&&l===n}return!1}));if(n)return(0,b.Z)((0,b.Z)({},n),{},{delivery:r})})).filter((function(e){return e})):e.filter((function(e){return Object.keys(t).includes(e)})).map((function(e){return(0,b.Z)((0,b.Z)({},t[e]||{}),{},{delivery:r})}))},nt=function(){var e=(0,o.useSelector)(tt.makeFuturesFavorites),t=(0,et.Pv)(),r=t.delivery,n=t.perpetual,i=rt(e,n,!1),a=rt(e,r,!0);return i.concat(a)},it=r("a3OK"),ot=r("pA3o"),at=r("JHD1"),lt=function(){var e=(0,o.useDispatch)(),t=(0,it._n)(),r=(0,ot.ke)();return{favorites:(0,o.useSelector)(r?tt.makeFuturesFavorites:at.makeMarketFavorites)||[],setFavorite:(0,P.useCallback)(function(){var n=(0,ie.Z)(ne().mark((function n(i,o){var a,l,s,u=arguments;return ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=u.length>2&&void 0!==u[2]?u[2]:[],l=[],s="",o>-1?(l=[].concat((0,ce.Z)(a.slice(0,o)),(0,ce.Z)(a.slice(o+1))),s="del"):(l=[].concat((0,ce.Z)(a),[i]),s="add"),r?e.futureMarket.oprFuturesFavorite({symbol:i,type:s,values:l,isLoggedIn:t}):e.market.oprFavorite({symbol:i,type:s,values:l,isLoggedIn:t});case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[e.futureMarket,e.market,r,t])}},st=r("2M4l"),ut=r("LVI2"),ct=r("SmlC"),dt=r("juB9"),pt="PRICE_FILTER";st.Z.updateUserSettings;function ft(e,t){e({type:dt.z,payload:{isFetching:t}})}function mt(){var e,t=(0,O.G)(),r=(0,y.z4)(),n=(0,V.Z)(r,1)[0],i=(x(n)||{}).filters,o=null===(e=(void 0===i?[]:i).find((function(e){return pt===(null===e||void 0===e?void 0:e.filterType)})))||void 0===e?void 0:e.tickSize,a=(0,k.l6)(!0),l=(0,y.d)(n,a,{num:1,level:o,isDelivery:t}),s=(0,y.H0)(n,a,{num:1,level:o,isDelivery:t});return{bidPrice:(0,P.useMemo)((function(){var e;return null===(e=l[0])||void 0===e?void 0:e.price}),[l]),askPrice:(0,P.useMemo)((function(){var e;return null===(e=s[0])||void 0===e?void 0:e.price}),[s])}}var vt=function(e){var t=e.placeOrder,r=e.dispatch,n=e.getFutI18n,i=(0,y.YT)().setMessageInfo,o=(0,E.k)().showKycDialog;return(0,P.useCallback)(function(){var e=(0,ie.Z)(ne().mark((function e(a){var l,s,u,c,d,p,f,m,v;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ft(r,!0),l=a.side,e.next=4,t(a);case 4:if(s=e.sent,u=s.success,c=s.data,d=s.message,p=s.code,m=Xe.Jm.MARKET.replace(/_/g,"-"),f=u&&c?{title:n("order-submitted",{defaultValue:""}),text:n("".concat(m,"-").concat(l,"Success"),{defaultValue:""})||n("".concat(m,"Form-").concat(l,"Success"),{defaultValue:""})||n("".concat(m,"LimitForm-").concat(l,"Success"),{defaultValue:""})}:{title:n("order-rejected",{defaultValue:""}),text:(null===c||void 0===c||null===(v=c.error)||void 0===v?void 0:v.message)||d||n("".concat(m,"-").concat(l,"Failure"),{defaultValue:""})||n("".concat(m,"Form-").concat(l,"Failure"),{defaultValue:""})||n("".concat(m,"LimitForm-").concat(l,"Failure"),{defaultValue:""})},!(0,S.tw)(p,d)){e.next=15;break}return o(d),ft(r,!1),e.abrupt("return");case 15:i({header:f.title,message:f.text,variant:u?"success":"error"}),ft(r,!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,i,n,t,o])};function gt(){var e=(0,o.useDispatch)(),t=(0,E.k)().showKycDialog;return{placeOrderReducer:function(e,t){var r=t.type,n=t.payload;return r===dt.z?(0,b.Z)((0,b.Z)({},e),n):(0,b.Z)({},e)},useMarketFormSubmit:function(e,t){var r,i=e.isFetching,o=e.orderConfirmation,a=e.positionDirection,l=e.confirmTitle,s=e.quantity,u=e.placeOrder,c=e.side,d=(0,G.yk)().getI18n,p=Xe.Jm.MARKET,f=(0,y.z4)(),v=(0,V.Z)(f,1)[0],g=mt(),h=g.bidPrice,b=g.askPrice,k=x(v)||{},Z=(0,O.G)(),S=(0,y._n)(),C=(0,m.F)().unit,I=void 0===C?"":C,w=Number(null===(r=(0,n.C)()[v])||void 0===r?void 0:r.markPrice),M=d("Cont"),A=k.pricePrecision,E=k.contractVal,F=void 0===E?1:E,R=k.contractType,D=void 0===R?"":R,N=(0,P.useCallback)((function(e){return(0,L.w_)({bidPrice:h,askPrice:b,formType:p,markPrice:w,pricePrecision:A,isDelivery:Z,type:e})}),[p,h,b,w,A,Z]);return(0,P.useCallback)((function(e){if(S&&!i){var r=e.buyOpenLost,n=e.sellOpenLost,d=e.bCost,f=e.sCost,m=e.buyCost,v=e.sellCost,g=e.orderForm,y=g.minContQty,x=g.buyCont,h=void 0===x?0:x,b=g.sellCont,P=void 0===b?0:b,k=1===c,C=Number(s),A=Number(k?h:P);C>0&&(I!==T.SW.coin||Number(A||0)>=Number(y))&&(I!==T.AO.usdt||Number(A||0)>=Number(y))&&(!(0,ut.tq)()&&o[p]?t.current.showOrderConfirmPanel({orderType:p,placeOrder:u,orderForm:g,bCost:d,sCost:f,buyCost:m,sellCost:v,positionDirection:a,title:l,isDelivery:Z,Cont:M,contractType:D,markPrice:w,getAssumePrice:N,buyOpenLost:r,sellOpenLost:n,contractVal:F,side:c}):u(g))}}),[c,u,s,N,F,w,D,I,Z,M,S,i,p,o,t,a,l])},placeMarketOrder:(0,P.useCallback)((function(r){var n=r.symbol,i=r.quantity,o=r.leverage,a=r.positionSide,l=r.side,s=r.stopPrice,u={symbol:n,type:Xe.Jm.MARKET,side:l,positionSide:a,leverage:o,quantity:i,stopPrice:s,placeType:"flash-order"};return e.futuresOrderForm.placeOrder(u).then((function(r){var n=r||{},i=n.code,o=n.message;return-4061===i&&e.preference.getPositionMode(),(0,S.tw)(i)&&t(o),r})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[e.preference,e.futuresOrderForm,t])}}function yt(){var e=(0,o.useDispatch)(),t=(0,m.F)().showFlashOrder,r=(0,O.G)(),n=(0,o.useSelector)(r?ct.makeCoinFuturesLayoutDetail:ct.makeUSDTFuturesLayoutDetail),i=(0,P.useCallback)((function(t){localStorage.setItem(dt.w,t),e.preference.updateState({showFlashOrder:t})}),[e.preference,r]);return(0,P.useEffect)((function(){var e=JSON.parse(localStorage.getItem(dt.w));null===e&&(e=!0),i(e)}),[i]),(0,P.useEffect)((function(){}),[e.preference,n]),[t,i]}function xt(e){var t=(0,G.yk)().getI18n,r=t("buyLong",{defaultValue:"Buy/Long"}),n=t("sellShort",{defaultValue:"Sell/Short"}),i=t("OpenLong",{defaultValue:"Open Long"}),o=t("OpenShort",{defaultValue:"Open Short"}),a=t("CloseShort",{defaultValue:"Close Short"}),l=t("CloseLong",{defaultValue:"Close Long"}),s=(0,m.F)().positionMode,u=void 0!==s&&s,c=u&&e?e:Xe.RS.BOTH;return{BuyText:u?c===Xe.RS.OPEN?i:a:r,SellText:u?c===Xe.RS.OPEN?o:l:n}}var ht=r("wz6d"),bt=r("XD0T"),Pt=r("8qum");function kt(e){var t,r,n=e.quantity,i=e.orderFormProps,o=i.unit,a=void 0===o?"cont":o,l=i.base,s=i.quote,u=i.ticker,c=i.symbol,d=i.cont,p=i.isDelivery,f=void 0!==p&&p,m=i.marginAsset,v=(0,G.yk)().getI18n,g=Xe.Jm.MARKET,y=u.quantityPrecision,x=u.equalQtyPrecision,h=void 0===x?2:x,b=u.minQty,P=u.tickSizePrecision,k=y,Z="",S=v("entry-size",{defaultValue:"Enter Size"}),C=(0,Pt.Z)(c,s,g),I=C.lastPrice,w=C.contractVal,M=I,A=n;return f?a===T.SW.coin?(t=l,k=h,Number(n)&&(r=1,Z=(A=(0,bt.Z)({orderType:Xe.Jm.MARKET,contractVal:w,qty:n,lastPrice:I,isDelivery:f}))<1?M?"".concat(v("mininumQtyPrefix",{defaultValue:"Minimum Qty is"},"futures-trade")," ").concat((0,ht.Jp)(w/M).toFixed(k,0)," ").concat(l," \u2248 1 ").concat(d):"":" \u2248 ".concat(A||0," ").concat(d))):(t=d,S="1 ".concat(v("Cont",{defaultValue:"Cont"})," = ").concat(w," ").concat(s)):a===T.AO.usdt?(t=m,k=P,Number(n)&&(r=b,Z=(A=(0,bt.Z)({orderType:Xe.Jm.MARKET,contractVal:w,qty:n,lastPrice:I,isDelivery:f,precision:y}))<b?M?"".concat(v("mininumQtyPrefix",{defaultValue:"Minimum Qty is"},"futures-trade")," ").concat((0,ht.Jp)(b*M).toFixed(k,0)," ").concat(m," \u2248 ").concat(b," ").concat(l):"":" \u2248 ".concat(A||0," ").concat(l),M||(Z=""))):(t=l,k=y),{tradeCont:A,cUnit:t,precision:k,helperText:Z,ticker:u,minContQty:r,placeholder:S}}},V4sd:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var n=r("MEJg"),i=r("S2LQ");function o(e){return(0,n.y)({symbol:e,stream:(0,i.l6)(!0),limit:1}).trades[0]||{}}},Kbhs:(e,t,r)=>{"use strict";r.d(t,{K:()=>o});var n=r("c83x"),i=r("nxhI");function o(){return(0,n.useSelector)(i.makeBalance)}},ar6A:(e,t,r)=>{"use strict";r.d(t,{G:()=>o});var n=r("c83x"),i=r("jLyH");function o(){return(0,n.useSelector)(i.makeFuturesBrackets)}},xmLA:(e,t,r)=>{"use strict";r.d(t,{d0:()=>d,Ze:()=>p,co:()=>f});var n=r("xIFI"),i=r("c83x"),o=r("rDOG"),a=r("edwA"),l=r("S2LQ"),s=r("U9Tm"),u=r("FGdN"),c=r("SVjJ"),d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,i.useDispatch)(),r=(0,o.useCurrentRoute)(),l=r.pathname,d=r.search,f=(0,s.AM)(),m=(0,a.C)(),v=(0,n.useCallback)((function(r){var n=r.isBlank,i=void 0!==n&&n,o=r.stateSymbol,a=r.isDeliveryColumn,s=void 0===a?e:a,v=(r.electronUpdateTabs,r.resPathList),g=void 0===v?[]:v;if(g.length<1){var y=p(o,f,s);g=[s?c.yX.delivery:c.yX.futures,y]}var x=l.split("/"),h=x.slice(0,x.length-g.length).concat(g),b=o||g[g.length-1],P="".concat(h.join("/")).concat(d),k=f[b]||f[b.split("_").join("")];k.contractType;i?window.location.href=P:(t.pageStore.updateSymbol((0,u.Y)(b,k)),t.products.updateCurrentProduct(k),m(P))}),[t.pageStore,t.products,m,e,l,f,d]);return v},p=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="";if(r){var i=t[e]||{},o=i.pair,a=i.contractType;n=[o,l.Yp[a]].map((function(e){return null===e||void 0===e?void 0:e.toLowerCase()})).join("_")}else{var s=t[e]||{},u=s.pair,c=s.contractType,d=s.symbolDisplay;n=c===l.Yp.PERPETUAL?d.split("/").join("_"):[u,l.Yp[c]].map((function(e){return null===e||void 0===e?void 0:e.toLowerCase()})).join("_")}return n},f=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="",i=r?c.yX.delivery:c.yX.futures;if(r){var o=t.delivery[e]||{},a=o.pair,s=o.contractType;n=[a,l.Yp[s]].map((function(e){return null===e||void 0===e?void 0:e.toLowerCase()})).join("_")}else{var u=t.perpetual[e]||{},d=u.pair,p=u.contractType,f=u.symbolDisplay;n=p===l.Yp.PERPETUAL?f.split("/").join("_"):[d,l.Yp[p]].map((function(e){return null===e||void 0===e?void 0:e.toLowerCase()})).join("_")}return[i,n]}},PfXC:(e,t,r)=>{"use strict";r.d(t,{U:()=>h});var n=r("gLnL"),i=r("DtyY"),o=r("DC7k"),a=r("S2LQ"),l=r("xDxD"),s=r("8xbW"),u=r("QkVN"),c=r.n(u),d=r("xIFI"),p=r("c83x"),f=r("BVRH"),m=r("L4Ep"),v=r("OB9n"),g=r("1Y5Q"),y=r("t+KN"),x=(0,a.l6)(!0),h=function(){var e=(0,l._n)(),t=(0,l.z4)(),r=(0,o.Z)(t,1)[0],u=(0,p.useDispatch)(),h=(0,d.useRef)({}),b=r.split("_"),P=(0,o.Z)(b,1)[0],k=void 0===P?"":P,T=(0,g.Z)((function(){return u.position.updatePosition(h.current)}),300).run;(0,l.mL)(),(0,v.M)(),(0,d.useEffect)((function(){u.userCenter.queryCurrency(),u.products.queryFuturesProduct(!0),u.bracket.getBrackets("",!0),u.symbolConfigInfo.querySymbolConfigInfo()}),[u.userCenter,u.bracket,u.products,u.symbolConfigInfo]),(0,d.useEffect)((function(){(0,a.RU)().getMarkPriceStream(r).subscribe((function(){}))}),[]),(0,d.useEffect)((function(){return x.getIndexPriceStream(k).subscribe((function(e){u.indexPrice.updateStateImmutable((0,n.Z)({},r,(0,i.Z)((0,i.Z)({},e[k]),{},{symbol:r})))}))}),[u.indexPrice,k,r]),(0,d.useEffect)((function(){e&&(u.leverage.getUserLeverageData(r),u.position.queryPosition({symbol:r}),u.preference.getOrderConfirmation(),u.preference.getUnit({data:{unit:m.SW.cont}}),u.preference.getFuturesPnlBasis(),u.preference.getPositionMode(),u.preference.getPriceProtection(f.x),u.balance.getBalance(),u.futureMarket.queryFuturesFavorites(),u.feeTier.getFeeTier({name:k}))}),[r,k,e,u.preference,u.balance,u.leverage,u.position,u.futureMarket,u.feeTier]),(0,d.useEffect)((function(){return x.getMarkPriceAllStream().subscribe((function(t){if(u.markPrice.updateStateImmutable(t),e){var r=Object.values(t).map((function(e){return{symbol:null===e||void 0===e?void 0:e.symbol,markPrice:null===e||void 0===e?void 0:e.markPrice}})),n=(0,y.kh)(r);h.current=c()({},h.current,n),T()}}))})),(0,d.useEffect)((function(){if(e)return x.getStreamTickers().subscribe((function(e){var t=(0,y.kh)(Object.values(e));h.current=c()({},h.current,t),T()}))})),(0,d.useEffect)((function(){if(e)return x.getUserAssetsStream().subscribe((function(e){var t=e.balances,r=e.positions,n=(0,s.FB)(t,"asset"),o=Object.values(r).reduce((function(e,t){var r=t.symbol,n=void 0===r?"":r,o=t.positionSide;return e[(0,y._g)(n,o)]=(0,i.Z)((0,i.Z)({},t),{},{pushTime:Date.now()}),e}),{});u.balance.mergeState(n),h.current=c()({},h.current,o),T()}))}))}},mnJM:(e,t,r)=>{"use strict";r.d(t,{G:()=>i});var n=r("rDOG");function i(){return(0,n.useCurrentRoute)().pathname.includes("delivery")}},"1YV2":(e,t,r)=>{"use strict";r.d(t,{p:()=>c});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("xIFI"),l=r("c83x"),s=r("nXUx"),u=r("5Xb1"),c=function(){var e=(0,l.useDispatch)();(0,a.useEffect)((function(){function t(){return(t=(0,o.Z)(i().mark((function t(){var r,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.Y7)();case 2:r=t.sent,n=(0,u.tj)(r,["BUSDUSDT"]),e.products.updateState({stableTicker:n});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.products])}},"evD+":(e,t,r)=>{"use strict";r.d(t,{D:()=>S,n:()=>C});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("DtyY"),l=r("DC7k"),s=r("S2LQ"),u=r("xDxD"),c=r("8xbW"),d=r("QkVN"),p=r.n(d),f=r("xIFI"),m=r("c83x"),v=r("IFtV"),g=r("M5Nd"),y=r("U4qo"),x=r("L4Ep"),h=r("OB9n"),b=r("n5+X"),P=r("JLYw"),k=r("1Y5Q"),T=r("t+KN"),Z=(0,s.l6)(!0),S=function(){var e=(0,u._n)(),t=(0,u.z4)(),r=(0,l.Z)(t,1)[0],n=(0,m.useDispatch)(),i=(0,P.yk)().getI18n,o=(0,f.useRef)({}),s=(0,k.Z)((function(){return n.position.updatePosition(o.current)}),300).run;(0,u.mL)(),(0,h.M)(),(0,f.useEffect)((function(){n.userCenter.queryCurrency(),n.products.queryFuturesProduct(),n.bracket.getBrackets(),n.symbolConfigInfo.querySymbolConfigInfo()}),[n.userCenter,n.bracket,n.products,n.symbolConfigInfo]),(0,f.useEffect)((function(){e&&(n.leverage.getUserLeverageData(r),n.position.queryPosition({symbol:r}),n.preference.getOrderConfirmation(),n.preference.getUnit({data:{unit:x.AO.coin}}),n.preference.getFuturesPnlBasis(),n.preference.getPositionMode(),n.preference.getPriceProtection(y.xK),n.balance.getBalance(),n.futureMarket.queryFuturesFavorites(),n.feeTier.getFeeTier({name:r}),n.grid.queryOpenGrids({}))}),[r,e,n.preference,n.balance,n.leverage,n.position,n.futureMarket,n.feeTier,n.grid]),(0,f.useEffect)((function(){Z.getMarkPriceStream(r).subscribe((function(){}))}),[]),(0,f.useEffect)((function(){return Z.getMarkPriceAllStream().subscribe((function(t){if(n.markPrice.updateStateImmutable(t),n.indexPrice.updateStateImmutable(t),e){var r=Object.values(t).map((function(e){return{symbol:null===e||void 0===e?void 0:e.symbol,markPrice:null===e||void 0===e?void 0:e.markPrice}})),i=(0,T.kh)(r);o.current=p()({},o.current,i),s()}}))})),(0,f.useEffect)((function(){if(e)return Z.getStreamTickers().subscribe((function(e){var t=(0,T.kh)(Object.values(e));o.current=p()({},o.current,t),s()}))})),(0,f.useEffect)((function(){if(e)return Z.getUserAssetsStream().subscribe((function(e){var t=e.balances,r=e.positions,i=(0,c.FB)(t,"asset"),l=Object.values(r).reduce((function(e,t){var r=t.symbol,n=t.positionSide;return e[(0,T._g)(r,n)]=(0,a.Z)((0,a.Z)({},t),{},{pushTime:Date.now()}),e}),{});n.balance.mergeState(i),o.current=p()({},o.current,l),s()}))})),(0,f.useEffect)((function(){if(e)return Z.getStrategyStream().subscribe((function(e){var t=e.streategy,r=void 0===t?{}:t,o=r.code,a=r.symbol;8003===o&&b.T.emit(b.F.NOTIFICATION,i("grid-canceled",{defaultValue:"Manually placing or cancelling an order of {{symbol}} has stopped the grid.",symbol:a}),{variant:"warning"}),n.grid.queryOpenGrids({})}))}))},C=function(){var e=(0,u._n)(),t=(0,m.useDispatch)();(0,f.useEffect)((function(){function r(){return(r=(0,o.Z)(i().mark((function e(){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.pU)();case 2:r=e.sent,n={orders:r,loading:!1},t.orders.mergeState({type:"openOrder.init",payload:n});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e&&g.C&&function(){r.apply(this,arguments)}()}),[e,t.orders])}},"87Ep":(e,t,r)=>{"use strict";r.d(t,{yk:()=>l,Gv:()=>s,$G:()=>u});var n=r("9Koi"),i=r("QsMz"),o="futures-trade",a="futures-ui",l=function(){return(0,i.Z)(o,a)},s=function(e){return"".concat(o,"-").concat(e)},u=function(){return(0,n.$)(a)}},wVdo:(e,t,r)=>{"use strict";r.d(t,{C:()=>a});var n=r("c83x"),i=r("S2LQ"),o=r("mzgO"),a=function(){return(0,n.useSelector)(o.makeLayout)||i.$f}},"85D2":(e,t,r)=>{"use strict";r.d(t,{k:()=>a});var n=r("xIFI"),i=r("OhCA"),o=r("xDxD");function a(){var e=(0,o.Fg)().isLight,t=(0,o.KL)().getI18n,r=(0,n.useCallback)((function(r){i.Z.show({isLight:e,message:r,okText:t("dialog-i-understand")})}),[t,e]);return(0,n.useMemo)((function(){return{showKycDialog:r}}),[r])}},"50Wb":(e,t,r)=>{"use strict";r.d(t,{r:()=>s,h:()=>u});var n=r("c83x"),i=r("SVjJ"),o=r("VOLh"),a=r("kUbO"),l=i.Fy.leverageInfo;function s(){return(0,n.useSelector)(o.makeLeverage)}function u(e){var t,r,n=e.symbol,i=e.brackets,o=e.positions,u=s().curLeverage,c=(null===i||void 0===i?void 0:i[n])||[],d=Math.abs((null===o||void 0===o||null===(t=o[n])||void 0===t?void 0:t.notionalValue)||0);return{leverageData:{curLeverage:u||l.defaultVal,minVal:l.minVal,maxVal:(null===c||void 0===c||null===(r=c[0])||void 0===r?void 0:r.maxOpenPosLeverage)||l.maxVal,userNotionalValue:d,userCurLeverage:(0,a.IK)(c,d)},findLeverageByLevel:function(e){return(0,a._F)(c,e)}}}},W0IN:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r("SVjJ"),i=r("JLYw"),o=n.dk.UFutures.precision,a=n.dk.CFutures.precision;function l(){return(0,i.G3)()?a:o}},Uo7H:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var n=r("c83x"),i=r("9eSZ"),o=function(){return(0,n.useSelector)(i.makeFuturesMarkPrice)||{}}},V06R:(e,t,r)=>{"use strict";r.d(t,{p:()=>u});var n=r("xIFI"),i=r("c83x"),o=r("S2LQ"),a=r("xDxD"),l=r("OB9n"),s=(0,o.l6)(!0),u=function(){var e=(0,a._n)(),t=(0,i.useDispatch)();(0,a.mL)(),(0,l.M)(),(0,n.useEffect)((function(){t.userCenter.queryCurrency(),t.symbolConfigInfo.querySymbolConfigInfo()}),[t.userCenter,t.symbolConfigInfo]),(0,n.useEffect)((function(){e&&t.futureMarket.queryFuturesFavorites()}),[e,t.preference,t.leverage,t.futureMarket,t.feeTier]),(0,n.useEffect)((function(){return s.getMarkPriceAllStream().subscribe((function(e){t.futuresMarkPrice.updateStateImmutable(e),t.deliveryMarkPrice.updateStateImmutable(e),t.futuresIndexPrice.updateStateImmutable(e),t.deliveryIndexPrice.updateStateImmutable(e)}))}))}},NDPa:(e,t,r)=>{"use strict";r.d(t,{X:()=>b});var n=r("DtyY"),i=r("DC7k"),o=r("xIFI"),a=r.n(o),l=r("c83x"),s=r("wz6d"),u=r("xDxD"),c=r("S2LQ"),d=r("W2MH"),p=r("RMtB"),f=r("dZ3E"),m=r("U4Ym"),v=r("JLYw"),g=r("8qum"),y=r("SVjJ"),x=r("jLyH"),h=a().createElement,b=function(){var e=(0,u._n)(),t=(0,u.tZ)(),r=(0,v.yk)().getI18n,a=(0,l.useDispatch)(),b=(0,u.Pc)(),P=(0,u.z4)(),k=(0,i.Z)(P,2),T=k[0],Z=k[1],S=(0,v.G3)(),C=(0,u.Li)(),I=(0,u.j2)(),w=I.contractType,M=void 0===w?"":w,A=I.marginAsset,L=(0,i.Z)(Z,2),O=L[0],E=L[1],F=(0,o.useMemo)((function(){var e=(0,m.p)(I.minQty),t=(0,m.p)(I.tickSize),r=Math.min(e+t,8),i=(0,s.Jp)(I.minQty,I.tickSize).toFixed(r);return(0,n.Z)((0,n.Z)({},I),{},{lastPrice:I.close,minTotal:i,minTotalPrecision:r,minQtyPrecision:e,tickSizePrecision:t,pricePrecision:S?y.vQ.delivery.pricePrecision:I.pricePrecision})}),[S,I]),R=(0,v.rf)().curLeverage,V=(0,v.se)().marginType,D=(0,v.kW)(),N=(0,v.x)(),B=(0,v._$)(),_=(0,v.$J)(),z=(0,l.useSelector)(x.makeFuturesBrackets),H=(0,u.FJ)(),q=(0,v.F7)().unit,Y=void 0===q?"cont":q,U=(0,o.useCallback)((function(e){a.preference.changeOrderConfirmation(e)}),[a.preference]),j=(0,o.useCallback)((function(e){return a.preference.changePositionMode({dualSidePosition:e})}),[a.preference]),W=(0,o.useCallback)((function(e){a.futuresOrderForm.changePositionDirection(e)}),[a.futuresOrderForm]),K=(0,o.useCallback)((function(e){return a.marginType.changeMarginType({marginType:e,symbol:T})}),[a.marginType,T]),J=(0,o.useCallback)((function(e){var t=e.leverage;a.leverage.updateLeverage({symbol:T,leverage:t})}),[a.leverage,T]),G=(0,u.E)().preOrders,Q=(0,o.useCallback)((function(e){a.futuresOrderForm.changeOrderFormData(e)}),[a.futuresOrderForm]),X=(0,o.useCallback)((function(){a.transferAssets.getUserAssets()}),[a.transferAssets]),$=(0,o.useCallback)((function(e){return a.transferAssets.transfer(e,t)}),[a.transferAssets,t]),ee=(0,o.useCallback)((function(e){return h(p.Z,e)}),[]);return{leverage:R,changeLeverage:J,marginType:V,changeMarginType:K,userAsset:D,futureAsset:N,transferAssets:B,lng:t,symbol:T,openOrders:G,positions:_,changeOrderConfirmation:U,changePositionMode:j,usePreference:v.F7,changeOrderFormData:Q,useOrderForm:v.m4,useHorizontalOrderForm:g.Z,brackets:z,base:O,quote:E,ticker:F,urlConfig:c.x,isLoggedIn:e,userInfo:b,userAssets:C,orderFormPriceQty:H,updatePositionDirection:W,getTransferAssets:X,transfer:$,futUrlConfig:y.x,track:d.j,isDelivery:S,cont:r("Cont"),unit:Y,contractType:M,renderRegisterLogin:ee,toLogin:f.G,toRegister:f.s,isElectron:!1,marginAsset:A}}},tmer:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var n=r("c83x"),i=r("Xt0a");function o(){return(0,n.useSelector)(i.makePositions)}},Ev73:(e,t,r)=>{"use strict";r.d(t,{F:()=>s,r:()=>u});var n=r("DtyY"),i=r("xIFI"),o=r("c83x"),a=r("S2LQ"),l=r("z/3w");function s(){var e=(0,o.useSelector)(l.makePreference),t=(0,a.nM)();return(0,n.Z)((0,n.Z)({},e),{},{unit:t?e.coinFuturesUnit:e.usdtFuturesUnit})}function u(){var e=(0,i.useRef)(),t=(0,i.useCallback)((function(t){e.current.showPreferencePanel({defaultActiveKey:t})}),[]);return{preferencePanelRef:e,showPreferencePanel:t}}},"O+dC":(e,t,r)=>{"use strict";r.d(t,{Q:()=>l});var n=r("L4Ep"),i=r("Ev73"),o=n.AO.coin,a=n.AO.usdt;function l(){var e=(0,i.F)().unit;return{isCoinUnit:e===o,isUSDTUnit:e===a}}},"1Y5Q":(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r("yCSn"),i=r("xIFI");const o=function(e,t,r){var o=Array.isArray(t)?t:[],a="number"===typeof t?t:r||0,l=(0,i.useRef)(!1),s=(0,i.useRef)(),u=(0,i.useRef)(e);u.current=e;var c=(0,i.useRef)([]),d=(0,i.useCallback)((function(){s.current&&clearTimeout(s.current),s.current=void 0}),[]),p=(0,i.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];c.current=t,s.current||(s.current=setTimeout((function(){u.current.apply(u,(0,n.Z)(c.current)),s.current=void 0}),a))}),[a,d]);return(0,i.useEffect)((function(){return d}),[]),(0,i.useEffect)((function(){l.current?p():l.current=!0}),[].concat((0,n.Z)(o),[p])),{run:p,cancel:d}}},jSf8:(e,t,r)=>{"use strict";r.d(t,{WA:()=>c,Ch:()=>d,s7:()=>p});var n=r("DC7k"),i=r("xIFI"),o=r("xDxD"),a=r("wz6d"),l=r("U4Ym"),s=r("O+dC"),u=r("wiC8"),c=function(e){var t=e.quantity,r=e.price,n=e.func,i=void 0===n?u.mD:n,o=e.precision;return i(t*r,void 0===o?2:o,e.format)},d=function(e){return e.quantity/e.price},p=function(e){var t=(0,o.z4)(),r=(0,n.Z)(t,1)[0],d=(0,o.Vh)()[e||r]||{},p=(0,l.p)(d.tickSize),f=(0,s.Q)().isCoinUnit,m=(0,i.useCallback)((function(e){var t=e.quantity,r=e.price,n=e.func,i=void 0===n?u.mD:n,o=e.precision,a=void 0===o?p:o,l=e.format;return f?t:c({quantity:t,price:r,precision:a,func:i,format:l})}),[f,p]),v=(0,i.useCallback)((function(){return f?d.baseAsset:d.marginAsset}),[f,d]),g=(0,i.useCallback)((function(e){var t=e.quantity,r=e.price,n=e.func,i=void 0===n?u.mD:n,o=e.qtyPrecision,l=void 0===o?2:o,s=e.tickSizePrecision,d=v();return f?"".concat((0,a.uf)(t,l)," ").concat(d):"".concat(c({quantity:t,price:r,precision:s||p,func:i,format:!0})," ").concat(d)}),[v,p,f]);return(0,i.useMemo)((function(){return{getQuantity:m,getAssetLabel:v,getFormatedQuantity:g}}),[v,m,g])}},"9+6n":(e,t,r)=>{"use strict";r.d(t,{u:()=>C});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("xIFI"),l=r.n(a),s=r("Ng/A"),u=r("I78S"),c=r("4CLd"),d=r("FU4r"),p=r("QsMz"),f=r("/mdG"),m=r("nXUx"),v=r("a3OK"),g=r("PRLU"),y=r("r4RV"),x=r("29C7"),h=r("emkM"),b=r("1Yqh"),P=l().createElement,k=function(e){var t=e.onSuccess,r=void 0===t?function(){}:t,n=e.onChangeType,i=e.review,o=e.updateData,l=(0,g.hd)(),u=(0,p.Z)("","futures-ui").getI18n,c=(0,p.Z)().getI18n,d=(0,b.F)().isMobile,f={video:{title:"futures-video-lesson-title",tips:u("futures-video-lesson-tips1"),tipsNoQuiz:c("futures-video-lesson-tips2"),videoTitle:"futures-video-lesson-iframe-title",videoPath:d?l?"ee1s2i3y6z":"j7xr0stker":l?"fjw94jmw16":"yy4khyz2qb",onSubmit:function(){return T("questions")},btnText:"futures-video-lesson-start-quiz",getI18n:u,review:i,padding:d?"177.7% 0 0 0":void 0},questions:{title:"futures-video-lesson-quiz-title",questionsIndex:"futures-video-lesson-quiz-question",answerIndex:"futures-video-lesson-quiz-ans",rightAnswer:[0,2,2,0,1,2,2,2,1,0,2,1],onSubmit:r,review:i,updateData:o,successBtnText:u("futures-video-lesson-pass-btn"),updateServer:function(){return(0,m.P2)({isFutureTutorialPassed:!0,pathFilter:!0})},getI18n:u,showIndex:!0}},v=(0,a.useState)("video"),k=v[0],T=v[1],Z=(0,a.useMemo)((function(){switch(k){case"video":return P(x.Z,f.video);case"questions":return P(y.Z,f.questions);default:return null}}),[k,u,i]);return(0,a.useEffect)((function(){n&&n(k)}),[k]),P(s.Z,{sx:h.sx},Z)};const T=l().memo(k);var Z=l().createElement,S=!1,C=function(e){var t=(0,v.Pc)().isExistFutureAccount,r=(0,v._n)(),n=(0,p.Z)().getI18n,l=(0,f.F)().isLight,g=(0,a.useState)(!1),y=g[0],x=g[1],h=(0,a.useRef)({current:""});(0,a.useEffect)((function(){function e(){return(e=(0,o.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.o$)();case 2:t=e.sent,r=t.data,x(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r&&function(){e.apply(this,arguments)}()}),[r]);var b=function(){var e=(0,o.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new d.Vq,"questions"===h.current&&!y){e.next=3;break}return e.abrupt("return",d.ZP.close());case 3:t.confirm({content:Z(s.Z,{sx:{width:["340px"]}},Z(s.Z,null,Z(c.Z,{mr:1,size:100,color:"t.secondary"})),Z(u.Z,{sx:{fontSize:"14px",letterSpacing:"0.16px",mr:"10px",ml:"10px"}},n("trd-leveraged-quiz-quit"))),cancelText:n("dialog-cancel",{defaultValue:"Cancel"}),okText:n("dialog-confirm",{defaultValue:"Confirm"}),onMaskClick:!1,isLight:l}).then(d.ZP.close).catch((function(){})).finally(t.close).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){d.ZP.show({isLight:l,sx:{overflow:"auto"},contentSx:{padding:0},onCloseIconClick:b,onMaskClick:!1,children:Z(s.Z,{sx:{height:["100%","618px"],width:["100%","720px"]}},Z(T,{review:y||!r||!t,onSuccess:function(){return d.ZP.close()},updateData:function(){return S=!0},onChangeType:function(e){h.current=e}}))})};return{reviewDialog:P,showDialog:function(){return S||y||P(),y||S}}}},i6br:(e,t,r)=>{"use strict";r.d(t,{z:()=>p});var n,i,o=r("S2LQ"),a=r("xDxD"),l=r("r61A"),s=r("xIFI"),u=r("GV+Z"),c=r("W2MH"),d=(0,o.l6)(!0),p=function(){var e=(0,a._n)();(0,s.useEffect)((function(){if(e)return d.getStreamTickers().subscribe((function(){n=Date.now()}))}),[e]),(0,l.Z)((function(){n&&Date.now()-n>=5e3&&i!==n&&(i=n,(0,u.gp)({t:"ws_nodata"}),(0,c.j)("ws_nodata",{source:"futures"}))}),1e3)}},jMT7:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("DtyY"),l=r("wBZr"),s=r("8xbW"),u=r("G2o7");const c={name:"balance",state:{loading:!0},reducers:(0,a.Z)((0,a.Z)({},l.reducer),{},{mergeState:function(e,t){null===e||void 0===e||delete e.loading;var r={};return Object.values(t).forEach((function(t){r[null===t||void 0===t?void 0:t.asset]=(0,a.Z)((0,a.Z)({},e[null===t||void 0===t?void 0:t.asset]),t)})),(0,a.Z)((0,a.Z)({},e),r)}}),effects:function(e){return{getBalance:function(){var t=this;return(0,o.Z)(i().mark((function r(){var n,o,a,l,c,d;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,u.q)();case 2:n=r.sent,o=n.success,a=n.data,l=void 0===a?[]:a,o&&(c=(0,s.FB)(l,"asset"),d=l.map((function(e){return e.asset})),e.transferAssets.updateState({assetTypes:d}),t.mergeState(c||[]));case 7:case"end":return r.stop()}}),r)})))()}}}}},nxhI:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeBalance:()=>n,makeFuturesBalances:()=>i});var n=function(e){return e.balance},i=function(e){return e.balance}},"7FJd":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("DtyY"),l=r("wBZr"),s=r("8xbW"),u=r("QK4s");const c={name:"bracket",state:{},reducers:(0,a.Z)({},l.reducer),effects:{getBrackets:function(){var e=arguments,t=this;return(0,o.Z)(i().mark((function r(){var n,o,a,l,c,d;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:"",r.prev=1,r.next=4,(0,u.v_)("/gateway-api/v1/friendly/future/common/brackets",{symbol:n});case 4:o=r.sent,r.next=11;break;case 7:r.prev=7,r.t0=r.catch(1),Sentry.captureException(r.t0),o={success:!1};case 11:o.success&&(a=o.data||{},l=a.brackets,c=void 0===l?[]:l,d=(0,s.FB)(c,"symbol","riskBrackets"),t.updateState(d||{}));case 12:case"end":return r.stop()}}),r,null,[[1,7]])})))()}}}},jLyH:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeFuturesBrackets:()=>n});var n=function(e){return e.bracket}},"+lSj":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("DtyY"),l=r("wBZr"),s=r("wd/R"),u=r.n(s),c=r("lKE6"),d=r("U4qo"),p=r("BVRH");const f={name:"chat",state:{enableChat:!1,userInfo:{},token:"",messages:[],hasOpened:!1,hasUnread:!1,showDialog:!1,lastMsgId:"",isChannelMaster:!1},reducers:(0,a.Z)({updateMessage:function(e,t){var r=[];if(t){var n=t.messageId,i=t.controlType,o=t.collList,l=t.controlTypeList.DELETE_MESSAGE;if(n)r=e.messages.map((function(e){return e.id===n?(0,a.Z)((0,a.Z)({},e),{},{isHidden:i===l}):e}));else if(Array.isArray(o)&&o.length>0){(r=o.length>=200?o:e.messages.concat(o)).sort((function(e,t){return e.id-t.id}));var s=r.reduce((function(e,t){var r=t.type,n=t.controlMessage;return 1===r&&n.messageId&&(e[n.messageId]=n),e}),{});(r=r.filter((function(e,t,r){return(!e.type||4===e.type)&&r.map((function(e){return e.id})).indexOf(e.id)===t}))).length>=200&&(r=r.slice(Math.max(r.length-200,0))),r=r.map((function(e){var t=s[e.id]||{},r=t.messageId,n=t.controlType;return(0,a.Z)({isHidden:r&&!n},e)}))}}return(0,a.Z)((0,a.Z)({},e),{},{messages:r})},switchUnread:function(e){return(0,a.Z)((0,a.Z)({},e),{},{hasUnread:!e.hasUnread})},switchDialog:function(e){return(0,a.Z)((0,a.Z)({},e),{},{showDialog:!e.showDialog,hasOpened:!e.hasOpened})},openDialog:function(e){return(0,a.Z)((0,a.Z)({},e),{},{showDialog:!0})},closeDialog:function(e){return(0,a.Z)((0,a.Z)({},e),{},{showDialog:!1})}},l.reducer),effects:{getChatUserInfoData:function(){var e=this;return(0,o.Z)(i().mark((function t(){var r,n,o,l,s,d,p,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.wm)();case 2:r=t.sent,n=r.success,o=r.data,n&&(l=o.createTime,s=o.nickname,d=o.view,(p=u().unix(l/1e3)).add(7,"days"),f=(0,a.Z)((0,a.Z)({},o),{},{isFirst:!s,enableDate:p,isEnable:u()().isAfter(p)}),e.updateState({userInfo:f,enableChat:!!d}));case 5:case"end":return t.stop()}}),t)})))()},getChatTokenData:function(){var e=this;return(0,o.Z)(i().mark((function t(){var r,n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.JQ)();case 2:r=t.sent,n=r.success,o=r.data,n&&e.updateState({token:o.token});case 5:case"end":return t.stop()}}),t)})))()},setChatNickName:function(e){return(0,o.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.UB)(e));case 1:case"end":return t.stop()}}),t)})))()},checkIsChannelMaster:function(e){var t=this;return(0,o.Z)(i().mark((function r(){var n,o,a;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,c.j6)(e);case 2:n=r.sent,o=n.success,a=n.data,o&&t.updateState({isChannelMaster:a});case 5:case"end":return r.stop()}}),r)})))()},sendChatCommand:function(e){return(0,o.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.B8)(e));case 1:case"end":return t.stop()}}),t)})))()},queryPerpetualOwnPositionSymbols:function(){return(0,o.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Xo)();case 2:return t=e.sent,r=t.data,e.abrupt("return",r||[]);case 5:case"end":return e.stop()}}),e)})))()},queryDeliveryOwnPositionSymbols:function(){return(0,o.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.X)();case 2:return t=e.sent,r=t.data,e.abrupt("return",r||[]);case 5:case"end":return e.stop()}}),e)})))()}}}},"/8CB":(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeChat:()=>n});var n=function(e){return e.chat}},c2ty:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("DtyY"),l=r("wBZr"),s=r("hbqT");const u={name:"feeTier",state:{},reducers:(0,a.Z)({},l.reducer),effects:{getFeeTier:function(e){var t=this;return(0,o.Z)(i().mark((function r(){var n;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,s.Io)(e);case 2:n=r.sent,t.updateState(n);case 4:case"end":return r.stop()}}),r)})))()}}}},Iz4p:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeFeeTier:()=>n});var n=function(e){return e.feeTier}},"4n8u":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r("DtyY"),i=r("wBZr");const o={name:"futureAsset",state:{futureAsset:{}},reducers:(0,n.Z)({},i.reducer)}},"4C5t":(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeFutureAsset:()=>n});var n=function(e){return e.futureAsset}},kYm9:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("DtyY"),l=r("FMUh"),s=r("wBZr"),u=r("Zsd2"),c=r.n(u);const d={name:"futureMarket",state:{futuresFavorites:[],sortInfo:{index:2,desc:2},radioWord:"change"},reducers:(0,a.Z)({},s.reducer),effects:{queryFuturesFavorites:function(){var e=this;return(0,o.Z)(i().mark((function t(){var r,n,o,a,s,u,c,d,p,f,m,v;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.e)();case 2:if(r=t.sent,n=r.success,o=void 0!==n&&n,a=r.data,s=(a||"").length?a.split(","):[],o){for(d=null===(u=JSON.parse(localStorage.getItem("persist:root")))||void 0===u?void 0:u.futureMarket,p=(null===(c=JSON.parse(d||null))||void 0===c?void 0:c.futuresFavorites)||[],f=!1,s.length!==p.length&&(f=!0),m=0;m<p.length;m++)v=p[m],-1===s.indexOf(v)&&(f=!0);e.updateState({futuresFavorites:f?s:p})}case 8:case"end":return t.stop()}}),t)})))()},oprFuturesFavorite:function(e,t){var r=this;return(0,o.Z)(i().mark((function n(){var o,a,s,u;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.values,a=e.isLoggedIn,s=t.futureMarket.futuresFavorites,r.updateState({futuresFavorites:o}),a){n.next=5;break}return n.abrupt("return",null);case 5:return n.next=7,(0,l.Y)({optionalSymbols:c()(o.join(","),",")});case 7:return(null===(u=n.sent)||void 0===u?void 0:u.success)||r.updateState({futuresFavorites:s}),n.abrupt("return",u);case 10:case"end":return n.stop()}}),n)})))()}}}},YJ5r:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeFuturesFavorites:()=>n});var n=function(e){return e.futureMarket.futuresFavorites}},NwJw:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("DtyY"),l=r("itoO"),s=r("wBZr");const u={name:"grid",state:{openGrids:{loading:!1,data:[]}},reducers:(0,a.Z)({},s.reducer),effects:{queryOpenGrids:function(e){var t=this;return(0,o.Z)(i().mark((function r(){var n,o,a;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.updateStateImmutable({openGrids:{loading:!0}}),r.next=3,(0,l.q)(e);case 3:n=r.sent,o=n.success,a=n.data,o&&t.updateState({openGrids:{loading:!1,data:a||[]}});case 7:case"end":return r.stop()}}),r)})))()}}}},emBa:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeOpenGrids:()=>n,makeGrid:()=>i});var n=function(e){return e.grid.openGrids},i=function(e){return e.grid}},HCuT:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("gLnL"),l=r("DtyY"),s=r("XP5A"),u=r("kelb"),c=r("U4qo");const d={name:"futuresOrderForm",state:{balance:0,orderType:"LIMIT",positionDirection:"BOTH",LIMIT:{timeInForce:"GTC",reduceOnly:!1,price:0,buyQty:0,sellQty:0,side:"BUY",stopPrice:null,workingType:null,type:"LIMIT",positionSide:"BOTH"}},reducers:{changeOrderFormData:function(e,t){var r=t.orderType,n=(0,s.Z)(t,["orderType"]);return(0,l.Z)((0,l.Z)({},e),(0,a.Z)({},r,(0,l.Z)((0,l.Z)({},e[r]),n)))},initOrderFormData:function(e,t){return(0,l.Z)((0,l.Z)({},e),t)},changePositionDirection:function(e,t){return(0,l.Z)((0,l.Z)({},e),{},{positionDirection:t})}},effects:{placeOrder:function(e){return(0,o.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.c)(e));case 1:case"end":return t.stop()}}),t)})))()},placeStrategy:function(e){return(0,o.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.eE)(e));case 1:case"end":return t.stop()}}),t)})))()}}}},v4bZ:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeOrderForm:()=>n});var n=function(e){return e.futuresHorizontalOrderForm}},vrx4:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r("DtyY"),i=r("wBZr");const o={name:"indexPrice",state:{},reducers:(0,n.Z)({},i.reducer),effects:{}}},AXW9:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeFuturesIndexPrice:()=>n});var n=function(e){return e.indexPrice}},g1iz:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r("DtyY"),i=r("wBZr");const o={name:"layout",state:{pageLayout:void 0},reducers:(0,n.Z)({},i.reducer),effects:function(e){return{toggleLayout:function(t){var r=this;e.pageStore.updateState({showSetting:!1,isLayoutChanging:!0}),setTimeout((function(){r.updateState({pageLayout:t})}),0)}}}}},mzgO:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeLayout:()=>n});var n=function(e){return e.layout.pageLayout}},I399:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("gLnL"),l=r("DtyY"),s=r("wBZr"),u=r("8xbW"),c=r("HCSF");const d={name:"leverage",state:{curLeverage:r("SVjJ").Fy.leverageInfo.defaultVal,leverageList:{}},reducers:(0,l.Z)((0,l.Z)({},s.reducer),{},{updateLeverage:function(e,t){var r=t.symbol,n=t.leverage;return{leverageList:(0,l.Z)((0,l.Z)({},e.leverageList),{},(0,a.Z)({},r,n)),curLeverage:n}}}),effects:{getUserLeverageData:function(e){var t=this;return(0,o.Z)(i().mark((function r(){var n,o,a,l,s;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,c.bK)();case 2:n=r.sent,o=n.success,a=n.data,o&&!Object.prototype.hasOwnProperty.call(a,"error")&&(null===a||void 0===a?void 0:a.length)>0&&(l=(0,u.FB)(a,"symbol","leverage"),s=null===l||void 0===l?void 0:l[e],t.updateState({leverageList:l,curLeverage:s}));case 5:case"end":return r.stop()}}),r)})))()},updateUserLeverage:function(e){var t=this;return(0,o.Z)(i().mark((function r(){var n,o,a;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.symbol,o=e.leverage,r.next=3,(0,c.Z)({symbol:n,leverage:o});case 3:return a=r.sent,a.success&&t.updateLeverage({symbol:n,leverage:o}),r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)})))()}}}},VOLh:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeLeverage:()=>n});var n=function(e){return e.leverage}},hRVf:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("dJ9F"),l=r("SVjJ");const s={name:"marginType",state:{marginType:"CROSSED"},reducers:{updateState:function(e,t){return{marginType:t}}},effects:{changeMarginType:function(e){var t=this;return(0,o.Z)(i().mark((function r(){var n,o,s,u,c,d;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.symbol,o=e.marginType,r.next=3,(0,a.W)({symbol:n,marginType:o});case 3:return s=r.sent,u=s.success,c=s.data,d=void 0===c?{}:c,u&&t.updateState(d.marginType||l.Yl.CROSSED),r.abrupt("return",d);case 9:case"end":return r.stop()}}),r)})))()}}}},ocsQ:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeMarginType:()=>n});var n=function(e){return e.marginType}},xwuy:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("DtyY"),l=r("wBZr"),s=r("nXUx");const u={name:"markPrice",state:{},reducers:(0,a.Z)({},l.reducer),effects:{queryMarkPrice:function(e){var t=this;return(0,o.Z)(i().mark((function r(){var n;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,s.m4)(e);case 2:n=r.sent,t.updateStateImmutable(n);case 4:case"end":return r.stop()}}),r)})))()}}}},"9eSZ":(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeFuturesMarkPrice:()=>n});var n=function(e){return e.markPrice}},cFBg:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("gLnL"),l=r("DtyY"),s=r("XP5A"),u=r("kelb"),c=r("U4qo");const d={name:"futuresOrderForm",state:{balance:0,orderType:"LIMIT",positionDirection:"BOTH",LIMIT:{timeInForce:"GTC",reduceOnly:!1,buyPrice:0,sellPrice:0,price:0,buyQty:0,sellQty:0,side:"BUY",buyTriggerPrice:null,sellTriggerPrice:null,stopPrice:null,workingType:null,type:"LIMIT",positionSide:"BOTH"}},reducers:{changeOrderFormData:function(e,t){var r=t.orderType,n=(0,s.Z)(t,["orderType"]);return(0,l.Z)((0,l.Z)({},e),(0,a.Z)({},r,(0,l.Z)((0,l.Z)({},e[r]),n)))},initOrderFormData:function(e,t){return(0,l.Z)((0,l.Z)({},e),t)},changePositionDirection:function(e,t){return(0,l.Z)((0,l.Z)({},e),{},{positionDirection:t})}},effects:{placeOrder:function(e){return(0,o.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.c)(e));case 1:case"end":return t.stop()}}),t)})))()},placeStrategy:function(e){return(0,o.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.eE)(e));case 1:case"end":return t.stop()}}),t)})))()}}}},"2vt+":(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeOrderForm:()=>n});var n=function(e){return e.futuresOrderForm}},BQuu:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var n=r("VwJU"),i=r.n(n),o=r("DtyY"),a=r("XP5A"),l=r("HSMY"),s=r("8xbW"),u=r("nXUx"),c=r("nTnD"),d=r("rfrl"),p=r("QkVN"),f=r.n(p),m=r("SVjJ"),v=r("t+KN");const g={name:"position",state:{positionMap:{},validPositionArr:[]},reducers:{updatePosition:function(e,t){var r=(0,d.ZP)(e.positionMap,(function(e){return f()({},e,t)}));return{positionMap:r,validPositionArr:(0,v.J9)(r)}},setOrderbookPrice:function(e,t){var r=t.price,n=t.symbol,i=(0,d.ZP)(e.positionMap,(function(e){var t=(0,v._g)(n,"LONG"),i=(0,v._g)(n,"SHORT");return[e[n],e[t],e[i]].forEach((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.selectPrice=r})),e}));return{positionMap:i,validPositionArr:(0,v.J9)(i)}}},effects:function(e){return{queryPosition:function(t){var r=this;return(0,l.Z)(i().mark((function n(){var l,d,p,f,g,y,x,h,b;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=t.symbol,n.next=3,(0,c.G2)({});case 3:return d=n.sent,p=d.data,n.next=7,(0,u.gC)();case 7:f=n.sent,g=(0,s.FB)(f,"s"),y=(p||[]).map((function(e){var t=e||{},r=t.positionAmount,n=(0,a.Z)(t,["positionAmount"]),i=g[null===e||void 0===e?void 0:e.symbol]||{},l=i.c,s=i.cv,u=i.m,c=i.b,d=i.q,p=i.qp,f=i.pp,m=i.eqp,v=i.ts,y=i.lss,x=i.mss;return(0,o.Z)({lastPrice:l,contractVal:s,marginAsset:u,baseAsset:c,quoteAsset:d,quantityPrecision:p,pricePrecision:f,equalQtyPrecision:m,tickSize:v,limitStepSize:y,marketStepSize:x,positionSize:r},n)})).reduce((function(e,t){var r=t||{},n=r.symbol,i=r.positionSide;return e[(0,v._g)(n,i)]=t,e}),{}),x=(null===y||void 0===y?void 0:y[l])||{},h=x.isolated,b=h?m.Yl.ISOLATED:m.Yl.CROSSED,e.marginType.updateState(b),r.updatePosition(y);case 15:case"end":return n.stop()}}),n)})))()}}}}},Xt0a:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makePositions:()=>n,makeValidPositionArr:()=>i,makePositionsLength:()=>o});var n=function(e){return e.position.positionMap},i=function(e){return e.position.validPositionArr},o=function(e){return e.position.validPositionArr.length}},kJQ1:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("DtyY"),l=r("wBZr"),s=r("KRJn"),u=r("wMg5"),c=r("wz6d"),d=r("5Zcj"),p=r("ZIGC"),f=r("S2LQ"),m=r("L4Ep"),v=r("w45g");const g={name:"preference",state:{orderConfirmation:{LIMIT:!1,MARKET:!1,STOP:!1,STOP_MARKET:!1},priceProtection:!0,positionMode:!1,usdtFuturesUnit:m.AO.coin,coinFuturesUnit:m.SW.cont,useLastPrice:!1,queryUnitFinished:void 0,showFlashOrder:!1,isEnableFundingFee:!1,fundingFee:.25,TPSLNotify:!1},reducers:(0,a.Z)({},l.reducer),effects:{getOrderConfirmation:function(){var e=this;return(0,o.Z)(i().mark((function t(){var r,n,o,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.CQ)();case 2:r=t.sent,n=r.success,o=r.data,a=(o||{}).orderConfirmation,n&&a&&e.updateState({orderConfirmation:a});case 7:case"end":return t.stop()}}),t)})))()},getFuturesPnlBasis:function(){var e=this;return(0,o.Z)(i().mark((function t(){var r,n,o,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.f)();case 2:r=t.sent,n=r.success,o=r.data,a=(o||{}).pnlPriceBasis,n&&e.updateState({useLastPrice:"lastPrice"===a});case 7:case"end":return t.stop()}}),t)})))()},changeOrderConfirmation:function(e){var t=this;return(0,o.Z)(i().mark((function r(){var n;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,s.wS)({orderConfirmation:e});case 2:return(n=r.sent)&&t.updateState({orderConfirmation:e}),r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})))()},getPositionMode:function(){var e=this;return(0,o.Z)(i().mark((function t(){var r,n,o,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.wo)();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={dualSidePosition:!0};case 5:r=t.t0,n=r.success,o=r.data,a=(o||{}).dualSidePosition,n&&e.updateState({positionMode:a});case 10:case"end":return t.stop()}}),t)})))()},changePositionMode:function(e){var t=this;return(0,o.Z)(i().mark((function r(){var n,o,a,l;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,s.qM)(e);case 2:return n=r.sent,o=n.success,a=n.data,l=(a||{}).dualSidePosition,o&&void 0!==l&&t.updateState({positionMode:l}),r.abrupt("return",n);case 7:case"end":return r.stop()}}),r)})))()},getUnit:function(e){var t=this;return(0,o.Z)(i().mark((function r(){var n,o,a,l,s;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.race([(0,d.R)(e),(0,p.$e)(5e3,"queryUnit")]).catch((function(e){return"undefined"!==typeof Sentry&&Sentry.captureException(e),"undefined"!==typeof Sentry&&Sentry.captureException(e),{}}));case 2:n=r.sent,o=n.success,a=n.data,l=(a||{}).unit,s=(0,f.nM)()?{coinFuturesUnit:l}:{usdtFuturesUnit:l},o&&l&&t.updateState(s);case 8:case"end":return r.stop()}}),r)})))()},changeUnit:function(e){var t=this;return(0,o.Z)(i().mark((function r(){var n,o;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=(0,f.nM)()?{coinFuturesUnit:e}:{usdtFuturesUnit:e},r.next=3,(0,s.t1)({unit:e});case 3:return(o=r.sent)&&t.updateState(n),r.abrupt("return",o);case 6:case"end":return r.stop()}}),r)})))()},getPriceProtection:function(){var e=arguments,t=this;return(0,o.Z)(i().mark((function r(){var n,o,a,l,s;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:function(){return{}},r.next=3,n();case 3:o=r.sent,a=o.success,l=o.data,s=void 0===l||l,a&&t.updateState({priceProtection:s});case 8:case"end":return r.stop()}}),r)})))()},getFundingFeeNotify:function(){var e=this;return(0,o.Z)(i().mark((function t(){var r,n,o,a,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,v.TS)();case 2:r=t.sent,n=r.success,o=r.data,a=o.threshold,l=o.isEnable,n&&e.updateState({fundingFee:(0,c.Jp)(a,100).toNumber(),isEnableFundingFee:l});case 8:case"end":return t.stop()}}),t)})))()},getStopLimitOrderNotify:function(){var e=this;return(0,o.Z)(i().mark((function t(){var r,n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,v.lj)();case 2:r=t.sent,n=r.success,o=r.data,n&&e.updateState({TPSLNotify:o});case 6:case"end":return t.stop()}}),t)})))()}}}},"z/3w":(e,t,r)=>{"use strict";r.r(t),r.d(t,{makePreference:()=>n});var n=function(e){return e.preference}},"X7/r":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var n=r("VwJU"),i=r.n(n),o=r("HSMY"),a=r("gLnL"),l=r("XP5A"),s=r("DtyY"),u=r("wBZr"),c=r("hbqT"),d=r("xAkz"),p=r("8xbW"),f=r("l84k");const m={name:"transferAssets",state:{transferAsset:"USDT",assets:{},futuresAssets:{},assetTypes:[]},reducers:(0,s.Z)({updateAssets:function(e,t){var r=e.assets;if(!t||!t.length)return e;var n=t.reduce((function(e,t){var n=t.free,i=t.locked,o=t.withdrawing,u=t.freeze,c=t.asset,d=(0,l.Z)(t,["free","locked","withdrawing","freeze","asset"]),p=r[c],f=(0,s.Z)((0,s.Z)((0,s.Z)({},d),p),{},{asset:c,free:+n,locked:+i});return o&&(f.withdrawing=+o),u&&(f.withdrawing=+u),f.total=+n+ +i+(+o||0)+(+u||0),(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},c,f))}),r);return(0,s.Z)((0,s.Z)({},e),{},{assets:n})}},u.reducer),effects:{getUserAssets:function(){var e=this;return(0,o.Z)(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.N)({});case 2:r=t.sent,e.updateState({assets:(0,p.FB)(r,"asset")});case 4:case"end":return t.stop()}}),t)})))()},getMaxWithdrawAmount:function(){var e=arguments,t=this;return(0,o.Z)(i().mark((function r(){var n,o,a;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:[],r.next=3,Promise.all(n.map((function(e){return(0,c.yd)({assetName:e})})));case 3:o=r.sent,a=null===o||void 0===o?void 0:o.reduce((function(e,t,r){return e[n[r]]={free:Math.max(Object.prototype.hasOwnProperty.call(t,"error")?0:t,0)},e}),{}),t.updateState({futuresAssets:a});case 6:case"end":return r.stop()}}),r)})))()},transfer:function(e,t){return(0,o.Z)(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.r)(e,{lang:t}));case 1:case"end":return r.stop()}}),r)})))()}}}},cMm6:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeTransferAssets:()=>n});var n=function(e){return e.transferAssets}},KQnS:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r("DtyY"),i=r("wBZr");const o={name:"userAsset",state:{userAsset:{}},reducers:(0,n.Z)({},i.reducer)}},mKzN:(e,t,r)=>{"use strict";r.r(t),r.d(t,{makeUserAsset:()=>n});var n=function(e){return e.userAsset}},guhI:(e,t,r)=>{"use strict";r.d(t,{GY:()=>i,aV:()=>a,hr:()=>l,HE:()=>s,Lz:()=>u,IS:()=>c,BV:()=>d,DX:()=>p});var n=r("2M4l"),i=n.Z.registerActionHandle,o=n.Z.constants,a=(o.ACTION_TRADE_ONECLIKE_BUY,o.ACTION_TRADE_ONECLIKE_SELL,o.ACTION_FUTURES_DUAL_OPEN),l=o.ACTION_FUTURES_DUAL_CLOSE,s=o.ACTION_FUTURES_OPEN_LONG,u=o.ACTION_FUTURES_OPEN_SHORT,c=o.ACTION_FUTURES_ONECLIKE_CLOSE,d=o.COMMON_CANCEL,p=o.COMMON_OK},ViBG:(e,t,r)=>{"use strict";function n(e){return Number.isNaN(e)||Math.abs(e)===1/0}function i(e){var t,r,i=e.quantity,o=e.isBuy,a=e.entryPrice,l=void 0===a?0:a,s=e.closedPrice,u=void 0===s?0:s,c=e.contractVal,d=void 0===c?100:c,p=e.isDelivery,f=e.askPrice,m=e.bidPrice,v=o?1:-1;return p?(t=i?(1/l-1/(o?m:f))*i*d*v:0,r=i?(1/l-1/u)*i*d*v:0):(t=i?((o?m:f)-l)*i*v:0,r=(u-l)*i*v),{marketPNL:n(t)?"-":t,limitPNL:n(r)?"-":r}}r.d(t,{k:()=>i})},UraT:(e,t,r)=>{"use strict";r.d(t,{uf:()=>i,kh:()=>o,lE:()=>a});var n=r("DC7k");r("nc0P");var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;try{if("number"!==typeof e&&!e)return"-";var r=(e="number"===typeof e?e:+e).toFixed(Math.max(0,~~t)),n=-1!==r.indexOf(".")?/\d(?=(\d{3})+\.)/g:/\d(?=(\d{3})+$)/g;return r.replace(n,"$&,")}catch(i){return Sentry.captureException(i),"-"}},o=function(e){return e&&e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=e.split("_"),i=(0,n.Z)(r,2),o=i[0],a=void 0===o?"":o,l=i[1],s=void 0===l?"":l,u=[a,s.substr(2)].join(" ");if("PERP"===s||!s){var c=t("inversePerpetual",{defaultValue:"Perpetual"});u=[a,c].join(" ")}return u}},kUbO:(e,t,r)=>{"use strict";r.d(t,{BJ:()=>u,Nu:()=>p,w_:()=>f,IK:()=>m,_F:()=>v,sY:()=>g,zS:()=>b,Fb:()=>P,sE:()=>Z,wf:()=>S,qb:()=>I,sk:()=>M,qH:()=>A,mb:()=>L,iZ:()=>O,dK:()=>E,VX:()=>F});var n=r("DtyY"),i=r("yCSn"),o=r("SVjJ"),a=r("wiC8"),l=o.Fy.leverageInfo,s=function(e){return Number((0,a.mD)(1/e,4))},u=function(e){return["MARKET","STOP_MARKET","TAKE_PROFIT_MARKET","TRAILING_STOP_MARKET"].includes(e)},c=function(e,t){for(var r=(0,i.Z)(e).reverse(),n=0;n<r.length;){var o=r[n];if(t<=o.maxOpenPosLeverage&&o.minOpenPosLeverage<=t)return o;n+=1}return 0},d=function(e,t){var r=e.positionSize,n=void 0===r?0:r,i=e.entryPrice,o=void 0===i?0:i,a=e.markPrice,l=void 0===a?0:a,s=e.unrealizedProfit,u=void 0===s?0:s,c=t.isDelivery,d=void 0!==c&&c,p=t.contractVal,f=void 0===p?0:p;return l?(o=Number(o)||0,l=Number(l)||0,(n=Number(n)||0)*(d?f*((o?1/o:0)-(l?1/l:0)):l-o)||0):u},p=function(e){var t=e.positionSize,r=void 0===t?0:t,n=e.markPrice,i=void 0===n?0:n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=a.isDelivery,s=void 0!==l&&l,u=a.contractVal,c=void 0===u?1:u,d=Number(i);return r*o.IA*(s?c*(d?1/d:0):d)},f=function(e){var t=e.formType,r=void 0===t?"limit":t,n=e.type,i=void 0===n?"bid":n,a=e.askPrice,l=void 0===a?0:a,s=e.bidPrice,c=void 0===s?0:s,d=e.orderPrice,p=void 0===d?0:d,f=e.markPrice,m=void 0===f?0:f,v=e.pricePrecision,g=void 0===v?2:v,y=e.isDelivery;l=Number(l),c=Number(c),p=Number(p),m=Number(m);var x=l||m,h=c||m,b=Math.pow(10,g),P="bid"===i;return u(r)?P?y?x:Math.floor(x*(1+o.HM.TWO_WAY)*b)/b:y?h*(1-o.HM.TWO_WAY):h:P?y?Math.min(l,m,p):p:y?p:Math.max(c,m,p)},m=function(e,t){return function(e,t){for(var r=0;r<e.length;){var n=e[r];if(t<n.bracketNotionalCap)return n;r+=1}return r&&e[r-1]}(e,t)},v=function(e,t){for(var r=0,n=(0,i.Z)(e).reverse();r<n.length;){var o=n[r],a=o.maxOpenPosLeverage;if(t===a)return o;if(t<a)return n[Math.max(r,0)];r+=1}return r&&n[r-1]},g=function(e){var t=e.positionSize,r=e.orderBidAmount,n=e.orderAskAmount,i=e.type;n=Number(n),r=Number(r);var o="bid"===i;return(t=Number(t))>=0?o?r:Math.max(0,n-t):o?Math.max(0,r+t):n},y=function(e){var t=e.orderPrice,r=void 0===t?0:t,n=e.assumePrice,i=void 0===n?0:n,o=e.markPrice,a=void 0===o?0:o;return{mp:a?1/a:0,op:r?1/r:0,ap:i?1/i:0}},x=function(e){var t=e.formType,r=e.type,n=void 0===r?"bid":r,i=e.positionSize,a=e.orderBidAmount,l=e.orderAskAmount,s=e.markPrice,c=void 0===s?0:s,d=e.orderPrice,p=void 0===d?0:d,f=e.assumePrice,m=void 0===f?0:f,v=e.positionMode,x=void 0!==v&&v,h=e.isDelivery,b=void 0!==h&&h,P=e.contractVal,k=void 0===P?0:P;c=Number(c)||0,p=Number(p)||0,m=Number(m)||0;var T,Z="bid"===n?1:-1,S=g({positionSize:i,orderBidAmount:a,orderAskAmount:l,type:n}),C=x?Number("bid"===n?a:l):S*o.IA;return T=b?function(e){var t=e.orderPrice,r=e.markPrice,n=e.assumePrice,i=e.contractVal,o=void 0===i?0:i,a=e.formType,l=y({orderPrice:t,markPrice:r,assumePrice:n}),s=l.mp,c=l.op,d=l.ap;return o*((u(a)?d:c)-s)}({orderPrice:p,markPrice:c,assumePrice:m,formType:t,contractVal:k}):c-(u(t)?m:p),C*Math.abs(Math.min(0,Z*T))},h=function(e){var t=e.availableBalance,r=e.type,n=void 0===r?"bid":r,i=e.formType,a=void 0===i?"limit":i,l=e.orderPrice,c=e.markPrice,d=e.leverage,p=e.assumePrice,f=void 0===p?0:p,m=e.isolated,v=void 0!==m&&m,g=e.isDelivery,x=void 0!==g&&g,h=e.contractVal,b=void 0===h?0:h,P=e.bidNotional,k=e.askNotional,T=e.isTwoWay,Z=void 0!==T&&T,S=e.presetNotionalValue,C=void 0===S?0:S,I=e.positionNotionalValue,w=void 0===I?0:I,M=e.crossWalletBalance,A=void 0===M?0:M;t=Number(t),c=Number(c),l=Number(l);var L,O,E=s(d),F=C*E,R="bid"===n?1:-1;if(x){var V=y({markPrice:c,assumePrice:f,orderPrice:l}),D=V.ap,N=V.mp,B=V.op;if(Z)O=t,L=b*(E*D+Math.abs(Math.min(0,R*((u(a)?D:B)-N))));else{var _=(w+(R>0?P:-k))*E;_=R>0?-_:_,L=b*(E*D+Math.abs(Math.min(0,R*((u(a)?D:B)-N)))),O=v?Math.max(0,Math.min(t,A)+F+_):Math.max(0,t+F+_)}}else O=t,L=o.IA*(f*E+Math.abs(Math.min(0,R*(c-(u(a)?f:l)))));return L?O/L:0},b=function(e){var t=e.data,r=void 0===t?{}:t,n=e.isolated,i=void 0!==n&&n,o=e.curPosition,a=void 0===o?{}:o,l=e.all,s=void 0!==l&&l,u=e.isDelivery,c=e.contractVal,p=0;return i&&!s?d(a,{isDelivery:u,contractVal:c}):(Object.values(r).forEach((function(e){!Number(e.positionSize)&&0!==Number(e.positionSize)||!s&&e.isolated||(p+=d(e,{isDelivery:u,contractVal:c}))})),p)},P=function(e){var t=e.positionNotionalValue,r=void 0===t?0:t,n=e.bidNotional,i=void 0===n?0:n,o=e.askNotional,a=void 0===o?0:o;return Math.max(Math.abs(Number(r)+Number(i)),Math.abs(Number(r)-Number(a)))},k=function(e){var t=e.bidNotional,r=void 0===t?0:t,n=e.askNotional,i=void 0===n?0:n,o=e.positionSize,a=e.markPrice,l=e.isDelivery,s=e.contractVal;r=Number(r)||0,i=Number(i)||0;var u=p({positionSize:o,markPrice:a},{isDelivery:l,contractVal:s});return Math.max(Math.abs(u+r),Math.abs(u-i))},T=function(e){var t=e.positionNotionalValue,r=e.bidNotional,n=e.askNotional,i=e.leverage,o=void 0===i?l.defaultVal:i,a=s(o);return P({positionNotionalValue:t,bidNotional:r,askNotional:n})*a},Z=function(e){var t=e.data,r=e.curLeverage,i=e.curSymbol,o=e.isDelivery,a=void 0!==o&&o,l=e.contractVal,u=void 0===l?1:l,c=0;return Object.values(t).forEach((function(e){if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){var t=e.symbol,o=e.markPrice,l=e.positionSize,d=t===i?r:e.leverage,f=p(e,{isDelivery:a,contractVal:u}),m=Number(o);m=a?m?1/m:0:m,c+=(Math.abs(P((0,n.Z)((0,n.Z)({},e),{},{positionNotionalValue:f})))-m*Math.abs(l)*u)*s(d)}})),c},S=function(e){var t=e.data,r=void 0===t?{}:t,i=e.curLeverage,o=e.symbol,a=e.isolated,l=e.all,s=void 0!==l&&l,u=e.curPosition,c=e.isDelivery,d=void 0!==c&&c,f=e.contractVal,m=void 0===f?1:f,v=0;if(a&&!s){var g=p(u,{isDelivery:d,contractVal:m}),y=o===u.symbol?(0,n.Z)((0,n.Z)((0,n.Z)({},u),{leverage:i}),{},{positionNotionalValue:g}):(0,n.Z)((0,n.Z)({},u),{},{positionNotionalValue:g});return T(y)}return Object.values(r).forEach((function(e){if((Number(e.positionSize)||0===Number(e.positionSize))&&(s||!e.isolated)){var t=p(e,{isDelivery:d,contractVal:m}),r=e.symbol===o?(0,n.Z)((0,n.Z)((0,n.Z)({},e),{leverage:i}),{},{positionNotionalValue:t}):(0,n.Z)((0,n.Z)({},e),{},{positionNotionalValue:t});v+=T(r)}})),v},C=function(e){var t=e.assumePrice,r=void 0===t?0:t,n=e.type,i=void 0===n?"bid":n,a=e.orderBidAmount,l=void 0===a?0:a,s=e.orderAskAmount,u=void 0===s?0:s,c=e.isDelivery,d=void 0!==c&&c,p=e.contractVal,f=void 0===p?1:p;r=Number(r)||0,l=Number(l)||0,u=Number(u)||0;var m="bid"===i,v=d?r?f/r:0:r;return{newBidNotional:m?o.IA*l*v:0,newAskNotional:m?0:o.IA*u*v}},I=function(e){var t,r,n=e.riskTable,i=e.positionSize,a=e.markPrice,l=e.availableBalance,u=e.type,d=e.formType,m=e.askPrice,v=e.bidPrice,g=e.orderPrice,y=e.leverage,x=e.bidNotional,b=e.askNotional,T=e.isolated,Z=e.pricePrecision,S=e.isDelivery,I=e.contractVal,M=e.crossWalletBalance,A=e.isNew,L=void 0===A||A,O=e.currentPairPositions,E=void 0===O?{}:O,F=e.calculateDeliveryActualMaxAmount,R=e.getAllOthersPresentNotional,V=f({formType:d,type:u,askPrice:m,bidPrice:v,orderPrice:g,markPrice:a,pricePrecision:Z,isDelivery:S}),D=p({positionSize:i,markPrice:a},{isDelivery:S,contractVal:I}),N=P({positionNotionalValue:D,bidNotional:x,askNotional:b});if(L){var B=S?F({positionSize:i,availableBalance:l,positionNotionalValue:D,presetNotionalValue:N,bidNotional:x,askNotional:b,isolated:T,type:u,formType:d,orderPrice:g,markPrice:a,leverage:y,assumePrice:V,crossWalletBalance:M,contractVal:I}):w({positionSize:i,availableBalance:l,presetNotionalValue:N,positionNotionalValue:D,bidNotional:x,askNotional:b,contractVal:I,isolated:T,type:u,formType:d,orderPrice:g,markPrice:a,leverage:y,assumePrice:V,isDelivery:S,crossWalletBalance:M});"bid"===u?(t=B,r=0):(r=B,t=0)}else{var _=function(e){var t=e.positionSize,r=e.availableBalance,n=e.type,i=e.formType,a=e.orderPrice,l=e.markPrice,u=e.leverage,c=e.assumePrice,d=e.bidNotional,f=e.askNotional,m=e.isolated,v=e.isDelivery,g=e.contractVal,y=e.crossWalletBalance,x=p({positionSize:t,markPrice:l},{isDelivery:v,contractVal:g}),b=P({positionNotionalValue:x,bidNotional:d,askNotional:f}),k=h({availableBalance:r,type:n,formType:i,orderPrice:a,markPrice:l,leverage:u,assumePrice:c,isolated:m,isDelivery:v,contractVal:g,presetNotionalValue:b,positionNotionalValue:x,bidNotional:d,askNotional:f,crossWalletBalance:y});if(v)return{maxBidAmount:k,maxAskAmount:k};var T=s(u),Z=t>=0?1:-1,S=o.IA*(c*T+Math.abs(Math.min(0,Z*(l-a))));return t>=0?{maxBidAmount:k,maxAskAmount:k+t+Math.max(0,(m?0:x+d-f)*T)/S}:{maxBidAmount:k-t+Math.max(0,(m?0:x+f-d)*T)/S,maxAskAmount:k}}({positionSize:i,availableBalance:l,type:u,formType:d,orderPrice:g,markPrice:a,leverage:y,bidNotional:x,askNotional:b,assumePrice:V,isolated:T,isDelivery:S,contractVal:I,crossWalletBalance:M});t=_.maxBidAmount,r=_.maxAskAmount}var z,H=function(e){var t=e.bidNotional,r=void 0===t?0:t,n=e.askNotional,i=void 0===n?0:n,o=e.positionSize,a=e.markPrice,l=e.assumePrice,s=e.orderBidAmount,u=e.orderAskAmount,c=e.type,d=e.isDelivery,f=void 0!==d&&d,m=e.contractVal,v=void 0===m?1:m,g=e.isNew,y=void 0!==g&&g;r=Number(r)||0,i=Number(i)||0;var x,h=p({positionSize:o,markPrice:a},{isDelivery:f,contractVal:v}),b=C({assumePrice:l,type:c,orderAskAmount:u,orderBidAmount:s,isDelivery:f,contractVal:v}),P=b.newBidNotional,T=b.newAskNotional;return x=y?"bid"===c?Math.max(Math.abs(h+r+P),Math.abs(h-i)):Math.max(Math.abs(h+r),Math.abs(h-i-T)):Math.max(Math.abs(h+r+P),Math.abs(h-i-T)),{presentNotional:k({bidNotional:r,askNotional:i,positionSize:o,markPrice:a,isDelivery:f,contractVal:v}),notionalAfterTrade:x,positionNotionalValue:h}}({positionSize:i,bidNotional:x,askNotional:b,markPrice:a,assumePrice:V,orderBidAmount:t,orderAskAmount:r,type:u,isDelivery:S,contractVal:I,isNew:L}),q=H.presentNotional,Y=H.notionalAfterTrade,U=c(n,y).bracketNotionalCap;if(Y<=U)return{maxBidAmount:t,maxAskAmount:r};if(S){var j=R({currentPairPositions:E,markPrice:a,contractVal:I}),W=L?j-q:0;return{maxBidAmount:(z=V?I/V:0)?(U-W-D-x)/z:0,maxAskAmount:z?(U-W+D-b)/z:0}}return z=V*o.IA,L?{maxBidAmount:t=(t=z?(U-D-x)/z:0)<0?0:t,maxAskAmount:r=(r=z?(U+D-b)/z:0)<0?0:r}:i>=0?{maxBidAmount:z?(U-q)/z:0,maxAskAmount:z?(U+q)/z:0}:{maxBidAmount:z?(U+q)/z:0,maxAskAmount:z?(U-q)/z:0}},w=function(e){var t=e.positionSize,r=e.availableBalance,n=e.positionNotionalValue,i=e.bidNotional,o=e.askNotional,a=e.isolated,l=e.type,c=e.formType,d=e.orderPrice,p=e.markPrice,f=e.leverage,m=e.assumePrice,v=e.presetNotionalValue,g=e.crossWalletBalance,y=s(f),x="bid"===l?1:-1,h=u(c)?m:d,b=u(c)?m:d,P=v*y,k=m*y+Math.abs(Math.min(0,x*(p-h))),T=m*y,Z=1===x?-(n+i):n-o,S=(a?Math.min(g,r):r)+P+Z*y,C=Math.abs(t)*Math.abs(Math.min(0,x*(p-b))),I=Math.max(0,S);if(t>=0){if(1===x)return k?I/k:0;var w=Math.max(0,S+C),M=k?w/k:0;return M>=Math.abs(t)?M:T?I/T:0}if(1===x){var A=Math.max(0,S+C),L=k?A/k:0;return L>=Math.abs(t)?L:T?I/T:0}return k?I/k:0},M=function(e){var t=e.leverage,r=e.positionSize,n=e.orderBidAmount,i=e.orderAskAmount,o=e.formType,a=e.type,l=e.askPrice,u=e.bidPrice,c=e.orderPrice,d=e.markPrice,m=e.bidNotional,v=e.askNotional,g=e.positionMode,y=void 0!==g&&g,h=e.pricePrecision,b=e.isDelivery,P=e.contractVal,k=f({formType:o,type:a,askPrice:l,bidPrice:u,orderPrice:c,markPrice:d,pricePrecision:h,isDelivery:b}),T=function(e){var t=e.positionSize,r=e.markPrice,n=e.assumePrice,i=e.type,o=e.bidNotional,a=e.askNotional,l=e.orderBidAmount,u=e.orderAskAmount,c=e.leverage,d=void 0===c?20:c,f=e.positionMode,m=void 0!==f&&f,v=e.isDelivery,g=void 0!==v&&v,y=e.contractVal,x=void 0===y?1:y,h=s(d);if(m){var b="bid"===i?l:u;return g?b*x*h*(Number(n)?1/n:0):n*h*b}o=Number(o)||0,a=Number(a)||0;var P=p({positionSize:t,markPrice:r},{isDelivery:g,contractVal:x}),k=C({assumePrice:n,type:i,orderAskAmount:u,orderBidAmount:l,isDelivery:g,contractVal:x}),T=k.newBidNotional,Z=k.newAskNotional,S=Math.max(Math.abs(P+o),Math.abs(P-a)),I=Math.max(Math.abs(P+o+T),Math.abs(P-a-Z));return Math.max((I-S)*h,0)}({positionSize:r,markPrice:d,assumePrice:k,type:a,bidNotional:m,askNotional:v,orderBidAmount:n,orderAskAmount:i,leverage:t,positionMode:y,isDelivery:b,contractVal:P}),Z=x({formType:o,positionSize:r,orderBidAmount:n,orderAskAmount:i,markPrice:d,orderPrice:c,type:a,assumePrice:k,positionMode:y,isDelivery:b,contractVal:P});return{cost:T+Z,openLost:Z}},A=function(e){var t=e.riskTable,r=e.markPrice,n=e.availableBalance,i=e.formType,o=e.askPrice,a=e.bidPrice,l=e.leverage,s=e.longPosition,u=e.shortPosition,d=e.buyPrice,m=e.sellPrice,v=e.pricePrecision,g=e.isDelivery,y=e.contractVal,x=e.currentPairPositions,b=void 0===x?{}:x,P=e.getAllOthersPresentNotional,k=e.isNew,T=void 0===k||k,Z=f({formType:i,type:"bid",askPrice:o,bidPrice:a,orderPrice:d,markPrice:r,pricePrecision:v,isDelivery:g}),S=f({formType:i,type:"ask",askPrice:o,bidPrice:a,orderPrice:m,markPrice:r,pricePrecision:v,isDelivery:g}),C=h({availableBalance:n,type:"bid",formType:i,orderPrice:d,markPrice:r,leverage:l,assumePrice:Z,isDelivery:g,contractVal:y,isTwoWay:!0}),I=h({availableBalance:n,type:"ask",formType:i,orderPrice:m,markPrice:r,leverage:l,assumePrice:S,isDelivery:g,contractVal:y,isTwoWay:!0}),w=function(e){var t=e.longPosition,r=e.shortPosition,n=e.markPrice,i=e.longActualMaxOpenPositions,o=e.shortActualMaxOpenPositions,a=e.bidAssumePrice,l=e.askAssumePrice,s=e.isDelivery,u=e.contractVal,c=t.bidNotional,d=void 0===c?0:c,f=t.askNotional,m=void 0===f?0:f,v=t.positionSize,g=void 0===v?0:v,y=r.bidNotional,x=void 0===y?0:y,h=r.askNotional,b=void 0===h?0:h,P=r.positionSize,k=void 0===P?0:P,T=p({positionSize:g,markPrice:n},{isDelivery:s,contractVal:u}),Z=p({positionSize:k,markPrice:n},{isDelivery:s,contractVal:u}),S=Math.max(Math.abs(T+Number(d)+(s?a?u/a:0:a)*i),Math.abs(T-m)),C=Math.max(Math.abs(Z+Number(x)),Math.abs(Z-b)),I=Math.max(Math.abs(T+Number(d)),Math.abs(T-m));return{longNotionalAfterTrade:S,shortNotionalAfterTrade:Math.max(Math.abs(Z+Number(x)),Math.abs(Z-b-(s?l?u/l:0:l)*o)),shortPresentNotional:C,longPresentNotional:I}}({longPosition:s,shortPosition:u,markPrice:r,longActualMaxOpenPositions:C,shortActualMaxOpenPositions:I,bidAssumePrice:Z,askAssumePrice:S,isDelivery:g,contractVal:y}),M=w.longNotionalAfterTrade,A=w.shortNotionalAfterTrade,L=w.shortPresentNotional,O=w.longPresentNotional,E=c(t,l).bracketNotionalCap,F=P({currentPairPositions:b,markPrice:r,contractVal:y,isNew:T});return T?{maxBidAmount:g&&C<=0?0:M+L<=E?C:g?y?Z*(E-F)/y:0:Z?(E-O-L)/Z:0,maxAskAmount:g&&I<=0?0:A+O<=E?I:g?y?S*(E-F)/y:0:S?(E-L-O)/S:0}:{maxBidAmount:M<=E?C:g?y?Z*(E-O-L)/y:0:Z?(E-O-L)/Z:0,maxAskAmount:A<=E?I:g?y?S*(E-L-O)/y:0:S?(E-L-O)/S:0}},L=function(e){var t=e.orderPrice,r=void 0===t?0:t,n=e.assumePrice,i=void 0===n?0:n,a=e.triggerPrice,l=void 0===a?0:a,s=e.activationPrice,u=void 0===s?0:s,c=e.formType;switch(void 0===c?o.PH.LIMIT:c){case o.PH.LIMIT_TYPE:case o.PH.STOP_LIMIT:case o.PH.TAKE_PROFIT_LIMIT:return Number(r);case o.PH.MARKET_TYPE:return Number(i);case o.PH.STOP_MARKET:case o.PH.TAKE_PROFIT_MARKET:return Number(l);case o.PH.TRAILING_STOP_MARKET:return Number(u);default:return Number(r)}},O=function(e){var t=e.positionSize,r=void 0===t?0:t,n=e.orderAmount,i=void 0===n?0:n,o=e.side,a=void 0===o?1:o;return Number(r)+i*a},E=function(e){var t=e.entryPrice,r=void 0===t?0:t,n=e.positionSize,i=void 0===n?0:n,o=e.orderPrice,a=void 0===o?0:o,l=e.assumePrice,s=void 0===l?0:l,u=e.triggerPrice,c=void 0===u?0:u,d=e.activationPrice,p=void 0===d?0:d,f=e.orderAmount,m=void 0===f?0:f,v=e.formType,g=e.side,y=void 0===g?1:g,x=Math.abs(i),h=Number(i),b=O({positionSize:i,orderAmount:m,side:y}),P=L({orderPrice:a,assumePrice:s,triggerPrice:c,activationPrice:p,formType:v});return 0===h||1===y&&h>0||-1===y&&h<0?b?(r*x+P*m)/Math.abs(b):0:x>m?Number(r):x===Number(m)?0:P},F=function(e){var t=e.entryPrice,r=void 0===t?0:t,n=e.positionSize,i=void 0===n?0:n,o=e.orderPrice,a=void 0===o?0:o,l=e.assumePrice,s=void 0===l?0:l,u=e.triggerPrice,c=void 0===u?0:u,d=e.activationPrice,p=void 0===d?0:d,f=e.orderAmount,m=void 0===f?0:f,v=e.formType,y=e.side,x=void 0===y?1:y,h=e.isolatedWallet,b=void 0===h?0:h,P=e.crossWalletBalance,k=void 0===P?0:P,T=e.cost,Z=void 0===T?0:T,S=e.openLost,C=void 0===S?0:S,I=e.bidNotional,w=void 0===I?0:I,M=e.askNotional,A=void 0===M?0:M,O=Math.abs(i),E=Number(i);if(0===E||1===x&&E>0||-1===x&&E<0)return{estCrossWalletBalance:k,estIsolatedWallet:Number(b)+Number(Z)};var F=L({orderPrice:a,assumePrice:s,triggerPrice:c,activationPrice:p,formType:v});if(O>m)return{estCrossWalletBalance:k-m*x*(F-r),estIsolatedWallet:(E?(E-m)*b/E:0)+Math.min(0,(E?m*b/E:0)-m*x*(a-r))};if(O<m){var R=g({positionSize:i,orderBidAmount:m,orderAskAmount:m,type:1===x?"bid":"ask"});return{estCrossWalletBalance:k+E*(F-r),estIsolatedWallet:C+Math.max(Math.abs(Number(w)+F*R),Math.abs(Number(A)-F*R))-Math.max(Math.abs(w),Math.abs(A))+Math.min(0,b+E*(F-r))}}return{estCrossWalletBalance:0,estIsolatedWallet:0}}},"8ePF":(e,t,r)=>{"use strict";r.d(t,{Ak:()=>l,nn:()=>s,yh:()=>d,ot:()=>p,SH:()=>m,zW:()=>g,Uy:()=>x,sE:()=>h,W8:()=>b,ST:()=>P});var n=r("DtyY"),i=r("qJlb"),o=r("SVjJ"),a=o.Fy.leverageInfo,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],v=i||{},y=v.leverageList,x=void 0===y?{}:y,h=c||t;return t.map((function(){var t,i,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=c.marginAsset,y=c.isolated,Z=c.isolatedWallet,S=void 0===Z?0:Z,C=c.symbol,I=void 0===C?"":C,w=c.positionSide,M=r[v]||{},A=M.crossWalletBalance,L=void 0===A?0:A,O=0,E=0,F=0,R=0,V=0,D=(null===e||void 0===e?void 0:e[I])||[],N=!y&&w&&"BOTH"!==w,B=y?S:L,_=x[I]||a.defaultVal;if(!y){var z=h.filter((function(e){return e.marginAsset===v})).filter((function(e){return!(null===e||void 0===e?void 0:e.isolated)}));O=g(z,e),E=p(z),F=k(O,L,E);var H=z.filter((function(e){return(null===e||void 0===e?void 0:e.symbol)!==I}));R=g(H,e)-p(H)}if(N){var q=h.filter((function(e){var t=e||{},r=t.symbol,n=t.positionSide;return r===I&&"BOTH"!==n&&n!==w}))[0]||{positionSize:0,entryPrice:0};t="LONG"===w?c:q,i="SHORT"===w?c:q}o&&(V=N&&t.positionSize&&i.positionSize?P(D,B,R,t,i,c):b(D,B,R,c));var Y=m(D,c),U=s(c),j=k(Y,S,U),W=s(c,l),K=u(c)*d(_),J="".concat((100*(W/K||0)).toFixed(2),"%");return(0,n.Z)((0,n.Z)({},c),{},{liquidationPrice:V<0?0:V,unrealizedPnl:W,margin:y?S:K,riskRatio:y?j:F,ROEVal:J,leverage:_,strategyOrders:T(c,f)})}))},s=function(e){var t=e.positionSize,r=void 0===t?0:t,n=e.entryPrice,i=void 0===n?1:n,o=e.markPrice,a=void 0===o?1:o,l=e.contractVal,s=void 0===l?100:l,u=e.lastPrice,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===i||0===a)return 0;var d=c&&u||a;return r*s*(1/i-1/d)},u=function(e){var t=e.positionSize,r=void 0===t?0:t,n=e.markPrice,i=void 0===n?1:n,o=e.contractVal;return Math.abs(r*o/i)},c=function(e){var t=e.positionSize,r=void 0===t?0:t,n=e.markPrice,i=void 0===n?1:n;return r*e.contractVal/i},d=function(e){return 1*(0,i.mD)(1/e,4)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((function(e,r){return e+s(r,t)}),0)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=u(t),i=e.findIndex((function(e){return r<e.bracketNotionalCap}));return(0,n.Z)((0,n.Z)({positionNotionalValue:r},e[i]),{},{index:i})},m=function(e,t){var r=f(e,t);return r.positionNotionalValue*r.bracketMaintenanceMarginRate-r.cumFastMaintenanceAmount},v=function(e){var t=e.positionNotionalValue,r=void 0===t?0:t,n=e.bidNotional,i=void 0===n?0:n,o=e.askNotional,a=void 0===o?0:o;return Math.max(Math.abs(Number(r)+Number(i)),Math.abs(Number(r)-Number(a)))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((function(e,r){var n=(r||{}).symbol,i=(null===t||void 0===t?void 0:t[n])||[];return e+m(i,r)}),0)},y=function(e){var t=e.positionNotionalValue,r=e.bidNotional,n=e.askNotional,i=e.leverage,o=void 0===i?a.defaultVal:i,l=d(o);return v({positionNotionalValue:t,bidNotional:r,askNotional:n})*l},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return e.filter((function(e){return!(null===e||void 0===e?void 0:e.isolated)})).reduce((function(e,i){var o=(0,n.Z)((0,n.Z)({},i),{},{positionNotionalValue:u(i),leverage:r===i.symbol?t:i.leverage});return e+y(o)}),0)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=0;return e.forEach((function(e){if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){var o=e.symbol,a=e.markPrice,l=e.positionSize,s=e.contractVal,u=void 0===s?100:s,p=o===r?t:e.leverage,f=c(e),m=Number(a);m=m?1/m:0,i+=(Math.abs(v((0,n.Z)((0,n.Z)({},e),{},{positionNotionalValue:f})))-m*Math.abs(l)*u)*d(p)}})),i},b=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=i.positionSize,a=i.entryPrice,l=i.contractVal,s=void 0===l?100:l;if(!o||0===o)return 0;for(var u=o>=0?1:-1,c=t.length-1;c>=0;){var d=t[c],p=d.bracketMaintenanceMarginRate,f=d.cumFastMaintenanceAmount,m=d.bracketNotionalFloor,v=d.bracketNotionalCap,g=Math.abs(o)*p+u*Math.abs(o),y=(r-n+f)/s+u*Math.abs(o)/a;e=g/y;var x=Math.abs(o)*s/e;if(x>m&&x<=v)break;if(0===c)break;c-=1}return e},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=n.entryPrice,l=void 0===a?0:a,s=n.positionSize,u=void 0===s?0:s,c=n.contractVal,d=void 0===c?100:c,p=i.entryPrice,m=void 0===p?0:p,v=i.positionSize,g=void 0===v?0:v,y=i.markPrice;if(0===u||0===g)return 0;var x=f(e,n),h=x.index,b=x.bracketMaintenanceMarginRate,P=x.cumFastMaintenanceAmount,k=f(e,i),T=k.bracketMaintenanceMarginRate,Z=k.cumFastMaintenanceAmount;if(-1===h)return 0;for(var S,C,I=h,w=function(){for(var n=e.length-1,i=e[I],o=i.bracketMaintenanceMarginRate,a=i.cumFastMaintenanceAmount;n>=0;){var s=e[n],c=s.bracketMaintenanceMarginRate,p=s.cumFastMaintenanceAmount,f=s.bracketNotionalFloor,v=s.bracketNotionalCap,x=Math.abs(u)*c+Math.abs(g)*o+Math.abs(u)-Math.abs(g),h=(t-r+p+a)/d+Math.abs(u)/l-Math.abs(g)/m;if(0===(S=x/h))return{v:S};var b=Math.abs(u*d/S);if(b>f&&b<=v)break;n-=1}var P=Math.abs(g*d/S),k=Math.abs(g*d/y);return e.findIndex((function(e){return P<e.bracketNotionalCap}))===e.findIndex((function(e){return k<e.bracketNotionalCap}))||0===I?"break":void(I-=1)};I>=0;){var M=w();if("break"===M)break;if("object"===typeof M)return M.v}if(Math.abs(u)<Math.abs(g)){var A=o.markPrice,L=Math.abs(u)*b+Math.abs(g)*T+Math.abs(u)-Math.abs(g),O=(t-r+P+Z)/d+Math.abs(u)/l-Math.abs(g)/m;if((C=L/O)>=0&&(Math.abs(C-A)<Math.abs(S-A)||S<0))return C}return S},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t+r;return(0,i.JX)(n?e/n*100:0,2)},T=function(e,t){var r={sl:{},tp:{}};return t.forEach((function(t){var n=!0===t.closePosition,i=e.symbol===t.symbol,a=e.positionSide===t.positionSide,l=e.positionSize<0&&"BUY"===t.side||e.positionSize>0&&"SELL"===t.side;n&&i&&a&&l&&(t.type===o.PH.TAKE_PROFIT_MARKET&&(r.tp=t),t.type===o.PH.STOP_MARKET&&(r.sl=t))})),r}},ttLG:(e,t,r)=>{"use strict";r.d(t,{Zk:()=>n.Zk,Uy:()=>n.Uy,sE:()=>n.sE,yh:()=>n.yh,SH:()=>n.SH,zW:()=>n.zW,ot:()=>n.ot,nn:()=>n.nn});var n=r("OyCR")},OyCR:(e,t,r)=>{"use strict";r.d(t,{Zk:()=>s,nn:()=>u,yh:()=>d,ot:()=>p,SH:()=>m,zW:()=>g,Uy:()=>x,sE:()=>h,W8:()=>b,wr:()=>P});var n=r("DtyY"),i=r("qJlb"),o=r("SVjJ"),a=r("kUbO"),l=o.Fy.leverageInfo,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],v=i||{},y=v.leverageList,x=void 0===y?{}:y,h=s||t;return t.map((function(){var t,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=s.isolated,y=s.isolatedWallet,Z=void 0===y?0:y,S=s.symbol,C=s.positionSide,I=s.marginAsset,w=r[I]||{},M=w.crossWalletBalance,A=void 0===M?0:M,L=0,O=0,E=0,F=0,R=0,V=(null===e||void 0===e?void 0:e[S])||[],D=!v&&C&&"BOTH"!==C,N=v?Z:A,B=x[S]||l.defaultVal;if(!v){var _=h.filter((function(e){return e.marginAsset===I})).filter((function(e){return!(null===e||void 0===e?void 0:e.isolated)}));L=g(_,e),O=p(_),E=k(L,A,O);var z=_.filter((function(e){return(null===e||void 0===e?void 0:e.symbol)!==S}));F=g(z,e)-p(z)}if(D){var H=h.filter((function(e){var t=e||{},r=t.symbol,n=t.positionSide;return r===S&&"BOTH"!==n&&n!==C}))[0]||{positionSize:0,entryPrice:0};t="LONG"===C?s:H,i="SHORT"===C?s:H}o&&(R=D?P(V,N,F,t,i,s):b(V,N,F,s));var q=m(V,s),Y=u(s),U=k(q,Z,Y),j=u(s,a),W=c(s)*d(B),K="".concat((100*(j/W||0)).toFixed(2),"%");return(0,n.Z)((0,n.Z)({},s),{},{liquidationPrice:R<0?0:R,unrealizedPnl:j,margin:v?Z:W,riskRatio:v?U:E,ROEVal:K,leverage:B,strategyOrders:T(s,f)})}))},u=function(e){var t=e.positionSize,r=void 0===t?0:t,n=e.entryPrice,i=void 0===n?0:n,o=e.markPrice,a=void 0===o?0:o,l=e.lastPrice,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=s&&l||a;return r*(u-i)},c=function(e){var t=e.positionSize,r=void 0===t?0:t,n=e.markPrice,i=void 0===n?0:n;return Math.abs(r*i)},d=function(e){return 1*(0,i.mD)(1/e,4)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((function(e,r){return e+u(r,t)}),0)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=c(t),i=e.findIndex((function(e){return r<e.bracketNotionalCap}));return(0,n.Z)((0,n.Z)({positionNotionalValue:r},e[i]),{},{index:i})},m=function(e,t){var r=f(e,t);return r.positionNotionalValue*r.bracketMaintenanceMarginRate-r.cumFastMaintenanceAmount},v=function(e){var t=e.positionNotionalValue,r=void 0===t?0:t,n=e.bidNotional,i=void 0===n?0:n,o=e.askNotional,a=void 0===o?0:o;return Math.max(Math.abs(r+Number(i)),Math.abs(r-Number(a)))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((function(e,r){var n=(r||{}).symbol,i=(null===t||void 0===t?void 0:t[n])||[];return e+m(i,r)}),0)},y=function(e){var t=e.positionNotionalValue,r=e.bidNotional,n=e.askNotional,i=e.leverage,o=void 0===i?l.defaultVal:i,a=d(o);return v({positionNotionalValue:t,bidNotional:r,askNotional:n})*a},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return e.filter((function(e){return!(null===e||void 0===e?void 0:e.isolated)})).reduce((function(e,i){var o=(0,n.Z)((0,n.Z)({},i),{},{positionNotionalValue:c(i),leverage:r===i.symbol?t:i.leverage});return e+y(o)}),0)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=0;return e.forEach((function(e){if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){var o=e.symbol,l=e.markPrice,s=e.positionSize,u=o===r?t:e.leverage,c=(0,a.Nu)(e);i+=(Math.abs(v((0,n.Z)((0,n.Z)({},e),{},{positionNotionalValue:c})))-l*Math.abs(s))*d(u)}})),i},b=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=i.positionSize,a=i.entryPrice;if(!o||0===o)return 0;for(var l=o>=0?1:-1,s=t.length-1;s>=0;){var u=t[s],c=u.bracketMaintenanceMarginRate,d=u.cumFastMaintenanceAmount,p=u.bracketNotionalFloor,f=u.bracketNotionalCap,m=(e=(r-n+d-l*Math.abs(o)*a)/(Math.abs(o)*(c-l)))*Math.abs(o);if(m>p&&m<=f)break;if(0===s)break;s-=1}return e},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=n.entryPrice,l=void 0===a?0:a,s=n.positionSize,u=void 0===s?0:s,c=i.entryPrice,d=void 0===c?0:c,p=i.positionSize,m=void 0===p?0:p;if(0===u&&0===m)return 0;for(var v,g,y=f(e,n),x=y.index,h=y.bracketMaintenanceMarginRate,b=y.cumFastMaintenanceAmount,P=f(e,i),k=P.bracketMaintenanceMarginRate,T=P.cumFastMaintenanceAmount,Z=x;Z>=0;){for(var S=e.length-1,C=e[Z],I=C.bracketMaintenanceMarginRate,w=C.cumFastMaintenanceAmount,M=C.bracketNotionalFloor,A=C.bracketNotionalCap;S>=0;){var L=e[S],O=L.bracketMaintenanceMarginRate,E=L.cumFastMaintenanceAmount,F=L.bracketNotionalFloor,R=L.bracketNotionalCap,V=t-r+E+w-Math.abs(u)*l+Math.abs(m)*d,D=Math.abs(u)*I+Math.abs(m)*O-Math.abs(u)+Math.abs(m),N=(v=V/D)*Math.abs(m);if(N>F&&N<=R)break;S-=1}var B=v*Math.abs(u);if(B>M&&B<=A)break;if(0===Z)break;Z-=1}if(Math.abs(u)>Math.abs(m)){var _=o.markPrice,z=t-r+T+b-Math.abs(u)*l+Math.abs(m)*d,H=Math.abs(u)*h+Math.abs(m)*k-Math.abs(u)+Math.abs(m);if((g=z/H)>=0&&(Math.abs(g-_)<Math.abs(v-_)||v<0))return g}return v},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t+r;return(0,i.JX)(n?e/n*100:0,2)},T=function(e,t){var r={sl:{},tp:{}};return t.forEach((function(t){var n=!0===t.closePosition,i=e.symbol===t.symbol,a=e.positionSide===t.positionSide,l=e.positionSize<0&&"BUY"===t.side||e.positionSize>0&&"SELL"===t.side;n&&i&&a&&l&&(t.type===o.PH.TAKE_PROFIT_MARKET&&(r.tp=t),t.type===o.PH.STOP_MARKET&&(r.sl=t))})),r}},yncw:(e,t,r)=>{"use strict";r.d(t,{r:()=>n});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach((function(e){e.tags&&Array.isArray(e.tags)&&e.tags.forEach((function(e){return!t.includes(e)&&t.push(e)}))})),t}},"TG9/":(e,t,r)=>{"use strict";function n(e){return/[^\d|.|,|\u3002]/.test(e)}r.d(t,{_p:()=>i,Y5:()=>o,f5:()=>a});var i=function(e,t,r,i){var o="object"!==typeof e?e:e.target.value;return n(Number(o))?"":(/\u3002|,/.test(o)&&(o=o.replace(/[\u3002|,]/g,".")),/^0\d/.test(o)?o="0":/^\./.test(o)?o=0+o.substring(0,i+1):Number(o)>=0&&-1!==o.indexOf(".")&&o.split(".")[1].length>=i&&(o=o.replace(new RegExp("^(\\d*\\.\\d{".concat(i,"})\\d*")),"$1")),Number.isNaN(Number(o))?"":void(r?t(r,o):t(o)))},o=function(e){return!/\d*\.?\d+$/.test(e.target.value)&&(e.target.value="")},a=function(e,t){return"Enter"===e.key&&t()}},wiC8:(e,t,r)=>{"use strict";r.d(t,{GW:()=>a,mD:()=>l,OR:()=>s,nH:()=>u});var n=r("UraT"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bids";return function(){switch(e){case"bids":return"floor";case"asks":return"ceil";default:if(Math[e])return Math[e];throw new Error("getRoundFunc called with unknown type")}}()},o=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"round",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Math.pow(10,t),l=3,s=(+(e=e||0)+1/Math.pow(10,t+l))*a;if("string"===typeof r){var u=l-1;s=parseInt(s*Math.pow(10,u),10)/Math.pow(10,u),r=i(r)}if("function"!==typeof r)throw new Error("decRound unknown rounding func");return o?(0,n.uf)(r(s)/a,t):(r(s)/a).toFixed(t)},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2?arguments[2]:void 0;return o(e,t,"floor",r)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2?arguments[2]:void 0;return o(e,t,"ceil",r)},s=function(e){return Math.abs(Math.log10(e))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e?1:Math.abs(1/Math.pow(10,e))}},"t+KN":(e,t,r)=>{"use strict";r.d(t,{J9:()=>n,_g:()=>i,kh:()=>o,L6:()=>a,nn:()=>l});var n=function(e){return Object.values(e).filter((function(e){var t=e||{},r=t.positionSize,n=t.isolatedWallet;if(void 0!==r){var i=Number(r);return 0!==i||0===i&&Number(n)<0}}))},i=function(e,t){return t&&"BOTH"!==t?"".concat(e,"_").concat(t):e},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var r=t.symbol;return e[r]=t,e["".concat(i(r,"LONG"))]=t,e["".concat(i(r,"SHORT"))]=t,e}),{})},a=function(e){return e.reduce((function(e,t){var r=t.marginAsset;return e[r]=e[r]||[],e[r].push(t),e}),{})},l=function(e){var t=e.marginAsset,r=e.positions,n=void 0===r?{}:r;return Object.values(n).filter((function(e){return(null===e||void 0===e?void 0:e.marginAsset)===t}))||[]}},FGdN:(e,t,r)=>{"use strict";r.d(t,{Y:()=>n});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.baseAsset,n=t.quoteAsset;return[e,[r,n]]}}}]);